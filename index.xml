<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>¬ just serendipity 🍀</title><link>https://perrotta.dev/</link><description>Recent content on ¬ just serendipity 🍀</description><generator>Hugo</generator><language>en-us</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>© 2021 - 2025 Thiago Perrotta ·
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ·
a fork of [hugo ʕ•ᴥ•ʔ bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Fri, 21 Feb 2025 17:02:45 +0100</lastBuildDate><atom:link href="https://perrotta.dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Google Meet: dashes</title><link>https://perrotta.dev/2025/02/google-meet-dashes/</link><pubDate>Fri, 21 Feb 2025 17:02:45 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/google-meet-dashes/</guid><description>&lt;p>Whenever you need to join a Google Meet like &lt;a href="https://meet.google.com/aaa-bbbb-ccc">https://meet.google.com/aaa-bbbb-ccc&lt;/a> in a
conference room, instead of typing &lt;code>aaa-bbbb-ccc&lt;/code>, you can type just
&lt;code>aaabbbbccc&lt;/code>, i.e. the original meeting ID without the dashes.&lt;/p>
&lt;p>It saves a bit of time!&lt;/p></description></item><item><title>Kill the Newsletter</title><link>https://perrotta.dev/2025/02/kill-the-newsletter/</link><pubDate>Thu, 20 Feb 2025 15:34:30 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/kill-the-newsletter/</guid><description>&lt;p>I don&amp;rsquo;t like to sign up for newsletters. They are too noisy, pollute my inbox,
and have a lot of tracking built-in.&lt;/p>
&lt;p>Instead, I prefer RSS.&lt;/p>
&lt;p>Most newsletters provide a way to subscribe to them via RSS. Notably, Medium and
Substack do so. Most&amp;hellip;but not all.&lt;/p>
&lt;p>What to do when the only option is a newsletter? A popular example: James
Clear, author of Atomic Habits, with his &lt;a href="https://jamesclear.com/newsletter">3-2-1
Thursday&lt;/a> newsletter.&lt;/p>
&lt;p>Use &lt;a href="https://ktnrs.com/">Kill the Newsletter&lt;/a> by Leandro Facchinetti.&lt;/p>
&lt;p>Usage is quite simple:&lt;/p>
&lt;ul>
&lt;li>create a new entry e.g. &amp;ldquo;foo&amp;rdquo;&lt;/li>
&lt;li>it will generate an email e.g. &lt;code>abcdef@ktnrs.com&lt;/code>&lt;/li>
&lt;li>it will generate a RSS feed e.g. &lt;code>https://ktnrs.com/feeds/abcdef.xml&lt;/code>&lt;/li>
&lt;li>use the email to sign up for the newsletter&lt;/li>
&lt;li>use the RSS feed to subscribe to in your feed reader&lt;/li>
&lt;/ul>
&lt;p>And that&amp;rsquo;s it!&lt;/p>
&lt;blockquote>
&lt;p>Don&amp;rsquo;t share these addresses.&lt;/p>
&lt;p>They contain an identifier that other people could use to send you spam and to
control your newsletter subscriptions.&lt;/p>
&lt;/blockquote>
&lt;p>It&amp;rsquo;s &lt;a href="https://github.com/leafac/kill-the-newsletter">open source&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Convert email newsletters into Atom feeds&lt;/p>
&lt;/blockquote>
&lt;p>Most blogs I subscribe to provide RSS feeds out-of-the-box, therefore I don&amp;rsquo;t
see the need to self-host this service merely for a few one-offs.&lt;/p></description></item><item><title>git: prune gone upstream branches</title><link>https://perrotta.dev/2025/02/git-prune-gone-upstream-branches/</link><pubDate>Thu, 20 Feb 2025 11:43:04 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/git-prune-gone-upstream-branches/</guid><description>&lt;p>&lt;strong>Problem statement&lt;/strong>: Delete all local git branches whose upstream counterparts
have already been merged (&amp;ldquo;gone&amp;rdquo; in git lingo).&lt;/p>
&lt;p>Augment your &lt;code>~/.gitconfig&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[alias]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>	&lt;span style="color:#a6e22e">prune-gone&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">!git fetch -p &amp;amp;&amp;amp; git branch -vv | awk &amp;#39;/: gone]/{print $1}&amp;#39; | xargs -r git branch -D&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Run &lt;code>git prune-gone&lt;/code>. That&amp;rsquo;s it.&lt;/p>
&lt;p>It lists all branches that are &amp;ldquo;gone&amp;rdquo; and deletes them.&lt;/p>
&lt;p>I have another git alias (&lt;code>'world'&lt;/code>) to do all this sort of &lt;em>clean-up&lt;/em> tasks at
once:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ini" data-lang="ini">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">[alias]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#a6e22e">world&lt;/span> &lt;span style="color:#f92672">=&lt;/span> &lt;span style="color:#e6db74">!git fetch --all &amp;amp;&amp;amp; git remote prune origin &amp;amp;&amp;amp; git prune-gone&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>zsh: setopt magic_equal_subst</title><link>https://perrotta.dev/2025/02/zsh-setopt-magic_equal_subst/</link><pubDate>Tue, 18 Feb 2025 13:52:57 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/zsh-setopt-magic_equal_subst/</guid><description>&lt;p>&lt;strong>Problem statement&lt;/strong>: Write the following command line in &lt;code>zsh&lt;/code>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% terraform plan -var-file&lt;span style="color:#f92672">=&lt;/span>../../../config/global-dns-changer-
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now press &lt;code>&amp;lt;TAB&amp;gt;&lt;/code>.&lt;/p>
&lt;p>&lt;strong>Expected&lt;/strong>: Filename expansion.&lt;/p>
&lt;p>&lt;strong>Observed&lt;/strong>:&lt;/p>
&lt;pre tabindex="0">&lt;code>No matches for: `filename&amp;#39; or `file&amp;#39;
&lt;/code>&lt;/pre>&lt;p>Ugh. How about some magic 🪄?&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>setopt magic_equal_subst
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Now:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% terraform plan -var-file&lt;span style="color:#f92672">=&lt;/span>../../../config/global-dns-changer-&amp;lt;TAB&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>completing file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>global-dns-changer-&lt;span style="color:#f92672">{&lt;/span>foo&lt;span style="color:#f92672">}&lt;/span>.tfvars global-dns-changer-&lt;span style="color:#f92672">{&lt;/span>bar&lt;span style="color:#f92672">}&lt;/span>.tfvars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Yay!&lt;/p>
&lt;p>There&amp;rsquo;s a workaround if you don&amp;rsquo;t want to set the aforementioned option. Just
remove the &lt;code>=&lt;/code> character:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% terraform plan -var-file ../../../config/global-dns-changer-&amp;lt;TAB&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>completing file
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>global-dns-changer-&lt;span style="color:#f92672">{&lt;/span>foo&lt;span style="color:#f92672">}&lt;/span>.tfvars global-dns-changer-&lt;span style="color:#f92672">{&lt;/span>bar&lt;span style="color:#f92672">}&lt;/span>.tfvars
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I find it&amp;rsquo;s more convenient to have this option work in both situations though.&lt;/p>
&lt;p>(via &lt;a href="https://www.reddit.com/r/zsh/comments/10o018l/glob_expansion_and_tab_completion_after_the_sign/">Reddit&lt;/a>)&lt;/p></description></item><item><title>Quick look preview YAML files on macOS</title><link>https://perrotta.dev/2025/02/quick-look-preview-yaml-files-on-macos/</link><pubDate>Tue, 18 Feb 2025 13:18:33 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/quick-look-preview-yaml-files-on-macos/</guid><description>&lt;p>You may be familiar with &lt;a href="https://support.apple.com/en-gb/guide/mac-help/mh14119/mac">Quick
Look&lt;/a> on macOS.&lt;/p>
&lt;p>On Finder, select a file, then press the space bar. A preview pop-up appears,
wherein you can take a quick glance at the file contents.&lt;/p>
&lt;p>Out-of-the-box many file formats are supported, even for images.&lt;/p>
&lt;p>For developers, two popular formats are not supported:&lt;/p>
&lt;ul>
&lt;li>markdown&lt;/li>
&lt;li>yaml&lt;/li>
&lt;/ul>
&lt;p>I&amp;rsquo;ve been using &lt;a href="https://github.com/sbarex/QLMarkdown">qlmarkdown&lt;/a> for markdown,
and it works well. There&amp;rsquo;s a homebrew package for it: &lt;code>brew install --cask qlmarkdown&lt;/code>.&lt;/p>
&lt;p>Lately I wanted to add YAML as well. I found
&lt;a href="https://github.com/smittytone/PreviewYaml">PreviewYaml&lt;/a>. It&amp;rsquo;s MIT-Licensed and
open source, but there&amp;rsquo;s no pre-built package for it, and it is not on homebrew
either. The author provides an app in the macOS App Store, but it&amp;rsquo;s not free.&lt;/p>
&lt;p>Upon digging deeper, I found
&lt;a href="https://github.com/sbarex/SourceCodeSyntaxHighlight">https://github.com/sbarex/SourceCodeSyntaxHighlight&lt;/a>. It supports pretty much
every popular extension you&amp;rsquo;ll need as a developer (including &lt;code>.yaml&lt;/code>!). There&amp;rsquo;s
a package for it:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% brew install --no-quarantine syntax-highlight
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It is simple and works as advertised.&lt;/p>
&lt;p>Should I uninstall &lt;code>qlmarkdown&lt;/code> then? Not really:&lt;/p>
&lt;blockquote>
&lt;p>Markdown files (.md, .rmd): please use QLMarkdown which allows you to choose
whether to display formatted output or the highlighted source code.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Markdown files are not supported&lt;/p>
&lt;p>This is a deliberate choice. Most users want to see the formatted output and
not the source code of their markdown files. If you need to view the markdown
files (also with the possibility of choosing whether to show the formatting or
the source code) I have developed QLMarkdown.&lt;/p>
&lt;/blockquote>
&lt;p>How nice! It turns out both extensions were developed by the same author. Thank
you, @sbarex!&lt;/p></description></item><item><title>Notify search engines of new posts</title><link>https://perrotta.dev/2025/02/notify-search-engines-of-new-posts/</link><pubDate>Tue, 18 Feb 2025 11:33:19 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/notify-search-engines-of-new-posts/</guid><description>&lt;p>I have the following rule in the &lt;a href="https://just.systems/man/en/">&lt;code>Justfile&lt;/code>&lt;/a> of
this blog:&lt;/p>
&lt;pre tabindex="0">&lt;code class="language-just" data-lang="just"># Ping Google and Bing about changes in the sitemap
ping sitemap=&amp;#34;https://perrotta.dev/sitemap.xml&amp;#34;:
	curl -sS -o /dev/null &amp;#34;https://www.google.com/ping?sitemap={{ sitemap }}&amp;#34;
	curl -sS -o /dev/null &amp;#34;https://www.bing.com/ping?sitemap={{ sitemap }}&amp;#34;
&lt;/code>&lt;/pre>&lt;p>It is invoked with &lt;code>$ just ping&lt;/code>.&lt;/p>
&lt;p>Recently I added it to CI (github actions):&lt;/p>
&lt;pre tabindex="0">&lt;code>steps:
 - name: Build
 run: just build
 - name: Deploy
 [...]
 - name: Ping search engines
 run: just ping
&lt;/code>&lt;/pre>&lt;p>Whenever I publish a new post, a sitemap notification is triggered.&lt;/p>
&lt;p>When writing this post, I learned this is just wishful thinking.&lt;/p>
&lt;p>Upon visiting &lt;a href="https://google.com/ping">https://google.com/ping&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Sitemaps ping is deprecated. See
&lt;a href="https://developers.google.com/search/blog/2023/06/sitemaps-lastmod-ping">https://developers.google.com/search/blog/2023/06/sitemaps-lastmod-ping&lt;/a>.&lt;/p>
&lt;p>Error 404&lt;/p>
&lt;/blockquote>
&lt;p>Deeper into the rabbit hole:&lt;/p>
&lt;blockquote>
&lt;p>The Sitemaps Protocol was introduced in 2005 to help search engines with the
discovery of new URLs, and also to help with scheduling new crawls of already
discovered URLs. It&amp;rsquo;s a wildly popular protocol that hasn&amp;rsquo;t changed for over
15 years. While the general idea is still useful, some aspects have become
less practical in today&amp;rsquo;s internet.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>To that end, we&amp;rsquo;re announcing deprecation of the sitemaps &amp;ldquo;ping&amp;rdquo; endpoint and
providing additional recommendations for the use of the lastmod element.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>The sitemap protocol defines an unauthenticated REST method for submitting
sitemaps to search engines. Our internal studies—and also other search engines
such as Bing—tell us that at this point these unauthenticated sitemap
submissions are not very useful. In fact, in the case of Google Search, the
vast majority of the submissions lead to spam. To wit, we&amp;rsquo;re deprecating our
support for sitemaps ping and the endpoint will stop functioning in 6 months.
You can still submit your sitemaps through robots.txt and Search Console, but
the HTTP requests (&amp;ldquo;pings&amp;rdquo;) to the deprecated REST endpoint will result in a
404 error. Any existing code or plugins which use this endpoint will not cause
problems for Google Search; you don&amp;rsquo;t need to make any changes (but using the
endpoint will also not do anything useful).&lt;/p>
&lt;/blockquote>
&lt;p>I&amp;rsquo;ll keep pinging it anyway, the cost is virtually free. You can&amp;rsquo;t just
&lt;a href="https://killedbygoogle.com/">deprecate&lt;/a> features people &lt;a href="https://www.hyrumslaw.com/">rely
on&lt;/a>.&lt;/p></description></item><item><title>No printer, yes paper</title><link>https://perrotta.dev/2025/02/no-printer-yes-paper/</link><pubDate>Tue, 18 Feb 2025 02:07:44 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/no-printer-yes-paper/</guid><description>&lt;p>I was looking forward to drafting a long document in LaTeX via
&lt;a href="https://www.lyx.org/">LyX&lt;/a>.&lt;/p>
&lt;p>But then the printer refused to connect to Wi-Fi. There was not enough time to
fix it.&lt;/p>
&lt;p>So I wrote a manuscript on paper. It is like magic&amp;hellip;writing with a pen. Slowly.
Technology, in the last couple of years, has made me lose the sense of pleasure
in doing so.&lt;/p>
&lt;p>Surely there&amp;rsquo;s no erase feature but, somehow, my mind feels intrinsically
connected with the paper. The ink, as it flows, relieves tension and retains
intent.&lt;/p>
&lt;p>None of it was intentional though. LaTeX is my favorite digital way to feel
intimate with virtual fonts and pixels. And it&amp;rsquo;s faster to type in a keyboard
than to write with a pen.&lt;/p></description></item><item><title>Ruby: string escaping</title><link>https://perrotta.dev/2025/02/ruby-string-escaping/</link><pubDate>Mon, 17 Feb 2025 11:57:46 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/ruby-string-escaping/</guid><description>&lt;p>I needed to translate the following shell command (&lt;code>bash&lt;/code>):&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>instance&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;thiago-perrotta&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>kubectl get secret -n &lt;span style="color:#e6db74">&amp;#34;c-&lt;/span>$instance&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$instance&lt;span style="color:#e6db74">-factory&amp;#34;&lt;/span> -o jsonpath&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#e6db74">&amp;#39;{.data.conf\.json}&amp;#39;&lt;/span> | base64 --decode | jq --arg url &lt;span style="color:#e6db74">&amp;#39;rabbitmq.url&amp;#39;&lt;/span> -r &lt;span style="color:#e6db74">&amp;#39;.[$url]&amp;#39;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;to Ruby. It reads a JSON entry from a kubernetes secret and extracts a
specific key from it with &lt;code>jq&lt;/code>.&lt;/p>
&lt;p>I wrote a helper function to do so:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ruby" data-lang="ruby">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">def&lt;/span> &lt;span style="color:#a6e22e">factory_conf_json_rabbitmq_url&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e"># amqp://{user}:{password}@{host}:{port}&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">Helpers&lt;/span>&lt;span style="color:#f92672">::&lt;/span>&lt;span style="color:#66d9ef">LocalShell&lt;/span>&lt;span style="color:#f92672">.&lt;/span>capture_without_error(
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;kubectl get secret -n c-&lt;/span>&lt;span style="color:#e6db74">#{&lt;/span>@target&lt;span style="color:#f92672">.&lt;/span>name&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74"> &lt;/span>&lt;span style="color:#e6db74">#{&lt;/span>@target&lt;span style="color:#f92672">.&lt;/span>name&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">-factory -o jsonpath=&amp;#39;{.data.conf\.json}&amp;#39; | base64 --decode | jq --arg url &amp;#39;rabbitmq.url&amp;#39; -r &amp;#39;.[$url]&amp;#39;&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> )&lt;span style="color:#f92672">&amp;amp;.&lt;/span>strip&lt;span style="color:#f92672">&amp;amp;.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;@&amp;#39;&lt;/span>)&lt;span style="color:#f92672">&amp;amp;.&lt;/span>last&lt;span style="color:#f92672">&amp;amp;.&lt;/span>split(&lt;span style="color:#e6db74">&amp;#39;:&amp;#39;&lt;/span>)&lt;span style="color:#f92672">&amp;amp;.&lt;/span>first
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">end&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It took me a long time to figure out what was wrong with that code. It was
returning an empty string.&lt;/p>
&lt;p>It turns out it was a very simple issue: string escaping!&lt;/p>
&lt;p>One must do &lt;code>{.data.conf\\.json}&lt;/code>. The backslash needs to be escaped.&lt;/p>
&lt;p>How did I figure it out? Heck, I didn&amp;rsquo;t. I just asked ChatGPT how to translate
the shell expression above into Ruby, and it has correctly emitted the escaped
string in Ruby.&lt;/p>
&lt;p>In hindsight, the error is quite obvious. Isn&amp;rsquo;t it always like that?&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>I feel I should incorporate more AI in my daily dev workflows. However, I
want to do so efficiently. Paying for Claude / ChatGPT doesn&amp;rsquo;t make sense to
my use case as there&amp;rsquo;s no unlimited usage (yet?), and I don&amp;rsquo;t want to stress
over &amp;ldquo;wasting&amp;rdquo; prompts. It&amp;rsquo;s not a good user experience to worry about
getting close to the limit. It&amp;rsquo;s like when doing web searches: you don&amp;rsquo;t
stress over them because you know you can make new queries as many times as
you would like. So far I use only discrete chat conversations + Github
Copilot in VSCode.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Crawling / indexing is wild</title><link>https://perrotta.dev/2025/02/crawling-/-indexing-is-wild/</link><pubDate>Mon, 17 Feb 2025 11:49:41 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/crawling-/-indexing-is-wild/</guid><description>&lt;p>One little anecdote.&lt;/p>
&lt;p>Last week I bookmarked &lt;a href="https://duckduckgo.com/?q=vertical+pod+autoscaler+argocd+sync+loop&amp;amp;ia=web">this query&lt;/a> on DuckDuckGo&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>:&lt;/p>
&lt;blockquote>
&lt;p>vertical pod autoscaler argocd sync loop&lt;/p>
&lt;/blockquote>
&lt;p>Eventually I resolved the issue and wrote a &lt;a href="https://perrotta.dev/2025/02/argocd-vertical-pod-autoscaler-sync-loop/">blog post&lt;/a> about it.&lt;/p>
&lt;p>Today I clicked the bookmark accidentally (I forgot to delete it last week).&lt;/p>
&lt;p>For my delighted surprise, the blog post I had written was the top #1 result on
DuckDuckGo. I was curious to check it on Google, and it&amp;rsquo;s the top result
&lt;a href="https://www.google.com/search?hl=en&amp;amp;q=vertical%20pod%20autoscaler%20argocd%20sync%20loop">there&lt;/a>
as well.&lt;/p>
&lt;p>That&amp;rsquo;s so&amp;hellip;&lt;em>cool&lt;/em>! Especially because it was totally unexpected.&lt;/p>
&lt;p>Now&amp;hellip;back to work.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Lately I&amp;rsquo;ve been alternating between DuckDuckGo and ChatGPT Search.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>git: blank commit</title><link>https://perrotta.dev/2025/02/git-blank-commit/</link><pubDate>Fri, 14 Feb 2025 13:50:36 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/git-blank-commit/</guid><description>&lt;h2 id="how-can-we-create-an-empty-commit-in-git">How can we create an empty commit in &lt;code>git&lt;/code>?&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>mkdir repo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>cd repo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git init
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>git commit --allow-empty -n -m &lt;span style="color:#e6db74">&amp;#34;blank commit&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% git log
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>commit effe4480543051e13838d4fbc127f01f658c07dc &lt;span style="color:#f92672">(&lt;/span>HEAD -&amp;gt; master&lt;span style="color:#f92672">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Author: Thiago Perrotta &amp;lt;&lt;span style="color:#f92672">{&lt;/span>redacted-email&lt;span style="color:#f92672">}&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Date: Fri Feb &lt;span style="color:#ae81ff">14&lt;/span> 13:52:19 &lt;span style="color:#ae81ff">2025&lt;/span> +0100
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> blank commit
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="why-is-this-useful">Why is this useful?&lt;/h2>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide">dependabot&lt;/a>
&lt;a href="https://jongleberry.medium.com/accessing-github-actions-secrets-for-dependabot-pull-requests-on-private-repositories-b0dd6995f21b">cannot&lt;/a>
access secrets in github actions. There&amp;rsquo;s one workaround: check out the pull
request locally, add a blank commit on top of it, then push it back. &lt;em>Boom&lt;/em>.
The secrets are suddenly accessible.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>create a commit &lt;em>in advance&lt;/em> of coding it, à la
&lt;a href="https://en.wikipedia.org/wiki/Test-driven_development">TDD&lt;/a>. Declaring your
intent first can help with focus and scope. You can always update the commit
message afterwards with &lt;code>git commit --amend&lt;/code>&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>2.1) create a pull request (merge request) &lt;em>in advance&lt;/em> of coding it. So that
you can have a PR number that can be shared with your teammates and/or linked to
from your bug tracker software.&lt;/p>
&lt;h2 id="my-aliases">My aliases&lt;/h2>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% grep -E &lt;span style="color:#e6db74">&amp;#39;(alias|blank|desc)&amp;#39;&lt;/span> ~/.gitconfig
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[&lt;/span>alias&lt;span style="color:#f92672">]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> blank &lt;span style="color:#f92672">=&lt;/span> desc -m &lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>blank commit&lt;span style="color:#ae81ff">\&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> desc &lt;span style="color:#f92672">=&lt;/span> commit --allow-empty -n
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Which I alias to &lt;code>git reword&lt;/code>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ArgoCD: vertical-pod-autoscaler sync loop</title><link>https://perrotta.dev/2025/02/argocd-vertical-pod-autoscaler-sync-loop/</link><pubDate>Thu, 13 Feb 2025 13:17:36 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/argocd-vertical-pod-autoscaler-sync-loop/</guid><description>&lt;p>We&amp;rsquo;ve had a long time issue wherein our
&lt;a href="https://artifacthub.io/packages/helm/cowboysysop/vertical-pod-autoscaler">vertical-pod-autoscaler&lt;/a>
(VPA) ArgoCD application, deployed via its helm chart, got stuck in a sync loop.&lt;/p>
&lt;p>More specifically: the helm chart automatically generates a self-signed
certificate via the
&lt;a href="https://helm.sh/docs/chart_template_guide/function_list/#genca">GenCA&lt;/a> helm
function upon every change to our gitops repository. It turns out
&lt;a href="https://github.com/cowboysysop/charts/blob/9527602f8f2ea59f51cd3a7d3380810ba60c39fc/charts/vertical-pod-autoscaler/README.md?plain=1#L236">this&lt;/a>
is documented and we can see its corresponding manifest
&lt;a href="https://github.com/cowboysysop/charts/blob/9527602f8f2ea59f51cd3a7d3380810ba60c39fc/charts/vertical-pod-autoscaler/templates/admission-controller/tls-secret.yaml#L3C1-L3C91">here&lt;/a>.&lt;/p>
&lt;p>So that&amp;rsquo;s where the sync loop was coming from! ArgoCD was constantly reporting
(and resolving) a diff in the admission controller secret.&lt;/p>
&lt;p>The manifest:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">data&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ca.crt&lt;/span>: &lt;span style="color:#ae81ff">++++++++&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tls.crt&lt;/span>: &lt;span style="color:#ae81ff">++++++++&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">tls.key&lt;/span>: &lt;span style="color:#ae81ff">++++++++&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Secret&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#ae81ff">...]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">vertical-pod-autoscaler-admission-controller-tls&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">namespace&lt;/span>: &lt;span style="color:#ae81ff">kube-system&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>[&lt;span style="color:#ae81ff">...]&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The problematic are all the ones under &lt;code>data:&lt;/code>.&lt;/p>
&lt;p>I confirmed that was indeed the case in the &lt;a href="https://cloud-native.slack.com/archives/C01TSERG0KZ/p1739442822542539">CNCF
Slack&lt;/a>
&lt;code>#argo-cd&lt;/code>. Thanks Tim!&lt;/p>
&lt;p>How to address it?&lt;/p>
&lt;p>We leverage
&lt;a href="https://argo-cd.readthedocs.io/en/stable/user-guide/diffing/">&lt;code>ignoreDifferences&lt;/code>&lt;/a>
(c.f. &lt;a href="https://stackoverflow.com/questions/77510338/argocd-show-as-out-of-sync-on-every-push-for-auto-generate-certs-password">Stack
Overflow&lt;/a>)
in the ArgoCD app manifest:&lt;/p>
&lt;pre tabindex="0">&lt;code>% git diff HEAD~2..HEAD
diff --git apps/base/vertical-pod-autoscaler/vertical-pod-autoscaler.yaml apps/base/vertical-pod-autoscaler/vertical-pod-autoscaler.yaml
index 92bfbcc..90d8435 100644
--- apps/base/vertical-pod-autoscaler/vertical-pod-autoscaler.yaml
+++ apps/base/vertical-pod-autoscaler/vertical-pod-autoscaler.yaml
@@ -34,3 +34,15 @@ spec:
 maxDuration: 1m
 syncOptions:
 - CreateNamespace=true
+ - RespectIgnoreDifferences=true
+ ignoreDifferences:
+ - group: &amp;#34;&amp;#34;
+ kind: Secret
+ name: vertical-pod-autoscaler-admission-controller-tls
+ jsonPointers:
+ - /data
+ - group: apps
+ kind: Deployment
+ name: vertical-pod-autoscaler-admission-controller
+ jsonPointers:
+ - /spec/template/metadata/annotations/checksum~1tls-secret
&lt;/code>&lt;/pre>&lt;p>In &lt;a href="https://www.rfc-editor.org/rfc/rfc6901">JSON Pointers&lt;/a> (RFC 6901), one
escapes the slash character with a &lt;code>~1&lt;/code> (c.f. section 3 in the spec):&lt;/p>
&lt;blockquote>
&lt;pre tabindex="0">&lt;code>Because the characters &amp;#39;~&amp;#39; (%x7E) and &amp;#39;/&amp;#39; (%x2F) have special meanings in
JSON Pointer, &amp;#39;~&amp;#39; needs to be encoded as &amp;#39;~0&amp;#39; and &amp;#39;/&amp;#39; needs to be encoded as
&amp;#39;~1&amp;#39; when these characters appear in a reference token.
&lt;/code>&lt;/pre>&lt;/blockquote>
&lt;p>Problem resolved!&lt;/p>
&lt;p>In general all helm charts that generate self-signed certificates (with &lt;code>genCA&lt;/code>)
may experience this sync loop when used with a CD framework such as Argo.&lt;/p></description></item><item><title>GitHub Distributed CODEOWNERS</title><link>https://perrotta.dev/2025/02/github-distributed-codeowners/</link><pubDate>Wed, 12 Feb 2025 13:57:29 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/github-distributed-codeowners/</guid><description>&lt;p>We recently adopted Andrew Ring&amp;rsquo;s &amp;ldquo;Distributed CODEOWNERS&amp;rdquo;
(&lt;a href="https://github.com/andrewring/github-distributed-owners">github&lt;/a>) in some
parts of our codebase.&lt;/p>
&lt;p>You know the concept of
&lt;a href="https://chromium.googlesource.com/chromium/src/+/HEAD/docs/code_reviews.md">&lt;code>OWNERS&lt;/code>&lt;/a>
if you&amp;rsquo;ve worked at Google, or in the Chromium codebase. As far as I know, they
were the pioneers of this concept.&lt;/p>
&lt;p>Outside Google, GitHub has popularized it with
&lt;a href="https://docs.github.com/en/repositories/managing-your-repositorys-settings-and-features/customizing-your-repository/about-code-owners">CODEOWNERS&lt;/a>.
It&amp;rsquo;s pretty much the same concept, it&amp;rsquo;s just implemented differently.&lt;/p>
&lt;h2 id="google">Google&lt;/h2>
&lt;p>You have distributed &lt;code>OWNERS&lt;/code> files throughout the whole repository. For
example:&lt;/p>
&lt;pre tabindex="0">&lt;code>java/
 OWNERS (a)
 project1/
 OWNERS (b)
 project2/
 OWNERS (c)
&lt;/code>&lt;/pre>&lt;p>&lt;code>OWNERS&lt;/code> in (b) have CL (ChangeList) / PR (Pull Request) approval permissions
for &lt;code>java/project1&lt;/code>, but not for &lt;code>java/project2&lt;/code>.&lt;/p>
&lt;p>&lt;code>OWNERS&lt;/code> in (a) have approval permissions for both projects.&lt;/p>
&lt;h2 id="github">GitHub&lt;/h2>
&lt;p>There&amp;rsquo;s a single &lt;code>.github/CODEOWNERS&lt;/code> file that controls the whole repository:&lt;/p>
&lt;pre tabindex="0">&lt;code>* a
/java/project1 b
/java/project2 c
&lt;/code>&lt;/pre>&lt;h2 id="distributed-codeowners">Distributed CODEOWNERS&lt;/h2>
&lt;p>What if we wanted to adopt the Google approach in GitHub? Use Andrew&amp;rsquo;s tool!&lt;/p>
&lt;p>What does it do? It collects all scattered &lt;code>OWNERS&lt;/code> in the repository and
consolidates them in a single &lt;code>.github/CODEOWNERS&lt;/code> file, expected by GitHub.
Win-win!&lt;/p>
&lt;p>I like to adopt it with a &lt;a href="https://pre-commit.com">pre-commit&lt;/a> hook:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">repos&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">repo&lt;/span>: &lt;span style="color:#ae81ff">https://github.com/andrewring/github-distributed-owners&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">rev&lt;/span>: &lt;span style="color:#ae81ff">v0.1.9&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">hooks&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">id&lt;/span>: &lt;span style="color:#ae81ff">github-distributed-owners&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">files&lt;/span>: &lt;span style="color:#ae81ff">.*/OWNERS$|^\.github/CODEOWNERS$&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>Then it gets automatically managed via CI and/or local commits. It can also be
triggered manually with:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>pre-commit run -a github-distributed-codeowners
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Date your whiteboard notes</title><link>https://perrotta.dev/2025/02/date-your-whiteboard-notes/</link><pubDate>Tue, 11 Feb 2025 13:38:08 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/date-your-whiteboard-notes/</guid><description>&lt;p>If you work in an office, chances are there is at least one whiteboard available
for you.
Maybe it&amp;rsquo;s in a conference room, maybe it&amp;rsquo;s free-floating by the desk areas.&lt;/p>
&lt;p>Either way, when you decide to take notes, consider adding your name and a date
next to them.&lt;/p>
&lt;p>It&amp;rsquo;s good courtesy, and could help the next person decide whether to erase your
notes. Old notes are more forgiving to be erased, whereas recent notes (e.g.
from this week) may warrant double-asking their author.&lt;/p>
&lt;p>I tend to treat my whiteboard notes as throwaway. When they are important, I
snap a picture (in case someone deletes them), &lt;em>and&lt;/em> write: &amp;ldquo;DO NOT ERASE UNTIL
YYYY-MM-DD&amp;rdquo;. Otherwise, assume it&amp;rsquo;s fair game to lose them.&lt;/p>
&lt;p>What to write in the whiteboard?&lt;/p>
&lt;p>First of all, don&amp;rsquo;t write anything that is private. It is common sense, but the concept
of private is subjective. You probably wouldn&amp;rsquo;t write personal notes, however
confidential information could also be deemed as private in this context.&lt;/p>
&lt;p>I like to brainstorm with different pencil marker colors. Draw diagrams, mind
maps, arrows. Arrows everywhere. Scaffold my TODO list for the week. Visualize
all my pending and upcoming tasks, then prioritize a subset of them. Have the
pleasure to &lt;del>strike through&lt;/del> completed tasks.&lt;/p>
&lt;p>It enriches the office experience, especially when you have your own whiteboard.&lt;/p></description></item><item><title>LinkedIn: chronological view</title><link>https://perrotta.dev/2025/02/linkedin-chronological-view/</link><pubDate>Tue, 11 Feb 2025 00:53:22 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/linkedin-chronological-view/</guid><description>&lt;p>&lt;a href="https://preslav.me/2025/01/28/howto-replace-linkedin-algorithmic-timeline/">How to Replace Linkedin&amp;rsquo;s Algorithmic Timeline&lt;/a> by Preslav Rachev:&lt;/p>
&lt;blockquote>
&lt;p>Here is a quick tip on bringing back your sanity when using LinkedIn. Whether
you are familiar with algorithmic timelines work or not, it has certainly come
to your attention that your home feed page is not chronologically organized.
Instead, you see posts from people and organizations that LinkedIn&amp;rsquo;s
content-matching algorithms thought you might be interested in. Those are so
good that you&amp;rsquo;d often catch yourself scrolling, and scrolling, and scrolling,
often, forgetting why you were there in the first place. Not only that but
even if you found something actually worth your attention, LinkedIn will
likely rearrange your feed completely the next time you open the page.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>This is a phenomenon called doomscrolling and is something that most social
media applications make good use of. However, LinkedIn has turned that into
perfection. The goal is no longer to deliver valuable updates from your
professional contacts (which was its original purpose), but just to keep you
engaged and coming back for more.&lt;/p>
&lt;/blockquote>
&lt;p>It turns out it&amp;rsquo;s possible to set the preferred feed / timeline view to &amp;ldquo;Most
recent&amp;rdquo;, instead of the default &amp;ldquo;Most relevant posts (Recommended)&amp;rdquo;. Change the
setting
&lt;a href="https://www.linkedin.com/mypreferences/d/settings/preferred-view">here&lt;/a>. The
link works at the time of the publication of this post.&lt;/p>
&lt;p>A bit of fresh air, and less
&lt;a href="https://en.wikipedia.org/wiki/Enshittification">enshittification&lt;/a>, I would say.&lt;/p>
&lt;p>I don&amp;rsquo;t use LinkedIn often. Especially for news, I don&amp;rsquo;t think it&amp;rsquo;s a good place
to become informed&amp;hellip;however, while we&amp;rsquo;re here, if you work in Tech, feel free
to connect with me (my profile is LinkedIn&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> the footer of this site). A cool
&amp;ldquo;trick&amp;rdquo; I learned from a speaker at &lt;a href="https://fosdem.org/">FOSDEM&lt;/a>: if you write
an avocado emoji in your intro message then I&amp;rsquo;ll (very likely) instantly accept
you the next time I log in (which is not often).&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Could not resist the pun.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>MLC Chat: off-line LLMs in your iPhone</title><link>https://perrotta.dev/2025/02/mlc-chat-off-line-llms-in-your-iphone/</link><pubDate>Sat, 08 Feb 2025 16:26:04 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/mlc-chat-off-line-llms-in-your-iphone/</guid><description>&lt;p>&lt;a href="https://apps.apple.com/us/app/mlc-chat/id6448482937">MLC Chat&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Large language models locally in phone&lt;/p>
&lt;p>MLC Chat lets users chat with open language models locally on ipads and
iphones. After a model is downloaded to the app, everything runs locally
without server support, and it works without internet connections do not
record any information.&lt;/p>
&lt;p>Because the models run locally, it only works for the devices with sufficient
VRAM depending on the models being used.&lt;/p>
&lt;p>MLC Chat is part of open source project MLC LLM, with allows any language
model to be deployed natively on a diverse set of hardware backends and native
applications. MLC Chat is a runtime that runs different open model
architectures on your phone. The app is intended for non-commercial purposes.
It allows you to run open-language models downloaded from the internet. Each
model can be subject to its respective licenses.&lt;/p>
&lt;/blockquote>
&lt;p>I originally heard about it last year via &lt;a href="https://simonwillison.net/">Simon
Willison&lt;/a>.&lt;/p>
&lt;p>I used the &lt;code>LLAMA-3.2-3B-Instruct&lt;/code> model on my iPhone 14 Pro, and it worked
quite well&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>. The performance was quite acceptable for what I would expect of a
local LLM on my phone in 2024-25. It takes a few seconds to initialize / warm up
at startup.&lt;/p>
&lt;p>A noticeable side effect: my phone heats up &lt;em>significantly&lt;/em> when using it for a
couple of minutes. Battery drain is also perceivable.&lt;/p>
&lt;p>The app is super simple. There&amp;rsquo;s no chat history, it&amp;rsquo;s a single conversation.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>One minor annoyance: that model is quite verbose and somewhat overly
enthusiastic. Did someone give it the personality from Microsoft Word
Clippy?&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>DuckDuckGo email protection</title><link>https://perrotta.dev/2025/02/duckduckgo-email-protection/</link><pubDate>Sat, 08 Feb 2025 14:50:39 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/duckduckgo-email-protection/</guid><description>&lt;p>One of my best discoveries this year: &lt;a href="https://duckduckgo.com/duckduckgo-help-pages/email-protection/">DuckDuckGo email
protection&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>DuckDuckGo Email Protection is a free email forwarding service that removes
multiple types of hidden email trackers and lets you create multiple unique
private email addresses on the fly. Email Protection works with your current
email account – no need to change providers or juggle multiple inboxes.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://perrotta.dev/2022/01/throwaway-disposable-accounts-for-ephemeral-use-cases/">Previously&lt;/a>: &lt;a href="https://10minutemail.com">https://10minutemail.com&lt;/a>, &lt;a href="https://dispostable.com">https://dispostable.com&lt;/a>, etc.&lt;/p>
&lt;p>DuckDuckGo is (IMHO) better. Why?&lt;/p>
&lt;ul>
&lt;li>First of all, you can create a memorable and fixed email, which acts as an
entrypoint. For example, &lt;code>foo@duck.com&lt;/code>. In principle you could keep using
this email for all new services, especially when in a hurry. Emails delivered
there get redirected to a forwarding email of your choice. Thus this
integrates with your existing setup, and there&amp;rsquo;s no need to bypass CAPTCHAs
just for the sake of reading emails, and you get to optionally keep them
archived should you want to.&lt;/li>
&lt;li>The added value comes from throwaway, disposable emails though: DuckDuckGo
allows you to generate one-off emails in the form
&lt;code>word1-word2-word3@duck.com&lt;/code>. You can create as many of these as you want,
with a single click. These also get redirected to the previously specified
forwarding email address.&lt;/li>
&lt;li>The emails are scrubbed so to remove tracking and analytics. You get to know
whether there were any trackers in the original email and, if yes, which ones
were removed.&lt;/li>
&lt;li>You can disassociate these emails at any time. It&amp;rsquo;s very easy to do so, by
clicking a link that is embedded into each received email.&lt;/li>
&lt;li>&lt;code>@duck.com&lt;/code> tends to be more reputable than other email services. Which means,
chances are, it is less likely to be blocked. I ran into roadblocks many times
when trying to use &lt;code>@dispostable.com&lt;/code> to sign up with throwaway accounts.&lt;/li>
&lt;li>It&amp;rsquo;s completely free! A comparable service is &lt;a href="https://support.apple.com/en-ca/guide/icloud/mm9d9012c9e8/icloud">iCloud+ Hide My
Email&lt;/a> by
Apple, but it&amp;rsquo;s not free. Also, the Duck emails are manageable from the web,
whereas iCloud+ can only be managed from Apple devices (as far as I know).&lt;/li>
&lt;li>It integrates seamlessly with sign-up flows if you use its &lt;a href="https://duckduckgo.com/duckduckgo-help-pages/desktop/chrome/">Chrome
extension&lt;/a>.
Similar to how password managers typically integrate with sign-up forms.&lt;/li>
&lt;li>The DuckDuckGo mobile app also supports it.&lt;/li>
&lt;/ul>
&lt;p>Ever since adopting this workflow I find it&amp;rsquo;s much easier to sign up to try out
new services and/or websites, without having to use my personal email and
worrying whether it would be possible to delete my account later on.&lt;/p>
&lt;p>Furthermore it&amp;rsquo;s very easy to organize these emails in my client, as all I have
to do is match emails coming from &lt;code>@duck.com&lt;/code>.&lt;/p>
&lt;p>And I don&amp;rsquo;t have to worry about &amp;ldquo;wasting&amp;rdquo; my personal domain email address space
with catch-all sign-ups (e.g. &lt;code>foo at perrotta . dev&lt;/code>).&lt;/p>
&lt;p>The only downside is that it&amp;rsquo;s not possible to &lt;em>send&lt;/em> emails from these
addresses. Therefore, it&amp;rsquo;s not an universal solution.&lt;/p></description></item><item><title>Upcoming calendar meeting in macOS menu bar with Raycast</title><link>https://perrotta.dev/2025/02/upcoming-calendar-meeting-in-macos-menu-bar-with-raycast/</link><pubDate>Sat, 08 Feb 2025 13:56:42 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/upcoming-calendar-meeting-in-macos-menu-bar-with-raycast/</guid><description>&lt;p>Previously: &lt;a href="https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/">itsycal&lt;/a>.&lt;/p>
&lt;p>The same functionality is built into Raycast:&lt;/p>
&lt;ul>
&lt;li>Open Raycast settings&lt;/li>
&lt;li>Go to the Extensions tab&lt;/li>
&lt;li>Expand Calendar &amp;gt; My Schedule&lt;/li>
&lt;li>Under &amp;ldquo;Menu bar options &amp;gt; Show Events in menu bar&amp;rdquo;, select &amp;ldquo;1 hour before&amp;rdquo; (or
maybe &amp;ldquo;As long as they are upcoming&amp;rdquo;).&lt;/li>
&lt;li>Profit&lt;/li>
&lt;/ul>
&lt;p>It integrates out-of-the-box with the calendar accounts added to the system.&lt;/p>
&lt;p>Clicking the menu bar item displays an agenda overview of other events scheduled
later today.&lt;/p>
&lt;p>Neat and simple! Discovery credits to &lt;a href="https://www.youtube.com/watch?v=bDj7gNfLhog">Daniel
Miessler&lt;/a> – via his &lt;a href="https://newsletter.danielmiessler.com/">Unsupervised
Learning&lt;/a> podcast, which I strongly
recommend.&lt;/p></description></item><item><title>Instagram: get rid of all posts</title><link>https://perrotta.dev/2025/02/instagram-get-rid-of-all-posts/</link><pubDate>Fri, 07 Feb 2025 14:29:20 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/instagram-get-rid-of-all-posts/</guid><description>&lt;p>Following the footsteps of enacting 2025 as a year of &lt;a href="https://perrotta.dev/2024/12/independence/">Tech Independence&lt;/a>, I got rid of &lt;em>all&lt;/em> my Instagram posts&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>There were some 250+ posts spawning 10+ years.&lt;/p>
&lt;h2 id="why">Why?&lt;/h2>
&lt;p>In no particular order:&lt;/p>
&lt;ul>
&lt;li>
&lt;p>new acquaintances don&amp;rsquo;t need to know about my whole timeline / history / past,
whether it&amp;rsquo;s employment, locations I lived in, locations I travelled to,
activities, hobbies, etc&lt;/p>
&lt;/li>
&lt;li>
&lt;p>reduce dependence on Big Tech™ (even further)&lt;/p>
&lt;/li>
&lt;li>
&lt;p>effectively eliminate my attachment to the platform. No data, no regrets&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://www.goodreads.com/book/show/37830765-ten-arguments-for-deleting-your-social-media-accounts-right-now">Ten Arguments for Deleting Your Social Media Accounts Right
Now&lt;/a>
by Jaron Lanier. I read this book 5 years ago (2020) and it always stayed in my head.
I wrote the following review on Goodreads at the time:&lt;/p>
&lt;blockquote>
&lt;p>Decent read for this century overall, but the book is quite repetitive. The
author repeats the BUMMER acronym a lot, it&amp;rsquo;s quite annoying. But his
arguments are relevant and decent to some extent. One thing that misses the
point is that the author treats social media as a blackbox, you&amp;rsquo;re either in
or out. There&amp;rsquo;s no middle ground. There are some gray zone use cases that
are useful and aren&amp;rsquo;t necessarily manipulative. Marketplace and
community-based Discussion Groups are two of them. Still, if you consume
personalized newsfeeds or stories on a daily basis then
you should definitely read it.&lt;/p>
&lt;/blockquote>
&lt;/li>
&lt;/ul>
&lt;p>I don&amp;rsquo;t believe you need to be that much radical or strict to the point of
completely getting rid of them, nonetheless it&amp;rsquo;s not particularly difficult to
achieve a healthy balance either. Personally, I deactivate my account for weeks
or months at a time ephemerally, and this tends to work well for me.&lt;/p>
&lt;ul>
&lt;li>
&lt;p>focus more on the present. I don&amp;rsquo;t need to keep looking back at my social
media posts if there are no posts to look back to in the first place. This
fosters a healthy feedback loop wherein incentives to live in the present are
continuously rewarded&lt;/p>
&lt;/li>
&lt;li>
&lt;p>privacy!&lt;/p>
&lt;/li>
&lt;li>
&lt;p>more incentive to direct resources towards platforms I care more about
(e.g. this blog!) – opportunity cost&lt;/p>
&lt;/li>
&lt;li>
&lt;p>intentionally eliminate most of the friction I had to share my private account
with new acquaintances&lt;/p>
&lt;/li>
&lt;/ul>
&lt;p>As a side effect, I added a link to my profile at the footer of this site.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Not 100% correct as I left only one post, which doubles down as (i)
nostalgia / melancholy for the good ol&amp;rsquo; times and (ii) verification /
creditworthiness i.e. makes my account appear more authentic as it has at
least one post from a long time ago; otherwise it could appear that I
created it very recently.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Kubernetes: create a pod in pending state</title><link>https://perrotta.dev/2025/02/kubernetes-create-a-pod-in-pending-state/</link><pubDate>Fri, 07 Feb 2025 13:58:36 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/kubernetes-create-a-pod-in-pending-state/</guid><description>&lt;p>We are making a non-trivial change to our cluster monitoring architecture, and I
needed to verify the new rollout is properly working in our infratesting
environment.&lt;/p>
&lt;p>A simple way to do so is to create a pod that never leaves the &amp;ldquo;Pending&amp;rdquo; state,
because we have an alert (a prometheus rule) that fires whenever a pod is in
that stack for too long (15 minutes is our threshold in most cases).&lt;/p>
&lt;p>Use the following manifest:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">apiVersion&lt;/span>: &lt;span style="color:#ae81ff">v1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">kind&lt;/span>: &lt;span style="color:#ae81ff">Pod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">pending-pod&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">affinity&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">podAffinity&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">requiredDuringSchedulingIgnoredDuringExecution&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">labelSelector&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">matchExpressions&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">key&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;non/existent&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">operator&lt;/span>: &lt;span style="color:#ae81ff">In&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">values&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">topologyKey&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;kubernetes.io/hostname&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">containers&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">busybox&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">image&lt;/span>: &lt;span style="color:#ae81ff">busybox&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">command&lt;/span>: [&lt;span style="color:#e6db74">&amp;#39;sh&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;-c&amp;#39;&lt;/span>, &lt;span style="color:#e6db74">&amp;#39;echo Hello, Kubernetes! &amp;amp;&amp;amp; sleep 3600&amp;#39;&lt;/span>]
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;it creates a &lt;code>pending-pod&lt;/code> in the &lt;code>default&lt;/code> namespace that should never be
scheduled, due to its strict pod affinity rules.&lt;/p>
&lt;p>Save it as &lt;code>pending-pod.yaml&lt;/code>, deploy it with &lt;code>kubectl apply -f pending-pod.yaml&lt;/code>.&lt;/p>
&lt;pre tabindex="0">&lt;code>$ kubectl get pod pending-pod -w
NAME READY STATUS RESTARTS AGE
pending-pod 0/1 Pending 0 21s
 pending-pod 0/1 Pending 0 65s
pending-pod 0/1 Pending 0 74s
pending-pod 0/1 Pending 0 2m6s
pending-pod 0/1 Pending 0 3m8s
pending-pod 0/1 Pending 0 4m8s
pending-pod 0/1 Pending 0 4m18s
&lt;/code>&lt;/pre>&lt;p>At some point the alert fires, as expected.
And now we can roll out these changes to prod!&lt;/p></description></item><item><title>Resetting an AirTag</title><link>https://perrotta.dev/2025/02/resetting-an-airtag/</link><pubDate>Wed, 05 Feb 2025 19:19:20 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/resetting-an-airtag/</guid><description>&lt;p>&lt;strong>Problem statement&lt;/strong>: somehow I messed up my AirTag. It wasn&amp;rsquo;t being updated
any longer. &amp;ldquo;Last seen NN days ago&amp;rdquo;.&lt;/p>
&lt;p>So I deleted it from my Apple account. It&amp;rsquo;s the
&lt;a href="https://www.youtube.com/watch?v=nn2FB1P_Mn8">universal&lt;/a> way to fix issues,
right?&lt;/p>
&lt;p>So far so good.&lt;/p>
&lt;p>However, I couldn&amp;rsquo;t pair it up again. It wouldn&amp;rsquo;t work no matter how many times
I tried to remove its battery, nor how many times I&amp;rsquo;d swap its battery for
another one. I gave up for a couple of days (weeks?).&lt;/p>
&lt;p>Then I realized that my iPhone kept notifying me that an AirTag had been
following me. Huh?! I thought it was referring to the AirTag of the friends I
was travelling with.&lt;/p>
&lt;p>That kept occurring even after the trip was over. Then I had a sudden
realization: duh, it&amp;rsquo;s my own AirTag. And yet, it&amp;rsquo;s not showing up in &amp;ldquo;Find My&amp;rdquo;.
Somehow it got stuck in a odd state that iOS was thinking it was someone else&amp;rsquo;s
AirTag.&lt;/p>
&lt;p>At that point I got an epiphany: is it possible to &amp;ldquo;hard reset&amp;rdquo; it, just like a
router? It turns out the answer is
&lt;a href="https://support.apple.com/en-us/102577">yes&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Here&amp;rsquo;s how to reset your AirTag:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>Press down on the polished stainless steel battery cover of your AirTag and rotate counterclockwise until the cover stops rotating.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Remove the cover and the battery.*&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Replace the battery.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Press down on the battery until you hear a sound. This sound means that the battery is connected.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>When the sound finishes, repeat the process four more times, removing and replacing the battery, then pressing down on the battery until you hear a sound. You should hear a sound each time you press on the battery, for a total of five sounds. The fifth sound is different from the previous four. This indicates that the AirTag is now ready to pair.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Replace the cover by aligning the three tabs on the cover with the three slots on your AirTag.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Press down on the cover.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>Rotate the cover clockwise until it stops rotating.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/blockquote>
&lt;p>Upon following the above procedure, the fifth time yielded a different sound.
Then, almost immediately, my iPhone prompted me to connect to it.&lt;/p>
&lt;p>The more you learn.&lt;/p></description></item><item><title>How much to charge or pay for couch surfing?</title><link>https://perrotta.dev/2025/02/how-much-to-charge-or-pay-for-couch-surfing/</link><pubDate>Tue, 04 Feb 2025 23:22:31 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/02/how-much-to-charge-or-pay-for-couch-surfing/</guid><description>&lt;p>First of all, you should &lt;em>arguably&lt;/em> not charge:&lt;/p>
&lt;ul>
&lt;li>good or close friends&lt;/li>
&lt;li>apartment swapping&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>&lt;/li>
&lt;li>reciprocal couch surfing&lt;/li>
&lt;/ul>
&lt;p>If you determine that charging is appropriate, even if only symbolically,
&lt;a href="https://splitwise.com">Splitwise&lt;/a> has a &lt;a href="https://secure.splitwise.com/calculators/guest">&amp;ldquo;Guest
Calculator&amp;rdquo;&lt;/a>:&lt;/p>
&lt;ul>
&lt;li>What is the rent for your apartment?&lt;/li>
&lt;li>How often do you pay rent? (weekly / fortnightly / monthly)&lt;/li>
&lt;li>How many people normally live in the apartment?&lt;/li>
&lt;li>How many nights is the guest staying?&lt;/li>
&lt;/ul>
&lt;p>Example simulation:&lt;/p>
&lt;ul>
&lt;li>$1000 / month&lt;/li>
&lt;li>1 person&lt;/li>
&lt;li>4 nights&lt;/li>
&lt;/ul>
&lt;p>&amp;hellip;yields ~$53. Splitwise
&lt;a href="https://blog.splitwise.com/2011/08/25/how-much-to-charge-a-couch-crasher/">suggests&lt;/a>
a gift instead of a cash payment.&lt;/p>
&lt;blockquote>
&lt;p>The standards of courtesy and hospitality vary wildly from subculture to
subculture, locale to locale, person to person. What you offer your friends is
your own business, but in this article we use survey data to explore what
baseline you ought to expect as a guest or host&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>Most people feel that letting someone crash on a couch for a few nights lies
well within the boundaries of good old fashioned hospitality. After that,
things get less clear.&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>After five nights, 45 percent would already be expecting some form of payment,
so to be safe, you may want to offer sooner if you are the guest&lt;/p>
&lt;/blockquote>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Unless, perhaps, if they are significantly different.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>SmartTube</title><link>https://perrotta.dev/2025/01/smarttube/</link><pubDate>Thu, 30 Jan 2025 18:18:25 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/smarttube/</guid><description>&lt;p>&lt;a href="https://github.com/yuliskov/SmartTube">https://github.com/yuliskov/SmartTube&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>SmartTube is an advanced player for Android TVs and TV boxes, free &amp;amp; open
source. You can play content from different public sources.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>✅ Features: no ads ‧ SponsorBlock ‧ adjustable playback speed ‧ 8k support ‧
60fps ‧ HDR ‧ read live chat ‧ customizable buttons ‧ no Google Services ‧
helpful international community&lt;/p>
&lt;/blockquote>
&lt;p>Works as advertised. Super easy to install on Android TVs. The main appeal is
surely adblocking.&lt;/p>
&lt;p>Note the following:&lt;/p>
&lt;blockquote>
&lt;p>Do not download SmartTube from any app store, APK websites or blogs; these
were uploaded by other people and may contain malware or ads. SmartTube is not
officially published on any app store. Sadly, the Google PlayStore does not
allow ad-free Youtube apps using unofficial APIs.&lt;/p>
&lt;/blockquote></description></item><item><title>Raycast snippets</title><link>https://perrotta.dev/2025/01/raycast-snippets/</link><pubDate>Wed, 29 Jan 2025 13:52:23 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/raycast-snippets/</guid><description>&lt;p>&lt;a href="https://www.raycast.com/">Raycast&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Your shortcut to everything.&lt;/p>
&lt;p>A collection of powerful productivity tools all within an extendable launcher.
Fast, ergonomic and reliable.&lt;/p>
&lt;/blockquote>
&lt;p>It&amp;rsquo;s for macOS only.
I originally heard of it via &lt;a href="https://world.hey.com/dhh">DHH&lt;/a>.&lt;/p>
&lt;p>One of its features I like is &lt;a href="https://manual.raycast.com/snippets">snippets&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Write faster by using snippets to store and insert frequently used text.
Expand them automatically with a keyword.&lt;/p>
&lt;p>Use the Create Snippet command to store a new snippet. If you specify a
keyword, you can simply type it in any application to have it auto-expand
in-place.&lt;/p>
&lt;p>Snippets are handy for frequently used text such as canned email responses,
code or emojis.&lt;/p>
&lt;/blockquote>
&lt;p>For example, I can assign a &lt;code>@@fzf&lt;/code> shortcut so that it expands to&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">[[&lt;/span> -f /usr/share/doc/fzf/examples/key-bindings.bash &lt;span style="color:#f92672">]]&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> source /usr/share/doc/fzf/examples/key-bindings.bash
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;which is quicker than (i) typing it out, (ii) retrieving it from a wiki
and/or second brain app.&lt;/p>
&lt;p>Having text macros like these is handy whenever you do not have full control
over the environment.
If you happen to have control, you could always create a shell alias
and/or a &lt;code>Makefile&lt;/code> target for ergonomics and discoverability.&lt;/p>
&lt;p>These expansions can happen anywhere: terminal emulator, web browser, email
client, LLM prompt.&lt;/p>
&lt;p>A follow-up feature I am interested in exploring is the ability to export
snippets from Raycast to a location within version control, such as
&lt;a href="https://github.com/thiagowfx/.dotfiles">dotfiles&lt;/a>. It would be perfect if I
could manage them all via text in an easy to edit format such as YAML.&lt;/p>
&lt;p>Another snippet example: &lt;code>@@gca&lt;/code> expands to:&lt;/p>
&lt;pre tabindex="0">&lt;code>EDITOR=vim git commit --author=&amp;#34;Thiago Perrotta &amp;lt;{my-corp-email}&amp;gt;&amp;#34;
&lt;/code>&lt;/pre>&lt;p>I chose &lt;code>@@&lt;/code> because that&amp;rsquo;s a chord I am unlikely to type.&lt;/p></description></item><item><title>Feel free to say no</title><link>https://perrotta.dev/2025/01/feel-free-to-say-no/</link><pubDate>Wed, 29 Jan 2025 13:47:33 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/feel-free-to-say-no/</guid><description>&lt;p>We&amp;rsquo;re all so &lt;a href="https://jeanhsu.substack.com/p/ask-vs-guess-culture">different&lt;/a>, I
think it&amp;rsquo;s common courtesy to finish a formal request with &amp;ldquo;feel free to say
no&amp;rdquo;, especially in work environments.&lt;/p>
&lt;p>Some people are conflict averse and/or wary of denying requests for fear of
increasing conflicts and/or retaliation, even when it isn&amp;rsquo;t warranted.&lt;/p></description></item><item><title>itsycal: system tray calendar on macOS</title><link>https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/</link><pubDate>Wed, 22 Jan 2025 00:24:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/</guid><description>&lt;p>Title says it all.&lt;/p>
&lt;p>&lt;a href="https://www.mowglii.com/itsycal/">Itsycal&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Itsycal is a tiny menu bar calendar.&lt;/p>
&lt;/blockquote>
&lt;p>It&amp;rsquo;s free, it&amp;rsquo;s available via homebrew, it&amp;rsquo;s discrete and elegant.&lt;/p>
&lt;p>The only caveat is not the app&amp;rsquo;s fault: iCloud calendar synchronization takes
forever&amp;hellip;that&amp;rsquo;s something I should investigate some other day.&lt;/p></description></item><item><title>JIRA: link issues</title><link>https://perrotta.dev/2025/01/jira-link-issues/</link><pubDate>Tue, 21 Jan 2025 02:33:17 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/jira-link-issues/</guid><description>&lt;p>Definitely not intuitive:&lt;/p>
&lt;ul>
&lt;li>Press &lt;code>Cmd + K&lt;/code>, type in &amp;ldquo;link&amp;rdquo;, &lt;code>ENTER&lt;/code>.&lt;/li>
&lt;li>Select the relationship kind (e.g. &amp;ldquo;is caused by&amp;rdquo;, &amp;ldquo;causes&amp;rdquo;, etc)&lt;/li>
&lt;li>Paste in the issue ID (e.g. INFRA-42) or link, or type in search keywords.&lt;/li>
&lt;/ul></description></item><item><title>Cloudflare DNS for families</title><link>https://perrotta.dev/2025/01/cloudflare-dns-for-families/</link><pubDate>Tue, 21 Jan 2025 01:42:59 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/cloudflare-dns-for-families/</guid><description>&lt;p>&lt;a href="https://developers.cloudflare.com/1.1.1.1/ip-addresses/">Cloudflare&lt;/a> has one of
the coolest DNS IP addresses on the planet: &lt;code>1.1.1.1&lt;/code> (primary) and &lt;code>1.0.0.1&lt;/code>
(secondary).&lt;/p>
&lt;p>Furthermore they have another class of DNS servers &lt;a href="https://blog.cloudflare.com/introducing-1-1-1-1-for-families/">&amp;ldquo;for
families&amp;rdquo;&lt;/a>,
intended to block malware and/or adult content.&lt;/p>
&lt;p>They are also quite memorable:&lt;/p>
&lt;ul>
&lt;li>Malware: &lt;code>1.1.1.2&lt;/code>, &lt;code>1.0.0.2&lt;/code>&lt;/li>
&lt;li>Adult content: &lt;code>1.1.1.3&lt;/code>, &lt;code>1.0.0.3&lt;/code>&lt;/li>
&lt;/ul></description></item><item><title>codespell: ignore words</title><link>https://perrotta.dev/2025/01/codespell-ignore-words/</link><pubDate>Mon, 20 Jan 2025 10:54:55 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/codespell-ignore-words/</guid><description>&lt;p>When using &lt;a href="https://github.com/codespell-project/codespell">codespell&lt;/a> to spell
check a git repository, sometimes you may run into false positive words.&lt;/p>
&lt;p>There are two ways to whitelist them.&lt;/p>
&lt;p>The first one is via command-line arguments:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>codespell -L&lt;span style="color:#f92672">=&lt;/span>ist -L&lt;span style="color:#f92672">=&lt;/span>regio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>or&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>codespell -L&lt;span style="color:#f92672">=&lt;/span>ist,regio
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The second one is with a dedicated &lt;code>.ignore-words.txt&lt;/code> file:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% cat .ignore-words.txt
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># keep-sorted start&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ist
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>regio
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># keep-sorted end&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>% codespell -I .ignore-words.txt
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div></description></item><item><title>Reply to: smash that subscribe button</title><link>https://perrotta.dev/2025/01/reply-to-smash-that-subscribe-button/</link><pubDate>Mon, 20 Jan 2025 01:01:23 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/reply-to-smash-that-subscribe-button/</guid><description>&lt;p>&lt;a href="https://wilwheaton.net/2025/01/smash-that-subscribe-button/">Wil Wheaton&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>I didn&amp;rsquo;t like the idea of being inside someone else&amp;rsquo;s garden, where I didn&amp;rsquo;t
own or control my writing, photos, and so on.&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>As a consequence, I have ended up self-censoring, or even writing and creating
to serve whatever the fucking algorithm wants, instead of what I want. It&amp;rsquo;s
always bothered me, but at like a 1 on a 10 point scale. I&amp;rsquo;ve lived with it,
and I&amp;rsquo;ve accepted the compromise.&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>There&amp;rsquo;s no reason for me to be here.&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>I sincerely hope that, if you have enjoyed following me here, that you&amp;rsquo;ll come
over to my blog. There&amp;rsquo;s a simple form there, so you can get my posts by
email, probably more reliably than you ever saw things here.&lt;/p>
&lt;p>[&amp;hellip;]&lt;/p>
&lt;p>The people who work for me are going to be unhappy about this. I have a major
project coming out in March, and it&amp;rsquo;s not the best idea to walk away from an
account with a few hundred thousand followers.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://www.youtube.com/watch?v=MW5Hn70zrg0">Actions speak louder than words
do&lt;/a>. Well done, Wil!&lt;/p>
&lt;p>On another note: RSS is still well and
&lt;a href="https://joeyehand.com/blog/2025/01/15/i-ditched-the-algorithm-for-rssand-you-should-too/">alive&lt;/a>,
thank you very much.&lt;/p>
&lt;p>It&amp;rsquo;s still a good idea to &lt;a href="https://perrotta.dev/2024/12/reply-to-i-hate-the-news/">hit the brakes&lt;/a> every once in a while though, if not
always.&lt;/p></description></item><item><title>VSCode pets</title><link>https://perrotta.dev/2025/01/vscode-pets/</link><pubDate>Mon, 20 Jan 2025 00:51:50 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/vscode-pets/</guid><description>&lt;p>The definition of &lt;a href="https://github.com/tonybaloney/vscode-pets">this&lt;/a> VSCode
extension lies somewhere within the 3D spectrum of amusing, delightful and
wasteful. You do you&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Back in 2016 the internal (and legacy) Google IDE had a &amp;ldquo;corgi mode&amp;rdquo;,
which is even more distracting – dogs are cuter than cats after all, full
stop. How can the 10x engineer achieve a &lt;a href="https://en.wikipedia.org/wiki/Flow_(psychology)">state of flow&lt;/a>?&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Deutschland Ticket in 2025</title><link>https://perrotta.dev/2025/01/deutschland-ticket-in-2025/</link><pubDate>Sun, 19 Jan 2025 18:53:57 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/deutschland-ticket-in-2025/</guid><description>&lt;p>This post is written as a reference for friends who would visit me in Germany 🇩🇪.&lt;/p>
&lt;p>If you come for at least 7 days and intend to use public transit (which is
&lt;em>excellent&lt;/em>!) &lt;em>and&lt;/em> travel to outside the city center e.g. to do some
sightseeing and/or hiking, you should &lt;em>probably&lt;/em> get the &lt;a href="https://www.bahn.de/angebot/regio/deutschland-ticket">Deutschland
Ticket&lt;/a>.&lt;/p>
&lt;p>The DL-Ticket is purely for public transit. It&amp;rsquo;s not a CityCard for a CityPass
or similar i.e. no access to museums and/or other attractions. Such a card
&lt;a href="https://www.mvv-muenchen.de/en/tickets-and-fares/tickets-daytickets/muenchen-card/index.html">exists&lt;/a>,
but I cannot vouch for it at this time. I have the impression it&amp;rsquo;s only worth it
if you intend to pack &lt;em>a lot&lt;/em> of activities within a shorter period of 2-5 days.&lt;/p>
&lt;p>The DL-Ticket used to cost 49€ per month until December 2024. Since January 2025
it costs 58€ per month (a ~15% increase).&lt;/p>
&lt;p>Is this a lot? I can give you some data points for Munich, Bavaria:&lt;/p>
&lt;ul>
&lt;li>A weekly ticket within the main zone (&amp;lsquo;M&amp;rsquo;) in Munich costs ~20€.&lt;/li>
&lt;li>A one-way ticket from the airport costs (zone &amp;lsquo;M-5&amp;rsquo;) ~15€&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.&lt;/li>
&lt;li>&lt;strong>Therefore&lt;/strong>: Two one-way airport tickets + one weekly ticket equals 50€.&lt;/li>
&lt;/ul>
&lt;p>Another data point: a Munich monthly ticket within zone &amp;lsquo;M&amp;rsquo; costs ~68€.&lt;/p>
&lt;p>This is not an exhaustive list of all possibilities to get tickets: it&amp;rsquo;s also
possible to buy group tickets by pooling people together so that the total can be even
cheaper. However, it can get complicated quite fast, and it&amp;rsquo;s likely not worth
the vacation stress to stay on top of German bureaucracy. This is why I would
recommend to simply get the DL-Ticket, without thinking too much, if you&amp;rsquo;ll stay
for 7+ days.&lt;/p>
&lt;p>Another benefit of the DL-Ticket is that it allows you to take pretty much
(almost) &lt;em>any&lt;/em> public transit within Germany. The previously mentioned monthly
ticket within the zone &amp;lsquo;M&amp;rsquo; in Munich is only valid within certain parts of
Munich. The DL-Ticket, on the other hand, is valid in Berlin, Frankfurt,
Hamburg, Dresden&amp;hellip;that&amp;rsquo;s why it&amp;rsquo;s much more cost-effective (and simpler!) than
fiddling with other ticket combinations. And this includes going for
long-distance regional train trips departing from Munich.&lt;/p>
&lt;p>What is &amp;ldquo;public transit&amp;rdquo;? In Germany, it&amp;rsquo;s split into local transit (&amp;ldquo;ÖPNV&amp;rdquo;) and
long-distance transit (&amp;ldquo;Fernverkehr&amp;rdquo;). In my definition:&lt;/p>
&lt;p>Local transit:&lt;/p>
&lt;ul>
&lt;li>S-Bahn = surface trains (S1, S2, S3, &amp;hellip;)&lt;/li>
&lt;li>U-Bahn = underground / subway / metro (U1, U2, U3, &amp;hellip;)&lt;/li>
&lt;li>Straßenbahn = tram = light rail = street cars (these have numbers e.g. 12, 16,
17)&lt;/li>
&lt;li>Bus (these have numbers: e.g. 53, 153)&lt;/li>
&lt;/ul>
&lt;p>Long-distance transit:&lt;/p>
&lt;ul>
&lt;li>Regional trains: go from a city to another (RB, RE)&lt;/li>
&lt;li>Inter-city express trains: same, but faster and skipping many cities along the
way. These are often dubbed &amp;ldquo;ICs&amp;rdquo; or &amp;ldquo;ICEs&amp;rdquo;&lt;/li>
&lt;/ul>
&lt;p>Regional trains (e.g. RE6) are &lt;em>in general&lt;/em> included within the DL-Ticket. There
are &lt;a href="https://int.bahn.de/en/faq/deutschlandticket-which-trains">exceptions&lt;/a>
though (this is &lt;em>bureaucratic&lt;/em> Germany!):&lt;/p>
&lt;blockquote>
&lt;p>The Deutschland-Ticket can be used throughout Germany on all local trains such
as RB, RE, S-Bahn trains (SPNV) and also on public transport such as buses,
trams, subways, etc. (ÖPNV) of the participating state tariffs, transit
authorities and transport companies in accordance with the area of validity
and their conditions for any number of journeys. This applies regardless of
which transport company, transit authority or national tariff is noted on the
ticket itself. A Deutschland-Ticket purchased in Munich, for example, can
therefore also be used for journeys in Frankfurt and the surrounding area.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>Please note, however, that the Deutschland-Ticket is generally not valid on
trains operated by DB Fernverkehr AG or other long-distance providers such as
FlixTrain (e.g. IC, EC, ICE, but also RE of DB Fernverkehr AG). DB Fernverkehr
is currently in talks with the federal states and local transport authorities
about exceptions on certain sections of the route.&lt;/p>
&lt;/blockquote>
&lt;p>Consult the link above, which contains &lt;a href="https://assets.static-bahn.de/dam/jcr:35c032ce-e559-4b4d-82ce-ce207d374b45/20231221_Geltungsbereich-D-Ticket.pdf">this
PDF&lt;/a>,
to be 100% sure. Or just keep it simple: accept that ~98% (citation needed) of
all available regional trains are within scope, and hope for the best&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>Now that you were fully convinced to purchase a DL-Ticket, assuming that you
didn&amp;rsquo;t already regret trying to understand the rules, how do you get one in the
first place?&lt;/p>
&lt;p>You could get it physically, but no one&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup> does that. You cannot get one from a
ticket machine. You should get it digitally, and then it becomes available in
your phone. If you get inspected then you just show a QR code from your phone.&lt;/p>
&lt;p>There are two practical ways I would suggest to get it digitally:&lt;/p>
&lt;ol>
&lt;li>
&lt;p>&lt;a href="https://deutschland-ticket.store/autobus-oberbayern?lang=en">AutoBus
Oberbayern&lt;/a>:
It&amp;rsquo;s possible to make it automatically cancel within one month. (&amp;ldquo;Single
ticket only: Your subscription will be cancelled directly, you will receive
only one ticket for the selected month&amp;rdquo;). Normally, the DL-Ticket is a
monthly subscription (&amp;ldquo;Abo&amp;rdquo;), and cancelling it is somewhat of a hassle&lt;sup id="fnref:4">&lt;a href="#fn:4" class="footnote-ref" role="doc-noteref">4&lt;/a>&lt;/sup>.
Foreign credit cards are accepted, as well as SEPA Direct Debit.&lt;/p>
&lt;/li>
&lt;li>
&lt;p>&lt;a href="https://en.mopla.solutions/">Mopla&lt;/a>: By default it is a monthly
subscription, but it&amp;rsquo;s very easy to pause and/or cancel it. It accepts credit
cards, Apple Pay and PayPal.&lt;/p>
&lt;/li>
&lt;/ol>
&lt;p>I would recommend 1) for guests with a short stay and 2) for people who would
stay in Germany for a longer period (e.g. a few months). Some people I know who
&lt;em>live&lt;/em> in Germany also opt for 2), instead of a more traditional Deutsche Bahn
(DB) or MVG subscription, because Mopla makes it trivial to pause the
subscription at any time, whilst other providers require you to time your
cancellation before a specific cut-off day (typically the 10th day of the
previous month) before it gets automatically renewed.&lt;/p>
&lt;p>One caveat of Mopla: it &lt;em>seems&lt;/em> you need to have your App Store set to Germany
in order to use its app. I could not verify that personally, but see the
&lt;a href="https://allaboutberlin.com/guides/deutschland-ticket">source&lt;/a>.&lt;/p>
&lt;p>Last but not least: the validity of the DL-Ticket counts on a per calendar month
basis, i.e. January 2025, February 2025, and so on. If you&amp;rsquo;re arriving, say, on
Jan 28th, then you&amp;rsquo;re out of luck. It&amp;rsquo;s not possible to make it count for &amp;ldquo;30
days from now&amp;rdquo;.&lt;/p>
&lt;p>If the information above isn&amp;rsquo;t enough, I suggest to read up more on &lt;a href="https://allaboutberlin.com/guides/deutschland-ticket">All About
Berlin&lt;/a> which summarizes
it better than I do.&lt;/p>
&lt;p>Ah, and what if you only visit for only a few days, less than a week? Then the
best cost-benefit really depends, and it&amp;rsquo;s harder to make a general
recommendation. I would be happy to make a suggestion depending on the amount of
people, how you are arriving (e.g. main train station versus main airport), when
(time of day) you are arriving, and what are your travel plans.&lt;/p>
&lt;p>&lt;em>Auf wiederlesen!&lt;/em>&lt;/p>
&lt;h2 id="references">References&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://allaboutberlin.com/guides/deutschland-ticket">All About Berlin&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.bahn.de/angebot/regio/deutschland-ticket">Deutsche Bahn&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.mvv-muenchen.de/ticketshop-preise/zeitkarten-abos/deutschland-ticket-d-ticket/index.html">MVV&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://www.mvg.de/abos-tickets/abos/deutschlandticket.html">MVG&lt;/a>&lt;/li>
&lt;/ul>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>In practice it&amp;rsquo;s possible to buy an &lt;em>Anschluss Ticket&lt;/em> (&amp;ldquo;additional
ticket&amp;rdquo;) alongside the zone &amp;lsquo;M&amp;rsquo; weekly ticket, which costs ~9€ for the &amp;lsquo;1-5&amp;rsquo;
zone range, which is the one you need to complement to get to the Munich
city center from the MUC airport. Therefore, to be pedantic, the total cost
would actually be ~(9€ + 9€ + 20€) = ~38€.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>Did you know that condoms are only &lt;a href="https://www.nhs.uk/contraception/methods-of-contraception/condoms/">~98%
effective&lt;/a>?&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>No one I know of. If you really must, see
&lt;a href="https://www.mvg.de/abos-tickets/abos/deutschlandticket.html">MVG&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Please
note: It can take up to 14 days for the chip card to reach you. Only then
can you use the ticket. Tip: The mobile ticket is usually available within
48 hours.&lt;/p>
&lt;/blockquote>
&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/li>
&lt;li id="fn:4">
&lt;p>&lt;a href="https://int.bahn.de/en/faq/deutschlandticket-cancel">DB&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>You can cancel your Deutschland-Ticket subscription by the 10th of each
month to the end of the calendar month. The best way to do this is to use
our Aboportal (subscription portal) or the &amp;ldquo;Cancel subscription&amp;rdquo; function in
the DB Navigator below your mobile phone ticket.&lt;/p>
&lt;/blockquote>
&amp;#160;&lt;a href="#fnref:4" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Kindle Paperwhite: take a screenshot</title><link>https://perrotta.dev/2025/01/kindle-paperwhite-take-a-screenshot/</link><pubDate>Sun, 19 Jan 2025 04:26:30 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/kindle-paperwhite-take-a-screenshot/</guid><description>&lt;p>Today I &lt;em>incidentally&lt;/em> learned it&amp;rsquo;s possible to take a screenshot from your Kindle
Paperwhite.&lt;/p>
&lt;blockquote>
&lt;p>To take a screenshot on your Kindle Paperwhite, hold your fingers on either
the top left and bottom right corners or the top right and bottom left
corners. You&amp;rsquo;ll see the screen flash briefly, similar to taking a screenshot
on iPhone and iPad.&lt;/p>
&lt;/blockquote>
&lt;p>(&lt;a href="https://www.idownloadblog.com/2020/10/26/take-view-screenshot-kindle-paperwhite/">via&lt;/a>)&lt;/p>
&lt;p>I figured it is possible upon connecting it to my computer and seeing a
screenshot file there. I must have done it accidentally at some point.&lt;/p></description></item><item><title>FOSDEM Calendar</title><link>https://perrotta.dev/2025/01/fosdem-calendar/</link><pubDate>Wed, 15 Jan 2025 00:53:18 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/fosdem-calendar/</guid><description>&lt;p>&lt;a href="https://fosdem.org/">FOSDEM&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>FOSDEM is a free event for software developers to meet, share ideas and
collaborate. Every year, thousands of developers of free and open source
software from all over the world gather at the event in Brussels. You don&amp;rsquo;t
need to register. Just turn up and join in!&lt;/p>
&lt;/blockquote>
&lt;p>&lt;a href="https://fosdem.org/2025/schedule/">FOSDEM 2025 schedule&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>FOSDEM is a rather busy conference. This edition features 1056 speakers, 1004
events, and 74 tracks. We do our best to provide you with as much information
and navigation options about the schedule as we can.&lt;/p>
&lt;/blockquote>
&lt;p>How can you keep track of which talks to attend? There&amp;rsquo;s a myriad of them!&lt;/p>
&lt;p>&lt;a href="https://fosdem.org/2025/schedule/mobile/">Mobile schedule apps&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Ways to have the schedule with you at all times, without wasting trees.&lt;/p>
&lt;/blockquote>
&lt;p>This year I signed up for &lt;a href="https://fosdem.sojourner.rocks/2025">Sojourner&lt;/a>&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>.
It&amp;rsquo;s a no-frills &lt;a href="https://en.wikipedia.org/wiki/Progressive_web_app">PWA&lt;/a>. I
would recommend it!&lt;/p>
&lt;p>Back in FOSDEM 2023 I used the
&lt;a href="https://apps.apple.com/us/app/fosdem-app/id1513719757">FOSDEM.app&lt;/a> for iOS. It
was OK.&lt;/p>
&lt;p>There&amp;rsquo;s also an &lt;a href="https://fosdem.org/2025/schedule/ical">iCal&lt;/a> feed, but it&amp;rsquo;s too
noisy as it lists every single talk of the conference, and it doesn&amp;rsquo;t allow you
to filter out the ones you&amp;rsquo;re not interested in.&lt;/p>
&lt;p>&lt;em>PS. If you&amp;rsquo;re also going to FOSDEM this year, please do reach out! :D&lt;/em>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>There&amp;rsquo;s a great &lt;a href="https://www.thesojourngame.com/">videogame&lt;/a> with the same
name.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Pawnbarian</title><link>https://perrotta.dev/2025/01/pawnbarian/</link><pubDate>Tue, 14 Jan 2025 18:50:20 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/pawnbarian/</guid><description>&lt;p>&lt;a href="https://store.steampowered.com/app/1142080/Pawnbarian/">Pawnbarian&lt;/a> on Steam:&lt;/p>
&lt;blockquote>
&lt;p>Pawnbarian is a quick-playing, turn-based puzzle roguelike. Play cards to move
your hero like a chess piece, and conquer challenging dungeons full of cunning
monsters!&lt;/p>
&lt;/blockquote>
&lt;p>I really liked its gameplay. It has a clever twist on top of chess, and it&amp;rsquo;s
easy to assimilate.&lt;/p>
&lt;p>As a bonus, its soundtrack is superb – visualize what an intermingled hybrid
between &lt;a href="https://ioi.dk/hitman">Hitman&lt;/a> and &lt;a href="https://dead-cells.com/">Dead
Cells&lt;/a> would sound like.&lt;/p></description></item><item><title>What time is it in your timezone?</title><link>https://perrotta.dev/2025/01/what-time-is-it-in-your-timezone/</link><pubDate>Tue, 14 Jan 2025 16:31:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/what-time-is-it-in-your-timezone/</guid><description>&lt;p>Following the principles of &lt;a href="https://perrotta.dev/2024/07/timezones/">timezones&lt;/a>:&lt;/p>
&lt;p>&lt;a href="https://time.is/">https://time.is/&lt;/a> has one of the cleanest user experiences I&amp;rsquo;ve ever seen.&lt;/p>
&lt;p>&lt;strong>Alternatively&lt;/strong>: use your favorite search engine to query for &amp;ldquo;time in
London&amp;rdquo;, or similar. &lt;a href="https://duckduckgo.com/?q=time+in+london">Example&lt;/a>.&lt;/p></description></item><item><title>Pare de receber telemarketing: Não Me Perturbe</title><link>https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/</link><pubDate>Mon, 13 Jan 2025 02:13:41 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/</guid><description>&lt;p>&lt;a href="https://naomeperturbe.com.br/">Não Me Perturbe&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>Pare de receber ligações de telemarketing das Empresas participantes.&lt;/p>
&lt;/blockquote>
&lt;blockquote>
&lt;p>O Não Me Perturbe permite, de forma fácil e gratuita, evitar a oferta de
produtos e serviços por meio de contato telefônico provenientes exclusivamente
das Prestadoras de Serviços de Telecomunicações (Telefone móvel, telefone
fixo, TV por assinatura e Internet) e pelas Instituições Financeiras
(operações de Empréstimo Consignado e Cartão de Crédito Consignado).&lt;/p>
&lt;/blockquote>
&lt;p>Na prática: cadastre seu número de celular (+55) + CPF na plataforma, além de
email + senha para gerenciá-la.&lt;/p>
&lt;p>Em troca, chamadas automáticas de operatoras de telefonia, bancos, entre outras
empresas irão (teoricamente&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup>) parar de realizar chamadas de telemarketing (spam!)
para o seu número.&lt;/p>
&lt;p>Uma vez cadastrado, o processo leva até 30 dias para ser efetivado.&lt;/p>
&lt;p>&lt;strong>Também descobri&lt;/strong>: como identificar &lt;a href="https://qualempresameligou.com.br/">qual empresa me
ligou?&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>A Agência Nacional de Telecomunicações (Anatel) determinou a criação de uma
ferramenta, que é o Portal &amp;ldquo;Qual empresa me ligou?&amp;rdquo;
(&lt;a href="https://qualempresameligou.com.br/)">https://qualempresameligou.com.br/)&lt;/a>, com o objetivo de identificar o CNPJ e a
Razão Social associados a determinados números de telefone. Assim, caso você
receba chamada de um número que desconheça, e este pertencer a uma Pessoa
Jurídica, poderá identificar a empresa que te ligou.&lt;/p>
&lt;/blockquote>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Caso as empresas continuem violando o seu direito, mesmo após a inclusão
na lista, é possível realizar uma reclamação na própria plataforma.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>Stop trying to schedule a call with me</title><link>https://perrotta.dev/2025/01/stop-trying-to-schedule-a-call-with-me/</link><pubDate>Mon, 13 Jan 2025 00:48:07 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/stop-trying-to-schedule-a-call-with-me/</guid><description>&lt;p>Amazing &lt;a href="https://matduggan.com/stop-trying-to-schedule-a-call-with-me/">post&lt;/a> by
Mathew Duggan.&lt;/p>
&lt;p>You&amp;rsquo;ll appreciate it more if you&amp;rsquo;re outside &lt;em>a&lt;/em> &lt;a href="https://carloarg02.medium.com/beware-of-the-big-tech-bubble-cd348087f5f7">tech
bubble&lt;/a>™.&lt;/p></description></item><item><title>SSCCE</title><link>https://perrotta.dev/2025/01/sscce/</link><pubDate>Sat, 11 Jan 2025 04:29:42 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/sscce/</guid><description>&lt;p>&lt;strong>Short, Self Contained, Correct (Compilable), Example&lt;/strong> (&amp;ldquo;sscce&amp;rdquo;):&lt;/p>
&lt;p>If you are having a problem with some code and seeking help, preparing a Short,
Self Contained, Correct Example (SSCCE) is very useful. But what is an SSCCE?&lt;/p>
&lt;p>It is all in the name, really. Take a look at each part. The version prepared
for others to see should be:&lt;/p>
&lt;ul>
&lt;li>Short (Small): Minimise bandwidth for the example, do not bore the audience.&lt;/li>
&lt;li>Self Contained: Ensure everything is included, ready to go.&lt;/li>
&lt;li>Correct: Copy, paste, (compile,) see is the aim.&lt;/li>
&lt;li>Example: Displays the problem we are trying to solve.&lt;/li>
&lt;/ul>
&lt;p>&lt;strong>Source&lt;/strong>: &lt;a href="https://www.sscce.org/">https://www.sscce.org/&lt;/a>&lt;/p>
&lt;p>One of my favorite resources to link to from Q&amp;amp;A (like Stack Overflow) and forums / BBS.&lt;/p></description></item><item><title>Cloudflare: Email Workers</title><link>https://perrotta.dev/2025/01/cloudflare-email-workers/</link><pubDate>Sat, 11 Jan 2025 01:48:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/cloudflare-email-workers/</guid><description>&lt;p>My journey into the
&lt;a href="https://en.wikipedia.org/wiki/Serverless_computing">serverless&lt;/a> world hereby
starts.&lt;/p>
&lt;p>And I am very happy to have chosen &lt;a href="https://www.cloudflare.com/">the best™
provider&lt;/a> in the universe to delight me in this
sweet learning curve. ✨&lt;/p>
&lt;p>&lt;strong>Problem statement&lt;/strong>: I have my own domain, you have probably noticed that.&lt;/p>
&lt;p>Given a specific hypothetical email address &lt;code>neetflex@&lt;/code>&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> within my own
domain, make it an email recipient that automatically forwards to both
&lt;code>user1@example.com&lt;/code> and &lt;code>user2@example.com&lt;/code>.&lt;/p>
&lt;p>The first attempt involves setting up an &lt;a href="https://developers.cloudflare.com/email-routing/">Email
Routing&lt;/a> rule. The issue is
that you can only do 1:1 mappings: &lt;code>neetflex@&lt;/code> -&amp;gt; &lt;code>user1@example.com&lt;/code>
would work, but it is impossible to add &lt;code>user2@example.com&lt;/code> for the same
recipient.&lt;/p>
&lt;p>&lt;strong>Workaround&lt;/strong>: &lt;a href="https://developers.cloudflare.com/email-routing/email-workers/">Email Workers&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>With Email Workers you can leverage the power of Cloudflare Workers to
implement any logic you need to process your emails and create complex rules.
These rules determine what happens when you receive an email.&lt;/p>
&lt;/blockquote>
&lt;p>&lt;em>Aside&lt;/em>: The platform is such a delight to use, I am deeply enchanted. Their
documentation is absolutely superb. I am getting seduced and couldn&amp;rsquo;t agree more
with &lt;a href="https://danielmiessler.com/blog/google-has-opened-the-door-to-cloudflare">Daniel
Miessler&lt;/a>.&lt;/p>
&lt;p>I proceed to create an Email Worker with the following code&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-ts" data-lang="ts">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">export&lt;/span> &lt;span style="color:#66d9ef">default&lt;/span> {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">async&lt;/span> &lt;span style="color:#a6e22e">email&lt;/span>(&lt;span style="color:#a6e22e">message&lt;/span>, &lt;span style="color:#a6e22e">env&lt;/span>, &lt;span style="color:#a6e22e">ctx&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">if&lt;/span> (&lt;span style="color:#a6e22e">message&lt;/span>.&lt;span style="color:#66d9ef">from&lt;/span> &lt;span style="color:#f92672">!==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;info@account.neetflex.com&amp;#34;&lt;/span>) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">return&lt;/span>;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">for&lt;/span> (&lt;span style="color:#66d9ef">const&lt;/span> &lt;span style="color:#a6e22e">address&lt;/span> &lt;span style="color:#66d9ef">of&lt;/span> [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// keep-sorted start
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> &lt;span style="color:#e6db74">&amp;#34;user1@example.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#e6db74">&amp;#34;user2@example.com&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#75715e">// keep-sorted end
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e">&lt;/span> ]) {
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#66d9ef">await&lt;/span> &lt;span style="color:#a6e22e">message&lt;/span>.&lt;span style="color:#a6e22e">forward&lt;/span>(&lt;span style="color:#a6e22e">address&lt;/span>);
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;named &lt;code>neetflex-magic-link&lt;/code>.&lt;/p>
&lt;p>There&amp;rsquo;s an integrated testing tool that makes it a breeze to ensure my worker
logic works as intended.&lt;/p>
&lt;p>Once I am satisfied with the results, I deploy the email worker.&lt;/p>
&lt;p>&lt;strong>Final step&lt;/strong>: create an email route rule from &lt;code>neetflex@{domain}&lt;/code> to the
aforementioned email worker. Done, profit!$!&lt;sup id="fnref:3">&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref">3&lt;/a>&lt;/sup>.&lt;/p>
&lt;p>At the time of this post, you can
&lt;a href="https://developers.cloudflare.com/workers/languages/">choose&lt;/a> among JavaScript,
TypeScript, Python and Rust to code your worker in.&lt;/p>
&lt;p>Original idea:
&lt;a href="https://community.cloudflare.com/t/routing-an-email-to-more-than-one-address-from-the-same-user/437169/2">source&lt;/a>
from Cloudflare Community.&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>Don&amp;rsquo;t judge me if I am a fan of &lt;a href="https://neetcode.io/">neetcode&lt;/a>&amp;rsquo;s sense
of humour.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>I miss(ed) programming in TypeScript! (even if only such a small snippet).&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:3">
&lt;p>&lt;em>Literally&lt;/em>.&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>.gitkeep</title><link>https://perrotta.dev/2025/01/.gitkeep/</link><pubDate>Sat, 11 Jan 2025 00:43:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/.gitkeep/</guid><description>&lt;p>I&amp;rsquo;m not sure if this is well-known, so here&amp;rsquo;s a short anecdotal blog post:&lt;/p>
&lt;p>&lt;code>git&lt;/code> cannot track empty directories.&lt;/p>
&lt;p>I wanted to add a &lt;code>drafts/&lt;/code> folder to my blog repository, alongside a
&lt;code>.gitignore&lt;/code> containing &lt;code>drafts/*.md&lt;/code> so that my staging posts wouldn&amp;rsquo;t be
accidentally checked into version control.&lt;/p>
&lt;p>If &lt;code>drafts/&lt;/code> is supposed to be empty, then how can I check it into version
control?&lt;/p>
&lt;p>The &lt;a href="https://stackoverflow.com/a/7229996/1745064">answer&lt;/a> is to create a dummy
&lt;code>.gitkeep&lt;/code> file inside it with &lt;code>touch drafts/.gitkeep&lt;/code>. This way I can
&lt;a href="https://github.com/thiagowfx/thiagowfx.github.io/tree/master/drafts">push&lt;/a> the
&lt;code>drafts/&lt;/code> directory to VCS. And it will remain empty (of markdown files)!&lt;/p></description></item><item><title>Anki: insert emoji on macOS</title><link>https://perrotta.dev/2025/01/anki-insert-emoji-on-macos/</link><pubDate>Sat, 11 Jan 2025 00:28:48 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/anki-insert-emoji-on-macos/</guid><description>&lt;p>There&amp;rsquo;s a longstanding bug in &lt;a href="https://apps.ankiweb.net/">Anki&lt;/a> on macOS: it&amp;rsquo;s
not possible to insert an emoji in the editor view via the system emoji picker.&lt;/p>
&lt;p>Whenever you click an emoji, the emoji picker closes whilst nothing is inserted.&lt;/p>
&lt;p>This has always annoyed me.&lt;/p>
&lt;p>Today I found a
&lt;a href="https://forums.ankiweb.net/t/macos-emoji-picker-not-working-in-editor-view/4061">workaround&lt;/a> (thanks Luc!):&lt;/p>
&lt;blockquote>
&lt;p>For anyone who comes across this. I figured out a quick workaround. You have
to open the Emoji-Picker-Keyboard on your Mac and then select the Emoji and
pull it into the editor window with your mouse.&lt;/p>
&lt;/blockquote>
&lt;p>It works indeed!&lt;/p>
&lt;p>My previous alternative was to use the emoji picker to insert an emoji in
another application (e.g. the Notes.app), and then manually cut and paste it.&lt;/p></description></item><item><title>Why self-answer questions in your own blog instead of Stack Overflow?</title><link>https://perrotta.dev/2025/01/why-self-answer-questions-in-your-own-blog-instead-of-stack-overflow/</link><pubDate>Thu, 09 Jan 2025 21:39:29 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/why-self-answer-questions-in-your-own-blog-instead-of-stack-overflow/</guid><description>&lt;p>I am a fan of the &lt;a href="https://stackexchange.com/">Stack Exchange&lt;/a> network, which
includes &lt;a href="https://stackoverflow.com/">Stack Overflow&lt;/a>.&lt;/p>
&lt;p>At the time of this post, I even link to &lt;a href="https://stackoverflow.com/users/1745064/thiagowfx">my
profile&lt;/a> there from the
footer of this website.&lt;/p>
&lt;p>Nonetheless,
&lt;a href="https://substack.evancarroll.com/p/the-erasure-of-luigi-mangione">nothing&lt;/a>
beats &lt;a href="https://news.ycombinator.com/item?id=42642089">owning&lt;/a> your own
&lt;a href="https://gist.github.com/hopeseekr/f522e380e35745bd5bdc3269a9f0b132">content&lt;/a>:&lt;/p>
&lt;p>Theodore R. Smith:&lt;/p>
&lt;blockquote>
&lt;p>If someone with 20,000+ karma has their nicely-formatted questions closed so
quickly, what must the newbies and rank-in-file encounter? This is probably a
big reason why it&amp;rsquo;s declining.&lt;/p>
&lt;/blockquote>
&lt;p>Moderators tend to be extremely (nit)picky there, oftentimes in a way that is
obtrusive and wielding gatekeeping, especially to newcomers.&lt;/p>
&lt;p>It&amp;rsquo;s great when you&amp;rsquo;re under the radar and avoid them; otherwise, it can be
quite cumbersome although, statistically speaking, it&amp;rsquo;s unlikely that you would
encounter this experience. It only happened to me once in 12 years using the
site – but it&amp;rsquo;s worth to note I am not much active there.&lt;/p>
&lt;p>I am trying to post these &amp;ldquo;today I learned&amp;rdquo; posts in my own blog for a myriad of
reasons, some of them including a) owning my content, b) not having to fight for
the right of my own content to exist, c) not wasting time on &lt;a href="https://xkcd.com/386/">frivolous
discussions&lt;/a> with moderators.&lt;/p>
&lt;p>And there&amp;rsquo;s a bit of a psychological dopamine hit as well – it surely feels good
to look back at a subset of lessons from what I have accomplished / learned,
represented by textual blog posts.&lt;/p>
&lt;p>In my opinion though the dopamine is only healthy because the blog is a toy
project. If I had to commercialize it and/or have to care about viral content /
number of readers / impressions / ad revenue then it would sooner or later feel
burdensome and transactional.&lt;/p></description></item><item><title>ArgoCD: cache: key is missing</title><link>https://perrotta.dev/2025/01/argocd-cache-key-is-missing/</link><pubDate>Thu, 09 Jan 2025 20:20:03 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/argocd-cache-key-is-missing/</guid><description>&lt;p>If you experience the title error message in ArgoCD (e.g. via its web UI and/or
in pod logs), it&amp;rsquo;s related to
&lt;a href="https://github.com/argoproj/argo-cd/issues/5068">argo-cd#5068&lt;/a>. The full error
message is:&lt;/p>
&lt;pre tabindex="0">&lt;code>Unable to load data: cache: key is missing
&lt;/code>&lt;/pre>&lt;p>As I
&lt;a href="https://github.com/argoproj/argo-cd/issues/5068#issuecomment-2580878251">commented&lt;/a>
in the bug, here&amp;rsquo;s how to fix it:&lt;/p>
&lt;blockquote>
&lt;p>The following workaround sufficed for me: &lt;code>k delete pod -n argocd argocd-application-controller-0&lt;/code>.&lt;/p>
&lt;p>Initially I ran &lt;code>k rollout restart deployment -n argocd argocd-application-controller&lt;/code> but it didn&amp;rsquo;t work.&lt;/p>
&lt;/blockquote>
&lt;p>In my experience, this error only happens once, ephemerally, during ArgoCD
bootstrapping. Once fixed it does not reoccur.&lt;/p>
&lt;p>Another potential workaround is to disable redis / caching altogether, as ArgoCD
can fully operate without it, but I wouldn&amp;rsquo;t recommend that.&lt;/p></description></item><item><title>Quick and dirty random password generator</title><link>https://perrotta.dev/2025/01/quick-and-dirty-random-password-generator/</link><pubDate>Thu, 09 Jan 2025 16:41:15 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/quick-and-dirty-random-password-generator/</guid><description>&lt;p>On Linux / macOS, use &lt;code>/dev/urandom&lt;/code>, with a &lt;code>tr&lt;/code> pass-through filter:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% tr -dc &lt;span style="color:#e6db74">&amp;#39;A-Za-z0-9&amp;#39;&lt;/span> &amp;lt; /dev/urandom | head -c &lt;span style="color:#ae81ff">20&lt;/span> &lt;span style="color:#f92672">&amp;amp;&amp;amp;&lt;/span> echo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>BLH1gVgdukdmTcvopOuC
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In the example above only alphanumeric characters are allowed.&lt;/p>
&lt;p>There are other popular ways to do so:&lt;/p>
&lt;ul>
&lt;li>Dice (&lt;a href="https://diceware.dmuth.org/">Douglas Muth&lt;/a>,
&lt;a href="https://www.eff.org/dice">EFF&lt;/a>).&lt;/li>
&lt;li>&lt;a href="https://pwgen.sourceforge.net/">&lt;code>pwgen&lt;/code>&lt;/a> (via &lt;code>brew home pwgen&lt;/code>)&lt;/li>
&lt;/ul></description></item><item><title>YAML: enforce schema linting</title><link>https://perrotta.dev/2025/01/yaml-enforce-schema-linting/</link><pubDate>Thu, 09 Jan 2025 13:22:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/yaml-enforce-schema-linting/</guid><description>&lt;p>&lt;a href="https://yaml.org/">YAML&lt;/a> files can have a schema associated to them.&lt;/p>
&lt;p>&lt;a href="https://schemastore.org/">Schema store&lt;/a> is a popular source for schemas. Or you
could &lt;a href="https://json-schema.org/">write your own&lt;/a>.&lt;/p>
&lt;p>JSON Schemas work on YAML files just fine.&lt;/p>
&lt;p>Let&amp;rsquo;s say you found a schema. For example, for &lt;a href="https://json.schemastore.org/json-patch.json">JSON Patch&lt;/a>.&lt;/p>
&lt;p>Assume this sample &lt;code>.yaml&lt;/code> file:&lt;/p>
&lt;pre tabindex="0">&lt;code>- op: remove
 path: /spec/syncPolicy/automated
&lt;/code>&lt;/pre>&lt;p>How to enforce the schema above in CI?&lt;/p>
&lt;p>One approach I like is with &lt;a href="https://github.com/redhat-developer/yaml-language-server">YAML Language
Server&lt;/a> by Red Hat.&lt;/p>
&lt;p>You start by annotating the file with the desired schema:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># yaml-language-server: $schema=https://json.schemastore.org/json-patch.json&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>- &lt;span style="color:#f92672">op&lt;/span>: &lt;span style="color:#ae81ff">remove&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">path&lt;/span>: &lt;span style="color:#ae81ff">/spec/syncPolicy/automated&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>And then you integrate it with a CI tool that is aware of it. I like
&lt;a href="https://pre-commit.com/">pre-commit.com&lt;/a>. Assuming you follow the pre-commit
setup, integrate the hook:&lt;/p>
&lt;pre tabindex="0">&lt;code>repos:
 - repo: https://github.com/jmlrt/check-yamlschema
 rev: v0.0.4
 hooks:
 - id: check-yamlschema
&lt;/code>&lt;/pre>&lt;p>Then &lt;code>pre-commit run [--all-files] check-yamlschema&lt;/code> shall perform its job.&lt;/p>
&lt;p>&lt;a href="https://github.com/jmlrt/check-yamlschema">https://github.com/jmlrt/check-yamlschema&lt;/a>:&lt;/p>
&lt;blockquote>
&lt;p>A CLI and pre-commit hook for jsonschema validation in YAML files with
multiple documents&lt;/p>
&lt;p>Parse multi-documents YAML files, look for inline schema comments, and
validate the documents according to their schema.&lt;/p>
&lt;/blockquote>
&lt;p>The &lt;a href="https://json.schemastore.org/any.json">&amp;lsquo;any&amp;rsquo;&lt;/a> schema&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> can be handy as an
opt-out mechanism:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-json" data-lang="json">&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;$schema&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;http://json-schema.org/draft-07/schema#&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;$id&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;https://json.schemastore.org/any.json&amp;#34;&lt;/span>,
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">&amp;#34;anyOf&amp;#34;&lt;/span>: [
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;object&amp;#34;&lt;/span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;array&amp;#34;&lt;/span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;string&amp;#34;&lt;/span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;number&amp;#34;&lt;/span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;boolean&amp;#34;&lt;/span> },
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> { &lt;span style="color:#f92672">&amp;#34;type&amp;#34;&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;null&amp;#34;&lt;/span> }
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ]
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>&lt;a href="https://github.com/SchemaStore/schemastore/pull/3885">Submitted&lt;/a> by yours truly.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item><item><title>ghostty: find popular themes</title><link>https://perrotta.dev/2025/01/ghostty-find-popular-themes/</link><pubDate>Thu, 09 Jan 2025 02:56:37 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/ghostty-find-popular-themes/</guid><description>&lt;p>&lt;a href="https://ghostty.org/">Ghostty 1.0&lt;/a> was barely released and it&amp;rsquo;s already quite
popular.&lt;/p>
&lt;p>I&amp;rsquo;ve been &lt;a href="https://perrotta.dev/2024/12/ghostty/">daily driving&lt;/a> it since December
last year and it has been quite enjoyable. There are a few annoyances here and
there, but its minimalism and speed make up for them.&lt;/p>
&lt;p>Today I stumbled upon &lt;a href="https://ghostty.town/">ghostty.town&lt;/a>, which hosts
user-submitted configs. Reminds me of:&lt;/p>
&lt;ul>
&lt;li>&lt;a href="https://terminal.love/">https://terminal.love/&lt;/a>&lt;/li>
&lt;li>&lt;a href="https://terminal.sexy/">https://terminal.sexy/&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>My current config is quite simple (by design!):&lt;/p>
&lt;pre tabindex="0">&lt;code>cursor-style-blink = false
shell-integration-features = no-cursor

theme=catppuccin-macchiato

macos-titlebar-style=tabs
&lt;/code>&lt;/pre>&lt;p>I got inspired to use the &lt;a href="https://catppuccin.com/">Catppuccin&lt;/a> theme thanks to
&lt;a href="https://jnsgr.uk/2024/07/how-i-computer-in-2024/">Jon Seager&lt;/a>.&lt;/p>
&lt;p>There&amp;rsquo;s no need to customize the default font as it&amp;rsquo;s &lt;a href="https://perrotta.dev/2024/12/picking-a-monospaced-code-font/">quite sensible&lt;/a> (JetBrains Mono, &lt;a href="https://ghostty.org/docs/config">as
per&lt;/a>).&lt;/p></description></item><item><title>Helm: migrate chart dependencies from HTTPS to OCI</title><link>https://perrotta.dev/2025/01/helm-migrate-chart-dependencies-from-https-to-oci/</link><pubDate>Wed, 08 Jan 2025 18:45:57 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/helm-migrate-chart-dependencies-from-https-to-oci/</guid><description>&lt;p>I got aware of this due to
&lt;a href="https://blog.bitnami.com/2024/10/bitnami-helm-charts-moving-to-oci.html">Bitnami&lt;/a>&amp;rsquo;s
blog post.&lt;/p>
&lt;p>In &lt;code>Chart.yaml&lt;/code>, instead of depending on:&lt;/p>
&lt;pre tabindex="0">&lt;code>- https://charts.bitnami.com/bitnami/airflow-18.3.2.tgz
&lt;/code>&lt;/pre>&lt;p>Instead, depend on:&lt;/p>
&lt;pre tabindex="0">&lt;code>- oci://registry-1.docker.io/bitnamicharts/airflow:18.3.2
&lt;/code>&lt;/pre>&lt;p>The switch is transparent, it works out-of-the-box.&lt;/p>
&lt;p>However there&amp;rsquo;s one caveat: You cannot &lt;code>helm repo add oci://registry-1.docker.io/bitnamicharts&lt;/code>. That only works for &lt;code>https://&lt;/code>
registries.&lt;/p>
&lt;p>The workaround is to &lt;code>helm pull oci://[...] --version {version}&lt;/code> and/or to
browse available tags/versions via docker hub.&lt;/p></description></item><item><title>Alpine Linux: install / pin old packages</title><link>https://perrotta.dev/2025/01/alpine-linux-install-/-pin-old-packages/</link><pubDate>Wed, 08 Jan 2025 15:54:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/alpine-linux-install-/-pin-old-packages/</guid><description>&lt;p>Let&amp;rsquo;s say you want to install an older version of &lt;code>jq&lt;/code> in Alpine Linux.&lt;/p>
&lt;p>For example:&lt;/p>
&lt;ul>
&lt;li>Alpine v3.18 has &lt;code>jq&lt;/code> 1.6&lt;/li>
&lt;li>Alpine v3.19 has &lt;code>jq&lt;/code> 1.7&lt;/li>
&lt;/ul>
&lt;p>You&amp;rsquo;re probably using Alpine v3.21 or edge today, which has an even newer
version of &lt;code>jq&lt;/code>. Hence &lt;code>doas apk add jq&lt;/code> will not do.&lt;/p>
&lt;p>Let&amp;rsquo;s assume you do not want to edit your &lt;code>/etc/apk/repositories&lt;/code>, as this is an
one-off, for a single package. What can you do then?&lt;/p>
&lt;p>Use the &lt;code>--repository&lt;/code> flag from &lt;code>apk&lt;/code>!&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>% doas apk add --no-cache --repository&lt;span style="color:#f92672">=&lt;/span>http://dl-cdn.alpinelinux.org/alpine/v3.18/main jq&lt;span style="color:#f92672">=&lt;/span>~1.6
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>It&amp;rsquo;s also important to pin the package version (&lt;code>~1.6&lt;/code>), otherwise the latest
one available gets installed.&lt;/p></description></item><item><title>Emissor NFE Sebrae v4.01 para emissão de notas fiscais</title><link>https://perrotta.dev/2025/01/emissor-nfe-sebrae-v4.01-para-emiss%C3%A3o-de-notas-fiscais/</link><pubDate>Wed, 08 Jan 2025 00:29:46 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/emissor-nfe-sebrae-v4.01-para-emiss%C3%A3o-de-notas-fiscais/</guid><description>&lt;p>&lt;em>To my English-speaking readers: this post contains Brazilian bureaucracy and
it&amp;rsquo;s in Portuguese, you may want to skip it.&lt;/em>&lt;/p>
&lt;h2 id="instalação">Instalação&lt;/h2>
&lt;p>Baixe o arquivo JNLP (cópia): &lt;a href="emissorNfe-4_0_1.jnlp">emissorNfe-4_0_1.jnlp&lt;/a>.&lt;/p>
&lt;p>Ou direto da fonte: &lt;a href="https://storage.googleapis.com/nfe-sebrae-prd/nfe/v401/producao/emissorNFe-4_0_1.jnlp">GCS&lt;/a>&lt;/p>
&lt;p>Execute-o com o Java Web Start (JWS) do Java 8. Não existe mais JWS a partir do
Java 11. Caso não tenha um runtime (JRE), baixe-o diretamente do &lt;a href="https://www.java.com/pt-BR/download/manual.jsp">site da
Oracle&lt;/a>.&lt;/p>
&lt;p>Caso não funcione, delete e reinstale o applet:&lt;/p>
&lt;ul>
&lt;li>Abra o Menu Iniciar&lt;/li>
&lt;li>Procure &amp;ldquo;Configurar Java&amp;rdquo; no campo de busca&lt;/li>
&lt;li>Clique na Aba &amp;ldquo;Geral&amp;rdquo;&lt;/li>
&lt;li>Em &amp;ldquo;Arquivos Temporários na Internet&amp;rdquo;, clique em &amp;ldquo;Exibir&amp;hellip;&amp;rdquo;&lt;/li>
&lt;li>Clique no ícone do emissor, e depois no botão &amp;lsquo;X&amp;rsquo; vermelho.&lt;/li>
&lt;li>Execute o arquivo JNLP novamente.&lt;/li>
&lt;/ul>
&lt;h2 id="notas">Notas&lt;/h2>
&lt;ul>
&lt;li>&lt;a href="https://openwebstart.com/">OpenWebStart&lt;/a> não funcionou. Ele lança uma
exceção.&lt;/li>
&lt;/ul></description></item><item><title>bash: distinguish between script invocation versus source</title><link>https://perrotta.dev/2025/01/bash-distinguish-between-script-invocation-versus-source/</link><pubDate>Tue, 07 Jan 2025 22:08:20 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/01/bash-distinguish-between-script-invocation-versus-source/</guid><description>&lt;p>&lt;strong>Problem statement&lt;/strong>: Given a &lt;code>main.sh&lt;/code>&lt;sup id="fnref:1">&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref">1&lt;/a>&lt;/sup> bash script that does a bunch of
variable &lt;code>export&lt;/code>s:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#75715e"># [...]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export AWS_ACCESS_KEY_ID&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$credentials&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | jq -r &lt;span style="color:#e6db74">&amp;#39;.Credentials.AccessKeyId&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export AWS_SECRET_ACCESS_KEY&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$credentials&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | jq -r &lt;span style="color:#e6db74">&amp;#39;.Credentials.SecretAccessKey&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>export AWS_SESSION_TOKEN&lt;span style="color:#f92672">=&lt;/span>&lt;span style="color:#66d9ef">$(&lt;/span>echo &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$credentials&lt;span style="color:#e6db74">&amp;#34;&lt;/span> | jq -r &lt;span style="color:#e6db74">&amp;#39;.Credentials.SessionToken&amp;#39;&lt;/span>&lt;span style="color:#66d9ef">)&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;we want to source it so that these exported variables become available in the
current shell context&lt;sup id="fnref:2">&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref">2&lt;/a>&lt;/sup>:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ source ./main.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;at the same time, we want to prevent users from invoking it:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>$ ./main.sh
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>&amp;hellip;because, otherwise, the variables wouldn&amp;rsquo;t be exported.&lt;/p>
&lt;p>How can we distinguish between these two forms in &lt;code>bash&lt;/code>?&lt;/p>
&lt;p>The following snippet works in this scenario:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$0&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>BASH_SOURCE[0]&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;error: do not invoke this script directly; instead, run \`source &lt;/span>$0&lt;span style="color:#e6db74">\`&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> exit &lt;span style="color:#ae81ff">1&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>The general scenario is:&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-shell" data-lang="shell">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> &lt;span style="color:#f92672">[[&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>$0&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">==&lt;/span> &lt;span style="color:#e6db74">&amp;#34;&lt;/span>&lt;span style="color:#e6db74">${&lt;/span>BASH_SOURCE[0]&lt;span style="color:#e6db74">}&lt;/span>&lt;span style="color:#e6db74">&amp;#34;&lt;/span> &lt;span style="color:#f92672">]]&lt;/span>; &lt;span style="color:#66d9ef">then&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;The script was invoked with ./main.sh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">else&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> echo &lt;span style="color:#e6db74">&amp;#34;The script was invoked with source main.sh&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">fi&lt;/span>
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;h2 id="llm-moment">LLM moment&lt;/h2>
&lt;p>I got it from ChatGPT + personal amends. If you&amp;rsquo;re curious, this is the original
snippet obtained with the first prompt:&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/bin/bash

if [[ $0 = &amp;#34;$BASH_SOURCE&amp;#34; ]]; then
 echo &amp;#34;The script was invoked with ./main.sh&amp;#34;
else
 echo &amp;#34;The script was invoked with source main.sh&amp;#34;
fi
&lt;/code>&lt;/pre>&lt;p>Out of curiosity, I asked:&lt;/p>
&lt;blockquote>
&lt;p>improve this script&lt;/p>
&lt;/blockquote>
&lt;p>To which I got:&lt;/p>
&lt;pre tabindex="0">&lt;code>#!/bin/bash

if [[ &amp;#34;${BASH_SOURCE[0]}&amp;#34; == &amp;#34;${0}&amp;#34; ]]; then
 echo &amp;#34;The script was invoked with ./main.sh&amp;#34;
else
 echo &amp;#34;The script was invoked with source main.sh or . main.sh&amp;#34;
fi
&lt;/code>&lt;/pre>&lt;p>&amp;hellip;which is similar to my final version. Not bad! That said, you would hope
that, in 2025, this &amp;ldquo;improve this script&amp;rdquo; chain-of-thought prompt reasoning
would be part of the model out-of-the-box, oneshot. &lt;em>Oh, well.&lt;/em>&lt;/p>
&lt;div class="footnotes" role="doc-endnotes">
&lt;hr>
&lt;ol>
&lt;li id="fn:1">
&lt;p>It&amp;rsquo;s for &lt;a href="https://perrotta.dev/2024/12/skopeo-operate-container-images-and-registries/">this script&lt;/a>.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;li id="fn:2">
&lt;p>In this context the &lt;code>./&lt;/code> is optional and was added only for clarity.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink">&amp;#x21a9;&amp;#xfe0e;&lt;/a>&lt;/p>
&lt;/li>
&lt;/ol>
&lt;/div></description></item></channel></rss>