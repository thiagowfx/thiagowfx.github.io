document.addEventListener("DOMContentLoaded",function(){if(typeof leetCodePostDates=="undefined"){console.error("coding-chart.js: leetCodePostDates not defined");return}if(typeof byteByteGoPostDates=="undefined"){console.error("coding-chart.js: byteByteGoPostDates not defined");return}if(typeof aocPostDates=="undefined"){console.error("coding-chart.js: aocPostDates not defined");return}if(typeof otherCodingPostDates=="undefined"){console.error("coding-chart.js: otherCodingPostDates not defined");return}const a=e=>{const t=e.filter(e=>e).sort(),n={};return t.forEach((e,t)=>{n[e]=t+1}),{sorted:t,cumulative:n,totalCount:t.length}},t=a(leetCodePostDates),n=a(byteByteGoPostDates),s=a(aocPostDates),o=a(otherCodingPostDates),m=t.sorted.concat(n.sorted).concat(s.sorted).concat(o.sorted).sort();if(m.length===0)return;const f=new Date(m[m.length-1]),l=new Date(f);l.setMonth(l.getMonth()-1);const e=[];let r=new Date(l);for(;r<=f;)e.push(r.toISOString().split("T")[0]),r.setDate(r.getDate()+1);let c=0,d=0,u=0,h=0;const i=e[0];t.sorted.forEach(e=>{e<i&&c++}),n.sorted.forEach(e=>{e<i&&d++}),s.sorted.forEach(e=>{e<i&&u++}),o.sorted.forEach(e=>{e<i&&h++});const p=[],g=[],v=[],b=[];e.forEach(e=>{t.cumulative[e]&&(c=t.cumulative[e]),p.push(c),n.cumulative[e]&&(d=n.cumulative[e]),g.push(d),s.cumulative[e]&&(u=s.cumulative[e]),v.push(u),o.cumulative[e]&&(h=o.cumulative[e]),b.push(h)});const j=document.getElementById("cumulative-chart").getContext("2d");new Chart(j,{type:"line",data:{labels:e,datasets:[{label:"LeetCode",data:p,borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1,fill:!0},{label:"ByteByteGo",data:g,borderColor:"rgb(255, 159, 64)",backgroundColor:"rgba(255, 159, 64, 0.2)",tension:.1,fill:!0},{label:"Advent of Code",data:v,borderColor:"rgb(155, 89, 182)",backgroundColor:"rgba(155, 89, 182, 0.2)",tension:.1,fill:!0},{label:"Other",data:b,borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.2)",tension:.1,fill:!0}]},options:{responsive:!0,plugins:{title:{display:!0,text:"Cumulative coding posts over time"},legend:{display:!0}},scales:{x:{title:{display:!0,text:"Date"}},y:{beginAtZero:!0,title:{display:!0,text:"Cumulative posts"},ticks:{stepSize:1}}},interaction:{intersect:!1,mode:"index"}}})})