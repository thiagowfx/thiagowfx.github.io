<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Macos on ¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content in Macos on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2021 - 2026 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Sun, 04 Jan 2026 02:34:00 -0300</lastBuildDate><atom:link href="https://perrotta.dev/tags/macos/index.xml" rel="self" type="application/rss+xml"/><item><title>LogSeq: slowness on macOS</title><link>https://perrotta.dev/2026/01/logseq-slowness-on-macos/</link><pubDate>Sat, 03 Jan 2026 23:53:13 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>pkm</category><guid>https://perrotta.dev/2026/01/logseq-slowness-on-macos/</guid><description>&lt;p&gt;Last week LogSeq was super slow on my Mac, it was pretty much unusable. I had to
manually kill its process multiple times as it kept freezing.&lt;/p&gt;
&lt;p&gt;Eventually I figured out &lt;a href="https://discuss.logseq.com/t/my-logseq-become-too-slow-recently/31985/4"&gt;the issue&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Then iCloud is the cause for the slowness. This is a known issue and is the
reason why the developers have built Logseq Sync. Other options for syncing
that don&amp;rsquo;t impact performance are Git and SyncThing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I would like to keep using iCloud at this time as it&amp;rsquo;s (i) free and (ii)
convenient to access from iOS.&lt;/p&gt;
&lt;p&gt;The following mitigation seemed to work:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Locate the LogSeq directory in iCloud (&lt;code&gt;~/Library/Mobile Documents/iCloud~com~logseq~logseq/Documents&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Right click the directory in Finder&lt;/li&gt;
&lt;li&gt;Click &lt;a href="https://discussions.apple.com/thread/256113094?sortBy=rank"&gt;&amp;lsquo;Keep Downloaded&amp;rsquo;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Keep Downloaded means the file stays on the device, and even if space is
needed the file will not be removed [&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: LogSeq: slowness on macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pkm/"&gt;#pkm&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Finicky</title><link>https://perrotta.dev/2025/12/finicky/</link><pubDate>Sun, 28 Dec 2025 02:14:14 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/finicky/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: I have one web browser for work, and another web browser
for personal use. These are two distinct web browsers, not two distinct profiles
in the same browser. Route work-related links to the work web browser, and
vice-versa. This is on macOS.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/johnste/finicky"&gt;Finicky&lt;/a&gt; addresses it very well:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A macOS app for customizing which browser to start&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is an app. Install it via homebrew: &lt;code&gt;brew install finicky&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Create a config file (&lt;code&gt;~/.config/finicky/finicky.js&lt;/code&gt;) for it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="js"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;js&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Finicky configuration
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// https://github.com/johnste/finicky
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;module&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;exports&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;defaultBrowser&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Brave Browser&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;// pick your poison
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;handlers&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Open Azure, GitHub, Atlassian and company-related domains in Chrome
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;match&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.atlassian.net/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.{company_intranet}/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.{company}.com/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*{company}*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/{company_org}*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;portal.azure.com/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;browser&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Google Chrome&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now make Finicky your default system browser.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s it. Now links will open be properly routed, automagically, upon clicking.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Finicky"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Flameshot</title><link>https://perrotta.dev/2025/12/flameshot/</link><pubDate>Sat, 27 Dec 2025 17:42:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/flameshot/</guid><description>&lt;p&gt;Install Flameshot.app on macOS:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install flameshot
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo xattr -rd com.apple.quarantine /Applications/flameshot.app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;open -a Flameshot&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;xattr&lt;/code&gt; is &lt;a href="https://github.com/flameshot-org/flameshot/issues/3572"&gt;necessary&lt;/a&gt; or else:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;flameshot&amp;rdquo; cannot be opened because the developer cannot be verified&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Flameshot"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: keyboard repeat</title><link>https://perrotta.dev/2025/12/macos-keyboard-repeat/</link><pubDate>Tue, 23 Dec 2025 11:54:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/macos-keyboard-repeat/</guid><description>&lt;p&gt;Run:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;defaults write NSGlobalDomain InitialKeyRepeat -int &lt;span style="color:#ae81ff"&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;defaults write NSGlobalDomain KeyRepeat -int &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;to configure the macOS keyboard repeat behavior for significantly faster
responsiveness.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;InitialKeyRepeat -int 10 ‚Äî Sets the delay before a held key starts repeating
(lower -&amp;gt; faster). Default is 15.&lt;/li&gt;
&lt;li&gt;KeyRepeat -int 1 ‚Äî Sets the repeat rate once a key is held (lower -&amp;gt; faster).
Default is 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Together, they make the keyboard feel snappier with minimal delay before repeat
and faster repetition speed.&lt;/p&gt;
&lt;p&gt;Should have done that ages ago!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: keyboard repeat"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ python-is-python3 with macOS homebrew</title><link>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</link><pubDate>Sun, 30 Nov 2025 00:22:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</guid><description>&lt;p&gt;I face this annoyance all the time:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;zsh: command not found: python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;127 thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% python3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Python 3.14.0 (main, Oct 7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.0.13.3)] on darwin
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;python&lt;/code&gt; executable is not available on macOS natively.&lt;/p&gt;
&lt;p&gt;It is not available on homebrew either, even with &lt;code&gt;brew install python&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python3&lt;/code&gt; is there though:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% which -a python3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/opt/homebrew/bin/python3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/usr/bin/python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I want to be able to run &lt;code&gt;python&lt;/code&gt; without having to remember I am running
Python 3. Python 3 is the &lt;em&gt;de facto standard&lt;/em&gt; in the 2020s, there should be no
need to remember this explicitly, we take it as gospel already.&lt;/p&gt;
&lt;p&gt;There are various ways to resolve this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;alias python&lt;span style="color:#f92672"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Classic. I hate it. Now you&amp;rsquo;ll have a &lt;code&gt;python&lt;/code&gt; alias even if &lt;code&gt;python3&lt;/code&gt; is not
available. This is not elegant at all. You could make it a bit better, sure:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;command -v python3 &amp;gt;/dev/null 2&amp;gt;&amp;amp;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; alias python&lt;span style="color:#f92672"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Or even a bit more idiomatically if using &lt;code&gt;zsh&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;((&lt;/span&gt; $+commands&lt;span style="color:#f92672"&gt;[&lt;/span&gt;python3&lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#f92672"&gt;))&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; alias python&lt;span style="color:#f92672"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Still, this is not a problem the shell should own. It just &lt;em&gt;feels&lt;/em&gt; wrong. This
is a package management problem. The shell remedy is just a cheap band-aid.
Can we do better than this?&lt;/p&gt;
&lt;p&gt;What about a wrapper script in &lt;code&gt;/usr/local/bin&lt;/code&gt;?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#!/usr/bin/env bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;exec python3 &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$@&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This is better. Much better. However, why not make it even simpler?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% sudo ln -s /usr/bin/python3 /usr/local/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A symlink suffices. You just need to decide whether to point it out to &lt;code&gt;python3&lt;/code&gt;
in homebrew or in the system.&lt;/p&gt;
&lt;p&gt;A symlink is not reproducible&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; though. If you reinstall your system, or acquire a
new one, now you&amp;rsquo;ll have to remember to re-create it.&lt;/p&gt;
&lt;p&gt;Sure, you could script it in your .dotfiles installation script, or add it to
the system installation notes section in your second brain app. Who am I to tell
you what to do?&lt;/p&gt;
&lt;p&gt;Here is my favorite way to address the issue: install a package!&lt;/p&gt;
&lt;p&gt;For example, there was a time in Debian and Ubuntu that the
&lt;a href="https://packages.debian.org/sid/python-is-python3"&gt;&lt;code&gt;python-is-python3&lt;/code&gt;&lt;/a&gt; package
did exactly that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a convenience package which ships a symlink to point the
/usr/bin/python interpreter at the current default python3. It may improve
compatibility with other modern systems, whilst breaking some obsolete or
3rd-party software.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now you can guess what the source of my inspiration was. I created a homebrew
formula to do the same:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;class&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;PythonIsPython3&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;lt;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;Formula&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; desc &lt;span style="color:#e6db74"&gt;&amp;#34;Make python point to python3&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; homepage &lt;span style="color:#e6db74"&gt;&amp;#34;https://github.com/thiagowfx/homebrew-taps&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; url &lt;span style="color:#e6db74"&gt;&amp;#34;file:///dev/null&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; version &lt;span style="color:#e6db74"&gt;&amp;#34;1.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sha256 &lt;span style="color:#e6db74"&gt;&amp;#34;e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; depends_on &lt;span style="color:#e6db74"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;def&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; bin&lt;span style="color:#f92672"&gt;.&lt;/span&gt;install_symlink &lt;span style="color:#66d9ef"&gt;Formula&lt;/span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;].&lt;/span&gt;opt_bin&lt;span style="color:#f92672"&gt;/&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;python3&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; bin&lt;span style="color:#f92672"&gt;.&lt;/span&gt;install_symlink &lt;span style="color:#66d9ef"&gt;Formula&lt;/span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;].&lt;/span&gt;opt_bin&lt;span style="color:#f92672"&gt;/&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;pip3&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&amp;gt;&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;pip&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now that I have a formula, I need to create a tap to host it somewhere.&lt;/p&gt;
&lt;p&gt;Hence &lt;a href="https://github.com/thiagowfx/homebrew-taps"&gt;https://github.com/thiagowfx/homebrew-taps&lt;/a&gt; is born.&lt;/p&gt;
&lt;p&gt;To install it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew tap thiagowfx/taps
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install python-is-python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Enjoy peace!&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% which python
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/opt/homebrew/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;This is a very loose usage of &amp;ldquo;reproducible&amp;rdquo;. Sorry Nix folks, I meant no
harm!&amp;#160;&lt;a href="https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: python-is-python3 with macOS homebrew"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>new script: copy</title><link>https://perrotta.dev/2025/11/new-script-copy/</link><pubDate>Tue, 04 Nov 2025 14:05:47 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/11/new-script-copy/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/new-script-ssh-mux-restart/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I decided to add a new &lt;code&gt;copy&lt;/code&gt; script to
&lt;a href="https://github.com/thiagowfx/pancake"&gt;&lt;code&gt;pancake&lt;/code&gt;&lt;/a&gt; to standardize copying command
output and files to the system clipboard in both macOS and Linux.&lt;/p&gt;
&lt;p&gt;The idea was originally inspired by &lt;a href="https://evanhahn.com/scripts-i-wrote-that-i-use-all-the-time/"&gt;Evan
Hahn&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;copy&lt;/code&gt; and &lt;code&gt;pasta&lt;/code&gt; are simple wrappers around system clipboard managers, like
&lt;code&gt;pbcopy&lt;/code&gt; on macOS and &lt;code&gt;xclip&lt;/code&gt; on Linux. I use these all the time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://codeberg.org/EvanHahn/dotfiles/src/commit/843b9ee13d949d346a4a73ccee2a99351aed285b/home/bin/bin/copy"&gt;Evan&amp;rsquo;s version&lt;/a&gt; is concise and elegant.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/pancake/blob/457441b3bc790068ff2618125da08de0effab016/copy/copy.sh"&gt;My version&lt;/a&gt; is more verbose, for the sake of consistency with the rest of my scripts in pancake.&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Copy from stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;BANANA42SPLIT88SUNDAE99CHERRY&amp;#34;&lt;/span&gt; | copy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Copy a file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;copy notes.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Copy multiple files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;copy *.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="platform-support"&gt;Platform Support&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;macOS&lt;/strong&gt;: Uses &lt;code&gt;pbcopy&lt;/code&gt; (built-in)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux&lt;/strong&gt;: Auto-detects first available tool:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;wl-copy&lt;/code&gt; (Wayland) - prioritized for modern desktops&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xclip&lt;/code&gt; (X11)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xsel&lt;/code&gt; (X11)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="features"&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Silent on success (Unix philosophy)&lt;/li&gt;
&lt;li&gt;Supports stdin input&lt;/li&gt;
&lt;li&gt;Supports single or multiple files&lt;/li&gt;
&lt;li&gt;Multiple files are concatenated with newline separators&lt;/li&gt;
&lt;li&gt;Clear error messages for missing files or dependencies&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: new script: copy"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS homebrew: downgrade a package</title><link>https://perrotta.dev/2025/10/macos-homebrew-downgrade-a-package/</link><pubDate>Tue, 07 Oct 2025 10:47:02 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/10/macos-homebrew-downgrade-a-package/</guid><description>&lt;p&gt;Yesterday we could no longer ssh to deploy servers (via a ruby-based wrapper we
use).&lt;/p&gt;
&lt;p&gt;This was bad‚Ñ¢.&lt;/p&gt;
&lt;p&gt;The error message looked like this:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Seahorse::Client::NetworkingError: SSL_connect returned=1 errno=0 peeraddr={redacted}:443 state=error: certificate verify failed (unable to get certificate CRL)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/net/protocol.rb:46:in `connect_nonblock&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/net/protocol.rb:46:in `ssl_socket_connect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/net/http.rb:1674:in `connect&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/net/http.rb:1580:in `do_start&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/net/http.rb:1575:in `start&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/Users/thiago.perrotta/.rbenv/versions/3.2.4/lib/ruby/3.2.0/delegate.rb:87:in `method_missing&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[...]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It was an error in OpenSSL.&lt;/p&gt;
&lt;p&gt;There had been a new release a few days earlier,
&lt;a href="https://github.com/openssl/openssl/releases/tag/openssl-3.6.0"&gt;3.6.0&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Suspicious!&lt;/p&gt;
&lt;p&gt;In order to restore our ability to ssh to deploy servers as quickly as possible,
we decided to downgrade to 3.5.&lt;/p&gt;
&lt;p&gt;This proved to be a bit more painful than it should have been in 2025:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install openssl@3.5
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew pin openssl@3.5 &lt;span style="color:#75715e"&gt;# prevent upgrades&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew uninstall --ignore-dependencies openssl@3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;--ignore-dependencies&lt;/code&gt; is needed because there is a ton of packages that depend
on OpenSSL.&lt;/p&gt;
&lt;p&gt;This is not enough.&lt;/p&gt;
&lt;p&gt;Using our ruby-based tool to ssh into servers would yield another error. The
tool was still trying to use OpenSSL 3.6.0, as the library paths were
hard-coded. Ugh.&lt;/p&gt;
&lt;p&gt;New attempt:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rbenv install 3.3.9 &lt;span style="color:#75715e"&gt;# compile / install a new version of ruby -&amp;gt; it will link against OpenSSL 3.5&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$EDITOR &amp;lt;mulch&amp;gt;/.ruby-version &lt;span style="color:#75715e"&gt;# upgrade to the version above&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Installing a new version of ruby ends up compiling / linking libraries against
OpenSSL 3.5. Now we regained the ability to ssh.&lt;/p&gt;
&lt;p&gt;Now let&amp;rsquo;s investigate the root cause.&lt;/p&gt;
&lt;p&gt;There was no bug report in homebrew.&lt;/p&gt;
&lt;p&gt;Next: OpenSSL. &lt;a href="https://github.com/openssl/openssl/issues/28758"&gt;#28758&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;OpenSSL 3.6.0 results in error: certificate verify failed (unable to get certificate CRL) #28758&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Yes! That&amp;rsquo;s the one.&lt;/p&gt;
&lt;p&gt;From there, someone linked to
&lt;a href="https://github.com/ruby/openssl/issues/949"&gt;&lt;code&gt;ruby/openssl&lt;/code&gt;&lt;/a&gt; (a core gem), which
was precisely the issue we were having.&lt;/p&gt;
&lt;p&gt;There was another workaround in that thread, but we didn&amp;rsquo;t need it.&lt;/p&gt;
&lt;p&gt;Eventually a fix was
&lt;a href="https://github.com/ruby/openssl/issues/949#issuecomment-3370358680"&gt;released&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I thought to run &lt;code&gt;gem update openssl&lt;/code&gt; (or similar) to incorporate it, but it
turned out that &lt;code&gt;openssl&lt;/code&gt; is a system gem, therefore it was not listed in our
&lt;code&gt;Gemfile.lock&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A workaround: explicitly add it to our &lt;code&gt;gemspec&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;spec&lt;span style="color:#f92672"&gt;.&lt;/span&gt;add_runtime_dependency &lt;span style="color:#e6db74"&gt;&amp;#39;openssl&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;~&amp;gt; 3.2.2&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then run &lt;code&gt;bundle install&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now everything works. We can undo the original workaround:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew unpin openssl@3.5
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew uninstall openssl@3.5
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install openssl@3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS homebrew: downgrade a package"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>mv: case sensitivity</title><link>https://perrotta.dev/2025/09/mv-case-sensitivity/</link><pubDate>Thu, 25 Sep 2025 12:22:47 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/09/mv-case-sensitivity/</guid><description>&lt;p&gt;From the series: why you should always use a case sensitive file system (like
most of Linux).&lt;/p&gt;
&lt;p&gt;By default, to my despair, macOS uses a case-insensitive file system(&lt;a href="https://discussions.apple.com/thread/251191099?sortBy=rank"&gt;1&lt;/a&gt;, &lt;a href="https://docs.spryker.com/docs/dg/dev/integrate-and-configure/switch-to-a-case-sensitive-file-system-on-mac-os#create-the-disk-image"&gt;2&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;We can pretend this is not an issue, and simply brush it under the carpet during
most sunny days.&lt;/p&gt;
&lt;p&gt;Nonetheless, at some point the dust must settle.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: rename &lt;code&gt;justfile&lt;/code&gt; to &lt;code&gt;Justfile&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Too easy? On Linux, yes. On macOS:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% mv justfile Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mv: &lt;span style="color:#e6db74"&gt;&amp;#39;justfile&amp;#39;&lt;/span&gt; and &lt;span style="color:#e6db74"&gt;&amp;#39;Justfile&amp;#39;&lt;/span&gt; are the same file&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Fine. Let&amp;rsquo;s do it the &amp;lsquo;&amp;lsquo;&amp;lsquo;hard&amp;rsquo;&amp;rsquo;&amp;rsquo; way:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% mv justfile&lt;span style="color:#f92672"&gt;{&lt;/span&gt;,.bkp&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% mv justfile.bkp Justfile&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And life goes on.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: mv: case sensitivity"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ homebrew: command-not-found</title><link>https://perrotta.dev/2025/09/homebrew-command-not-found/</link><pubDate>Tue, 23 Sep 2025 10:14:21 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><category>serenity</category><guid>https://perrotta.dev/2025/09/homebrew-command-not-found/</guid><description>&lt;p&gt;As of &lt;a href="https://github.com/Homebrew/homebrew-command-not-found"&gt;Sep 22nd, 2025&lt;/a&gt;,
homebrew &lt;em&gt;natively&lt;/em&gt; supports a &amp;ldquo;command-not-found&amp;rdquo; hook.&lt;/p&gt;
&lt;p&gt;The emphasis is on &lt;em&gt;natively&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Previously this could be achieved with a tap:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew tap https://github.com/Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;src_files &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;brew --prefix&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;/Library/Taps/homebrew/homebrew-command-not-found/handler.sh&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Thus yielding this effect:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% ghc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;zsh: correct &lt;span style="color:#e6db74"&gt;&amp;#39;ghc&amp;#39;&lt;/span&gt; to &lt;span style="color:#e6db74"&gt;&amp;#39;gh&amp;#39;&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;nyae&lt;span style="color:#f92672"&gt;]&lt;/span&gt;? n
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;The program &lt;span style="color:#e6db74"&gt;&amp;#39;ghc&amp;#39;&lt;/span&gt; can be found in the following formulae:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * ghc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * ghc@9.10
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * ghc@9.4
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * ghc@9.6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * ghc@9.8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Try: brew install &amp;lt;selected formula&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The difference today is that there&amp;rsquo;s no need to tap an extra repository anymore
to do so; the hook is henceforth built directly into homebrew&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/09/homebrew-command-not-found/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;hash brew &amp;gt;/dev/null 2&amp;gt;&amp;amp;&lt;span style="color:#ae81ff"&gt;1&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; src_files &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;brew --repository&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;/Library/Homebrew/command-not-found/handler.sh&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For completeness, untap the command-not-found repository as it is no longer
needed:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% brew doctor
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Please note that these warnings are just used to help the Homebrew maintainers
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;with debugging &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; you file an issue. If everything you use Homebrew &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; is
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;working fine: please don&lt;span style="color:#960050;background-color:#1e0010"&gt;&amp;#39;&lt;/span&gt;t worry or file an issue; just ignore this. Thanks!
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Warning: You have the following deprecated, official taps tapped:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Untap them with &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;brew untap&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew untap Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% Untapping homebrew/command-not-found...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Untapped &lt;span style="color:#f92672"&gt;(&lt;/span&gt;2,572 files, 87.4MB&lt;span style="color:#f92672"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My dotfiles diff:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit f02c9ab2b203a6235414924e7ddb4b8b6ac6ee52 (HEAD -&amp;gt; master)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Date: Tue Sep 23 10:16:47 2025 +0200
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; brew: command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git profile/.profile.d/10-brew.sh profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 1828f77..97645f0 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -11,9 +11,8 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; [ -z &amp;#34;$HOMEBREW_PREFIX&amp;#34; ] &amp;amp;&amp;amp; [ -x /opt/homebrew/bin/brew ] &amp;amp;&amp;amp; eval &amp;#34;$(/opt/homebrew/bin/brew shellenv)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # command-not-found hook
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-# setup: brew tap &amp;#34;homebrew/command-not-found&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-# https://github.com/Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-hash brew &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; src_files &amp;#34;$(brew --prefix)/Library/Taps/homebrew/homebrew-command-not-found/handler.sh&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+# brew --prefix works too
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+hash brew &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; src_files &amp;#34;$(brew --repository)/Library/Homebrew/command-not-found/handler.sh&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # GNU coreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; path_munge &amp;#34;/opt/homebrew/opt/coreutils/libexec/gnubin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/13d66a2b80efa02c611a747008124cbbb3ef3a8f/profile/.profilerc#L17"&gt;&lt;code&gt;src_files&lt;/code&gt;&lt;/a&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2025/09/homebrew-command-not-found/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: homebrew: command-not-found"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>RayCast: spotify in macOS menu bar</title><link>https://perrotta.dev/2025/09/raycast-spotify-in-macos-menu-bar/</link><pubDate>Wed, 10 Sep 2025 14:32:19 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>macos</category><category>serenity</category><guid>https://perrotta.dev/2025/09/raycast-spotify-in-macos-menu-bar/</guid><description>&lt;p&gt;&lt;strong&gt;TIL&lt;/strong&gt;: &lt;a href="https://www.raycast.com/"&gt;RayCast&lt;/a&gt; supports embedding a menu bar
player for Spotify in macOS.&lt;/p&gt;
&lt;p&gt;Instructions:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;open raycast&lt;/li&gt;
&lt;li&gt;type in &amp;ldquo;spotify menu bar player&amp;rdquo;&lt;/li&gt;
&lt;li&gt;activate it (hit ENTER)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://perrotta.dev/2025/09/raycast-spotify-in-macos-menu-bar/#ZgotmplZ" alt="spotify menu bar player"&gt;&lt;/p&gt;
&lt;p&gt;Testing:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;open spotify, play a track of your choosing&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You should see a preview:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://perrotta.dev/2025/09/raycast-spotify-in-macos-menu-bar/#ZgotmplZ" alt="spotify menu bar player"&gt;&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: RayCast: spotify in macOS menu bar"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Ghostty: migrating config to dotfiles</title><link>https://perrotta.dev/2025/07/ghostty-migrating-config-to-dotfiles/</link><pubDate>Mon, 21 Jul 2025 14:56:27 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/07/ghostty-migrating-config-to-dotfiles/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2024/12/ghostty/"&gt;This year&lt;/a&gt; I migrated my terminal
application from &lt;a href="https://iterm2.com/"&gt;iTerm2&lt;/a&gt; to
&lt;a href="https://ghostty.org/"&gt;Ghostty&lt;/a&gt; on macOS.&lt;/p&gt;
&lt;p&gt;Ghostty has great defaults; I find that there are only a handful of
customizations that I need to make to satisfy my needs.&lt;/p&gt;
&lt;p&gt;One can configure ghostty by opening its config file with &lt;code&gt;Cmd + ,&lt;/code&gt;, the typical
preferences shortcut on macOS.&lt;/p&gt;
&lt;p&gt;In a vanilla system, that config file is initially &lt;code&gt;$HOME/Library/Application\ Support/com.mitchellh.ghostty/config&lt;/code&gt;
(&lt;a href="https://ghostty.org/docs/config#macos-specific-path-%28macos-only%29:"&gt;docs&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;That location is not convenient / accessible though.&lt;/p&gt;
&lt;p&gt;Upon digging the &lt;a href="https://ghostty.org/docs/config"&gt;ghostty config docs&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$XDG_CONFIG_HOME/ghostty/config.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;if XDG_CONFIG_HOME is not defined, it defaults to $HOME/.config/ghostty/config.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;macOS-specific Path (macOS only):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$HOME/Library/Application\ Support/com.mitchellh.ghostty/config
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;macOS also supports the XDG configuration path mentioned above.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I prefer the &lt;code&gt;~/.config/ghostty&lt;/code&gt; location: it is cross-platform, compatible with
Linux as well, and I can easily add it to my
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/ghostty/config"&gt;dotfiles&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Moving the file to that location yields a no-frills migration:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% mv $HOME/Library/Application&lt;span style="color:#ae81ff"&gt;\ &lt;/span&gt;Support/com.mitchellh.ghostty/config $HOME/.config/ghostty/config&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;As of today, the config looks like this:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# https://ghostty.org/docs/config
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# keep-sorted start
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cursor-style-blink = false
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;keybind = shift+enter=text:\n
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;macos-icon = chalkboard
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;shell-integration-features = no-cursor
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;theme = catppuccin-macchiato
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# keep-sorted end&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The first line is a handy shortcut to the config documentation.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://github.com/google/keep-sorted"&gt;&lt;code&gt;keep-sorted&lt;/code&gt;&lt;/a&gt; stanzas stem from my
tendency to keep the house tidy. They are not merely comments: the sorting is
actually enforced via a git &lt;a href="https://pre-commit.com/"&gt;pre-commit&lt;/a&gt; hook.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;cursor-style-blink = false&lt;/code&gt;: blinking cursor is unnecessarily distracting.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;keybind = shift+enter=text:\n&lt;/code&gt;: &lt;a href="https://www.anthropic.com/claude-code"&gt;Claude Code&lt;/a&gt; added this, it&amp;rsquo;s &lt;a href="https://github.com/ghostty-org/ghostty/discussions/7780"&gt;surprising&lt;/a&gt; it&amp;rsquo;s not the default:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚îÇ &amp;gt; /termi ‚îÇ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /terminal-setup Install Shift+Enter key binding for newlines&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;macos-icon = chalkboard&lt;/code&gt;: bells and whistles.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;shell-integration-features = no-cursor&lt;/code&gt;: some
&lt;a href="https://github.com/ghostty-org/ghostty/discussions/2812#discussioncomment-11686920"&gt;context&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;theme = catppuccin-macchiato&lt;/code&gt;: more bells and whistles. You may like: &lt;code&gt;ghostty +list-themes&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Ghostty: migrating config to dotfiles"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>M1 Macbook Air keeps disconnecting from Wi-Fi</title><link>https://perrotta.dev/2025/06/m1-macbook-air-keeps-disconnecting-from-wi-fi/</link><pubDate>Tue, 24 Jun 2025 13:34:50 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/06/m1-macbook-air-keeps-disconnecting-from-wi-fi/</guid><description>&lt;p&gt;&lt;a href="https://www.reddit.com/r/mac/comments/vv5day/m1_macbook_air_keeps_disconnecting_from_wifi/"&gt;M1 Macbook air keeps disconnecting from
wifi&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&amp;rsquo;ve had this mac for a few months and never had this issue until today. It
will disconnect every 1 minute it&amp;rsquo;s really frustrating.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Lately I&amp;rsquo;ve been having the same issue, more or less. Also in a M1 Macbook Air.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s also &lt;a href="https://discussions.apple.com/thread/255556937?sortBy=rank"&gt;this
thread&lt;/a&gt; in the Apple
Community forums.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&amp;rsquo;ve tried forgetting the network then adding it again, checking for any
updates but it&amp;rsquo;s all up to date.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Right. Times of desperation call for desperate measures, but those don&amp;rsquo;t really
help.&lt;/p&gt;
&lt;p&gt;In that thread, there is a suggestion to run Wireless diagnostics: &lt;code&gt;Option + Wi-Fi &amp;gt; &amp;quot;Open Wireless Diagnostics...&amp;quot;&lt;/code&gt;. This is a good idea, but it also
appeared not to work in my case.&lt;/p&gt;
&lt;p&gt;I got reminded of a &lt;a href="https://bbs.archlinux.org/viewtopic.php?id=270326"&gt;thread&lt;/a&gt;
I posted a few years ago in the Arch Linux forums:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Whenever I turn my desktop on and log in with my primary user, internet is
usually available. I can &lt;code&gt;sudo pacman -Syu&lt;/code&gt;, &lt;code&gt;ping google.com&lt;/code&gt;, etc.&lt;/p&gt;
&lt;p&gt;Occasionally though, when I turn my desktop on, internet isn&amp;rsquo;t available. My
go-to &amp;ldquo;fix&amp;rdquo; (it&amp;rsquo;s more like a workaround, really) is to simply do:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;% systemctl restart iwd&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;which was quite similar, albeit on Linux.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s just so frustrating whenever this happens, and it&amp;rsquo;s hard to even know where
to start troubleshooting. My setup is the same as always, there was no change to
ISPs, hardware, software, or anything else, really.&lt;/p&gt;
&lt;p&gt;There was a light at the end of the tunnel: I found this &lt;a href="https://superuser.com/questions/826338/macbook-air-constantly-drops-wifi-connection"&gt;superuser
thread&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;My MacBook Air keeps dropping wifi connection on my home network. When I
connect to my network, it remains connected for a few minutes, then it drops
the connection. I have no idea what&amp;rsquo;s the problem. I found several forums on
the internet discussing this, but none of them really gave a working solution.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ah yes, buddy. I feel you. We are &lt;a href="https://xkcd.com/979/"&gt;soulmates&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Someone suggested the following:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;% ping -i 0.2 192.168.1.1&lt;/code&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And, to my abysmal surprise, that seems to have worked&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/06/m1-macbook-air-keeps-disconnecting-from-wi-fi/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. Rationale:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The problem is that OS X tries to put the WiFi antenna into a power saving
mode if there&amp;rsquo;s no data being sent or received, but with some WiFi APs, this
leads to disconnecting. That ping command will ping your router every 0.2
seconds, preventing OS X from turning off the WiFi.&lt;/p&gt;
&lt;p&gt;This is not a brilliant solution, but it will work until Apple does something
about this.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I need to make a few more experiments before I can conclude it is a reliable
solution, but so far I am sold, as I ran out of ideas. The &lt;code&gt;0.2s&lt;/code&gt; interval is
too frequent though; &lt;code&gt;0.5s&lt;/code&gt; appears to be enough.&lt;/p&gt;
&lt;p&gt;The answer author suggested to wrap the script in an Automator app. This is
quite elegant, should we ever deem it as a long-term &amp;ldquo;solution&amp;rdquo;. I suppose that
a &lt;a href="https://www.hammerspoon.org/"&gt;Hammerspoon&lt;/a&gt; spoon would also be elegant in
this context.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;It could simply be placebo, as far as I&amp;rsquo;m concerned&amp;hellip;&amp;#160;&lt;a href="https://perrotta.dev/2025/06/m1-macbook-air-keeps-disconnecting-from-wi-fi/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: M1 Macbook Air keeps disconnecting from Wi-Fi"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Replace text in PDFs</title><link>https://perrotta.dev/2025/06/replace-text-in-pdfs/</link><pubDate>Sun, 01 Jun 2025 22:39:36 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/06/replace-text-in-pdfs/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given an existing PDF file, replace text in it.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Preview.app&lt;/code&gt; on macOS cannot replace text; it can only add annotations. It is
possible to use it in a hacky way: add a white square on top of the text you
want to replace, then add another piece of text atop.&lt;/p&gt;
&lt;p&gt;I found that &lt;a href="https://www.pdfgear.com/"&gt;PDFGear&lt;/a&gt; does the job well. It is not
open source, but it is free. On macOS it needs to be manually downloaded and
installed from the &lt;a href="https://apps.apple.com/us/app/pdfgear-pdf-editor-reader/id6469021132?mt=12&amp;amp;os=mac&amp;amp;lang=en"&gt;Mac App
Store&lt;/a&gt;,
as it&amp;rsquo;s not in Homebrew. It&amp;rsquo;s also available on Windows. It is quite well-rated
in &lt;a href="https://www.trustpilot.com/review/pdfgear.com"&gt;Trustpilot&lt;/a&gt; (4.9 stars, 6500+
reviews).&lt;/p&gt;
&lt;p&gt;On Linux I would probably try &lt;a href="https://xournalpp.github.io/"&gt;Xournal++&lt;/a&gt;, however
it is really a PDF &lt;em&gt;annotation&lt;/em&gt; tool. It is also available on macOS: &lt;code&gt;brew install xournal++&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Replace text in PDFs"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Espanso: hello world</title><link>https://perrotta.dev/2025/05/espanso-hello-world/</link><pubDate>Fri, 16 May 2025 17:40:26 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/05/espanso-hello-world/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/03/maccy-pin-items/"&gt;Previously&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Sometimes it&amp;rsquo;s useful to have certain code snippets be easily accessible from
the clipboard manager.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;p&gt;This workflow is decent for temporary entries. For semi-permanent ones, I
should look into &lt;a href="https://espanso.org/"&gt;Espanso&lt;/a&gt; at some point. For now,
&lt;a href="https://perrotta.dev/2025/01/raycast-snippets/"&gt;Raycast Snippets&lt;/a&gt; fills in this
role.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Today is the day!&lt;/p&gt;
&lt;p&gt;&lt;a href="https://espanso.org/"&gt;Espanso&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Supercharge your typing| experience.&lt;/p&gt;
&lt;p&gt;Tired of typing the same sentences over and over? Discover the incredible
power of a full-blown text expander.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;So?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;How it works&lt;/p&gt;
&lt;p&gt;Espanso detects when you type a keyword&lt;/p&gt;
&lt;p&gt;Today is :date&lt;/p&gt;
&lt;p&gt;(becomes) Today is 05/16/2025&lt;/p&gt;
&lt;p&gt;and replaces it while you&amp;rsquo;re typing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s just like &lt;a href="https://www.raycast.com/core-features/snippets"&gt;Text Expander&lt;/a&gt;
from Raycast snippets.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s available on all major OSes (Windows, Linux, macOS). I am testing it on
macOS. Installation:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% brew install espanso&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;After installing it and opening it, give it all sorts of System Accessibility
permissions so that it can perform its magic.&lt;/p&gt;
&lt;p&gt;This is just a &amp;ldquo;hello world&amp;rdquo; post, therefore I am not going to list every single
capability it has. Let&amp;rsquo;s just keep it simple and get our feet wet.&lt;/p&gt;
&lt;p&gt;I have to type &lt;code&gt;helm ls -A --max 9999 | grep -i {release}&lt;/code&gt; &lt;a href="https://perrotta.dev/2024/08/helm-list-all-installed-charts-in-the-cluster/"&gt;all the time&lt;/a&gt;, and I&amp;rsquo;m fed
up with it.&lt;/p&gt;
&lt;p&gt;I want to create a &lt;code&gt;:helm:ls&lt;/code&gt; expansion that will trigger that command
expansion.&lt;/p&gt;
&lt;p&gt;Run &lt;code&gt;espanso edit&lt;/code&gt;. It opens a stock &lt;code&gt;base.yml&lt;/code&gt; file:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# espanso match file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# For a complete introduction, visit the official docs at: https://espanso.org/docs/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# You can use this file to define the base matches (aka snippets)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# that will be available in every application when using espanso.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Matches are substitution rules: when you type the &amp;#34;trigger&amp;#34; string&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# it gets replaced by the &amp;#34;replace&amp;#34; string.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;matches&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Simple text replacement&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;trigger&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;:espanso&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;replace&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Hi there!&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# NOTE: espanso uses YAML to define matches, so pay attention to the indentation!&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# But matches can also be dynamic:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Print the current date&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;trigger&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;:date&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;replace&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;{{mydate}}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;vars&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;mydate&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;type&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;date&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;params&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;format&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;%m/%d/%Y&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Print the output of a shell command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;trigger&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;:shell&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;replace&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;{{output}}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;vars&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;name&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;output&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;type&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;shell&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;params&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;cmd&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;echo &amp;#39;Hello from your shell&amp;#39;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# And much more! For more information, visit the docs: https://espanso.org/docs/&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The file is self-contained and well-documented enough that I do not need to look
up any docs nor use AI to add the desired entry:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# [...]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;matches&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# [...]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#f92672"&gt;trigger&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;:helm:ls&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;replace&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;helm ls --max 9999 -A | grep -i&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Once the file is saved, it&amp;rsquo;s magic ‚ú®, and it takes effect immediately.&lt;/p&gt;
&lt;p&gt;Example usage&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/05/espanso-hello-world/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;:helm:ls redis&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;becomes:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;helm ls --max &lt;span style="color:#ae81ff"&gt;9999&lt;/span&gt; -A | grep -i redis&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For reference, this is the full path to the file:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% espanso edit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Editing file: /Users/thiago.perrotta/Library/Application Support/espanso/match/base.yml&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I am particularly excited it&amp;rsquo;s YAML and it&amp;rsquo;s accessible in a stable location: it
should be quite easy to integrate it with my dotfiles later on.&lt;/p&gt;
&lt;p&gt;Its out-of-the-box usability (for developers who prefer text files) and
perceived speed are better than Raycast snippets.&lt;/p&gt;
&lt;p&gt;There are so many possibilities to explore: command &lt;del&gt;espansions&lt;/del&gt; expansions, LLM prompts,
email greetings, canned responses, and so on.&lt;/p&gt;
&lt;p&gt;For Raycast snippets I was using &lt;code&gt;@@&lt;/code&gt; as a prefix. Espanso seems to recommend
&lt;code&gt;:&lt;/code&gt;. Let&amp;rsquo;s see which one I will stick to.&lt;/p&gt;
&lt;p&gt;Also, I&amp;rsquo;d like to thank Farzad for the recommendation via email. It wasn&amp;rsquo;t the
first time I had heard about Espanso, but it has reinforced my desire to try it
out.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;In order to type a plain &lt;code&gt;:helm:ls&lt;/code&gt; without expansion (e.g. for this blog
post), type the following: &lt;code&gt;:helm:l{left arrow}{right arrow}s&lt;/code&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2025/05/espanso-hello-world/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Espanso: hello world"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>1Password SSH agent error</title><link>https://perrotta.dev/2025/05/1password-ssh-agent-error/</link><pubDate>Wed, 07 May 2025 12:52:00 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><guid>https://perrotta.dev/2025/05/1password-ssh-agent-error/</guid><description>&lt;p&gt;A day in the life:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% ssh &lt;span style="color:#f92672"&gt;{&lt;/span&gt;my-server&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;STDERR:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; sign_and_send_pubkey: signing failed &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; ED25519 &lt;span style="color:#e6db74"&gt;&amp;#34;/Users/thiago/.ssh/id_ed25519&amp;#34;&lt;/span&gt; from agent: agent refused operation
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; git@github.com: Permission denied &lt;span style="color:#f92672"&gt;(&lt;/span&gt;publickey&lt;span style="color:#f92672"&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; fatal: Could not read from remote repository.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Please make sure you have the correct access rights
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; and the repository exists.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What&amp;rsquo;s the matter?&lt;/p&gt;
&lt;p&gt;My ssh config is integrated with the &lt;a href="https://developer.1password.com/docs/ssh/agent/"&gt;1Password ssh
agent&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Host *
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # Use 1Password SSH agent when available
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # macOS only
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # Linux: &amp;#34;~/.1password/agent.sock&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; IdentityAgent &amp;#34;~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Solution&lt;/strong&gt;: Ensure 1Password is unlocked, so that the agent can be used.&lt;/p&gt;
&lt;p&gt;It can be unlocked from its macOS app, or from the CLI (&lt;code&gt;op signin --account {my-account}&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: 1Password SSH agent error"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: delete file, bypass trash</title><link>https://perrotta.dev/2025/04/macos-delete-file-bypass-trash/</link><pubDate>Fri, 25 Apr 2025 16:37:28 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/04/macos-delete-file-bypass-trash/</guid><description>&lt;p&gt;To delete a file in Finder on macOS without moving it to the trash, press
&lt;code&gt;Option&lt;/code&gt; + &lt;code&gt;Command&lt;/code&gt; + &lt;code&gt;Delete&lt;/code&gt; upon selecting the file.&lt;/p&gt;
&lt;p&gt;When using the CLI, of course, &lt;code&gt;rm&lt;/code&gt; is enough.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: delete file, bypass trash"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>maccy: pin items</title><link>https://perrotta.dev/2025/03/maccy-pin-items/</link><pubDate>Mon, 24 Mar 2025 13:21:46 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/03/maccy-pin-items/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2023/12/maccy-macos-clipboard-manager/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Sometimes it&amp;rsquo;s useful to have certain code snippets be easily accessible from
the clipboard manager.&lt;/p&gt;
&lt;p&gt;As I use &lt;a href="https://github.com/p0deje/Maccy"&gt;Maccy&lt;/a&gt;, I figured I should leverage
its built-in pinning feature to do so.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s not intuitive &lt;a href="https://github.com/p0deje/Maccy?tab=readme-ov-file#usage"&gt;how to do
it&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;first, focus an existing clipboard entry&lt;/li&gt;
&lt;li&gt;then press &lt;code&gt;OPTION (‚å•) + P&lt;/code&gt; (&amp;ldquo;p&amp;rdquo; for &amp;ldquo;pinning&amp;rdquo;)&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;The item will be moved to the top with a random but permanent keyboard
shortcut. To unpin it, press &lt;code&gt;OPTION (‚å•) + P&lt;/code&gt; again.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Pros&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;no need to keep a text editor (or notes app) opened with temporary clipboard
contents to keep copying from (=less overhead)&lt;/li&gt;
&lt;li&gt;no need to keep digging the clipboard manager history to find the same entry
over and over again&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This workflow is decent for temporary entries.
For semi-permanent ones, I should
look into &lt;a href="https://espanso.org/"&gt;Espanso&lt;/a&gt; at some point. For now, &lt;a href="https://perrotta.dev/2025/01/raycast-snippets/"&gt;Raycast
Snippets&lt;/a&gt; fills in this role.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: maccy: pin items"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Quick look preview YAML files on macOS</title><link>https://perrotta.dev/2025/02/quick-look-preview-yaml-files-on-macos/</link><pubDate>Tue, 18 Feb 2025 13:18:33 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/02/quick-look-preview-yaml-files-on-macos/</guid><description>&lt;p&gt;You may be familiar with &lt;a href="https://support.apple.com/en-gb/guide/mac-help/mh14119/mac"&gt;Quick
Look&lt;/a&gt; on macOS.&lt;/p&gt;
&lt;p&gt;On Finder, select a file, then press the space bar. A preview pop-up appears,
wherein you can take a quick glance at the file contents.&lt;/p&gt;
&lt;p&gt;Out-of-the-box many file formats are supported, even for images.&lt;/p&gt;
&lt;p&gt;For developers, two popular formats are not supported:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;markdown&lt;/li&gt;
&lt;li&gt;yaml&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I&amp;rsquo;ve been using &lt;a href="https://github.com/sbarex/QLMarkdown"&gt;qlmarkdown&lt;/a&gt; for markdown,
and it works well. There&amp;rsquo;s a homebrew package for it: &lt;code&gt;brew install --cask qlmarkdown&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Lately I wanted to add YAML as well. I found
&lt;a href="https://github.com/smittytone/PreviewYaml"&gt;PreviewYaml&lt;/a&gt;. It&amp;rsquo;s MIT-Licensed and
open source, but there&amp;rsquo;s no pre-built package for it, and it is not on homebrew
either. The author provides an app in the macOS App Store, but it&amp;rsquo;s not free.&lt;/p&gt;
&lt;p&gt;Upon digging deeper, I found
&lt;a href="https://github.com/sbarex/SourceCodeSyntaxHighlight"&gt;https://github.com/sbarex/SourceCodeSyntaxHighlight&lt;/a&gt;. It supports pretty much
every popular extension you&amp;rsquo;ll need as a developer (including &lt;code&gt;.yaml&lt;/code&gt;!). There&amp;rsquo;s
a package for it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% brew install --no-quarantine syntax-highlight&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It is simple and works as advertised.&lt;/p&gt;
&lt;p&gt;Should I uninstall &lt;code&gt;qlmarkdown&lt;/code&gt; then? Not really:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Markdown files (.md, .rmd): please use QLMarkdown which allows you to choose
whether to display formatted output or the highlighted source code.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Markdown files are not supported&lt;/p&gt;
&lt;p&gt;This is a deliberate choice. Most users want to see the formatted output and
not the source code of their markdown files. If you need to view the markdown
files (also with the possibility of choosing whether to show the formatting or
the source code) I have developed QLMarkdown.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;How nice! It turns out both extensions were developed by the same author. Thank
you, @sbarex!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Quick look preview YAML files on macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Upcoming calendar meeting in macOS menu bar with Raycast</title><link>https://perrotta.dev/2025/02/upcoming-calendar-meeting-in-macos-menu-bar-with-raycast/</link><pubDate>Sat, 08 Feb 2025 13:56:42 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>serenity</category><guid>https://perrotta.dev/2025/02/upcoming-calendar-meeting-in-macos-menu-bar-with-raycast/</guid><description>&lt;p&gt;Previously: &lt;a href="https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/"&gt;itsycal&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The same functionality is built into Raycast:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open Raycast settings&lt;/li&gt;
&lt;li&gt;Go to the Extensions tab&lt;/li&gt;
&lt;li&gt;Expand Calendar &amp;gt; My Schedule&lt;/li&gt;
&lt;li&gt;Under &amp;ldquo;Menu bar options &amp;gt; Show Events in menu bar&amp;rdquo;, select &amp;ldquo;1 hour before&amp;rdquo; (or
maybe &amp;ldquo;As long as they are upcoming&amp;rdquo;).&lt;/li&gt;
&lt;li&gt;Profit&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It integrates out-of-the-box with the calendar accounts added to the system.&lt;/p&gt;
&lt;p&gt;Clicking the menu bar item displays an agenda overview of other events scheduled
later today.&lt;/p&gt;
&lt;p&gt;Neat and simple! Discovery credits to &lt;a href="https://www.youtube.com/watch?v=bDj7gNfLhog"&gt;Daniel
Miessler&lt;/a&gt; ‚Äì via his &lt;a href="https://newsletter.danielmiessler.com/"&gt;Unsupervised
Learning&lt;/a&gt; podcast, which I strongly
recommend.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Upcoming calendar meeting in macOS menu bar with Raycast"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Raycast snippets</title><link>https://perrotta.dev/2025/01/raycast-snippets/</link><pubDate>Wed, 29 Jan 2025 13:52:23 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/01/raycast-snippets/</guid><description>&lt;p&gt;&lt;a href="https://www.raycast.com/"&gt;Raycast&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Your shortcut to everything.&lt;/p&gt;
&lt;p&gt;A collection of powerful productivity tools all within an extendable launcher.
Fast, ergonomic and reliable.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s for macOS only.
I originally heard of it via &lt;a href="https://world.hey.com/dhh"&gt;DHH&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;One of its features I like is &lt;a href="https://manual.raycast.com/snippets"&gt;snippets&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Write faster by using snippets to store and insert frequently used text.
Expand them automatically with a keyword.&lt;/p&gt;
&lt;p&gt;Use the Create Snippet command to store a new snippet. If you specify a
keyword, you can simply type it in any application to have it auto-expand
in-place.&lt;/p&gt;
&lt;p&gt;Snippets are handy for frequently used text such as canned email responses,
code or emojis.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, I can assign a &lt;code&gt;@@fzf&lt;/code&gt; shortcut so that it expands to&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[[&lt;/span&gt; -f /usr/share/doc/fzf/examples/key-bindings.bash &lt;span style="color:#f92672"&gt;]]&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; source /usr/share/doc/fzf/examples/key-bindings.bash&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;which is quicker than (i) typing it out, (ii) retrieving it from a wiki
and/or second brain app.&lt;/p&gt;
&lt;p&gt;Having text macros like these is handy whenever you do not have full control
over the environment.
If you happen to have control, you could always create a shell alias
and/or a &lt;code&gt;Makefile&lt;/code&gt; target for ergonomics and discoverability.&lt;/p&gt;
&lt;p&gt;These expansions can happen anywhere: terminal emulator, web browser, email
client, LLM prompt.&lt;/p&gt;
&lt;p&gt;A follow-up feature I am interested in exploring is the ability to export
snippets from Raycast to a location within version control, such as
&lt;a href="https://github.com/thiagowfx/.dotfiles"&gt;dotfiles&lt;/a&gt;. It would be perfect if I
could manage them all via text in an easy to edit format such as YAML.&lt;/p&gt;
&lt;p&gt;Another snippet example: &lt;code&gt;@@gca&lt;/code&gt; expands to:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;EDITOR=vim git commit --author=&amp;#34;Thiago Perrotta &amp;lt;{my-corp-email}&amp;gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I chose &lt;code&gt;@@&lt;/code&gt; because that&amp;rsquo;s a chord I am unlikely to type.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Raycast snippets"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>itsycal: system tray calendar on macOS</title><link>https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/</link><pubDate>Wed, 22 Jan 2025 00:24:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/01/itsycal-system-tray-calendar-on-macos/</guid><description>&lt;p&gt;Title says it all.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.mowglii.com/itsycal/"&gt;Itsycal&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Itsycal is a tiny menu bar calendar.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s free, it&amp;rsquo;s available via homebrew, it&amp;rsquo;s discrete and elegant.&lt;/p&gt;
&lt;p&gt;The only caveat is not the app&amp;rsquo;s fault: iCloud calendar synchronization takes
forever&amp;hellip;that&amp;rsquo;s something I should investigate some other day.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: itsycal: system tray calendar on macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Anki: insert emoji on macOS</title><link>https://perrotta.dev/2025/01/anki-insert-emoji-on-macos/</link><pubDate>Sat, 11 Jan 2025 00:28:48 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/01/anki-insert-emoji-on-macos/</guid><description>&lt;p&gt;There&amp;rsquo;s a longstanding bug in &lt;a href="https://apps.ankiweb.net/"&gt;Anki&lt;/a&gt; on macOS: it&amp;rsquo;s
not possible to insert an emoji in the editor view via the system emoji picker.&lt;/p&gt;
&lt;p&gt;Whenever you click an emoji, the emoji picker closes whilst nothing is inserted.&lt;/p&gt;
&lt;p&gt;This has always annoyed me.&lt;/p&gt;
&lt;p&gt;Today I found a
&lt;a href="https://forums.ankiweb.net/t/macos-emoji-picker-not-working-in-editor-view/4061"&gt;workaround&lt;/a&gt; (thanks Luc!):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For anyone who comes across this. I figured out a quick workaround. You have
to open the Emoji-Picker-Keyboard on your Mac and then select the Emoji and
pull it into the editor window with your mouse.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It works indeed!&lt;/p&gt;
&lt;p&gt;My previous alternative was to use the emoji picker to insert an emoji in
another application (e.g. the Notes.app), and then manually cut and paste it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Anki: insert emoji on macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS app shortcuts</title><link>https://perrotta.dev/2024/12/macos-app-shortcuts/</link><pubDate>Tue, 31 Dec 2024 22:26:00 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/12/macos-app-shortcuts/</guid><description>&lt;p&gt;Let&amp;rsquo;s say you want to assign a keyboard shortcut within a given app to invoke a
menu item.&lt;/p&gt;
&lt;p&gt;To illustrate: Assume that you want to map &lt;code&gt;Cmd + Shift + X&lt;/code&gt; within &lt;code&gt;Logseq.app&lt;/code&gt;
to &amp;ldquo;paste and match style&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://support.apple.com/en-ca/guide/mac-help/mchlp2271/mac"&gt;Apple Docs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;On your Mac, choose Apple menu &amp;gt; System Settings, click Keyboard in the
sidebar (you may need to scroll down), then click Keyboard Shortcuts.&lt;/p&gt;
&lt;p&gt;Select App Shortcuts on the left, click the Add button, click the Application
pop-up menu, then choose a specific app or All Applications.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Choose &lt;code&gt;Logseq.App&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;In the &amp;ldquo;Menu title&amp;rdquo; field, type the menu command for which you want to create
a shortcut, exactly as the command appears in the app, including the &amp;gt;
character (type -&amp;gt;), ellipses (type three periods without spaces), or other
punctuation.&lt;/p&gt;
&lt;p&gt;For example, to set a shortcut for the default ligature command in TextEdit
(Format &amp;gt; Font &amp;gt; Ligatures &amp;gt; Use Default), type Format-&amp;gt;Font-&amp;gt;Ligatures-&amp;gt;Use
Default in the &amp;ldquo;Menu title&amp;rdquo; field. To set a shortcut for the Export as PDF
command (File &amp;gt; Export as PDF‚Ä¶), type File-&amp;gt;Export as PDF‚Ä¶ in the field.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Type in &lt;code&gt;Edit-&amp;gt;Paste and Match Style&lt;/code&gt;, case sensitive, no spaces around the &lt;code&gt;-&amp;gt;&lt;/code&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Click in the &amp;ldquo;Keyboard shortcut&amp;rdquo; field, press the key combination that you
want to use as the keyboard shortcut, then click Done.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: This method doesn&amp;rsquo;t work if the keyboard shortcut is already mapped within the
app.&lt;/p&gt;
&lt;p&gt;Credits to &lt;a href="https://til.codeinthehole.com/posts/how-to-bind-custom-keyboard-shortcuts-to-nested-macos-menu-options/"&gt;David Winterbottom&lt;/a&gt; for the idea.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS app shortcuts"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Folderify: Generate macOS folder icons natively</title><link>https://perrotta.dev/2024/12/folderify-generate-macos-folder-icons-natively/</link><pubDate>Sat, 28 Dec 2024 06:15:58 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/12/folderify-generate-macos-folder-icons-natively/</guid><description>&lt;p&gt;&lt;a href="https://initialcharge.net/2024/06/folderify/"&gt;via Mike Rockwell&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You install it using Homebrew, point Folderify at an image file using a simple
Terminal command, and it spits out a macOS-style folder icon with that image
on it.&lt;/p&gt;
&lt;p&gt;I can&amp;rsquo;t believe I didn&amp;rsquo;t know this existed.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Project github: &lt;a href="https://github.com/lgarron/folderify"&gt;https://github.com/lgarron/folderify&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Usage:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% brew install folderify
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% folderify ~/Downloads/company_logo.webp ~/Company&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I got our company logo lazily with Google Images + filtering for transparent
images. &lt;code&gt;.webp&lt;/code&gt; worked just fine, &lt;code&gt;.png&lt;/code&gt; would have worked as well.&lt;/p&gt;
&lt;p&gt;The end result is really nice. It&amp;rsquo;s a small modification that &lt;a href="https://www.netflix.com/title/81231940"&gt;sparks
joy&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Folderify: Generate macOS folder icons natively"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Default apps 2024</title><link>https://perrotta.dev/2024/12/default-apps-2024/</link><pubDate>Sat, 21 Dec 2024 16:02:54 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><category>pkm</category><guid>https://perrotta.dev/2024/12/default-apps-2024/</guid><description>&lt;p&gt;The list of my default apps for this year.&lt;/p&gt;
&lt;p&gt;In the past I would maintain an &lt;a href="https://uses.tech/"&gt;&amp;ldquo;uses&amp;rdquo;&lt;/a&gt; page in my blog, but I no longer believe in it.
User needs change all the time, and it&amp;rsquo;s a chore to keep them up-to-date.
People shouldn&amp;rsquo;t be defined by the software they use.&lt;/p&gt;
&lt;p&gt;That said, having a clean snapshot of the software I use at a fixed point in time isn&amp;rsquo;t a bad proposition.
It doesn&amp;rsquo;t need to be maintained.
I will probably look back at it within 5 years and laugh at myself for how many things changed.
And also for how many didn&amp;rsquo;t.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Browser: Google Chrome on macOS, Chromium on Linux, Safari on iOS.&lt;/li&gt;
&lt;li&gt;Search: A combination of Google and DuckDuckGo (mostly for their &lt;a href="https://duckduckgo.com/bangs"&gt;!bangs&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;Writing: A combination of VSCode, &lt;code&gt;vim&lt;/code&gt; and &lt;a href="https://github.com/MarkEdit-app/MarkEdit"&gt;MarkEdit&lt;/a&gt; (macOS markdown editor app). I never got around to long-form writing in Obsidian or Logseq, however it&amp;rsquo;s something I strive to.&lt;/li&gt;
&lt;li&gt;Cloud File Storage: There&amp;rsquo;s no need to share this. Basic OpSec. Why would people share it?&lt;/li&gt;
&lt;li&gt;Chat: WhatsApp remains king in terms of popularity, despite Telegram being superior from an architectural and usability perspective for power users. Facebook Messenger is officially dead at this point. And I&amp;rsquo;m too much of a millennial for all other apps (Discord, Matrix, etc). Disappearing messages exist in all of these, except Instagram.&lt;/li&gt;
&lt;li&gt;Scheduling: There&amp;rsquo;s no real choice here. You use the platform your employer uses. Otherwise, Google Calendar is the most sensible choice other than self-hosting.&lt;/li&gt;
&lt;li&gt;Video Calls: Ditto. I am way too used to Google Meet to justify switching to an alternative at this point.&lt;/li&gt;
&lt;li&gt;Music: Spotify, hands down. YouTube Music is a good fallback. There&amp;rsquo;s no need to pay for YouTube Premium for music, do your research.&lt;/li&gt;
&lt;li&gt;Podcasts: Overcast on iOS.&lt;/li&gt;
&lt;li&gt;Password Management: Once again, why would you share this?&lt;/li&gt;
&lt;li&gt;Code Editor: VScode and &lt;code&gt;vim&lt;/code&gt;. Maybe I&amp;rsquo;ll switch to &lt;code&gt;neovim&lt;/code&gt; at some point. I refrain from using IDEs in general but, when I need to, JetBrains is the answer. I tried &lt;a href="https://zed.dev/"&gt;&lt;code&gt;zed&lt;/code&gt;&lt;/a&gt; this year but wasn&amp;rsquo;t convinced, and their core team is quite small. The flurry of &amp;ldquo;AI&amp;rdquo;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2024/12/default-apps-2024/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; editors should be ignored, as none of them are likely to stick long-term. Instead, it&amp;rsquo;s better to invest in &amp;ldquo;AI&amp;rdquo; tooling that is editor agnostic; for example, Simon Willison&amp;rsquo;s &lt;a href="https://github.com/simonw/llm"&gt;&lt;code&gt;llm&lt;/code&gt;&lt;/a&gt;, or GitHub Copilot.&lt;/li&gt;
&lt;li&gt;Terminal: iTerm2 on macOS. I haven&amp;rsquo;t used desktop linux in a while (:sad:), but I&amp;rsquo;d probably still stick to Tilix and/or Alacritty there. I no longer use hterm (ChromeOS).&lt;/li&gt;
&lt;li&gt;VPN: Unless you&amp;rsquo;re rolling your own, it doesn&amp;rsquo;t matter too much. Avoid the big players if you can afford to.&lt;/li&gt;
&lt;li&gt;Bookmarks: None. &lt;a href="https://www.goodreads.com/book/show/25614984-spark-joy"&gt;Absolutely none&lt;/a&gt;. When I need to store &lt;em&gt;transient&lt;/em&gt; link lists, I use my Second Brain app to do so.&lt;/li&gt;
&lt;li&gt;Read It Later: Ditto as above. Otherwise: starring articles on Miniflux, or keeping Safari tabs open until I get to them, or parking a handful of items in an &amp;ldquo;inbox&amp;rdquo; browser bookmarks folder.&lt;/li&gt;
&lt;li&gt;Mail Client: The official clients of my email providers. No agnostic app at this time. It&amp;rsquo;s especially inconvenient to do so on iOS.&lt;/li&gt;
&lt;li&gt;Mail Server: N/A.&lt;/li&gt;
&lt;li&gt;Launcher: &lt;code&gt;Cmd-Space&lt;/code&gt; on macOS a.k.a. Spotlight. I keep Raycast around but I rarely use it. On Linux &lt;code&gt;i3-dmenu-desktop&lt;/code&gt; is still my favorite.&lt;/li&gt;
&lt;li&gt;Screenshots: &lt;code&gt;Cmd-Shift-4&lt;/code&gt; on macOS, or &lt;code&gt;scrot&lt;/code&gt; on Linux.&lt;/li&gt;
&lt;li&gt;Menu Bar: &lt;a href="https://github.com/dwarvesf/hidden"&gt;Hidden Bar&lt;/a&gt;. It&amp;rsquo;s free, and available as a cask on homebrew.&lt;/li&gt;
&lt;li&gt;Containers: Rancher Desktop.&lt;/li&gt;
&lt;li&gt;Automation: None. I tried Hammerspoon this year but found no use for it.&lt;/li&gt;
&lt;li&gt;Second Brain: A mixture of Obsidian and Logseq. Which I&amp;rsquo;d really like to end, it would be easier to have a single app to rule them all, as they both support multiple vaults / graphs anyway (e.g. to partition personal vs work notes).&lt;/li&gt;
&lt;li&gt;Operating System: &lt;a href="https://alpinelinux.org/"&gt;Alpine Linux&lt;/a&gt; is my current favorite for servers, and I&amp;rsquo;m biased anyway because I maintain a couple of aports (packages) there. For desktop, it&amp;rsquo;s awfully hard to use anything other than macOS ever since M1 processors got released. I miss Linux desktop from time to time but realistically it&amp;rsquo;s no longer an intrinsic goal of mine; that said, I&amp;rsquo;d likely go back to my beloved Arch Linux should that ever reoccur.&lt;/li&gt;
&lt;li&gt;Shell: &lt;code&gt;zsh&lt;/code&gt; + &lt;a href="https://grml.org/zsh/"&gt;&lt;code&gt;grml-zsh-config&lt;/code&gt;&lt;/a&gt;, no change here. Sometimes I think of migrating to &lt;code&gt;fish&lt;/code&gt;, but the POSIX incompability always discourages me to do so.&lt;/li&gt;
&lt;li&gt;Terminal Multiplexer: &lt;code&gt;tmux&lt;/code&gt;, but only for remote sessions (&lt;code&gt;ssh&lt;/code&gt;). Locally I tend to just open new terminal tabs on VSCode and/or iTerm2. Alas, &lt;code&gt;tmux&lt;/code&gt; + &lt;code&gt;VSCode&lt;/code&gt; do not play well together anyway (citation needed, for another day).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This post was inspired by &lt;a href="https://micro.webology.dev/2024/12/19/default-apps.html"&gt;https://micro.webology.dev/2024/12/19/default-apps.html&lt;/a&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;For the correct way to refer to them, pick one of: LLMs, Gen AI, or &amp;ldquo;AI&amp;rdquo;. &lt;em&gt;Never&lt;/em&gt; drop the quotes when using the plain term! Otherwise you fall into the same trap for using the term &amp;ldquo;crypto&amp;rdquo; to distinguish between cryptography and cryptocurrency.&amp;#160;&lt;a href="https://perrotta.dev/2024/12/default-apps-2024/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Default apps 2024"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pkm/"&gt;#pkm&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Compress a .pdf in macOS with Preview.app</title><link>https://perrotta.dev/2024/11/compress-a-.pdf-in-macos-with-preview.app/</link><pubDate>Sat, 30 Nov 2024 00:22:38 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/11/compress-a-.pdf-in-macos-with-preview.app/</guid><description>&lt;p&gt;All hail to &lt;a href="https://support.apple.com/en-ca/guide/preview/prvw1509/mac"&gt;Apple
Documentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The instructions are very simple:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;open the &lt;code&gt;.pdf&lt;/code&gt; file in Preview.app&lt;/li&gt;
&lt;li&gt;export it (&lt;code&gt;File &amp;gt; Export&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;in &amp;ldquo;quartz filter&amp;rdquo;, select the &amp;ldquo;reduce file size&amp;rdquo; option&lt;/li&gt;
&lt;li&gt;save&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I observed a scanned document with ~3.3MiB of file size be compressed to
~350KiB. Not bad! And although not very customizable, it&amp;rsquo;s very user-friendly
and easy to remember.&lt;/p&gt;
&lt;p&gt;The alternative would have been to use GhostScript (&lt;code&gt;gs&lt;/code&gt;). For example, ChatGPT
suggests:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% gs -sDEVICE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;pdfwrite -dCompatibilityLevel&lt;span style="color:#f92672"&gt;=&lt;/span&gt;1.4 -dPDFSETTINGS&lt;span style="color:#f92672"&gt;=&lt;/span&gt;/screen -dNOPAUSE -dQUIET -dBATCH -sOutputFile&lt;span style="color:#f92672"&gt;=&lt;/span&gt;output.pdf input.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Compress a .pdf in macOS with Preview.app"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>sort deterministically</title><link>https://perrotta.dev/2024/11/sort-deterministically/</link><pubDate>Tue, 12 Nov 2024 11:25:12 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/11/sort-deterministically/</guid><description>&lt;p&gt;We had the following code in a CI pipeline:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;find apps/base/ -type d -exec basename &lt;span style="color:#f92672"&gt;{}&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;\;&lt;/span&gt; | sort | sed -e &lt;span style="color:#960050;background-color:#1e0010"&gt;&amp;#39;&lt;/span&gt;s/^/- /&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It lists all directories in &lt;code&gt;apps/base&lt;/code&gt;.
We add &lt;code&gt;sort&lt;/code&gt; to make the output canonical.
The &lt;code&gt;sed&lt;/code&gt; part is just to make an unordered list out of it.&lt;/p&gt;
&lt;p&gt;There was an issue though.&lt;/p&gt;
&lt;p&gt;In my machine, and in CI (GitHub Actions), the following output was produced:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;garden-info-export
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gardenia&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I use macOS + &lt;code&gt;sort&lt;/code&gt; from GNU &lt;code&gt;coreutils&lt;/code&gt; via homebrew:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% which sort
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/opt/homebrew/opt/coreutils/libexec/gnubin/sort
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% sort --version
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sort &lt;span style="color:#f92672"&gt;(&lt;/span&gt;GNU coreutils&lt;span style="color:#f92672"&gt;)&lt;/span&gt; 9.5
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Copyright &lt;span style="color:#f92672"&gt;(&lt;/span&gt;C&lt;span style="color:#f92672"&gt;)&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;2024&lt;/span&gt; Free Software Foundation, Inc.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;License GPLv3+: GNU GPL version &lt;span style="color:#ae81ff"&gt;3&lt;/span&gt; or later &amp;lt;https://gnu.org/licenses/gpl.html&amp;gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;This is free software: you are free to change and redistribute it.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;There is NO WARRANTY, to the extent permitted by law.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Written by Mike Haertel and Paul Eggert.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In a coworker&amp;rsquo;s machine (Ubuntu Linux), it produced the following instead:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gardenia
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;garden-info-export&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We had the same &lt;code&gt;locale&lt;/code&gt; (&lt;code&gt;en_US.UTF-8&lt;/code&gt;), and the coworker was also using &lt;code&gt;sort&lt;/code&gt; from GNU &lt;code&gt;coreutils&lt;/code&gt;. Puzzling.&lt;/p&gt;
&lt;p&gt;In order to force a deterministic output, I proposed to use &lt;code&gt;-d&lt;/code&gt;. From &lt;code&gt;sort(1)&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-d, --dictionary-order
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	Consider only blank spaces and alphanumeric characters in comparisons.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And therein reproducibility was achieved&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2024/11/sort-deterministically/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;I do not really know why the outputs were different even with the same &lt;code&gt;locale&lt;/code&gt; (&lt;code&gt;LANG&lt;/code&gt;, &lt;code&gt;LC_COLLATE&lt;/code&gt;, &lt;code&gt;LC_ALL&lt;/code&gt;, etc). For future reference, my current locale:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% locale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LANG&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_COLLATE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_CTYPE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_MESSAGES&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_MONETARY&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_NUMERIC&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_TIME&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_ALL&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And my coworker&amp;rsquo;s:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ locale
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LANG&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LANGUAGE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_CTYPE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_NUMERIC&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_TIME&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_COLLATE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_MONETARY&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_MESSAGES&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_PAPER&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_NAME&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_ADDRESS&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_TELEPHONE&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_MEASUREMENT&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_IDENTIFICATION&lt;span style="color:#f92672"&gt;=&lt;/span&gt;en_US.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;LC_ALL&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;In this case, the coworker&amp;rsquo;s version became the canonical one.&amp;#160;&lt;a href="https://perrotta.dev/2024/11/sort-deterministically/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: sort deterministically"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Life without ack</title><link>https://perrotta.dev/2024/09/life-without-ack/</link><pubDate>Sun, 22 Sep 2024 14:30:29 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/09/life-without-ack/</guid><description>&lt;p&gt;Every macOS upgrade comes with disappointment and sorrow in the form of some
tool, dependency / library or system-wide configuration breaking&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2024/09/life-without-ack/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;This time: the upgrade to macOS Sequoia (15.0) broke &lt;code&gt;ack&lt;/code&gt; (Perl).&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% ack
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;zsh: /opt/homebrew/bin/ack: bad interpreter: /usr/bin/perl5.30: no such file or directory&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I desperately needed to use &lt;code&gt;ack&lt;/code&gt;, however there was no internet connection. And
I didn&amp;rsquo;t have any of its alternatives installed (e.g. &lt;code&gt;ag&lt;/code&gt;, &lt;code&gt;ripgrep&lt;/code&gt; / &lt;code&gt;rg&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Then the best way is to fall back to good ol&amp;rsquo; &lt;code&gt;grep&lt;/code&gt;&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2024/09/life-without-ack/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% grep [-l] &amp;#39;\bref\b&amp;#39; **/*&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Alternatively, within a git repository, there is &lt;code&gt;git grep&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git grep [-l] &amp;#39;\bref\b&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;With &lt;code&gt;git grep&lt;/code&gt; there is no need to specify which files to &lt;code&gt;grep&lt;/code&gt;, as it entails
all files that belong to the repository&amp;hellip;which happens to be a caveat for newly
created files that were not yet &lt;code&gt;git add&lt;/code&gt;-ed.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Homebrew (&lt;code&gt;brew&lt;/code&gt;) being &lt;em&gt;almost always&lt;/em&gt; one of them.&amp;#160;&lt;a href="https://perrotta.dev/2024/09/life-without-ack/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;If &lt;code&gt;grep&lt;/code&gt; ever breaks, we are screwed.&amp;#160;&lt;a href="https://perrotta.dev/2024/09/life-without-ack/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Life without ack"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Force captive portal to open</title><link>https://perrotta.dev/2024/02/force-captive-portal-to-open/</link><pubDate>Thu, 22 Feb 2024 09:33:57 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2024/02/force-captive-portal-to-open/</guid><description>&lt;p&gt;Sometimes, when connecting to public Wi-Fi hotposts, especially in airports and
coffee shops, the captive portal gateway required to get internet access will
simply not show up.&lt;/p&gt;
&lt;p&gt;The simplest way to force it to do so is to &lt;a href="https://www.youtube.com/watch?v=DPqdyoTpyEs"&gt;turn the Wi-Fi off and on
again&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Should it not work, the second way is to open your favorite browser and navigate
to &lt;a href="https://captive.apple.com"&gt;captive.apple.com&lt;/a&gt; (macOS, iOS).&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Force captive portal to open"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: remove all empty directories</title><link>https://perrotta.dev/2023/12/macos-remove-all-empty-directories/</link><pubDate>Fri, 29 Dec 2023 02:02:19 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2023/12/macos-remove-all-empty-directories/</guid><description>&lt;p&gt;For some odd reason my &lt;a href="https://calibre-ebook.com"&gt;Calibre&lt;/a&gt; backup to cloud
storage had a bunch of empty directories. I&amp;rsquo;ve been meaning to remove them, but
it&amp;rsquo;s cumbersome to do so from the web client.&lt;/p&gt;
&lt;p&gt;Instead, let&amp;rsquo;s do it from a local client.&lt;/p&gt;
&lt;p&gt;Upon installing the cloud storage software, a local directory is exposed under
&lt;code&gt;/Users/$USER/Library/CloudStorage&lt;/code&gt; (macOS).&lt;/p&gt;
&lt;p&gt;My first instinct is to use &lt;a href="https://man.archlinux.org/man/find.1.en"&gt;&lt;code&gt;find(1)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ find -empty -type d -delete&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;However that does not work on macOS:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;find: illegal option -- e
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;usage: find [-H | -L | -P] [-EXdsx] [-f path] path ... [expression]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; find [-H | -L | -P] [-EXdsx] -f path [path ...] [expression]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My second go to choice is &lt;a href="https://man.archlinux.org/man/fd.1.en"&gt;&lt;code&gt;fd(1)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ fd -t e -x rmdir&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;this lists all empty directories and invokes &lt;code&gt;rmdir&lt;/code&gt; on each of them.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: remove all empty directories"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: sudo with touch ID: survive upgrades</title><link>https://perrotta.dev/2023/12/macos-sudo-with-touch-id-survive-upgrades/</link><pubDate>Mon, 04 Dec 2023 22:40:21 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><guid>https://perrotta.dev/2023/12/macos-sudo-with-touch-id-survive-upgrades/</guid><description>&lt;p&gt;Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.&lt;/p&gt;
&lt;p&gt;It is also possible to use it for &lt;code&gt;sudo&lt;/code&gt; authentication via &lt;a href="https://en.wikipedia.org/wiki/Pluggable_authentication_module"&gt;PAM&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This was previously covered &lt;a href="https://perrotta.dev/2022/03/macos-sudo-with-touch-id/"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Now, with macOS Sonoma, it&amp;rsquo;s also possible to make this setting survive OS upgrades.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% sudo cp /etc/pam.d/sudo_local&lt;span style="color:#f92672"&gt;{&lt;/span&gt;.template,&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% sudo $EDITOR /etc/pam.d/sudo_local&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then uncomment (or add, if not existing) the following line:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;auth sufficient pam_tid.so&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You can test it out by opening a new terminal and executing &lt;code&gt;sudo echo&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Credits: &lt;a href="https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/"&gt;https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: sudo with touch ID: survive upgrades"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Maccy macOS clipboard manager</title><link>https://perrotta.dev/2023/12/maccy-macos-clipboard-manager/</link><pubDate>Sat, 02 Dec 2023 15:27:06 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2023/12/maccy-macos-clipboard-manager/</guid><description>&lt;p&gt;&lt;strong&gt;Strongly recommended&lt;/strong&gt; to all software developers who use macOS: &lt;a href="https://maccy.app/"&gt;Maccy&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Clipboard manager for macOS which does one job - keep your copy history at hand. Period.&lt;/p&gt;
&lt;p&gt;Lightweight. Open source. No fluff.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Shortcut&lt;/strong&gt;: &lt;code&gt;Cmd + Shift + C&lt;/code&gt; to open a clipboard menu with all your recently
copied items, plus a search bar for quick grepping.&lt;/p&gt;
&lt;p&gt;Hands down this is the best piece of software I added to my workflow in 2023,
competing with &lt;a href="https://obsidian.md/"&gt;Obsidian&lt;/a&gt; and
&lt;a href="https://culturedcode.com/things/"&gt;Things&lt;/a&gt; in terms of productivity.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Maccy macOS clipboard manager"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Keychron K2 on macOS: fix Home and End keys</title><link>https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/</link><pubDate>Fri, 22 Apr 2022 19:04:17 -0400</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><guid>https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/</guid><description>&lt;p&gt;&lt;strong&gt;Issue&lt;/strong&gt;: For whatever reason, the &lt;code&gt;Home&lt;/code&gt; and &lt;code&gt;End&lt;/code&gt; keys on my &lt;a href="https://perrotta.dev/2022/01/keychron-k2-review/"&gt;Keychron K2&lt;/a&gt; do not work as intended on macOS.&lt;/p&gt;
&lt;h2 id="expectations-vs-reality"&gt;Expectations vs Reality&lt;/h2&gt;
&lt;p&gt;For example, when using a text editor such as TextMate or a web browser like Chrome, I&amp;rsquo;d expect:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Home&lt;/code&gt; to position the text cursor in the beginning of the line (√† la &lt;code&gt;C-a&lt;/code&gt; in emacs)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;End&lt;/code&gt; to position the text cursor in the end of the line (√† la &lt;code&gt;C-e&lt;/code&gt; in emacs)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The only way to provoke these effects &lt;em&gt;out-of-the-box&lt;/em&gt; is by pressing, respectively, the &lt;code&gt;Cmd + Left&lt;/code&gt; and &lt;code&gt;Cmd + Right&lt;/code&gt; shortcuts, as you would normally do in a Macbook laptop native keyboard.&lt;/p&gt;
&lt;p&gt;This is very annoying because it only happens in macOS&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;: the &lt;code&gt;Home&lt;/code&gt; and &lt;code&gt;End&lt;/code&gt; keys work just fine in both Linux and Windows. &lt;a href="https://www.reddit.com/r/Keychron/comments/ooice5/home_and_end_keys_not_working_on_monterrey/"&gt;A reddit user&lt;/a&gt; reported the same issue in &lt;code&gt;/r/keychron&lt;/code&gt;, but the existing thread has no proposed solutions.&lt;/p&gt;
&lt;h2 id="enter-karabiner-elements"&gt;Enter Karabiner Elements&lt;/h2&gt;
&lt;p&gt;I&amp;rsquo;ve always heard good things about &lt;a href="http://karabiner-elements.pqrs.org"&gt;Karabiner Elements&lt;/a&gt; as a praised one-size-fits-all application for keyboards and macros in macOS, thus decided to give it a try. &lt;strong&gt;Bonus points&lt;/strong&gt;: it is &lt;a href="https://github.com/pqrs-org/Karabiner-Elements"&gt;open source&lt;/a&gt;, released into the public domain.&lt;/p&gt;
&lt;p&gt;Upon installing it with &lt;a href="https://formulae.brew.sh/cask/karabiner-elements"&gt;Homebrew Cask&lt;/a&gt; (&lt;code&gt;brew install karabiner-elements&lt;/code&gt;), I executed it. Then I needed to give a bunch of permissions to the application via &lt;code&gt;macOS Settings &amp;gt; Security &amp;amp; Privacy &amp;gt; Privacy &amp;gt; Input Monitoring&lt;/code&gt;. The following apps were whitelisted accordingly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;karabiner_grabber&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;karabiner_observer&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Karabiner-EventViewer.app&lt;/code&gt;: this one is optional, but useful for debugging&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The app is straightforward to use. It allows you to do all sorts of reactions to key codes input events.&lt;/p&gt;
&lt;p&gt;I had a simple idea: I wanted to map &lt;code&gt;Home&lt;/code&gt; to &lt;code&gt;Cmd + Left&lt;/code&gt;, and &lt;code&gt;End&lt;/code&gt; to &lt;code&gt;Cmd + Right&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Unfortunately these are considered &amp;ldquo;Complex modifications&amp;rdquo; because they map one origin key to two destination keys. &amp;ldquo;Simple modifications&amp;rdquo; are &lt;em&gt;one-to-one&lt;/em&gt; key mappings. Why is it unfortunate? Because it doesn&amp;rsquo;t seem to be possible to do such mappings via the app UI. Apparently one needs to express those mappings in a &lt;code&gt;.json&lt;/code&gt; file instead.&lt;/p&gt;
&lt;h2 id="ah-communities"&gt;Ah, communities&lt;/h2&gt;
&lt;p&gt;Sure, no problem, I was about to do it but then I realized there&amp;rsquo;s an &lt;a href="https://ke-complex-modifications.pqrs.org"&gt;official website&lt;/a&gt; for community-maintained mappings. The website is well organized and curated. Why create something fully from scratch when I could just reuse an existing one?&lt;/p&gt;
&lt;p&gt;I found a &amp;ldquo;Keychron K2&amp;rdquo; category which made me instantly happy but it turned out not to be useful, as there were only two defined mappings therein:&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;Change Keychron K2 keyboard layout to more closely resemble an Apple keyboard&lt;/li&gt;
&lt;li&gt;Remap some Keychrom K2(US) keys to make it less painful to switch from Macbook(RU) keyboard&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;None of these mattered to me. Then I searched for &lt;code&gt;home to cmd&lt;/code&gt; which led me to &lt;a href="https://ke-complex-modifications.pqrs.org/#HomeEnd"&gt;this entry&lt;/a&gt;, which had exactly the mappings I wanted:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Home and End&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Home to Command Left&lt;/li&gt;
&lt;li&gt;End to Command Right&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://ke-complex-modifications.pqrs.org/json/HomeEnd.json"&gt;Its resulting JSON&lt;/a&gt; looks roughly like this (irrelevant bits stripped for the sake of brevity):&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;title&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Home and End&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;rules&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Home to Command Left&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;manipulators&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;basic&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;from&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;key_code&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;home&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;to&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;key_code&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;left_arrow&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;modifiers&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;End to Command Right&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;manipulators&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;basic&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;from&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;key_code&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;end&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;to&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;key_code&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;right_arrow&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;modifiers&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s conveniently an &lt;strong&gt;Import&lt;/strong&gt; button in the website though, which automatically opens the mappings in Karabiner Elements, so I didn&amp;rsquo;t even need to copy and paste the JSON.&lt;/p&gt;
&lt;h2 id="verdict"&gt;Verdict&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;End Result&lt;/strong&gt;: It worked flawlessly! The only caveat is that from now on I need to keep the Karabiner Elements application running as a daemon, but it is well justified. Plus, if I ever need&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; to map additional keys in the future, now I already have a workflow in place to do so.&lt;/p&gt;
&lt;p&gt;Karabiner is like having &lt;a href="https://qmk.fm"&gt;QMK&lt;/a&gt; purely at the software layer, which works for any keyboard whatsoever.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;As of this writing: macOS Monterey: 12.3.1.&amp;#160;&lt;a href="https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it"&gt;https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it&lt;/a&gt;&amp;hellip;&amp;#160;&lt;a href="https://perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Keychron K2 on macOS: fix Home and End keys"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS terminal app gripes</title><link>https://perrotta.dev/2022/03/macos-terminal-app-gripes/</link><pubDate>Sat, 26 Mar 2022 02:28:15 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2022/03/macos-terminal-app-gripes/</guid><description>&lt;p&gt;&lt;code&gt;Terminal.app&lt;/code&gt; is a pretty decent terminal emulator for macOS, with sensible
defaults. That said, I have my own gripes about it, but the list is
surprisingly small.&lt;/p&gt;
&lt;h2 id="1-no-osc-52-support"&gt;1. No OSC-52 support&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://github.com/roy2220/osc52pty"&gt;https://github.com/roy2220/osc52pty&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;OSC 52 is one of Xterm Control Sequences, which is designated for clipboard setting. Once a terminal supporting OSC 52 catches a text in the form of OSC 52 from the output, instead of printing the text onto the screen, it decodes the text first and then sends the content to the system clipboard.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Although &lt;code&gt;Terminal.app&lt;/code&gt; does NOT support OSC 52, here [osc52pty] is the workaround for it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I dislike this workaround because it requires an external binary. Even though it is a single binary because it is a Golang executable, I still dislike the external dependency.&lt;/p&gt;
&lt;h2 id="2-no-true-color-256-colors"&gt;2. No true color (256 colors)&lt;/h2&gt;
&lt;p&gt;What is true color? See &lt;a href="https://stackoverflow.com/questions/6403744/are-there-terminals-that-support-true-color"&gt;stack overflow&lt;/a&gt; for context.&lt;/p&gt;
&lt;p&gt;Run the &lt;a href="https://gist.github.com/XVilka/8346728"&gt;following&lt;/a&gt; to print a color band, a smooth (gradient) output indicates true color support:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;awk &lt;span style="color:#e6db74"&gt;&amp;#39;BEGIN{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; s=&amp;#34;/\\/\\/\\/\\/\\&amp;#34;; s=s s s s s s s s;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; for (colnum = 0; colnum&amp;lt;77; colnum++) {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; r = 255-(colnum*255/76);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; g = (colnum*510/76);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; b = (colnum*255/76);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; if (g&amp;gt;255) g = 510-g;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; printf &amp;#34;\033[48;2;%d;%d;%dm&amp;#34;, r,g,b;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; printf &amp;#34;\033[38;2;%d;%d;%dm&amp;#34;, 255-r,255-g,255-b;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; printf &amp;#34;%s\033[0m&amp;#34;, substr(s,colnum+1,1);
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; printf &amp;#34;\n&amp;#34;;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Terminal.app&lt;/code&gt; will not print a gradient.&lt;/p&gt;
&lt;h2 id="3-no-gpu-acceleration"&gt;3. No GPU acceleration&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://unix.stackexchange.com/q/658709"&gt;https://unix.stackexchange.com/q/658709&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Q: What are the advantages of hardware-accelerated terminal emulators?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;A: They can potentially be faster at outputting and refreshing vast amounts of information. It could also allow for smooth(er) scrolling. Human beings however are quite slow at reading this information, [&amp;hellip;] the average person is unlikely to be able to comprehend it anyways. CPU usage could be lower but it needs to be tested.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;Terminal.app&lt;/code&gt; isn&amp;rsquo;t GPU accelerated.&lt;/p&gt;
&lt;h2 id="recommendations"&gt;Recommendations&lt;/h2&gt;
&lt;p&gt;Both &lt;a href="https://alacritty.org"&gt;alacritty&lt;/a&gt; and &lt;a href="https://sw.kovidgoyal.net/kitty/"&gt;kitty&lt;/a&gt; are decent replacements (or complements) for &lt;code&gt;Terminal.app&lt;/code&gt; that work out-of-the-box, with sensible defaults including all the aforementioned points.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS terminal app gripes"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: sudo with touch ID</title><link>https://perrotta.dev/2022/03/macos-sudo-with-touch-id/</link><pubDate>Mon, 21 Mar 2022 02:13:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><guid>https://perrotta.dev/2022/03/macos-sudo-with-touch-id/</guid><description>&lt;p&gt;Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.&lt;/p&gt;
&lt;p&gt;It is also possible to use it for &lt;code&gt;sudo&lt;/code&gt; authentication via &lt;a href="https://en.wikipedia.org/wiki/Pluggable_authentication_module"&gt;PAM&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% $EDITOR /etc/pam.d/sudo
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# sudo: auth account password session&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;auth sufficient pam_tid.so &lt;span style="color:#75715e"&gt;# &amp;lt;== add this line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;auth sufficient pam_smartcard.so
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;auth required pam_opendirectory.so
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;account required pam_permit.so
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;password required pam_deny.so
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;session required pam_permit.so&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Once the file is saved with the added line, a command with &lt;code&gt;sudo&lt;/code&gt; will spawn the touch ID prompt. I confirmed it works on both Terminal.app and Kitty.&lt;/p&gt;
&lt;p&gt;This solution &lt;a href="https://apple.stackexchange.com/a/392407"&gt;does not&lt;/a&gt; work within &lt;code&gt;tmux&lt;/code&gt; (confirmed), and apparently within iTerm2 as well (not confirmed). A separate PAM module is needed to do so (&lt;a href="https://github.com/fabianishere/pam_reattach"&gt;&lt;code&gt;pam_reattach.so&lt;/code&gt;&lt;/a&gt;). I&amp;rsquo;d rather keep my core dependencies surface small though and not include a third party, so for now I am satisfied with the native touch ID module.&lt;/p&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://sixcolors.com/post/2020/11/quick-tip-enable-touch-id-for-sudo/"&gt;https://sixcolors.com/post/2020/11/quick-tip-enable-touch-id-for-sudo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://apple.stackexchange.com/a/306324"&gt;https://apple.stackexchange.com/a/306324&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: sudo with touch ID"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ nix-env in a nutshell for basic usage in macOS</title><link>https://perrotta.dev/2022/02/nix-env-in-a-nutshell-for-basic-usage-in-macos/</link><pubDate>Wed, 16 Feb 2022 20:48:02 -0500</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>macos</category><guid>https://perrotta.dev/2022/02/nix-env-in-a-nutshell-for-basic-usage-in-macos/</guid><description>&lt;p&gt;I am currently evaluating &lt;a href="https://nixos.org/download.html"&gt;Nix&lt;/a&gt; as a
replacement for &lt;a href="https://brew.sh"&gt;Homebrew&lt;/a&gt; CLI apps in macOS&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2022/02/nix-env-in-a-nutshell-for-basic-usage-in-macos/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.
&lt;a href="https://wickedchicken.github.io/post/macos-nix-setup/"&gt;Others&lt;/a&gt;
&lt;a href="https://ianthehenry.com/posts/how-to-learn-nix/switching-from-homebrew-to-nix/"&gt;have&lt;/a&gt;
&lt;a href="https://ghedam.at/15490/so-tell-me-about-nix"&gt;previously&lt;/a&gt; written about this.&lt;/p&gt;
&lt;p&gt;My goal is to keep a sane learning curve and learn things on-the-fly, only as
needed. Nix is a massive ecosystem and has so many batteries included and
components (NixOS, NixPkgs, NixOps, Nix programming language, nix-shell,
nix-env, nix-darwin, home-manager, &amp;hellip;). The good news is that those components
are for the most part modular, there&amp;rsquo;s no need to adopt them all in order to
reap the benefits that Nix provides.&lt;/p&gt;
&lt;p&gt;For now, I am only adopting &lt;code&gt;nix-env&lt;/code&gt; and &lt;code&gt;nix-shell&lt;/code&gt;, with no &lt;code&gt;*.nix&lt;/code&gt; config
files. This post covers &lt;code&gt;nix-env&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For simplicity, think of &lt;code&gt;nix-env&lt;/code&gt; as a package manager, akin to &lt;code&gt;apk&lt;/code&gt;,
&lt;code&gt;pacman&lt;/code&gt;, &lt;code&gt;brew&lt;/code&gt;, &lt;code&gt;apt&lt;/code&gt;, &lt;code&gt;pkg&lt;/code&gt;, etc.&lt;/p&gt;
&lt;h2 id="install-a-package"&gt;Install a package&lt;/h2&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -i moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;installing &lt;span style="color:#e6db74"&gt;&amp;#39;moreutils-0.67&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;building &lt;span style="color:#e6db74"&gt;&amp;#39;/nix/store/jsp0l5ny3kx8p9lx9w9r0x159i9jjnn6-user-environment.drv&amp;#39;&lt;/span&gt;...&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I see some guides using &lt;code&gt;nix-env -iA&lt;/code&gt; but &lt;code&gt;-i&lt;/code&gt; seems to suffice. We could
optionally specify the &lt;code&gt;nixpkgs.&lt;/code&gt; prefix:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -i nixpkgs.moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;error: selector &lt;span style="color:#e6db74"&gt;&amp;#39;nixpkgs.moreutils&amp;#39;&lt;/span&gt; matches no derivations&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Oh no! Maybe that&amp;rsquo;s what the &lt;code&gt;-A&lt;/code&gt; is for?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -iA nixpkgs.moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;replacing old &lt;span style="color:#e6db74"&gt;&amp;#39;moreutils-0.67&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;installing &lt;span style="color:#e6db74"&gt;&amp;#39;moreutils-0.67&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Indeed! Apparently that &lt;code&gt;-A&lt;/code&gt; thing stands for attribute. The only thing I know
is that there are both &lt;code&gt;nixpkgs.*&lt;/code&gt; and &lt;code&gt;nixos.*&lt;/code&gt;. But I don&amp;rsquo;t care about NixOS
at this point. I&amp;rsquo;ll just ignore &lt;code&gt;-A&lt;/code&gt; from now on, for the time being.&lt;/p&gt;
&lt;h2 id="list-installed-packages"&gt;List installed packages&lt;/h2&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -q
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;moreutils-0.67&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Easy! This actually gets displayed in my &lt;code&gt;less&lt;/code&gt; pager.&lt;/p&gt;
&lt;h2 id="upgrade-installed-packages"&gt;Upgrade installed packages&lt;/h2&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -u&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Easy! At this point, I am not super confident whether that works as intended
though. We will find out in a few days when there&amp;rsquo;s some update to one of my
installed CLI applications. I&amp;rsquo;ve heard there&amp;rsquo;s something called nix channel to
control that. Leaving it for another day though.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2022-02-18)&lt;/strong&gt;: I learned that &lt;code&gt;nix-env -u&lt;/code&gt; is akin to &lt;code&gt;apt upgrade&lt;/code&gt; or
&lt;code&gt;apk upgrade&lt;/code&gt;. It upgrades installed packages to newer versions but only if it
is aware there are newer versions. To actually refresh the repositories √† la
&lt;code&gt;apt update&lt;/code&gt; or &lt;code&gt;apk update&lt;/code&gt;, use &lt;code&gt;nix-channel --update&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: On macOS this needs to be &lt;code&gt;sudo -i nix-channel --update&lt;/code&gt;. See
&lt;a href="https://github.com/NixOS/nix/issues/3595"&gt;issue&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="uninstall-a-package"&gt;Uninstall a package&lt;/h2&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env --uninstall moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;uninstalling &lt;span style="color:#e6db74"&gt;&amp;#39;moreutils-0.67&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;building &lt;span style="color:#e6db74"&gt;&amp;#39;/nix/store/5k8rsf4cxg4iz7cqnqirpww6r97bwnqr-user-environment.drv&amp;#39;&lt;/span&gt;...&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Easy!&lt;/p&gt;
&lt;h2 id="search-for-packages"&gt;Search for packages&lt;/h2&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -qaP &lt;span style="color:#e6db74"&gt;&amp;#39;.*moreutils.*&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;.*&lt;/code&gt; seems to be needed. It works if I omit them, but only if I write the exact package name (apparently called &amp;lsquo;derivation&amp;rsquo; in Nix):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -qaP moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nixpkgs.moreutils moreutils-0.67&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If I write the wrong package name, the following happens:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -qaP moreutil
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;error: selector &lt;span style="color:#e6db74"&gt;&amp;#39;moreutil&amp;#39;&lt;/span&gt; matches no derivations, maybe you meant:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; moreutils&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It was helpful in this case, but I wouldn&amp;rsquo;t always count on that. It is a bit
annoying that there&amp;rsquo;s no &lt;code&gt;nix search moreutils&lt;/code&gt; command, but it seems that
&lt;code&gt;nix-env&lt;/code&gt; is very heavily tailored to use short flags, just like &lt;code&gt;pacman&lt;/code&gt; in
Arch Linux. I got used to &lt;code&gt;pacman&lt;/code&gt;, hopefully I can get used to the &lt;code&gt;nix-env&lt;/code&gt;
short flags at some point.&lt;/p&gt;
&lt;p&gt;Actually I tried it out and there is a &lt;code&gt;nix search&lt;/code&gt; command!&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix search moreutils
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;error: experimental Nix feature &lt;span style="color:#e6db74"&gt;&amp;#39;nix-command&amp;#39;&lt;/span&gt; is disabled; use &lt;span style="color:#e6db74"&gt;&amp;#39;--extra-experimental-features nix-command&amp;#39;&lt;/span&gt; to override&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This isn&amp;rsquo;t very promising though. How come searching is experimental?! Anyway, I can live with the &lt;code&gt;nix-env&lt;/code&gt; form for now.&lt;/p&gt;
&lt;p&gt;These are the 5 basic package management operations that I needed to bootstrap
my dev environment. Without putting much effort on it, my initial list of package
looks like this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;$ nix-env -q
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;atool-0.39.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;bash-interactive-5.1-p12
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;coreutils-9.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;exa-0.10.1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fpp-0.9.2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;fzf-0.29.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git-2.34.1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;htop-3.1.2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;hugo-0.92.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;jq-1.6
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;less-600
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;moreutils-0.67
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ncdu-1.16
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;perl5.34.0-ack-3.5.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ranger-1.9.3
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;stow-2.3.1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tmux-3.2a
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tree-1.8.0
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;vim-8.2.4186
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watch-procps-3.3.16
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;wget-1.21.2
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;zoxide-0.8.0&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Those were very intuitive to find, with the exception of &lt;code&gt;ack&lt;/code&gt; and &lt;code&gt;bash-interactive&lt;/code&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;bash&lt;/code&gt; is a bit odd because Nix splits it into two packages:
a non-interactive version and an interactive version. I have no idea why. My
&lt;code&gt;~/.bashrc&lt;/code&gt; wrecked havoc with the non-interactive version.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ack&lt;/code&gt; is very oddly named. Really. Also: &lt;code&gt;nix-env -i ack&lt;/code&gt; doesn&amp;rsquo;t work, but
&lt;code&gt;nix-env -iA nixpkgs.ack&lt;/code&gt; does. I suspect it will be hard to ignore &lt;code&gt;-A&lt;/code&gt; in
the future.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Strictly speaking there&amp;rsquo;s nothing special about macOS in this context.
The same setup can also be used in Linux distributions, for example, &lt;a href="https://ariya.io/2020/05/nix-package-manager-on-ubuntu-or-debian"&gt;Debian
or Ubuntu&lt;/a&gt;.
In fact, this is what I did at $DAYJOB, because relying solely on Debian for
package management is a very big limitation. I find that Nix complements the
Debian repositories very well, the same way that it does for macOS.&amp;#160;&lt;a href="https://perrotta.dev/2022/02/nix-env-in-a-nutshell-for-basic-usage-in-macos/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: nix-env in a nutshell for basic usage in macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item></channel></rss>