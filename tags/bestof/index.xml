<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Bestof on ¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content in Bestof on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en-us</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2021 - 2025 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Sun, 30 Nov 2025 00:46:15 -0300</lastBuildDate><atom:link href="https://perrotta.dev/tags/bestof/index.xml" rel="self" type="application/rss+xml"/><item><title>python-is-python3 with macOS homebrew</title><link>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</link><pubDate>Sun, 30 Nov 2025 00:22:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</guid><description>&lt;p&gt;I face this annoyance all the time:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;zsh: command not found: python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;127 thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Python 3.14.0 (main, Oct 7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.0.13.3)] on darwin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;python&lt;/code&gt; executable is not available on macOS natively.&lt;/p&gt;
&lt;p&gt;It is not available on homebrew either, even with &lt;code&gt;brew install python&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python3&lt;/code&gt; is there though:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which -a python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/usr/bin/python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I want to be able to run &lt;code&gt;python&lt;/code&gt; without having to remember I am running
Python 3. Python 3 is the &lt;em&gt;de facto standard&lt;/em&gt; in the 2020s, there should be no
need to remember this explicitly, we take it as gospel already.&lt;/p&gt;
&lt;p&gt;There are various ways to resolve this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Classic. I hate it. Now you&amp;rsquo;ll have a &lt;code&gt;python&lt;/code&gt; alias even if &lt;code&gt;python3&lt;/code&gt; is not
available. This is not elegant at all. You could make it a bit better, sure:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;command&lt;/span&gt; -v python3 &amp;gt;/dev/ull 2&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Or even a bit more idiomatically if using &lt;code&gt;zsh&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;((&lt;/span&gt; $+commands&lt;span class="o"&gt;[&lt;/span&gt;python3&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Still, this is not a problem the shell should own. It just &lt;em&gt;feels&lt;/em&gt; wrong. This
is a package management problem. The shell remedy is just a cheap band-aid.
Can we do better than this?&lt;/p&gt;
&lt;p&gt;What about a wrapper script in &lt;code&gt;/usr/local/bin&lt;/code&gt;?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/usr/bin/env bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;span class="nb"&gt;exec&lt;/span&gt; python3 &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This is better. Much better. However, why not make it even simpler?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% sudo ln -s /usr/bin/python3 /usr/local/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A symlink suffices. You just need to decide whether to point it out to &lt;code&gt;python3&lt;/code&gt;
in homebrew or in the system.&lt;/p&gt;
&lt;p&gt;A symlink is not reproducible&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; though. If you reinstall your system, or acquire a
new one, now you&amp;rsquo;ll have to remember to re-create it.&lt;/p&gt;
&lt;p&gt;Sure, you could script it in your .dotfiles installation script, or add it to
the system installation notes section in your second brain app. Who am I to tell
you what to do?&lt;/p&gt;
&lt;p&gt;Here is my favorite way to address the issue: install a package!&lt;/p&gt;
&lt;p&gt;For example, there was a time in Debian and Ubuntu that the
&lt;a href="https://packages.debian.org/sid/python-is-python3"&gt;&lt;code&gt;python-is-python3&lt;/code&gt;&lt;/a&gt; package
did exactly that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a convenience package which ships a symlink to point the
/usr/bin/python interpreter at the current default python3. It may improve
compatibility with other modern systems, whilst breaking some obsolete or
3rd-party software.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now you can guess what the source of my inspiration was. I created a homebrew
formula to do the same:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PythonIsPython3&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Make python point to python3&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;homepage&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/homebrew-taps&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;file:///dev/null&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;1.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;sha256&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;depends_on&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install_symlink&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="n"&gt;opt_bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python3&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install_symlink&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="n"&gt;opt_bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pip3&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pip&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now that I have a formula, I need to create a tap to host it somewhere.&lt;/p&gt;
&lt;p&gt;Hence &lt;a href="https://github.com/thiagowfx/homebrew-taps"&gt;https://github.com/thiagowfx/homebrew-taps&lt;/a&gt; is born.&lt;/p&gt;
&lt;p&gt;To install it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew tap thiagowfx/taps
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install python-is-python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Enjoy peace!&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;This is a very loose usage of &amp;ldquo;reproducible&amp;rdquo;. Sorry Nix folks, I meant no
harm!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>git: prune stale branches</title><link>https://perrotta.dev/2025/11/git-prune-stale-branches/</link><pubDate>Thu, 27 Nov 2025 18:04:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/git-prune-stale-branches/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Delete all local git branches whose counterpart remote
branches have already been merged upstream.&lt;/p&gt;
&lt;p&gt;Update &lt;code&gt;~/.gitconfig&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="gitconfig"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;gitconfig&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[alias]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="na"&gt;prune-gone&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;!git fetch -p &amp;amp;&amp;amp; git branch -vv | awk &amp;#39;/: gone]/{print $1}&amp;#39; | xargs -r git branch -D
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; world = !git fetch --all &amp;amp;&amp;amp; git remote prune origin &amp;amp;&amp;amp; git prune &amp;amp;&amp;amp; git prune-gone&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now simply run &lt;code&gt;git prune-gone&lt;/code&gt; ‚Äì or, even better, &lt;code&gt;git world&lt;/code&gt; for a more
complete cleanup.&lt;/p&gt;
&lt;p&gt;This is much more ergonomic than hunting down individual branches and doing &lt;code&gt;git push origin :{my branch}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Example usage:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ~/Workspace/pancake &lt;span class="o"&gt;(&lt;/span&gt;git&lt;span class="o"&gt;)&lt;/span&gt;-&lt;span class="o"&gt;[&lt;/span&gt;master&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;From github.com:thiagowfx/pancake
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - &lt;span class="o"&gt;[&lt;/span&gt;deleted&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt; -&amp;gt; origin/thiagowfx/apkbuild-sync
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - &lt;span class="o"&gt;[&lt;/span&gt;deleted&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt; -&amp;gt; origin/thiagowfx/wt-no-origin-graceful
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Enumerating objects: 13, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Counting objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;13/13&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Compressing objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;5/5&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Total &lt;span class="m"&gt;8&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 5&lt;span class="o"&gt;)&lt;/span&gt;, reused &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 3&lt;span class="o"&gt;)&lt;/span&gt;, pack-reused &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;from 0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Unpacking objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;8/8&lt;span class="o"&gt;)&lt;/span&gt;, 2.61 KiB &lt;span class="p"&gt;|&lt;/span&gt; 668.00 KiB/s, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; f727bd7..51f81ee master -&amp;gt; origin/master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Deleted branch thiagowfx/wt-cd-dash &lt;span class="o"&gt;(&lt;/span&gt;was 6403261&lt;span class="o"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>The almighty Blogroll</title><link>https://perrotta.dev/2025/11/the-almighty-blogroll/</link><pubDate>Tue, 25 Nov 2025 14:13:57 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/the-almighty-blogroll/</guid><description>&lt;p&gt;It&amp;rsquo;s about time: I added a &lt;a href="https://perrotta.dev/blogroll"&gt;blogroll&lt;/a&gt; to my site.&lt;/p&gt;
&lt;p&gt;The list comprises not even 10% of my subscriptions, but it was carefully
curated.&lt;/p&gt;
&lt;p&gt;I am just trying to do my part to keep the &lt;a href="https://indieweb.org/"&gt;Indie Web&lt;/a&gt;
alive. :)&lt;/p&gt;</description></item><item><title>Stow</title><link>https://perrotta.dev/2025/11/stow/</link><pubDate>Mon, 24 Nov 2025 02:17:08 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/stow/</guid><description>&lt;p&gt;For a long time I wanted to write a blog post about &lt;code&gt;stow&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;My procrastination has paid off: &lt;a href="https://pbrisbin.com/posts/stow/"&gt;pbrisbin&lt;/a&gt;
has written one first.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I recently migrated my dotfiles from rcm to GNU Stow. I didn&amp;rsquo;t really have a
reason, I wasn&amp;rsquo;t unhappy with rcm at all, but I saw Stow mentioned somewhere
and felt like trying it out. After migrating, I still don&amp;rsquo;t have strong
feelings ‚Äì both tools are appropriately good and boring ‚Äì but I can at least
now speak to the differences and maybe that would help someone out there
decide for their own dotfiles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I am also a former user of
&lt;a href="https://thoughtbot.com/blog/rcm-for-rc-files-in-dotfiles-repos"&gt;rcm&lt;/a&gt;. I share
the same considerations as the author.&lt;/p&gt;
&lt;p&gt;I am quite happy with &lt;code&gt;stow&lt;/code&gt; as a dotfiles manager. Every once in a while I
attempt to integrate Ansible to manage the rest of my dotfiles setup, but it
never sticks. Simplicity always wins in the test of time.&lt;/p&gt;</description></item><item><title>Claude: new slash commands</title><link>https://perrotta.dev/2025/11/claude-new-slash-commands/</link><pubDate>Sun, 23 Nov 2025 17:43:04 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/claude-new-slash-commands/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/claude-code-custom-commands/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Instead of creating custom slash commands myself, now I am turning to Claude to
do so for me.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Prompt&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@agent-claude-code-guide create a slash command for&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is a built-in agent.&lt;/p&gt;
&lt;p&gt;Let the &lt;del&gt;experts&lt;/del&gt; agents handle the cruft.&lt;/p&gt;
&lt;p&gt;For example, &lt;code&gt;/commit&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.claude/commands/commit.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;allowed_tools: [&amp;#34;Bash(git add:*)&amp;#34;, &amp;#34;Bash(git commit:*)&amp;#34;, &amp;#34;Bash(git status:*)&amp;#34;, &amp;#34;Bash(git rev-parse:*)&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;argument-hint: [message]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;description: Make a concise git commit on the current branch
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Create a concise git commit with the provided message.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Steps:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;1. Show current git status to confirm changes
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2. Commit with the provided message
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;3. Ask the user if they want to push the changes
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;If the user provides a message as argument, use it directly. Otherwise, ask them for a commit message.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Personal blogs are back</title><link>https://perrotta.dev/2025/11/personal-blogs-are-back/</link><pubDate>Sun, 23 Nov 2025 14:48:36 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/personal-blogs-are-back/</guid><description>&lt;p&gt;&lt;a href="https://disassociated.com/personal-blogs-back-niche-blogs-next/"&gt;Disassociated&lt;/a&gt; (&lt;a href="https://news.ycombinator.com/item?id=46009894"&gt;via&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Personal blogs are back, should niche blogs be next?&lt;/p&gt;
&lt;p&gt;A resurgence in personal blogging is the first step in rebuilding a vibrant,
thriving, web, or if you like, blogosphere. Now the focus needs to be on
restoring the flow of accessible and trusted information.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://news.ycombinator.com/item?id=46011877"&gt;Simon Willison&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Here are some reasons to start a personal blog:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;It&amp;rsquo;s a great way to learn. Teaching something to someone else has always
been the best learning tool, and writing about something with an audience
in mind is an effective way to capture some of that value.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It can be a big boost in job hunting. As a hiring manager two of the most
important questions I have about a potential candidate are: Can they code?
Can they communicate well? If a candidate has a blog with just two articles
on it that hasn&amp;rsquo;t been updated in five years that&amp;rsquo;s still a big boost over
candidates with nothing like that at all. In a competitive market that
could be the boost you need to make it from the resume review to the first
round.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If you blog more frequently than that it can be a really valuable resource
for your future self. I love being able to look back on what I was thinking
and writing about ten years ago. Having a good tagging system helps with
this too - I can review my tag of &amp;ldquo;scaling&amp;rdquo; or &amp;ldquo;postgresql&amp;rdquo; and see a
timeline of how my understanding developed.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;It&amp;rsquo;s a great way to help establish credibility. If someone asks you about X
and you have a blog entry about X from five years ago you can point them to
that.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Building a blog is really fun! It used to be one of the classic starter
projects for new web developers, I think that needs to come back. It&amp;rsquo;s a
fun project and one that&amp;rsquo;s great to keep on hacking on long into the
future.&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Notably none of the above reasons require your blog to attract readers!
There&amp;rsquo;s a ton of value to be had even if nobody actually reads the thing.&lt;/p&gt;
&lt;p&gt;As a general rule, assume nobody will read your blog unless you actively
encourage them to. That&amp;rsquo;s fine. What matters isn&amp;rsquo;t the quantity of readers,
it&amp;rsquo;s their quality. I&amp;rsquo;d rather have a piece read by just a single person that
leads to a new opportunity for me than 1,000 people who read it and never
interact with me ever again.&lt;/p&gt;
&lt;p&gt;If you DO start to get readers things get even more valuable. I&amp;rsquo;ve been
blogging since 2002 and most of the opportunities in my career came from
people I met via blogging. Today I get invited to all sorts of interesting
events because I have a prominent blog covering stuff relating to AI and LLMs.&lt;/p&gt;
&lt;p&gt;But I do honestly think that a blog is a powerful professional tool even if
nobody else is reading it at all.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I do not have anything to add, really. Simon has nailed it.&lt;/p&gt;</description></item><item><title>help2man</title><link>https://perrotta.dev/2025/11/help2man/</link><pubDate>Sun, 23 Nov 2025 00:59:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/help2man/</guid><description>&lt;p&gt;Thanks to &lt;a href="https://www.gnu.org/software/help2man/"&gt;&lt;code&gt;help2man&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;help2man&lt;/code&gt; produces simple manual pages from the &lt;code&gt;--help&lt;/code&gt; and &lt;code&gt;--version&lt;/code&gt;
output of other commands.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;p&gt;This program is intended to provide an easy way for software authors to
include a manual page in their distribution without having to maintain that
document.&lt;/p&gt;
&lt;p&gt;Given a program which produces reasonably standard &lt;code&gt;--help&lt;/code&gt; and &lt;code&gt;--version&lt;/code&gt;
outputs, &lt;code&gt;help2man&lt;/code&gt; can re-arrange that output into something which resembles
a manual page.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;&lt;a href="https://github.com/thiagowfx/pancake"&gt;pancake&lt;/a&gt; scripts/tools now all have
man pages! The integration was quite straightforward&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git --no-pager show HEAD~3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit fd319657199d740138236b0b56eb47a4fb9dc1d9 (tag: 2025.11.23.1)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Sun Nov 23 00:45:19 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; formula: add man page generation with help2man
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Co-Authored-By: Claude &amp;lt;noreply@anthropic.com&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;diff --git Formula/pancake.rb Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;index 921df77..808eac6 100644
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+++ Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;&lt;span class="gu"&gt;@@ -5,6 +5,8 @@ class Pancake &amp;lt; Formula
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt; sha256 &amp;#34;1e2ee2a7cd22a659c541361b1d50761e672a197a76176aa04683eb430bb080fd&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; head &amp;#34;https://github.com/thiagowfx/pancake.git&amp;#34;, branch: &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ depends_on &amp;#34;help2man&amp;#34; =&amp;gt; :build
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt; # Script definitions: [directory, script_file, command_name]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; SCRIPTS = [
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;@@ -39,6 +41,14 @@ class Pancake &amp;lt; Formula
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # aws_login_headless requires additional Python script
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; bin.install &amp;#34;aws_login_headless/aws_login_headless_playwright.py&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ # Generate and install man pages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ SCRIPTS.each do |_, _, command|
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ system &amp;#34;help2man&amp;#34;, &amp;#34;--no-info&amp;#34;, &amp;#34;--no-discard-stderr&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;--version-string=#{version}&amp;#34;, &amp;#34;--output=#{command}.1&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;--name=#{command}&amp;#34;, bin/command
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ man1.install &amp;#34;#{command}.1&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ end
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt; end
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; test do
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It parses the output of &lt;code&gt;--help&lt;/code&gt; to compose a man page. DRY.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;With the assistance of an LLM, as (can&amp;rsquo;t believe I&amp;rsquo;ll say this) &lt;em&gt;usual&lt;/em&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Radio</title><link>https://perrotta.dev/2025/11/radio/</link><pubDate>Sat, 22 Nov 2025 22:12:24 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/radio/</guid><description>&lt;p&gt;New script: &lt;a href="https://github.com/thiagowfx/pancake/tree/master/radio"&gt;radio&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Stream internet radio stations using available media players.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Available Stations:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% radio --list
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Available stations:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; defcon DEF CON Radio - Music &lt;span class="k"&gt;for&lt;/span&gt; hacking
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; lofi Lo-fi hip hop beats
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; trance HBR1 Trance
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; salsa Latina Salsa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; kfai KFAI &lt;span class="o"&gt;(&lt;/span&gt;Minneapolis community radio&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If no station is specified, a random station will be selected.&lt;/p&gt;
&lt;p&gt;Automatically detects and uses available media players (mpv, vlc, ffplay,
mplayer).&lt;/p&gt;
&lt;p&gt;Sometimes it&amp;rsquo;s handy to have access to a music stream quickly, without having to
resort to Spotify or YouTube, or to add cognitive overhead to choosing what to
play.&lt;/p&gt;
&lt;p&gt;Internet radios are cool. They remind me of my good ol&amp;rsquo; times with
&lt;a href="https://bsplayer.com/"&gt;BSPlayer&lt;/a&gt; on Windows XP / Windows 7&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2025/04/defcon-radio/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Inspired by &lt;a href="https://evanhahn.com/scripts-i-wrote-that-i-use-all-the-time/"&gt;Evan
Hahn&lt;/a&gt;&amp;rsquo;s &lt;code&gt;radio&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Any suggestions of other internet radios to add?&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Interesting to see that BSPlayer is still around!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>new script: PDF remove password</title><link>https://perrotta.dev/2025/11/new-script-pdf-remove-password/</link><pubDate>Sun, 16 Nov 2025 20:19:18 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/new-script-pdf-remove-password/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/new-script-copy/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given a password-protected &lt;code&gt;.pdf&lt;/code&gt; file, remove its
password. It&amp;rsquo;s indifferent whether the file gets overwritten or whether a new
one is created.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/pstaender/7412245"&gt;&lt;code&gt;ghostscript&lt;/code&gt;&lt;/a&gt; can do it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -q -dNOPAUSE -dBATCH -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -sOutputFile&lt;span class="o"&gt;=&lt;/span&gt;output.pdf -c .setpdfwrite -f input.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/raghur/f3eab7297691f2f411eec69b8032daf0"&gt;&lt;code&gt;qpdf&lt;/code&gt;&lt;/a&gt; can do it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --decrypt --password&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;{my pass}&amp;#34;&lt;/span&gt; input.pdf output.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I am not expected to memorize these CLI flags.&lt;/p&gt;
&lt;p&gt;I do not want to look them up every time either.&lt;/p&gt;
&lt;p&gt;There are various approaches to tackle this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a shell alias (&lt;code&gt;alias foo=&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;a shell function &lt;code&gt;foo() {}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;a shell script (&lt;code&gt;*.sh&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;a &lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;comma script&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;a copyable snippet (e.g. stored in Obsidian / LogSeq or some other digital
garden / personal wiki / second brain app)&lt;/li&gt;
&lt;li&gt;a snippet (e.g. in &lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;RayCast&lt;/a&gt; or
&lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;Espanso&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;ask the AI each time&lt;/li&gt;
&lt;li&gt;&lt;del&gt;google&lt;/del&gt; &lt;a href="https://perrotta.dev/2025/05/kagi/"&gt;search&lt;/a&gt; for it each time&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Lately I&amp;rsquo;ve been favouring the &lt;a href="https://perrotta.dev/2025/09/pancake-potpourri-scripts/"&gt;shell script&lt;/a&gt; approach, so &lt;a href="https://github.com/thiagowfx/pancake/tree/c7c3677119c567edc432fcc1f1c0f78c9a5b3c55/pdf_password_remove"&gt;here we go&lt;/a&gt; with &lt;code&gt;pdf_password_remove.sh&lt;/code&gt;:&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;
&lt;p&gt;Remove password protection from PDF files.&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Interactive password prompt (most secure)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove secret.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Process multiple files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove report.pdf invoice.pdf contract.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Provide password via command line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove --password&lt;span class="o"&gt;=&lt;/span&gt;BANANA42SPLIT secret.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Custom output filename (single file only)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove -o unlocked.pdf secret.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="example-output"&gt;Example Output&lt;/h2&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pdf_password_remove --password=PIZZA69SLICE financial-report.pdf tax-form.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Successfully processed: financial-report.pdf ‚Üí financial-report-unlocked.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Successfully processed: tax-form.pdf ‚Üí tax-form-unlocked.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Summary: Successfully processed 2/2 file(s)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="features"&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Process single or multiple PDF files in one command&lt;/li&gt;
&lt;li&gt;Secure interactive password prompt (hidden input)&lt;/li&gt;
&lt;li&gt;Command-line password option for automation/scripts&lt;/li&gt;
&lt;li&gt;Default output naming: adds &lt;code&gt;-unlocked&lt;/code&gt; suffix&lt;/li&gt;
&lt;li&gt;Custom output filename with &lt;code&gt;-o&lt;/code&gt; flag (single file only)&lt;/li&gt;
&lt;li&gt;Clear success/failure indicators for each file&lt;/li&gt;
&lt;li&gt;Validates PDF files before processing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;Requires either &lt;code&gt;ghostscript&lt;/code&gt; (preferred) or &lt;code&gt;qpdf&lt;/code&gt; to be installed:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# macOS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install ghostscript &lt;span class="c1"&gt;# Preferred&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Linux&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt install ghostscript &lt;span class="c1"&gt;# Preferred - Debian/Ubuntu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo dnf install ghostscript &lt;span class="c1"&gt;# Preferred - Fedora&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo dnf install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo pacman -S ghostscript &lt;span class="c1"&gt;# Preferred - Arch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo pacman -S qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The script automatically detects and uses whichever tool is available,
preferring ghostscript if both are installed.&lt;/p&gt;
&lt;h2 id="security-note"&gt;Security Note&lt;/h2&gt;
&lt;p&gt;Using &lt;code&gt;--password&lt;/code&gt; on the command line will expose the password in shell history
and process lists. For sensitive documents, use the interactive prompt instead
(default behavior when password is not provided).&lt;/p&gt;</description></item><item><title>Shell memoization: lazy-load LLM API keys</title><link>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</link><pubDate>Mon, 10 Nov 2025 13:55:56 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given LLM keys shell environment variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GEMINI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OPENAI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Export them only when they are needed.&lt;/p&gt;
&lt;p&gt;When are they needed? If I launch any one of these binaries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;llm&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aider&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gemini&lt;/code&gt; (provider-specific: Google)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;codex&lt;/code&gt; (provider-specific: OpenAI)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;claude&lt;/code&gt; (provider-specific: Anthropic)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I added the following snippet in my shell profile:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Lazy-load API keys only when needed to avoid shell startup delay&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v llm &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; _load_api_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get anthropic&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GEMINI_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get gemini&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;OPENAI_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get openai&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Redefine itself to be a no-op after first call&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; _load_api_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; :&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Wrap all AI CLI commands to auto-load keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; cmd in claude llm aider codex gemini&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v &lt;span class="nv"&gt;$cmd&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;() { _load_api_keys; command &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; \&amp;#34;\$@\&amp;#34;; }&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The keys are loaded via &lt;code&gt;llm keys get&lt;/code&gt;. This is not secure, but it is practical.
A more secure approach would be to read the credentials directly from a password
manager. This trade-off is acceptable in the environment I am currently
operating on, but I would not recommend it as an universal approach.&lt;/p&gt;
&lt;p&gt;A temporary &lt;code&gt;_load_api_keys&lt;/code&gt; shell function is defined. The first time it is
executed, it &lt;code&gt;export&lt;/code&gt;s each one of the LLM API keys. From the second time
onwards it will be a no-op, thanks to &lt;code&gt;:&lt;/code&gt;. In bash/zsh we can redefine a
function from within itself thanks to dynamic scoping. Wild.&lt;/p&gt;
&lt;p&gt;Last but not least: I wrapped up (&amp;ldquo;decorated&amp;rdquo; in function parlance) all
LLM-related commands with a shell function that runs &lt;code&gt;_load_api_keys&lt;/code&gt; before
invoking the original command.&lt;/p&gt;
&lt;p&gt;This approach is elegant and easy to maintain.&lt;/p&gt;
&lt;p&gt;My initial implementation had been more fine-grained: &lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt; would
drive &lt;code&gt;claude&lt;/code&gt;, &lt;code&gt;llm&lt;/code&gt; and &lt;code&gt;aider&lt;/code&gt;, but not &lt;code&gt;gemini&lt;/code&gt; and &lt;code&gt;codex&lt;/code&gt;, and so on.
Ultimately I decided that the additional complexity of mapping individual
providers optimally is not warranted.&lt;/p&gt;
&lt;p&gt;Why is this memoization necessary in the first place?&lt;/p&gt;
&lt;p&gt;My shell (&lt;code&gt;zsh&lt;/code&gt;) startup was significantly slow before this change,
&lt;code&gt;O(seconds)&lt;/code&gt;. Each call to &lt;code&gt;llm keys get&lt;/code&gt; takes about half a second in my
machine. I do not think it&amp;rsquo;s acceptable to wait for 2s before having your shell
readily available with a prompt.&lt;/p&gt;
&lt;p&gt;Before this approach, I had used
&lt;a href="https://github.com/romkatv/zsh-defer"&gt;&lt;code&gt;zsh-defer&lt;/code&gt;&lt;/a&gt; to delay populating the API
keys. However, this has only &lt;em&gt;deferred&lt;/em&gt; (&lt;em&gt;cof&lt;/em&gt;) my problems. The startup delay
was still noticeable.&lt;/p&gt;</description></item><item><title>New script: SSH mux restart</title><link>https://perrotta.dev/2025/10/new-script-ssh-mux-restart/</link><pubDate>Thu, 30 Oct 2025 12:59:53 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/new-script-ssh-mux-restart/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/"&gt;Previously&lt;/a&gt;,
&lt;a href="https://perrotta.dev/2025/05/1password-ssh-agent-error/"&gt;previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After experiencing almost daily frustration because of this SSH auth issue, I
decided to script a solution out of it: and now
&lt;a href="https://github.com/thiagowfx/pancake/tree/8707d1792c0d1266180dfa3d49c7d144c71ef23d/ssh_mux_restart"&gt;&lt;code&gt;ssh_mux_restart&lt;/code&gt;&lt;/a&gt;
was born.&lt;/p&gt;
&lt;p&gt;A copy of the &lt;code&gt;README.md&lt;/code&gt; follows below for ease of reference.&lt;/p&gt;
&lt;p&gt;The use case is very simple: run the &lt;code&gt;ssh_mux_restart&lt;/code&gt; script whenever I run
into a git SSH authentication error, typically due to &lt;code&gt;git pull&lt;/code&gt;, &lt;code&gt;git fetch&lt;/code&gt; or
&lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;
&lt;p&gt;Basic usage to kill SSH multiplexed connections:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./ssh_mux_restart.sh&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;To also restart the 1Password SSH agent:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./ssh_mux_restart.sh --restart-1password&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="example-output"&gt;Example Output&lt;/h2&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ./ssh_mux_restart.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Finding SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found SSH multiplexed connections:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88002 ssh: /tmp/ssh-control-FLAPJACK42 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88123 ssh: /tmp/ssh-control-WAFFLE55 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killing SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88002
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88123
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killed 2/2 SSH multiplexed connections.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;All operations completed successfully!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;With the &lt;code&gt;--restart-1password&lt;/code&gt; flag:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ./ssh_mux_restart.sh --restart-1password
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Finding SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found SSH multiplexed connections:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88002 ssh: /tmp/ssh-control-PANCAKE99 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killing SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88002
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killed 1/1 SSH multiplexed connections.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Restarting 1Password application...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found 1Password process: 67690
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Quitting 1Password...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì 1Password quit successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Starting 1Password...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì 1Password started successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;1Password SSH agent is now ready for use.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;All operations completed successfully!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="why-this-matters"&gt;Why This Matters&lt;/h2&gt;
&lt;p&gt;SSH multiplexed connections can cache stale authentication credentials, causing issues when:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitHub organizations enable or enforce SAML SSO&lt;/li&gt;
&lt;li&gt;1Password SSH agent credentials need refreshing&lt;/li&gt;
&lt;li&gt;SSH keys have been rotated or updated&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restarting these connections forces SSH to re-authenticate with fresh credentials.&lt;/p&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Standard Unix tools (&lt;code&gt;pgrep&lt;/code&gt;, &lt;code&gt;pkill&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;1Password app (macOS) if using the &lt;code&gt;--restart-1password&lt;/code&gt; flag&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>The Apple Store</title><link>https://perrotta.dev/2025/10/the-apple-store/</link><pubDate>Sat, 18 Oct 2025 12:49:20 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/the-apple-store/</guid><description>&lt;p&gt;After owning an iPhone 14 Pro for more than two and a half years, its maximum
battery capacity degraded to &lt;strong&gt;~76%&lt;/strong&gt;. It is not a terrible number, but the
general recommendation is to take action whenever it goes below &lt;strong&gt;80%&lt;/strong&gt;, which
happened a couple of months ago.&lt;/p&gt;
&lt;p&gt;In this state I am forced to carry a portable charger wherever I go if I want
to keep my peace of mind and eliminate &amp;ldquo;battery anxiety&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;The natural course of action for many at this point would be to simply buy the
newest and shiniest iPhone.&lt;/p&gt;
&lt;p&gt;Yet, I love to fight against &lt;a href="https://en.wikipedia.org/wiki/Planned_obsolescence"&gt;planned
obsolescence&lt;/a&gt;, and will
happily do what I can, even if it yields a bit of friction.&lt;/p&gt;
&lt;p&gt;One of my favorite aspects of being an iPhone user is the ability to get superb
support from Apple&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. In particular, they have a &lt;a href="https://support.apple.com/iphone/repair/battery-replacement"&gt;battery
replacement&lt;/a&gt;
program.&lt;/p&gt;
&lt;p&gt;All you have to do is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://getsupport.apple.com/?caller=sfaq&amp;amp;SG=SG003&amp;amp;category_id=SC0999&amp;amp;symptom_id=99911"&gt;schedule an appointment&lt;/a&gt; in the Genius Bar,&lt;/li&gt;
&lt;li&gt;bring your iPhone there,&lt;/li&gt;
&lt;li&gt;and then retrieve it a couple of hours later&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; (&amp;ldquo;same day service&amp;rdquo;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Is it cost effective? Hell yes. I paid about 10% of the original purchase
price, and it&amp;rsquo;s like I just got a brand new iPhone.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;But only if I am &lt;del&gt;privileged&lt;/del&gt; lucky enough to live in a city that has
one.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;In my case, 3 hours.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Backlinks</title><link>https://perrotta.dev/2025/10/backlinks/</link><pubDate>Fri, 17 Oct 2025 16:58:16 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/backlinks/</guid><description>&lt;p&gt;I famously do not run any kind of analytics in this blog, neither server-side or
client-side.&lt;/p&gt;
&lt;p&gt;I genuinely have no idea how many people subscribe to it via RSS, and how many
&amp;ldquo;page hits&amp;rdquo; it has been accumulating over its lifetime.&lt;/p&gt;
&lt;p&gt;This is very clearly stated in the homepage.
I take it as a badge of honor.&lt;/p&gt;
&lt;p&gt;That said, I am not saying that running analytics is evil or unethical.
There are various ethical and privacy-friendly analytics tools out there.&lt;/p&gt;
&lt;p&gt;Without analytics, how am I able to keep myself motivated? How can I know
whether I am yelling at the clouds, screaming on to the void?&lt;/p&gt;
&lt;p&gt;The main trick is to write primarily for myself. Writing is a great way to
rearrange my thoughts and make them more coherent and livid.&lt;/p&gt;
&lt;p&gt;A second form of &amp;ldquo;not feeling lonely&amp;rdquo; in the interwebs is to talk to people (or
have people talk to you). Sometimes friends message me in chat apps. Sometimes
strangers email me&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. Sometimes a long-time ex-coworker mentions a past post of
mine helped them. It is always cool to hear from people&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;. There is a gentle
&amp;ldquo;Reply via email&amp;rdquo; link below every blog post in this site.&lt;/p&gt;
&lt;p&gt;Last: &lt;strong&gt;Backlinks&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;Every few months I try to remember to check who is linking back to my blog.
There are various ways to get insights about this:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Public&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://marginalia-search.com/site/perrotta.dev?view=links"&gt;Marginalia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Private&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://search.google.com/search-console/links/drilldown?resource_id=sc-domain%3Aperrotta.dev&amp;amp;type=DOMAIN&amp;amp;target=&amp;amp;domain="&gt;Google&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.bing.com/webmasters/backlinks?siteUrl=https://perrotta.dev/"&gt;Bing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observing slow organic growth, without the pressure to cross-post in social
media platforms or social link aggregators, makes life peaceful and serene.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Please do not be shy, say hello :-)&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;I should write more frequently to authors of blog posts I enjoy. We&amp;rsquo;re
(slowly) getting there.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Distributing my own scripts via homebrew</title><link>https://perrotta.dev/2025/10/distributing-my-own-scripts-via-homebrew/</link><pubDate>Fri, 17 Oct 2025 16:38:40 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/distributing-my-own-scripts-via-homebrew/</guid><description>&lt;p&gt;Thanks &lt;a href="https://justin.searls.co/posts/how-to-distribute-your-own-scripts-via-homebrew/"&gt;Justin
Searls&lt;/a&gt;
for the idea:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I use Homebrew all the time. Whenever I see a new CLI that offers an npm or uv
install path alongside a brew one, I choose brew every single time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Me too.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;And yet, when it comes time to publish a CLI of my own, I usually just ship it
as a Ruby gem or an npm package, because I had (and have!) no fucking clue how
Homebrew works. I&amp;rsquo;m not enough of a neckbeard to peer behind the curtain as
soon as root directories like /usr and /opt are involved, so I never bothered
before today.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I understand how package managers work, and I&amp;rsquo;m even a package maintainer in
Alpine Linux and Arch Linux, but until now I never bothered to package my own
projects for others to consume.&lt;/p&gt;
&lt;p&gt;Previously I talked about my new &lt;a href="https://perrotta.dev/2025/09/pancake-potpourri-scripts/"&gt;pancake&lt;/a&gt; repository. It consists of miscellaneous self-contained executables. As such, it is a great candidate for packaging.&lt;/p&gt;
&lt;p&gt;I won&amp;rsquo;t submit it to upstream homebrew because it is overly specific, but that
doesn&amp;rsquo;t prevent me from packaging it in a &lt;a href="https://docs.brew.sh/Taps"&gt;standalone
repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In order to do so, I simply created a &lt;code&gt;pancake.rb&lt;/code&gt; &lt;a href="https://github.com/thiagowfx/pancake/blob/1a58c53e3984b0a0b34b750a73dab793aff5ebe5/Formula/pancake.rb"&gt;Formula&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Pancake&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;A collection of useful shell scripts&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;homepage&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/pancake&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/pancake.git&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;aws_china_mfa/aws_china_mfa.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;op_login_all/op_login_all.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pritunl_login/pritunl_login.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;sd_world/sd_world.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Basic test to ensure the scripts are installed and executable.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;To install it, first tap the repository&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew tap thiagowfx/pancake https://github.com/thiagowfx/pancake.git&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then install it, from &lt;code&gt;HEAD&lt;/code&gt; because it is not currently versioned:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew install --HEAD pancake&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;List all package contents:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew ls pancake
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/op_login_all
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/pritunl_login
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/sd_world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/sbom.spdx.json&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s no need to fiddle with &lt;code&gt;$PATH&lt;/code&gt;, as this is already handled by homebrew:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ls -al /opt/homebrew/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;lrwxr-xr-x@ - thiago.perrotta &lt;span class="m"&gt;13&lt;/span&gt; Oct 14:43 /opt/homebrew/bin/aws_china_mfa -&amp;gt; ../Cellar/pancake/HEAD-1a58c53/bin/aws_china_mfa*&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;If this idea sticks, I intend to create a dedicated
&lt;code&gt;thiagowfx/homebrew-pancake&lt;/code&gt; repo, so that you can tap it with &lt;code&gt;brew tap thiagowfx/pancake&lt;/code&gt;, without the need of specifying the full repository URL
as per
&lt;a href="https://docs.brew.sh/Taps#repository-naming-conventions-and-assumptions"&gt;docs&lt;/a&gt;.
For now though, the formula is hosted in the same repository as the
executables.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Claude Code: adding my first MCP server</title><link>https://perrotta.dev/2025/10/claude-code-adding-my-first-mcp-server/</link><pubDate>Wed, 08 Oct 2025 00:31:31 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/claude-code-adding-my-first-mcp-server/</guid><description>&lt;p&gt;Lovely readers, I promise this is not turning into an AI blog&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. I am merely
documenting my baby steps.&lt;/p&gt;
&lt;p&gt;I use JIRA all the time. It&amp;rsquo;s our &lt;del&gt;bug&lt;/del&gt;&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; issue tracker of choice.&lt;/p&gt;
&lt;p&gt;And, now that I am slowly incorporating Claude Code in my daily workflow for git
commits and pull requests, it only feels natural to connect JIRA to it, even if
only for the sake of retrieving information from existing tickets and/or adding
context to PRs.&lt;/p&gt;
&lt;p&gt;So here we go.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://docs.claude.com/en/docs/claude-code/mcp"&gt;From the Anthropic documentation&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Atlassian&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Manage your Jira tickets and Confluence docs&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; &amp;lt;gitops project&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude mcp add --transport sse atlassian https://mcp.atlassian.com/v1/sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Added SSE MCP server atlassian with URL: https://mcp.atlassian.com/v1/sse to &lt;span class="nb"&gt;local&lt;/span&gt; config
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;File modified: /Users/thiago.perrotta/.claude.json &lt;span class="o"&gt;[&lt;/span&gt;project: /Users/thiago.perrotta/gitops&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://docs.claude.com/en/docs/claude-code/mcp#option-2%3A-add-a-remote-sse-server"&gt;SSE&lt;/a&gt; stands for &amp;ldquo;Server-Side Events&amp;rdquo;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;SSE (Server-Sent Events) servers provide real-time streaming connections. Many
cloud services use this for live updates.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That command is idempotent:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude mcp add --transport sse atlassian https://mcp.atlassian.com/v1/sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;MCP server atlassian already exists in &lt;span class="nb"&gt;local&lt;/span&gt; config&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What if I want to have it available for all projects? Use &lt;code&gt;--scope user&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude mcp add --scope user --transport sse atlassian https://mcp.atlassian.com/v1/sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Added SSE MCP server atlassian with URL: https://mcp.atlassian.com/v1/sse to user config
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;File modified: /Users/thiago.perrotta/.claude.json&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The modification to &lt;code&gt;~/.claude.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="err"&gt;[...]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;mcpServers&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;atlassian&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;sse&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;url&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://mcp.atlassian.com/v1/sse&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;So far so good. However no auth config was supplied yet.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; /mcp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Manage MCP servers
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚ùØ 1. atlassian ‚ñ≥ disconnected ¬∑ Enter to login&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;After pressing Enter and authenticating against our JIRA instance in a web
browser:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude mcp list
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking MCP server health...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;atlassian: https://mcp.atlassian.com/v1/sse &lt;span class="o"&gt;(&lt;/span&gt;SSE&lt;span class="o"&gt;)&lt;/span&gt; - ‚úì Connected
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude mcp get atlassian
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;atlassian:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Scope: User config &lt;span class="o"&gt;(&lt;/span&gt;available in all your projects&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Status: ‚úì Connected
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Type: sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; URL: https://mcp.atlassian.com/v1/sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;To remove this server, run: claude mcp remove &lt;span class="s2"&gt;&amp;#34;atlassian&amp;#34;&lt;/span&gt; -s user&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; /mcp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Atlassian MCP Server
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Status: ‚úî connected ‚úî authenticated
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;URL: https://mcp.atlassian.com/v1/sse
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Config location: /Users/thiago.perrotta/.claude.json [project: /Users/thiago.perrotta/gitops]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Capabilities: tools
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Tools: 27 tools
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚ùØ 1. View tools
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 2. Re-authenticate
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 3. Clear authentication
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 4. Reconnect
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 5. Disable&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Tools for atlassian (27 tools)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚ùØ 1. Get current user information read-only
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 2. List accessible resources read-only
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 3. List Confluence spaces read-only
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 4. Retrieve Confluence page read-only
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚Üì 5. List space pages read-only&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Let&amp;rsquo;s say I want to call the &amp;ldquo;Get current user information&amp;rdquo; tool.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Get current user information (atlassian) [read-only]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Tool name: atlassianUserInfo
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Full name: mcp__atlassian__atlassianUserInfo
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Description:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Get current user info from Atlassian&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Just describe it in natural language:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prompt&lt;/strong&gt;: &amp;ldquo;current user in JIRA&amp;rdquo;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Claude&lt;/strong&gt;:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; current user in JIRA
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚éø {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;account_id&amp;#34;: &amp;#34;{redacted}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;email&amp;#34;: &amp;#34;{redacted}&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚Ä¶ +22 lines (ctrl+o to expand)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚è∫ Thiago Perrotta
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Email: {redacted}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Account ID: {redacted}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Role: {redacted}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Department: {redacted}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Location: {redacted}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then I tried basic CRUD operations in natural language:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prompt&lt;/strong&gt;: &amp;ldquo;create an issue&amp;rdquo; - create: followed by further prompts with issue details ‚úÖ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Prompt&lt;/strong&gt;: &amp;ldquo;transition the issue to won&amp;rsquo;t do&amp;rdquo; ‚Äì update / delete ‚úÖ&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Prompt&lt;/strong&gt;: &amp;ldquo;find an issue related to foo deployment in cluster bar&amp;rdquo;) ‚Äì read ‚úÖ&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Everything worked successfully.&lt;/p&gt;
&lt;p&gt;I also tried:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Prompt&lt;/strong&gt; (plan mode on, thinking enabled): Propose a way to handle https://{corp}.atlassian.net/browse/INFRA-12528.&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;‚è∫ I&amp;rsquo;ll fetch the details of the Jira issue to understand what needs to be handled.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I feel this will be quite useful from now on!&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;For now?!?&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;I blame &lt;em&gt;Google&lt;/em&gt;, the corporation, for getting me accustomed to saying
&amp;ldquo;file a bug&amp;rdquo; and &amp;ldquo;bug tracker&amp;rdquo;. Not every ticket is a bug. Atlassian is
trying to shovel the &amp;ldquo;work item&amp;rdquo; term onto us, but &amp;ldquo;issue&amp;rdquo; is the
appropriate concept.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>claude code: custom commands</title><link>https://perrotta.dev/2025/10/claude-code-custom-commands/</link><pubDate>Mon, 06 Oct 2025 17:31:30 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/claude-code-custom-commands/</guid><description>&lt;p&gt;&lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt; supports &lt;a href="https://docs.claude.com/en/docs/claude-code/slash-commands#custom-slash-commands"&gt;custom commands&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The precise term is &amp;ldquo;custom slash commands&amp;rdquo;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Custom slash commands allow you to define frequently-used prompts as Markdown
files that Claude Code can execute. Commands are organized by scope
(project-specific or personal) and support namespacing through directory
structures.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I created my first custom slash command:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.claude/commands/send-pr.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;You are a world-class software developer who can write concise and descriptive
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pull requests &lt;span class="o"&gt;(&lt;/span&gt;PRs&lt;span class="o"&gt;)&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Sources of inspiration include:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Daniel Stenberg &lt;span class="o"&gt;(&lt;/span&gt;curl&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Junio Hamano &lt;span class="o"&gt;(&lt;/span&gt;git&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Linus Torvalds &lt;span class="o"&gt;(&lt;/span&gt;linux&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Send out a PR&lt;span class="o"&gt;[&lt;/span&gt;1&lt;span class="o"&gt;]&lt;/span&gt; corresponding to the current branch.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;If there&lt;span class="s1"&gt;&amp;#39;s a .github/PULL_REQUEST_TEMPLATE.md file, use it as template.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;If the current branch is &amp;#39;&lt;/span&gt;main&lt;span class="s1"&gt;&amp;#39; or &amp;#39;&lt;/span&gt;master&lt;span class="s1"&gt;&amp;#39;, create a local branch first.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;The branch name should be prefixed by my github username[2] and a slash.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;[1]: &amp;#39;&lt;/span&gt;gh pr create&lt;span class="s1"&gt;&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;[2]: &amp;#39;&lt;/span&gt;gh api user --jq .login&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It can be &amp;ldquo;executed&amp;rdquo; with &lt;code&gt;/send-pr&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&amp;ldquo;Execution&amp;rdquo; is merely &amp;ldquo;sending the prompt&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s akin to a snippet expander. Arguably one could do the same by setting a
&lt;code&gt;:send-pr&lt;/code&gt; snippet on e.g. &lt;a href="https://espanso.org/"&gt;Espanso&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Perhaps it is even better, as it would work with all CLI agents ‚Äì not only
Claude Code. Well, we keep on experimenting.&lt;/p&gt;
&lt;p&gt;Reusable custom slash commands will be shared in my &lt;a href="https://github.com/thiagowfx/.dotfiles/tree/master/claude/.claude/commands"&gt;.dotfiles&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>zizmor</title><link>https://perrotta.dev/2025/10/zizmor/</link><pubDate>Fri, 03 Oct 2025 12:44:21 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/zizmor/</guid><description>&lt;p&gt;I originally heard of &lt;a href="https://docs.zizmor.sh/"&gt;zizmor&lt;/a&gt; at &lt;a href="https://fosdem.org/2025/"&gt;FOSDEM 2025&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;zizmor is a static analysis tool for GitHub Actions. It can find and fix many
common security issues in typical GitHub Actions CI/CD setups.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One month later, I adopted it in the most important repos of our company.&lt;/p&gt;
&lt;p&gt;A few months later, I &lt;a href="https://perrotta.dev/2025/06/alpine-linux-packaging-track-new-software-releases/"&gt;added&lt;/a&gt; it to the
Alpine Linux repositories, and am happily
&lt;a href="https://pkgs.alpinelinux.org/packages?name=zizmor"&gt;maintaining&lt;/a&gt; it there.&lt;/p&gt;
&lt;p&gt;Now I use it &lt;em&gt;everywhere&lt;/em&gt;, via a git &lt;a href="https://pre-commit.com/"&gt;pre-commit&lt;/a&gt; hook:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/woodruffw/zizmor-pre-commit&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev: b933184438555436e38621f46ceb0c417cbed400 # frozen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v1.13.0&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;zizmor&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The project has recently reached a milestone: &lt;a href="https://blog.yossarian.net/2025/09/14/one-year-of-zizmor"&gt;it has turned one year
old&lt;/a&gt;. Its adoption,
community and feature set have all significantly increased during that time, in
a good way.&lt;/p&gt;
&lt;p&gt;The goal, impact and spirit of the project are all really great. And I&amp;rsquo;m sure
this is mainly thanks to the initiative and dedication of its author, &lt;a href="https://blog.yossarian.net/"&gt;William
Woodruff&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>Claude Code: cheatsheet</title><link>https://perrotta.dev/2025/10/claude-code-cheatsheet/</link><pubDate>Wed, 01 Oct 2025 20:03:54 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/claude-code-cheatsheet/</guid><description>&lt;p&gt;A brain dump as of Oct 1st, 2025 of my head, all things &lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="keyboard-shortcuts"&gt;Keyboard shortcuts&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Shift+Tab&lt;/code&gt; to cycle through: &amp;ldquo;default&amp;rdquo; -&amp;gt; &amp;ldquo;‚èµ‚èµ accept edits on&amp;rdquo; -&amp;gt; &amp;ldquo;‚è∏ plan mode on&amp;rdquo;
&lt;ul&gt;
&lt;li&gt;&amp;ldquo;‚èµ‚èµ Accept edits on&amp;rdquo; is a comfortable mode to be on by default, especially
when paired with git commits as checkpoints.&lt;/li&gt;
&lt;li&gt;A well-curated tool whitelist (c.f. &lt;code&gt;~/.claude/settings.json&lt;/code&gt;) can further
enhance this mode.&lt;/li&gt;
&lt;li&gt;&amp;ldquo;‚èµ‚èµ Accept edits on&amp;rdquo; is not the same as &lt;code&gt;--dangerously-skip-permissions&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Bypass all permission checks. Recommended only for sandboxes with no internet access.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;Tab&lt;/code&gt; to toggle &amp;ldquo;Thinking on&amp;rdquo; / &amp;ldquo;Thinking off&amp;rdquo;
&lt;ul&gt;
&lt;li&gt;This is a brand new feature in &lt;a href="https://www.anthropic.com/news/enabling-claude-code-to-work-more-autonomously"&gt;Claude Code 2.0&lt;/a&gt;, just released this week.
Hence I haven&amp;rsquo;t used it so far. Toggling the plan mode is typically enough
for my needs.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Esc Esc&lt;/code&gt; to clear input / &lt;code&gt;/rewind&lt;/code&gt; to a previous checkpoint
&lt;ul&gt;
&lt;li&gt;I prefer to &amp;ldquo;manually steer / tune&amp;rdquo; the LLM. Learn from past mistakes!&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl-r&lt;/code&gt; to search previous prompts ‚Äì similarly to &lt;code&gt;bash&lt;/code&gt; / &lt;code&gt;zsh&lt;/code&gt; shell
history&lt;/li&gt;
&lt;li&gt;&lt;code&gt;!&lt;/code&gt; for shell mode e.g. &lt;code&gt;! ls&lt;/code&gt; or &lt;code&gt;! git commit -a -m &amp;quot;msg&amp;quot;&lt;/code&gt;. Good for
one-offs.
&lt;ul&gt;
&lt;li&gt;Alternatively, simply open a new shell tab / split / window.&lt;/li&gt;
&lt;li&gt;Alternatively, suspend Claude with &lt;code&gt;Ctrl-z&lt;/code&gt;:&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Claude Code has been suspended. Run `fg` to bring Claude Code back.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Note: ctrl + z now suspends Claude Code, ctrl + _ undoes input.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[1] + 78756 suspended (signal) claude&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/&lt;/code&gt; for commands ‚Äì TAB completion is available.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@&lt;/code&gt; for file paths e.g. &lt;code&gt;@README.md&lt;/code&gt; or &lt;code&gt;@.env&lt;/code&gt; ‚Äì TAB completion is supported
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;@&lt;/code&gt; to provide targeted context in prompts, for example: &lt;code&gt;Upgrade @main.go to incorporate logging. Follow a pattern similar to @vendor/main.go. Update @README.md afterwards&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;#&lt;/code&gt; to memorize (a.k.a. &amp;ldquo;add to memory&amp;rdquo;)
&lt;ul&gt;
&lt;li&gt;I don&amp;rsquo;t use this shortcut much. Instead, prefer editing &lt;code&gt;CLAUDE.md&lt;/code&gt; directly
for pristine, per-repo settings. This is comparable to having a local, per
git repo &lt;code&gt;.gitignore&lt;/code&gt; versus a &lt;code&gt;~/.gitignore_global&lt;/code&gt; that affects all
repositories.&lt;/li&gt;
&lt;li&gt;Project memory lives in &lt;code&gt;CLAUDE.md&lt;/code&gt;, user memory lives in
&lt;code&gt;~/.claude/CLAUDE.md&lt;/code&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl-o&lt;/code&gt; for verbose output&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl-t&lt;/code&gt; to show TODOs&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Shift+Enter&lt;/code&gt; for newline (&lt;code&gt;\n&lt;/code&gt;); pre-requisite: &lt;code&gt;/terminal-setup&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Emacs / readline keybindings generally work for text navigation: &lt;code&gt;C-a&lt;/code&gt;, &lt;code&gt;C-e&lt;/code&gt;,
&lt;code&gt;C-b&lt;/code&gt;, &lt;code&gt;C-f&lt;/code&gt;, &lt;code&gt;C-u&lt;/code&gt;, &lt;code&gt;C-p&lt;/code&gt;, &lt;code&gt;C-n&lt;/code&gt;, &lt;code&gt;C-w&lt;/code&gt;. There&amp;rsquo;s also a vim mode that can be
toggled with &lt;code&gt;/vim&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gripe&lt;/strong&gt;: &lt;code&gt;Ctrl-l&lt;/code&gt; does not clear the screen. And neither does &lt;code&gt;Esc Esc&lt;/code&gt;.
Surely someone has already filed a feature request for this? There&amp;rsquo;s a
&lt;code&gt;/clear&lt;/code&gt; command, but it is meant to clear history and free up context, which
is totally different.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Ctrl-_&lt;/code&gt; to undo. I prefer &lt;code&gt;C-w&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Gripe&lt;/strong&gt;: It hard-codes mentioning &amp;ldquo;bash&amp;rdquo; in various places, instead of
&amp;ldquo;shell&amp;rdquo;. &lt;code&gt;bash&lt;/code&gt; is not the only POSIX shell out there. Heck, there&amp;rsquo;s even a
&lt;code&gt;/bashes&lt;/code&gt; command to list and manage background tasks.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;Esc&lt;/code&gt; to interrupt (think of &lt;code&gt;C-g&lt;/code&gt; on Emacs).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Most of the above reference can be pulled up with:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;?&lt;/code&gt; for help&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A few handy comments not previously mentioned:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;/cost&lt;/code&gt;: show total cost + duration of the current session
&lt;ul&gt;
&lt;li&gt;See also: &lt;a href="https://perrotta.dev/2025/09/claude-ccusage/"&gt;ccusage&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/export&lt;/code&gt;: copy the current conversation to the clipboard, or export it to a
file&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/init&lt;/code&gt;: to bootstrap and scaffold / populate &lt;code&gt;CLAUDE.md&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/mcp&lt;/code&gt; to manage MCP servers&lt;/li&gt;
&lt;li&gt;&lt;code&gt;/resume&lt;/code&gt;: resume a (previous) conversation.
&lt;ul&gt;
&lt;li&gt;Alternatively, launch &lt;code&gt;claude&lt;/code&gt; with &lt;a href="https://perrotta.dev/2025/09/claude--resume/"&gt;&lt;code&gt;--resume&lt;/code&gt;&lt;/a&gt; in the desired CWD.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="settings"&gt;Settings&lt;/h2&gt;
&lt;p&gt;My &lt;code&gt;~/.claude/settings.json&lt;/code&gt; at the time of this post:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;env&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;CLAUDE_CODE_ENABLE_TELEMETRY&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;permissions&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;allow&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(ansible-doc:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(command -v:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(fd:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(find:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(gh pr diff:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(gh pr list:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(gh pr review-comment list:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(gh pr view:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(grep:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(hadolint:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(helm template:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(ls:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(rg:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(yamllint:*)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;statusLine&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;bash ~/.claude/statusline.sh&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;alwaysThinkingEnabled&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;span class="err"&gt;%&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;no telemetry (privacy!)&lt;/li&gt;
&lt;li&gt;allow a couple of often used tools (utilities), especially read-only ones&lt;/li&gt;
&lt;li&gt;add a simple status line; originally scaffolded with &lt;code&gt;/statusline&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;do not always think (it&amp;rsquo;s slow &amp;amp; expensive!)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;settings.json&lt;/code&gt; and &lt;code&gt;statusline.sh&lt;/code&gt; are both in my
&lt;a href="https://github.com/thiagowfx/.dotfiles"&gt;dotfiles&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>New script: sd-world: perform a full system upgrade</title><link>https://perrotta.dev/2025/10/new-script-sd-world-perform-a-full-system-upgrade/</link><pubDate>Wed, 01 Oct 2025 01:11:09 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/new-script-sd-world-perform-a-full-system-upgrade/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Whenever I want to upgrade any one of my systems, I run &lt;code&gt;sd-world&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now the script has evolved, being &lt;a href="https://github.com/thiagowfx/pancake/blob/9b2cc8c6df6103d4ab1457e30353fe0711290aa2/sd-world/sd-world.sh"&gt;hosted&lt;/a&gt; in &lt;a href="https://github.com/thiagowfx/pancake"&gt;pancake&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;it handles interruptions (Ctrl-C) more efficiently (it was my biggest gripe)&lt;/li&gt;
&lt;li&gt;the output is more user-friendly&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Preview:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ./sd_world.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Starting system upgrade...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Detected macOS system
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrading Homebrew...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==&amp;gt; Updating Homebrew...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Already up-to-date.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==&amp;gt; Upgrading 2 outdated packages:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;node@18, python@3.11
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==&amp;gt; Upgrading node@18 18.17.0 -&amp;gt; 18.19.0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==&amp;gt; Upgrading python@3.11 3.11.6 -&amp;gt; 3.11.7
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Homebrew upgrade completed successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrading Mac App Store...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Mac App Store upgrade completed successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrading System Updates...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Software Update Tool
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Finding available software
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;No new software available.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì System Updates upgrade completed successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrading Claude Code...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking for updates...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;claude-code v0.8.2 ‚Üí v0.8.3 (latest)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Updated successfully! üéâ
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Claude Code upgrade completed successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrading myrepos...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mr update: /Users/username/repos/project1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;From github.com:user/project1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; abc1234..def5678 main -&amp;gt; origin/main
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Updating abc1234..def5678
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Fast-forward
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; README.md | 2 +-
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 1 file changed, 1 insertion(+), 1 deletion(-)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;mr update: finished (1 ok)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì myrepos upgrade completed successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrade Summary:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Successfully upgraded: 5/5 package managers
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;All package managers upgraded successfully!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>pancake: potpourri scripts</title><link>https://perrotta.dev/2025/09/pancake-potpourri-scripts/</link><pubDate>Thu, 25 Sep 2025 13:23:35 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/pancake-potpourri-scripts/</guid><description>&lt;p&gt;I&amp;rsquo;ve been meaning to create a git repository to host a collection of
miscellaneous scripts / binaries that are too big to fit in shell aliases /
functions, or text snippets.&lt;/p&gt;
&lt;p&gt;This started today: &lt;a href="https://github.com/thiagowfx/pancake"&gt;https://github.com/thiagowfx/pancake&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s no particular reason to call it &amp;ldquo;pancake&amp;rdquo;, just like there&amp;rsquo;s no special
reason to suffix my first name with &amp;ldquo;wfx&amp;rdquo;. Sometimes it is just what it is.&lt;/p&gt;
&lt;p&gt;I am still fleshing out a project structure, it shall become clearer as more
scripts are added over time.&lt;/p&gt;
&lt;p&gt;For now:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% z pancake
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago@MacBook-Pro ~/Workspace/pancake (git)-[master]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% tree
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ LICENSE
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ op_login_all
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îÇ ‚îú‚îÄ‚îÄ op_login_all.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îÇ ‚îî‚îÄ‚îÄ README.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îî‚îÄ‚îÄ README.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>homebrew: command-not-found</title><link>https://perrotta.dev/2025/09/homebrew-command-not-found/</link><pubDate>Tue, 23 Sep 2025 10:14:21 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/homebrew-command-not-found/</guid><description>&lt;p&gt;As of &lt;a href="https://github.com/Homebrew/homebrew-command-not-found"&gt;Sep 22nd, 2025&lt;/a&gt;,
homebrew &lt;em&gt;natively&lt;/em&gt; supports a &amp;ldquo;command-not-found&amp;rdquo; hook.&lt;/p&gt;
&lt;p&gt;The emphasis is on &lt;em&gt;natively&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Previously this could be achieved with a tap:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew tap https://github.com/Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;src_files &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;brew --prefix&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;/Library/Taps/homebrew/homebrew-command-not-found/handler.sh&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Thus yielding this effect:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ghc
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;zsh: correct &lt;span class="s1"&gt;&amp;#39;ghc&amp;#39;&lt;/span&gt; to &lt;span class="s1"&gt;&amp;#39;gh&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;nyae&lt;span class="o"&gt;]&lt;/span&gt;? n
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The program &lt;span class="s1"&gt;&amp;#39;ghc&amp;#39;&lt;/span&gt; can be found in the following formulae:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * ghc
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * ghc@9.10
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * ghc@9.4
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * ghc@9.6
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * ghc@9.8
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Try: brew install &amp;lt;selected formula&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The difference today is that there&amp;rsquo;s no need to tap an extra repository anymore
to do so; the hook is henceforth built directly into homebrew&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;hash&lt;/span&gt; brew &amp;gt;/dev/null 2&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; src_files &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;brew --repository&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;/Library/Homebrew/command-not-found/handler.sh&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For completeness, untap the command-not-found repository as it is no longer
needed:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew doctor
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Please note that these warnings are just used to &lt;span class="nb"&gt;help&lt;/span&gt; the Homebrew maintainers
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;with debugging &lt;span class="k"&gt;if&lt;/span&gt; you file an issue. If everything you use Homebrew &lt;span class="k"&gt;for&lt;/span&gt; is
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;working fine: please don&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t worry or file an issue&lt;span class="p"&gt;;&lt;/span&gt; just ignore this. Thanks!
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Warning: You have the following deprecated, official taps tapped:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Untap them with &lt;span class="sb"&gt;`&lt;/span&gt;brew untap&lt;span class="sb"&gt;`&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew untap Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% Untapping homebrew/command-not-found...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Untapped &lt;span class="o"&gt;(&lt;/span&gt;2,572 files, 87.4MB&lt;span class="o"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My dotfiles diff:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit f02c9ab2b203a6235414924e7ddb4b8b6ac6ee52 (HEAD -&amp;gt; master)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Tue Sep 23 10:16:47 2025 +0200
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; brew: command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;diff --git profile/.profile.d/10-brew.sh profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;index 1828f77..97645f0 100644
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+++ profile/.profile.d/10-brew.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;&lt;span class="gu"&gt;@@ -11,9 +11,8 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt; [ -z &amp;#34;$HOMEBREW_PREFIX&amp;#34; ] &amp;amp;&amp;amp; [ -x /opt/homebrew/bin/brew ] &amp;amp;&amp;amp; eval &amp;#34;$(/opt/homebrew/bin/brew shellenv)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # command-not-found hook
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;-# setup: brew tap &amp;#34;homebrew/command-not-found&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;-# https://github.com/Homebrew/homebrew-command-not-found
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;-hash brew &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; src_files &amp;#34;$(brew --prefix)/Library/Taps/homebrew/homebrew-command-not-found/handler.sh&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+# brew --prefix works too
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+hash brew &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; src_files &amp;#34;$(brew --repository)/Library/Homebrew/command-not-found/handler.sh&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # GNU coreutils
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; path_munge &amp;#34;/opt/homebrew/opt/coreutils/libexec/gnubin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/13d66a2b80efa02c611a747008124cbbb3ef3a8f/profile/.profilerc#L17"&gt;&lt;code&gt;src_files&lt;/code&gt;&lt;/a&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>LaTeX CV</title><link>https://perrotta.dev/2025/09/latex-cv/</link><pubDate>Wed, 17 Sep 2025 13:15:31 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/latex-cv/</guid><description>&lt;p&gt;For ages I&amp;rsquo;ve been using a resum√© crafted in Google Docs. I was never a big fan
of it, but it got the job done&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;It was always one of my wildest dreams to rewrite my resum√© in LaTeX.&lt;/p&gt;
&lt;p&gt;The main challenge would be to either i) find a decent template or ii) create my
own template. Thanks to &lt;a href="https://www.overleaf.com/"&gt;Overleaf&lt;/a&gt;, i) is quite
straightforward:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/latex/templates/software-engineer-resume/gqxmqsvsbdjf"&gt;https://www.overleaf.com/latex/templates/software-engineer-resume/gqxmqsvsbdjf&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/latex/templates/faangpath-simple-template/npsfpdqnxmbc"&gt;https://www.overleaf.com/latex/templates/faangpath-simple-template/npsfpdqnxmbc&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/latex/templates/swe-resume-template/bznbzdprjfyy"&gt;https://www.overleaf.com/latex/templates/swe-resume-template/bznbzdprjfyy&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/latex/templates/software-engineering-resume/mcvwcrmddsyw"&gt;https://www.overleaf.com/latex/templates/software-engineering-resume/mcvwcrmddsyw&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.overleaf.com/latex/templates/rendercv-engineeringresumes-theme/shwqvsxdgkjy"&gt;https://www.overleaf.com/latex/templates/rendercv-engineeringresumes-theme/shwqvsxdgkjy&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I could either use overleaf itself, or do everything locally (e.g. with
&lt;code&gt;texlive&lt;/code&gt; + &lt;code&gt;TeXShop.app&lt;/code&gt; in macOS).&lt;/p&gt;
&lt;p&gt;Another possibility is to use &lt;a href="https://typst.app/"&gt;Typst&lt;/a&gt;, which is a modern
take for a typesetting engine. Think of writing LaTeX without having to know how
to write LaTeX, using a &lt;a href="https://typst.app/docs/reference/syntax/"&gt;markup
language&lt;/a&gt; that heavily resembles
Markdown.&lt;/p&gt;
&lt;p&gt;They even provide a neat web &lt;a href="https://typst.app/play/"&gt;playground&lt;/a&gt;, wherein the
rendered document is updated near instantly. It&amp;rsquo;s such a superb user experience!&lt;/p&gt;
&lt;p&gt;And it&amp;rsquo;s &lt;a href="https://typst.app/pricing/"&gt;free&lt;/a&gt; and &lt;a href="https://github.com/typst/typst"&gt;open
source&lt;/a&gt;! It is capable of rendering multiple
formats: markdown, html, png, pdf. The possibility of using the same source,
with the same looks, for both your printed resum√© (PDF) and your website
(markdown, html) is very appealing.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://rendercv.com/"&gt;RenderCV&lt;/a&gt; project builds on top of Typst to build a
turnkey solution to write your CV
&lt;a href="https://github.com/rendercv/rendercv"&gt;declaratively&lt;/a&gt;, purely from a
&lt;a href="https://github.com/rendercv/rendercv/blob/main/examples/John_Doe_ClassicTheme_CV.yaml"&gt;YAML&lt;/a&gt;
file&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;All these initiatives are great. I have finally had the time to ditch Google
Docs for a fully open source text format.&lt;/p&gt;
&lt;p&gt;Now I am debating whether to embed my new CV into this website.&lt;/p&gt;
&lt;p&gt;Automated scraping is naughty, but an in-context portfolio would be amazing.
Perhaps I could simply put it behind a
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/Authentication"&gt;password-protected&lt;/a&gt;
page? Or use symmetric cryptography to obfuscate it, with some bits of
JavaScript to decrypt it upon using a pre-shared passphrase key. Of course, both
approaches would be helpful only if I come up with a scheme to share the key with
humans whilst making it hard for bots to decipher it. Perhaps a riddle? If the
friction is too high, humans won&amp;rsquo;t get to fetch it though. We&amp;rsquo;ll see.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;pun intended&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;what&amp;rsquo;s next, the writing of your CV in &lt;a href="https://nixos.org/"&gt;Nix&lt;/a&gt; language?&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>GitHub stale bot considered harmful</title><link>https://perrotta.dev/2025/09/github-stale-bot-considered-harmful/</link><pubDate>Tue, 16 Sep 2025 23:19:17 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/github-stale-bot-considered-harmful/</guid><description>&lt;p&gt;&lt;a href="https://drewdevault.com/2021/10/26/stalebot.html"&gt;Drew DeVault&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;One of GitHub&amp;rsquo;s &amp;ldquo;recommended&amp;rdquo; marketplace features is the &amp;ldquo;stale&amp;rdquo; bot. The
purpose of this bot is to automatically close GitHub issues after a period of
inactivity, 60 days by default. You have probably encountered it yourself in
the course of your work.&lt;/p&gt;
&lt;p&gt;This is a terrible, horrible, no good, very bad idea.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m not sure what motivates maintainers to install this on their repository,
other than the fact that GitHub recommends it to them. Perhaps it&amp;rsquo;s motivated
by a feeling of shame for having a lot of unanswered issues? If so, this might
stem from a misunderstanding of the responsibilities a maintainer has to their
project. You are not obligated to respond to every issue, implement every
feature request, or fix every bug, or even acknowledge them in any way.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src="https://redacted.moe/f/e2f0d39c.png" alt="github-actions stale bot automatically locking an issue"&gt;&lt;/p&gt;
&lt;p&gt;I second this. It&amp;rsquo;s not a &amp;ldquo;shame&amp;rdquo; to accumulate issues. Just set expectations
accordingly.&lt;/p&gt;
&lt;p&gt;Lately I&amp;rsquo;ve been encountering various CNCF projects that employ it, and it&amp;rsquo;s
&lt;a href="https://github.com/helm/helm/issues/13192"&gt;simply&lt;/a&gt;
&lt;a href="https://github.com/helm/chart-testing/issues/748"&gt;awful&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I do not have anything else to add; Drew pretty much nails it.&lt;/p&gt;</description></item><item><title>Broot</title><link>https://perrotta.dev/2025/09/broot/</link><pubDate>Mon, 15 Sep 2025 12:36:10 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/broot/</guid><description>&lt;p&gt;&lt;a href="https://github.com/Canop/broot"&gt;broot&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A new way to see and navigate directory trees: &lt;a href="https://dystroy.org/broot"&gt;https://dystroy.org/broot&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s a mixture of &lt;code&gt;ranger&lt;/code&gt; / &lt;code&gt;mc&lt;/code&gt; (terminal file manager), &lt;code&gt;fzf&lt;/code&gt; (fuzzy file
finder), &lt;code&gt;tree&lt;/code&gt; (list directory trees in the terminal), &lt;code&gt;ls&lt;/code&gt;, &lt;code&gt;find&lt;/code&gt; / &lt;code&gt;fd&lt;/code&gt;,
&lt;code&gt;fpp&lt;/code&gt;, &lt;code&gt;grep&lt;/code&gt; / &lt;code&gt;ack&lt;/code&gt; / &lt;code&gt;rg&lt;/code&gt;, all-in-one. I&amp;rsquo;m starting to occasionally use it in
my daily workflow. Its &lt;a href="https://dystroy.org/broot/"&gt;&lt;code&gt;Why?&lt;/code&gt;&lt;/a&gt; page may convince
you to give it a try.&lt;/p&gt;
&lt;p&gt;The upstream documentation is quite decent; as such, I do not intend to
replicate it here. That said, here are a couple of ad-hoc notes.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Usage&lt;/strong&gt;: &lt;code&gt;broot {dir}&lt;/code&gt; or simply &lt;code&gt;broot&lt;/code&gt; to open it in the current directory,
as you would with &lt;code&gt;ranger&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;-c&lt;/code&gt; to &lt;code&gt;open_preview&lt;/code&gt;. I do not know why this is not the default behavior. It
really should be! It displays the file contents of the currently focused file in
the right-side pane. We can make it the default:&lt;/p&gt;

&lt;div class="codeblock" data-lang="hjson"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;hjson&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;pre tabindex="0"&gt;&lt;code class="language-hjson" data-lang="hjson"&gt;~/.config/broot/conf.hjson:

###############################################################
# Default flags
# You can set up flags you want broot to start with by
# default, for example `default_flags=&amp;#34;-ihp&amp;#34;` if you usually want
# to see hidden and gitignored files and the permissions (then
# if you don&amp;#39;t want the hidden files at a specific launch,
# you can launch broot with `br -H`).
# A popular flag is the `g` one which displays git related info.
#
# default_flags:
default_flags: &amp;#34;-c :open_preview&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Use the up and down arrows to navigate (or Tab / Shift + Tab). Vi-like
keybindings (&lt;code&gt;j&lt;/code&gt; / &lt;code&gt;k&lt;/code&gt;) do not work but that&amp;rsquo;s for a good reason, by design:
there&amp;rsquo;s a permanent command-line bar at the bottom (think of &lt;code&gt;mc&lt;/code&gt;), used to
issue commands to &lt;code&gt;broot&lt;/code&gt; and/or employ file/directory filtering; we need to be
able to type in characters there. This takes some getting used to if you&amp;rsquo;re
coming from &lt;code&gt;ranger&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ENTER&lt;/code&gt;, by default, opens the currently focused file in your visual editor
(e.g. VSCode, Zed). I am not a fan of this behavior, I&amp;rsquo;d rather it to use
&lt;code&gt;$EDITOR&lt;/code&gt; (e.g. &lt;code&gt;vim&lt;/code&gt;, &lt;code&gt;emacs&lt;/code&gt;). It&amp;rsquo;s possible to change this behavior, but I
haven&amp;rsquo;t done so yet. There&amp;rsquo;s a workaround: type in &lt;code&gt;&amp;lt;Space&amp;gt;e&amp;lt;Enter&amp;gt;&lt;/code&gt; (or
&lt;code&gt;:e&amp;lt;Enter&amp;gt;&lt;/code&gt; like in &lt;code&gt;vim&lt;/code&gt;). This issues the &lt;code&gt;edit&lt;/code&gt; command, which opens
&lt;code&gt;$EDITOR&lt;/code&gt;. I wish &lt;code&gt;ENTER&lt;/code&gt; would so do out-of-the-box!&lt;/p&gt;
&lt;p&gt;The main reason to use &lt;code&gt;broot&lt;/code&gt; is due to its excellent and versatile
&lt;a href="https://dystroy.org/broot/input/"&gt;filtering&lt;/a&gt; capabilities, which allows
composite searches as well. Here&amp;rsquo;s a practical example:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ep/pgbouncer\/values.yaml/&amp;amp;c/default&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;it searches for all files named &lt;code&gt;pgbouncer/values.yaml&lt;/code&gt; (within or nested in
PWD) whose file contents include the string &lt;code&gt;default&lt;/code&gt;. Then it displays a
dynamic list of matches (including previews!) which you can manipulate
individually or in batches. For example, you could easily open each of them in
&lt;code&gt;$EDITOR&lt;/code&gt;, or delete all of them, or run &lt;code&gt;sed -i&lt;/code&gt; in all of them.&lt;/p&gt;
&lt;p&gt;Explanation of the search modes (there are even more):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ep/&lt;/code&gt;: exact string search on subpath (full path) ‚Äì like &lt;code&gt;fd -p&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;c/&lt;/code&gt;: exact string search on file content ‚Äì like &lt;code&gt;grep&lt;/code&gt; or &lt;code&gt;ack&lt;/code&gt; or &lt;code&gt;rg&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;:gs&lt;/code&gt; opens an interactive tree with files in &lt;code&gt;git status&lt;/code&gt; ‚Äì comparable to &lt;code&gt;git status | fpp -ko&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;We can run &lt;code&gt;sed -i&lt;/code&gt; in all matches. First, define a verb (action) for it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="hjson"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;hjson&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;pre tabindex="0"&gt;&lt;code class="language-hjson" data-lang="hjson"&gt;~/.config/broot/verbs.hjson:

###############################################################
# This file contains the verb definitions for broot
#
# Some verbs here are examples and not enabled by default: you
# need to uncomment them if you want to use them.
#
# Documentation at https://dystroy.org/broot/verbs/
###############################################################
verbs: [
 [...]
 {
 invocation: &amp;#34;sed {arg}&amp;#34;
 shortcut: sed
 apply_to: text_file
 execution: &amp;#34;gsed -i -e {arg} {file}&amp;#34;
 leave_broot: false
 }
 [...]
]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then, after running a search, type in &lt;code&gt;&amp;lt;Space&amp;gt;sed&amp;lt;Space&amp;gt;'s/foo/bar/g'&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Again, why is this not a built-in verb?&lt;/p&gt;
&lt;p&gt;All things considered, I think &lt;code&gt;broot&lt;/code&gt; needs some polishing in order to become
easy(ier) to use. It is a powerful tool, but its out-of-the-box devex experience
leaves a lot to be desired.&lt;/p&gt;
&lt;p&gt;Another example: &lt;a href="https://github.com/Canop/broot/issues/453"&gt;#453&lt;/a&gt;: there&amp;rsquo;s no
filter history.&lt;/p&gt;</description></item><item><title>Booking.com mobile-only rates</title><link>https://perrotta.dev/2025/09/booking.com-mobile-only-rates/</link><pubDate>Thu, 11 Sep 2025 11:35:39 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/booking.com-mobile-only-rates/</guid><description>&lt;p&gt;When looking for accommodation deals on &lt;a href="https://booking.com"&gt;Booking.com&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;, you
may or may not notice that there are some &lt;a href="https://partner.booking.com/en-gb/solutions/mobile-rates"&gt;mobile-only
rates&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Over half of all bookings made on our site come through a mobile device. By
activating mobile rates at your property, you can tap into this valuable and
expanding traveller segment.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;p&gt;All you have to do to capitalise on mobile rate benefits is to offer an
exclusive discount of 10% or higher for those booking via mobile. Once you&amp;rsquo;ve
done this, a special badge will appear next to your property in the search
results and on your property page. This helps increase your visibility, and
can improve your conversion rate for mobile bookers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It can be quite inconvenient to grab your phone (or tablet) just for the sake of
doing a couple of inquiries, especially when planning a multi-city trip.&lt;/p&gt;
&lt;p&gt;It turns out there&amp;rsquo;s no need to do so. The following trick works, astonishingly:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;use your computer web browser as usual to initiate a search&lt;/li&gt;
&lt;li&gt;open the browser devtools pane; all major browsers have one these days&lt;/li&gt;
&lt;li&gt;toggle mobile mode in it&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Example in Google Chrome / Chromium on macOS: press &lt;code&gt;Cmd + Option + J&lt;/code&gt; followed
by &lt;code&gt;Cmd + Shift + M&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You should then be able to tap into &lt;a href="https://en.wikipedia.org/wiki/Dark_pattern"&gt;mobile-only
deals&lt;/a&gt; from your computer. Enjoy!&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Nonetheless, it&amp;rsquo;s still typically better to book accommodations &lt;em&gt;directly&lt;/em&gt;
from the property listings. Cut the middle men!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>LeetCoding</title><link>https://perrotta.dev/2025/09/leetcoding/</link><pubDate>Sat, 06 Sep 2025 02:02:24 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/09/leetcoding/</guid><description>&lt;p&gt;If you haven&amp;rsquo;t noticed, I have a new &lt;a href="https://perrotta.dev/tags/coding/"&gt;coding&lt;/a&gt;
section on this site.&lt;/p&gt;
&lt;p&gt;For the sake of not &amp;ldquo;polluting&amp;rdquo; the main RSS feed, coding posts do not make it
to &lt;code&gt;/index.xml&lt;/code&gt;. Instead, they have their own
&lt;a href="https://perrotta.dev/tags/coding/index.xml"&gt;coding&lt;/a&gt; feed.&lt;/p&gt;
&lt;p&gt;In the future I will move &lt;a href="https://perrotta.dev/tags/aoc/"&gt;my&lt;/a&gt; &lt;a href="https://adventofcode.com/"&gt;advent of
code&lt;/a&gt; posts there as well.&lt;/p&gt;
&lt;p&gt;Problem sets:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://leetcode.com/"&gt;&lt;strong&gt;LeetCode&lt;/strong&gt;&lt;/a&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://leetcode.com/problem-list/array/"&gt;Arrays&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://leetcode.com/studyplan/top-interview-150/"&gt;Top 150&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="https://bytebytego.com/"&gt;&lt;strong&gt;ByteByteGo&lt;/strong&gt;&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.hackerrank.com/"&gt;HackerRank&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>'It's never a good time'</title><link>https://perrotta.dev/2025/08/its-never-a-good-time/</link><pubDate>Fri, 29 Aug 2025 11:55:44 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/its-never-a-good-time/</guid><description>&lt;p&gt;When is the best time&amp;hellip;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;to move countries?&lt;/li&gt;
&lt;li&gt;to have a baby?&lt;/li&gt;
&lt;li&gt;to switch jobs?&lt;/li&gt;
&lt;li&gt;to find a new apartment?&lt;/li&gt;
&lt;li&gt;to start a new hobby?&lt;/li&gt;
&lt;li&gt;to try out a new sport?&lt;/li&gt;
&lt;li&gt;to get promoted?&lt;/li&gt;
&lt;li&gt;to call your loved ones?&lt;/li&gt;
&lt;li&gt;to catch up with a long-time friend?&lt;/li&gt;
&lt;li&gt;to travel?&lt;/li&gt;
&lt;li&gt;to bootstrap a company?&lt;/li&gt;
&lt;li&gt;to join an open source community?&lt;/li&gt;
&lt;li&gt;to attend a beloved conference?&lt;/li&gt;
&lt;li&gt;to pray?&lt;/li&gt;
&lt;li&gt;to smile?&lt;/li&gt;
&lt;li&gt;to delete your social media accounts?&lt;/li&gt;
&lt;li&gt;to declutter and tidy up?&lt;/li&gt;
&lt;li&gt;to get that new haircut?&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It turns out, &lt;a href="https://www.goodreads.com/book/show/58784475-tomorrow-and-tomorrow-and-tomorrow"&gt;it&amp;rsquo;s never a good
time&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s always something happening in the world.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s always an inconvenience.&lt;/p&gt;
&lt;p&gt;An excuse.&lt;/p&gt;
&lt;p&gt;An obstacle.&lt;/p&gt;
&lt;p&gt;An inertia field exerting its effect in the entire environment.&lt;/p&gt;
&lt;p&gt;When is a good time?&lt;/p&gt;
&lt;p&gt;If you wait for it for too long, suddenly it may end up being too late.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=XJIgHWnkcnA"&gt;The future starts with you&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>YAML: JSON patch: test</title><link>https://perrotta.dev/2025/08/yaml-json-patch-test/</link><pubDate>Fri, 22 Aug 2025 16:49:58 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/yaml-json-patch-test/</guid><description>&lt;p&gt;&lt;a href="https://datatracker.ietf.org/doc/html/rfc6902"&gt;RFC 6902&lt;/a&gt;, JavaScript Object Notation (JSON) Patch:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;JSON Patch defines a JSON document structure for expressing a sequence of
operations to apply to a JavaScript Object Notation (JSON) document; it is
suitable for use with the HTTP PATCH method. The &amp;ldquo;application/json-patch+json&amp;rdquo;
media type is used to identify such patch documents.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://jsonpatch.me/"&gt;jsonpatch.me&lt;/a&gt; has a sandbox to play with it.&lt;/p&gt;
&lt;h2 id="example"&gt;Example&lt;/h2&gt;
&lt;p&gt;JSON:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;from&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Unknown&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Patch (also a JSON!):&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;op&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;replace&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;path&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/message&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;value&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Patching JSON is fun&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;op&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;add&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;path&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/with&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;value&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;jsonpatch.me&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;op&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;remove&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nt"&gt;&amp;#34;path&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/from&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Result:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;message&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Patching JSON is fun&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;with&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;jsonpatch.me&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="yaml"&gt;YAML&lt;/h2&gt;
&lt;p&gt;It&amp;rsquo;s also possible to use JSON Patch with YAML, because &lt;a href="https://yaml.org/spec/1.2-old/spec.html#id2759572"&gt;YAML is a superset of
JSON&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;YAML:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;message&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Hello World&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;from&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Unknown&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The same JSON patch as before yields this result:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;message&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Patching JSON is fun&amp;#34;&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;with&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;jsonpatch.me&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We could have expressed the patch in YAML form if we wanted to:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- &lt;span class="nt"&gt;op&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;replace&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/message&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;value&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;Patching JSON is fun&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;- &lt;span class="nt"&gt;op&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;add&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/with&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;value&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;jsonpatch.me&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;- &lt;span class="nt"&gt;op&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;remove&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/from&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="tests"&gt;Tests?&lt;/h2&gt;
&lt;p&gt;It&amp;rsquo;s intuitive to understand the basic JSON patch operations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;add&lt;/li&gt;
&lt;li&gt;remove&lt;/li&gt;
&lt;li&gt;replace&lt;/li&gt;
&lt;li&gt;move&lt;/li&gt;
&lt;li&gt;copy&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;What comes off as surprising is that there&amp;rsquo;s also a
&lt;a href="https://datatracker.ietf.org/doc/html/rfc6902#section-4.6"&gt;&lt;em&gt;test&lt;/em&gt;&lt;/a&gt; operation.&lt;/p&gt;
&lt;p&gt;At this point I would recommend the reader to look at the spec, it&amp;rsquo;s quite
readable.&lt;/p&gt;
&lt;p&gt;Here is an example of how I typically use &lt;em&gt;test&lt;/em&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- &lt;span class="nt"&gt;op&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;test&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/spec/syncPolicy/syncOptions/3&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;value&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;ServerSideApply=true&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;- &lt;span class="nt"&gt;op&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;remove&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;path&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;/spec/syncPolicy/syncOptions/3&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Before &lt;a href="https://datatracker.ietf.org/doc/html/rfc6902#appendix-A.4"&gt;removing an array
element&lt;/a&gt; (which must
be done by index), check that we&amp;rsquo;re removing the appropriate one.&lt;/p&gt;
&lt;p&gt;Why? Because it is error-prone not to do so. If someone reorders the array for
some reason, we would end up deleting the incorrect array element! Do you want
to be the one writing up the postmortem?&lt;/p&gt;</description></item><item><title>Kubernetes: list all ImagePullBackOff container images</title><link>https://perrotta.dev/2025/08/kubernetes-list-all-imagepullbackoff-container-images/</link><pubDate>Thu, 21 Aug 2025 13:34:27 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/kubernetes-list-all-imagepullbackoff-container-images/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt; Upgrade the
&lt;a href="https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack"&gt;&lt;code&gt;kube-prometheus-stack&lt;/code&gt;&lt;/a&gt;
helm chart in &lt;a href="https://portal.azure.cn/"&gt;Azure China&lt;/a&gt; to the latest version.
&lt;em&gt;Side effect&lt;/em&gt;: Many container images are now missing from our internal
&lt;a href="https://azure.microsoft.com/en-us/products/container-registry"&gt;ACR&lt;/a&gt; (Azure
Container Registry). They need to be synced with &lt;a href="https://github.com/containers/skopeo"&gt;&lt;code&gt;skopeo&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Which images need to be synced? Use the command below, it is quite readable&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kubectl get pods --all-namespaces -o json &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;.items[] | select(any(.status.containerStatuses[]; .state.waiting.reason == &amp;#34;ImagePullBackOff&amp;#34;)) | .metadata.namespace + &amp;#34;/&amp;#34; + .metadata.name + &amp;#34;\t&amp;#34; + ( [.status.containerStatuses[] | select(.state.waiting.reason == &amp;#34;ImagePullBackOff&amp;#34;).image] | join(&amp;#34;, &amp;#34;) )&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Sample run:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ubuntu@universe:~ $ kubectl get pods --all-namespaces -o json &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;.items[]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; | select(any(.status.containerStatuses[]; .state.waiting.reason == &amp;#34;ImagePullBackOff&amp;#34;))
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; | .metadata.namespace + &amp;#34;/&amp;#34; + .metadata.name + &amp;#34;\t&amp;#34; +
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ( [.status.containerStatuses[] | select(.state.waiting.reason == &amp;#34;ImagePullBackOff&amp;#34;).image] | join(&amp;#34;, &amp;#34;) )&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;monitoring/clustermon-kube-prometheus-operator-67c8b6c87c-w72km &lt;span class="o"&gt;{&lt;/span&gt;my-registry-name&lt;span class="o"&gt;}&lt;/span&gt;.azurecr.cn/quay.io/prometheus-operator/prometheus-operator:v0.83.0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;monitoring/clustermon-prometheus-node-exporter-v7bpt &lt;span class="o"&gt;{&lt;/span&gt;my-registry-name&lt;span class="o"&gt;}&lt;/span&gt;.azurecr.cn/quay.io/prometheus/node-exporter:v1.9.1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How to &lt;code&gt;skopeo&lt;/code&gt;? First, log in:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; -n &lt;span class="s2"&gt;&amp;#34;{password}&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; skopeo login &lt;span class="o"&gt;{&lt;/span&gt;my-registry-name&lt;span class="o"&gt;}&lt;/span&gt;.azurecr.cn --password-stdin --username &lt;span class="o"&gt;{&lt;/span&gt;my-username&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How do you get these credentials? Log in to the Azure China Portal, find the ACR
resource, navigate to Settings &amp;gt; Access keys.&lt;/p&gt;
&lt;p&gt;Then sync each image&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% skopeo sync &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; --override-os linux --override-arch amd64 &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; --src docker --dest docker &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; quay.io/prometheus/node-exporter:v1.9.1 &lt;span class="se"&gt;\
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;my-registry-name&lt;span class="o"&gt;}&lt;/span&gt;.azurecr.cn/quay.io/prometheus&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I cannot promise I am able to craft this by hand without looking up man
pages or getting assistance from an LLM. &lt;em&gt;C&amp;rsquo;est la vie&lt;/em&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;If there are many images, consider using an
&lt;a href="https://www.gnu.org/software/bash/manual/html_node/Arrays.html"&gt;array&lt;/a&gt; +
&lt;code&gt;for&lt;/code&gt; loop.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>XSLT in RSS feed</title><link>https://perrotta.dev/2025/08/xslt-in-rss-feed/</link><pubDate>Wed, 20 Aug 2025 14:03:18 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/xslt-in-rss-feed/</guid><description>&lt;p&gt;&lt;a href="https://www.jwz.org/blog/2025/08/xslt/"&gt;There&amp;rsquo;s&lt;/a&gt;
&lt;a href="https://simonwillison.net/2025/Aug/19/xslt/#atom-everything"&gt;some&lt;/a&gt;
&lt;a href="https://www.osnews.com/story/143123/google-is-killing-the-open-web/"&gt;buzz&lt;/a&gt;
&lt;a href="https://wok.oblomov.eu/tecnologia/google-killing-open-web/"&gt;around&lt;/a&gt;
&lt;a href="https://github.com/whatwg/html/issues/11523"&gt;XSLT&lt;/a&gt;
&lt;a href="https://www.jonmsterling.com/01DI/index.xml"&gt;recently&lt;/a&gt;&lt;a href="https://mastodon.social/@Edent/115048990801167629"&gt;.&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I have my own &lt;a href="https://en.wikipedia.org/wiki/Embrace,_extend,_and_extinguish"&gt;opinion&lt;/a&gt; about the topic but I&amp;rsquo;m not here to discuss politics.&lt;/p&gt;
&lt;p&gt;I took the &lt;a href="https://en.wikipedia.org/wiki/Streisand_effect"&gt;opportunity&lt;/a&gt; to style my RSS feed.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://perrotta.dev/index.xml"&gt;result&lt;/a&gt;. Now it looks just like my blog!&lt;/p&gt;</description></item><item><title>git ll</title><link>https://perrotta.dev/2025/08/git-ll/</link><pubDate>Tue, 12 Aug 2025 12:50:09 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/git-ll/</guid><description>&lt;p&gt;In my &lt;code&gt;~/.gitconfig&lt;/code&gt; there&amp;rsquo;s an alias for &lt;code&gt;git log&lt;/code&gt;, inspired by &lt;a href="https://registerspill.thorstenball.com/p/how-i-use-git"&gt;Thorsten
Ball&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ini"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ini&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[alias]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="na"&gt;ll&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;#34;!f() { git log --graph --pretty=&amp;#39;tformat:%C(always,yellow)%h%C(always,reset) %C(always,green)%ar%C(always,reset){%C(always,bold blue)%an%C(always,reset){%C(always,red)%d%C(always,reset) %s&amp;#39; \&amp;#34;$@\&amp;#34; | column -t -s &amp;#39;{&amp;#39; | less -XS; }; f&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I wish I could get rid of the shell utilities (&lt;code&gt;column&lt;/code&gt; and &lt;code&gt;less&lt;/code&gt;), but they&amp;rsquo;re
necessary to properly align the columns.&lt;/p&gt;
&lt;p&gt;I also tried to get rid of the function wrapper (&lt;code&gt;f()&lt;/code&gt;): it works when you run
&lt;code&gt;git ll&lt;/code&gt;. However when you run &lt;code&gt;git ll .&lt;/code&gt; (=display the commit history from
files underneath the current directory only) it fails:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git ll .
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;. is a directory&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Therefore it&amp;rsquo;s better to keep it around. I am satisfied with the current form.&lt;/p&gt;
&lt;p&gt;The output looks like this (image from upstream):&lt;/p&gt;
&lt;p&gt;&lt;img src="https://substackcdn.com/image/fetch/$s_!1Mdk!,f_auto,q_auto:good,fl_progressive:steep/https%3A%2F%2Fsubstack-post-media.s3.amazonaws.com%2Fpublic%2Fimages%2Fbf41b48e-523f-4f82-abc0-db4b1d27c689_2310x1374.png" alt="git ll output"&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-08-21)&lt;/strong&gt;: The following modification is better&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; and has no
external dependencies:&lt;/p&gt;

&lt;div class="codeblock" data-lang="conf"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;conf&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;pre tabindex="0"&gt;&lt;code class="language-conf" data-lang="conf"&gt;[alias]
 ll = log --graph --pretty=tformat:&amp;#39;%C(always,yellow)%h%C(always,reset) %C(always,green)%&amp;lt;(25,trunc)%ar%C(always,reset) %C(always,bold blue)%&amp;lt;(20,trunc)%an%C(always,reset) %C(always,red)%d%C(always,reset) %s&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;His original configuration is a separate shell function, which is
completely unnecessary. A git alias suffices. Keep it simple!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;In the original implementation, &lt;code&gt;git ll .&lt;/code&gt; did not work as expected
(i.e. it did not display changes &lt;em&gt;only&lt;/em&gt; from the current directory).&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>git: --no-pager</title><link>https://perrotta.dev/2025/08/git--no-pager/</link><pubDate>Tue, 12 Aug 2025 12:21:22 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/git--no-pager/</guid><description>&lt;p&gt;Let&amp;rsquo;s say you use color highlighting to visually inspect diffs with &lt;code&gt;git&lt;/code&gt;, such
as &lt;a href="https://github.com/dandavison/delta"&gt;&lt;code&gt;delta&lt;/code&gt;&lt;/a&gt; or
&lt;a href="https://github.com/git/git/blob/master/contrib/diff-highlight/README"&gt;&lt;code&gt;diff-highlight&lt;/code&gt;&lt;/a&gt;
or &lt;a href="https://github.com/mookid/diffr"&gt;&lt;code&gt;diffr&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Implication&lt;/strong&gt;: whenever you run &lt;code&gt;git diff&lt;/code&gt;, &lt;code&gt;git show&lt;/code&gt;, or any other &lt;code&gt;git&lt;/code&gt;
command that produces a diff, it will emit colors (typically red and green).&lt;/p&gt;
&lt;p&gt;Colors are great for local visual inspection, but they are terrible for sharing.
They won&amp;rsquo;t be carried over with copy-and-paste.&lt;/p&gt;
&lt;p&gt;If you intend to share diff output (e.g. to a Q&amp;amp;A site, with teammates), it&amp;rsquo;s
better to emit &lt;code&gt;-&lt;/code&gt; and &lt;code&gt;+&lt;/code&gt;, as vanilla &lt;code&gt;diff&lt;/code&gt; does.&lt;/p&gt;
&lt;p&gt;The easiest way to do so is to pass &lt;code&gt;--no-pager&lt;/code&gt; to &lt;code&gt;git&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git --no-pager diff a83bc395
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git --no-pager show HEAD&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For example, a recent commit in my
&lt;a href="https://github.com/thiagowfx/.dotfiles"&gt;dotfiles&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git --no-pager show HEAD~1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit 52b1e91b0f1d93176ec768aa6158974fc401f335
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;&lt;span class="o"&gt;{&lt;/span&gt;redacted&lt;span class="o"&gt;}&lt;/span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Thu Aug &lt;span class="m"&gt;7&lt;/span&gt; 12:00:47 &lt;span class="m"&gt;2025&lt;/span&gt; +0200
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fix mr
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;diff --git bin/.bin/sd-world bin/.bin/sd-world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;index c46be0e..44c0b47 &lt;span class="m"&gt;100755&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;--- bin/.bin/sd-world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+++ bin/.bin/sd-world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;@@ -58,7 +58,7 @@ &lt;span class="k"&gt;esac&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; run_if_exists &lt;span class="s2"&gt;&amp;#34;claude&amp;#34;&lt;/span&gt; claude update
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# myrepos&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-run_if_exists &lt;span class="s2"&gt;&amp;#34;mr&amp;#34;&lt;/span&gt; mr -d ~ update
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;cd&lt;/span&gt; ~ &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; run_if_exists &lt;span class="s2"&gt;&amp;#34;mr&amp;#34;&lt;/span&gt; mr update&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# source corp updates if any&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; run_if_exists &lt;span class="s2"&gt;&amp;#34;sd-world-corp&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Note that &lt;code&gt;--no-pager&lt;/code&gt; is a &lt;code&gt;git&lt;/code&gt;-level option: it should be specified before
the git subcommand. The following does not work:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git show HEAD~1 --no-pager
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;fatal: unrecognized argument: --no-pager&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Silence unknown callers</title><link>https://perrotta.dev/2025/08/silence-unknown-callers/</link><pubDate>Sat, 09 Aug 2025 18:11:39 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/silence-unknown-callers/</guid><description>&lt;p&gt;I absolutely &lt;strong&gt;never&lt;/strong&gt; get any spam calls. This has been true for &lt;em&gt;many and
many&lt;/em&gt; years now.&lt;/p&gt;
&lt;p&gt;What is the formula to do so? Just be an uninteresting, boring person. Be
invisible. !next&lt;/p&gt;
&lt;p&gt;Sure, this is one way, but let&amp;rsquo;s get more practical and realistic. I have &lt;em&gt;only&lt;/em&gt;
three guidelines, assuming you do not want to live as an hermit&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;h2 id="1-silence-unknown-callers"&gt;1) Silence unknown callers&lt;/h2&gt;
&lt;p&gt;Apple, &lt;a href="https://support.apple.com/en-ca/guide/iphone/iphe4b3f7823/ios"&gt;Block or avoid unwanted calls on iPhone&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can avoid unwanted calls by identifying callers, blocking certain people,
and sending unknown and spam callers directly to voicemail.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Turn on Call Identification&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;iPhone can help identify incoming calls using information from Apple Business
Connect, supported carriers, and supported call identification apps.&lt;/p&gt;
&lt;p&gt;Go to Settings &amp;gt; Apps &amp;gt; Phone, then tap &amp;ldquo;Silence Unknown Callers&amp;rdquo;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A must-have.
There&amp;rsquo;s absolutely &lt;em&gt;no reason&lt;/em&gt; to let strangers be able to interrupt you on a
whim.&lt;/p&gt;
&lt;p&gt;This can only work effectively if you do not feel
&lt;a href="https://en.wikipedia.org/wiki/Fear_of_missing_out"&gt;FOMO&lt;/a&gt;. My philosophy is: if
there is a pressing matter, people or institutions will make an effort to reach
out, whether by multiple attempts or by employing alternate means (e.g. email?
WhatsApp?) to do so.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Exception&lt;/strong&gt;: If you are waiting for a phone call but do not know the origin
number (e.g. from a pharmacy, medical doctor, job interview, prospective
landlord). In this case, turn this setting off temporarily.&lt;/p&gt;
&lt;h2 id="2-disable-most-app-notifications"&gt;2) Disable most app notifications&lt;/h2&gt;
&lt;p&gt;There&amp;rsquo;s no reason to let your phone disturb you. It &lt;em&gt;should&lt;/em&gt; be a tool that
&lt;em&gt;you&lt;/em&gt; control, not the other way around. Disable notifications for most apps,
especially social media.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Alternatively&lt;/strong&gt;: Enable &lt;a href="https://support.apple.com/en-us/105112"&gt;&amp;ldquo;Do Not
Disturb&amp;rdquo;&lt;/a&gt; most of the time. These days
most phones can be configured to enable it on a configurable schedule, or based
on location (e.g. when you&amp;rsquo;re home, or at work).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Exception&lt;/strong&gt;: Let your loved ones be able to reach you. iOS has settings to
allow certain apps and/or contacts to bypass DNS. Being reachable by loved ones
doesn&amp;rsquo;t need to entail emergencies only. Note that this only works if this is a
small list. If you decide that you love everyone (noble!), then you&amp;rsquo;ll need a
two-tier love system to decide who you love the most.&lt;/p&gt;
&lt;h2 id="3-protect-your-crown-jewels"&gt;3) Protect your Crown Jewels&lt;/h2&gt;
&lt;p&gt;Tate Jarrow, &lt;a href="https://web.archive.org/web/20230204060013/https://onlinesafety.substack.com/p/protect-your-crown-jewels"&gt;Protect your Crown
Jewels!&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;[&amp;hellip;] you can reduce the majority of your risk by protecting the handful of
your most important assets ‚Äì I call these your crown jewels. These are
probably only a fraction of your digital assets, and can be done much more
easily and quickly ‚Äî so start there.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I rarely hand out my main phone number when signing up for various online
accounts. I don&amp;rsquo;t want to be reachable in the first place (see guideline 1)), so
why expose my number to third parties?&lt;/p&gt;
&lt;p&gt;I have a second phone number that I use only for chat apps (WhatsApp, Telegram,
etc), so that there is no need to leak my main phone number to acquaintances.
And I have a third phone number that I use whenever signup forms make it
mandatory to provide a number and when &amp;ldquo;0000000000&amp;rdquo; or &amp;ldquo;+12131234567&amp;rdquo; or similar
do not work.&lt;/p&gt;
&lt;hr&gt;
&lt;ol start="3"&gt;
&lt;li&gt;is the most important. There was a point in my life when I would use my main
phone number for everything. Then I kept getting spam phone calls (and texts). I
would still ignore them anyway (1)) ‚Äì it feels that I&amp;rsquo;ve been doing so since
forever ‚Äì but it was annoying to get spammed.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;It&amp;rsquo;s never too late to do 3): you can always get a new phone number and start
over.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://pcaro.es/hermit/"&gt;Hermit&lt;/a&gt;: One of my favorite monospace fonts,
mind you.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>GitHub: set up scheduled reminders on Slack</title><link>https://perrotta.dev/2025/08/github-set-up-scheduled-reminders-on-slack/</link><pubDate>Tue, 05 Aug 2025 12:03:10 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/github-set-up-scheduled-reminders-on-slack/</guid><description>&lt;p&gt;If your organization uses GitHub and Slack, it&amp;rsquo;s neat to have daily
notifications be delivered to you, to remind you of pending pull request
reviews.&lt;/p&gt;
&lt;p&gt;How to configure: start from &lt;a href="https://github.com/settings/reminders"&gt;https://github.com/settings/reminders&lt;/a&gt;. There will be
an entry in &amp;ldquo;Available organizations&amp;rdquo;. Click (+) &amp;ldquo;Configure reminder&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;In the next screen (&lt;code&gt;https://github.com/settings/reminders/{organization}&lt;/code&gt;),
you&amp;rsquo;ll need to authorize the slack workspace integration.&lt;/p&gt;
&lt;p&gt;Once that is done, pick your settings. I like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Weekdays&lt;/li&gt;
&lt;li&gt;Times: 09:00 AM in your local timezone&lt;/li&gt;
&lt;li&gt;Check off &amp;ldquo;Review requests assigned to you&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Optionally check off &amp;ldquo;Review requests assigned to your team&amp;rdquo; (I leave this
disabled as it&amp;rsquo;s too noisy)&lt;/li&gt;
&lt;li&gt;Check off &amp;ldquo;Enable real-time alerts for pull requests&amp;rdquo;
&lt;ul&gt;
&lt;li&gt;Then check off all checkboxes under it except &amp;ldquo;Your team&amp;rsquo;s pull request
review is requested&amp;rdquo; (no team notifications) and Your pull request has
failed checks (CI is too noisy).&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now, once a weekday, the github app will slack you messages like these:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Reviews assigned to you on {org}/gitops
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[gitops#13172] Forget the old RabbitMQ instance (jason-bourne)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 2 hours stale ¬∑ 2 hours old ¬∑ Waiting on @Thiago Perrotta, SRE
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Reviews assigned to you on {org}/secret-project
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[secret-project#49852] Deploy Container: Mooney&amp;#39;s proxy (joe-goldberg)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 5 days stale ¬∑ 6 days old ¬∑ Waiting on @Love Quinn&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Be kind to your teammates. Don&amp;rsquo;t leave them blocked on your reviews for more
than 24 hours!&lt;/p&gt;</description></item><item><title>PR reviews after vacation</title><link>https://perrotta.dev/2025/08/pr-reviews-after-vacation/</link><pubDate>Fri, 01 Aug 2025 02:15:02 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/08/pr-reviews-after-vacation/</guid><description>&lt;p&gt;You send in a couple of pull requests for your teammates to review.&lt;/p&gt;
&lt;p&gt;Then you go on a break. Vacation. Time-off. Holiday. PTO. Pleasure has many
names.&lt;/p&gt;
&lt;p&gt;They had a lot of time to review your PRs. Surely there will be various comments
by the time you&amp;rsquo;re back, right?&lt;/p&gt;
&lt;p&gt;Several action items to be addressed. You&amp;rsquo;re already excited to &lt;del&gt;move
mountains&lt;/del&gt; move more protos, eh?!&lt;/p&gt;
&lt;p&gt;Certainly you will be 100% (&lt;em&gt;hundred per-cent!&lt;/em&gt;) unblocked the first day you&amp;rsquo;re
back to work, correct!?&lt;/p&gt;
&lt;p&gt;There will be no need to &amp;ldquo;friendly&amp;rdquo; ping anyone. Aaaah, so peaceful. So
productive. Corporate paradise.&lt;/p&gt;
&lt;p&gt;Do we live in the same world?&lt;/p&gt;
&lt;hr&gt;
&lt;h3 id="master-foo-and-the-absent-pull-requests"&gt;Master Foo and the Absent Pull Requests&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/h3&gt;
&lt;p&gt;A novice once sent two pull‚Äërequests before departing for a long holiday.&lt;/p&gt;
&lt;p&gt;Upon their return they asked the Master, &amp;ldquo;Have my PRs been reviewed?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;The Master sat quietly. At last he said, &amp;ldquo;I sent no pings.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;The novice frowned and said, &amp;ldquo;But my colleagues had all the time. There must be comments, requests, feedback.&amp;rdquo;&lt;/p&gt;
&lt;p&gt;The Master looked at the floor and replied, &amp;ldquo;What is unreviewed code?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;The novice said nothing.&lt;/p&gt;
&lt;p&gt;Then the Master added: &amp;ldquo;What is urgent code that never landed?&amp;rdquo;&lt;/p&gt;
&lt;p&gt;An instant later, the novice was enlightened.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;em&gt;Prompt&lt;/em&gt;: Write an &amp;ldquo;unix koan&amp;rdquo; out of this.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Smartwatches</title><link>https://perrotta.dev/2025/07/smartwatches/</link><pubDate>Sat, 26 Jul 2025 12:30:57 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/07/smartwatches/</guid><description>&lt;p&gt;Kev Quirk, &lt;a href="https://kevquirk.com/blog/i-don-t-see-the-point-of-smartwatches"&gt;I Don&amp;rsquo;t See the Point of
Smartwatches&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Whether it&amp;rsquo;s Apple, Samsung, Google, Garmin, or any other &lt;em&gt;smartwatch&lt;/em&gt;
brand‚Äîthey&amp;rsquo;re all utterly pointless as watches, in my opinion. Let&amp;rsquo;s call them
what they are: not &lt;em&gt;smart watches&lt;/em&gt;, but &lt;em&gt;wrist phones&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;What are they good for?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Activity tracking. That&amp;rsquo;s it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I second this.&lt;/p&gt;
&lt;p&gt;Having used various smartwatches throughout the years&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;, eventually I &amp;ldquo;downgraded&amp;rdquo;
to a &amp;ldquo;dumb&amp;rdquo; / vanilla / plain watch.&lt;/p&gt;
&lt;p&gt;It &lt;a href="https://en.wikipedia.org/wiki/Unix_philosophy"&gt;does one thing, and does it
well&lt;/a&gt;: it is a reliable
timekeeper!&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s no need to charge it. It just works. Technology‚Ñ¢.&lt;/p&gt;
&lt;p&gt;Why are smartwatches inconvenient (not so great, if you will)? Because they
create more problems than they solve:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;They need to be &lt;strong&gt;constantly charged&lt;/strong&gt;. The upscale ones (e.g. Apple Watch) need
to be charged &lt;em&gt;every single day&lt;/em&gt;. Fitness tracker models need to be juiced
&lt;em&gt;every week&lt;/em&gt;, but that&amp;rsquo;s still quite frequent. The situation will change if
there&amp;rsquo;s ever a smartwatch that needs charging &lt;em&gt;every month&lt;/em&gt;, comparable to
e-book readers (e.g. the Kindle Paperwhite). It&amp;rsquo;s just much more practical not
to have to worry about charging.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Notifications&lt;/strong&gt;. They are supposedly a feature, but we&amp;rsquo;re already so
bombarded with notifications on our phones and laptops all the time. Do we
really need yet another device to bring hourly anxiety to our lives, which are
already too busy and digital? There&amp;rsquo;s a way to partially address this, other
than simply disabling all notifications on the watch: get a fitness tracker
instead. Our attention span is already not so great nowadays; let&amp;rsquo;s not make
it even worse.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Durability&lt;/strong&gt;. I assure you: regardless of whatever model you get today, in
two or three years from now you&amp;rsquo;ll feel
&lt;a href="https://en.wikipedia.org/wiki/Fear_of_missing_out"&gt;FOMO&lt;/a&gt; when a newer version
gets released. Back when I owned them, don&amp;rsquo;t think I&amp;rsquo;ve ever kept a smartwatch
for more than 1-2 years. Sure, you can sell them, instead of simply disposing
of them; nonetheless, they will still lose a lot of their MSRP value, and
their maximum battery capacity will be reduced. They are not meant to
&lt;a href="https://en.wikipedia.org/wiki/Enshittification"&gt;last&lt;/a&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;strong&gt;Security&lt;/strong&gt;: If you have a dumb watch, you can travel pretty much anywhere
without worrying much about it getting stolen. It will likely not attract a
lot of attention in the first place; but, even if it gets stolen, it could be
easily replaced. Whereas a smartwatch tends to be flashier and more expensive
to replace. I used to intentionally leave my smartwatch at home when
travelling to more dangerous places (relatively speaking) ‚Äì but then, what&amp;rsquo;s
the point of having one, right?&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Earlier this year I was quite excited about the new
&lt;a href="https://store.repebble.com/"&gt;Pebble&lt;/a&gt; watches. They were supposed to address
most of the aforementioned issues:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For those unfamiliar with Pebble, it&amp;rsquo;s an e-paper smartwatch with simple
functionality, long battery life and a fun, quirky design. It first launched
on Kickstarter in 2012. The company was sold in 2016 to Fitbit. In January
2025, Google graciously open sourced PebbleOS, enabling anyone to build upon
the amazing Pebble software foundation.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then, once their feature list got announced, my enthusiasm vanished. It doesn&amp;rsquo;t
feel that special anymore, especially not for the price point they&amp;rsquo;re asking.
Back in 2015-2016 I got a used Pebble Time for about $60. Now they&amp;rsquo;re trying to
sell a new model for $149. It simply doesn&amp;rsquo;t seem worth it.&lt;/p&gt;
&lt;p&gt;In the meantime, I&amp;rsquo;ll keep wearing my good ol&amp;rsquo; plain watch.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Pebble Time, Fitbit Blaze, Fitbit Charge 2 (or 3?), Apple Watch SE, Fitbit
Inspire 2, Garmin.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>check-json-schema: pre-commit hook</title><link>https://perrotta.dev/2025/07/check-json-schema-pre-commit-hook/</link><pubDate>Fri, 11 Jul 2025 22:05:32 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/07/check-json-schema-pre-commit-hook/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: given an &lt;code&gt;entry.json&lt;/code&gt; file, validate it against a given
&lt;code&gt;schema.json&lt;/code&gt; file (for example, found via the &lt;a href="https://www.schemastore.org/"&gt;schema
store&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;I like the
&lt;a href="https://github.com/python-jsonschema/check-jsonschema"&gt;check-jsonschema&lt;/a&gt; python
package:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pipx run check-jsonschema --schemafile schema.json entry.json&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What if we want to do the validation via a
&lt;a href="https://pre-commit.com"&gt;pre-commit.com&lt;/a&gt; hook?&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/python-jsonschema/check-jsonschema&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.33.2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-jsonschema&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;^entry\.json$&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- --&lt;span class="l"&gt;schemafile&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;schema.json&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This approach works well, but it requires the upkeep of a mapping from JSON file
to JSON schema.&lt;/p&gt;
&lt;p&gt;If we had various JSON files within a single repository, this would result in a
maintenance burden in the pre-commit config file.&lt;/p&gt;
&lt;p&gt;For example:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/python-jsonschema/check-jsonschema&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.33.2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-jsonschema&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-jsonschema-entry1&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;^entry1\.json$&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- --&lt;span class="l"&gt;schemafile&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;schema1.json&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-jsonschema&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;alias&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-jsonschema-entry2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;files&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;^entry2\.json$&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;args&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- --&lt;span class="l"&gt;schemafile&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;schema2.json&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It&amp;rsquo;s somewhat annoying to maintain multiple entries in that fashion. Furthermore
it can easily get outdated: upon the deletion of &lt;code&gt;entry1.json&lt;/code&gt; from the
repository, you&amp;rsquo;d need to remember to manually delete its corresponding entry
from the pre-commit config file.&lt;/p&gt;
&lt;p&gt;Can we do better?&lt;/p&gt;
&lt;p&gt;What if we embedded the schema reference within the JSON file itself?&lt;/p&gt;
&lt;p&gt;For example, with a local schema:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;schema.json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Or with a remote schema URI, via HTTPS:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;$schema&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://example.com/schema.json&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now the JSON file is self-contained, and there&amp;rsquo;s no need to define a mapping
from it to its JSON schema elsewhere.&lt;/p&gt;
&lt;p&gt;How can we integrate this approach within pre-commit?&lt;/p&gt;
&lt;p&gt;Initially I thought that
&lt;a href="https://github.com/python-jsonschema/check-jsonschema/blob/8900e07e2002c4b073e1dca7969ce81a19fcb142/.pre-commit-hooks.yaml#L10C7-L10C23"&gt;&lt;code&gt;check-metaschema&lt;/code&gt;&lt;/a&gt;
from the &lt;code&gt;check-jsonschema&lt;/code&gt; python package was the answer, but it turns out it
isn&amp;rsquo;t.&lt;/p&gt;
&lt;p&gt;In fact, this isn&amp;rsquo;t currently possible. There&amp;rsquo;s a &lt;a href="https://github.com/python-jsonschema/check-jsonschema/issues/310"&gt;feature
request&lt;/a&gt;,
filed ~2 years ago, with no consensus yet on how move forward. Its maintainer
seems helpful and concerned with backwards compatibility.&lt;/p&gt;
&lt;p&gt;For the sake of unblocking myself, I decided to wrap the ability to do so within
my own pre-commit hook definition.&lt;/p&gt;
&lt;p&gt;This gave birth to the following repository:
&lt;a href="https://github.com/thiagowfx/check-json-schema-meta"&gt;&lt;code&gt;thiagowfx/check-json-schema-meta&lt;/code&gt;&lt;/a&gt;, which I also &lt;a href="https://github.com/python-jsonschema/check-jsonschema/issues/310#issuecomment-3062174357"&gt;announced&lt;/a&gt; in the original feature request thread.&lt;/p&gt;
&lt;p&gt;Usage:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/thiagowfx/check-json-schema-meta&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v0.0.2&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-json-schema-meta&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It goes through each JSON file in the repository, looking for an optional
top-level &lt;code&gt;$schema&lt;/code&gt; key. When found, the file is validated against the defined
schema.&lt;/p&gt;
&lt;p&gt;A &lt;code&gt;--strict&lt;/code&gt; command-line flag enforces the presence of the &lt;code&gt;$schema&lt;/code&gt; key,
otherwise the default behavior is to skip files that do not have it.&lt;/p&gt;
&lt;p&gt;The underlying schema validation defers the work to the same python package
first mentioned in this post. Because it uses
&lt;a href="https://github.com/python-jsonschema/check-jsonschema/blob/8900e07e2002c4b073e1dca7969ce81a19fcb142/src/check_jsonschema/schema_loader/main.py#L74"&gt;&lt;code&gt;SchemaLoader&lt;/code&gt;&lt;/a&gt;,
both local and remote (http(s)) file references are supported.&lt;/p&gt;
&lt;p&gt;This is the first original pre-commit hook I have written. By original I mean
that I couldn&amp;rsquo;t find any pre-existing open source hook that accomplishes this
task. The entire repository was developed with AI assistance (&lt;a href="https://www.anthropic.com/claude-code"&gt;Claude
Code&lt;/a&gt;), but I wasn&amp;rsquo;t satisfied with
out-of-the-box defaults; I had to heavily modify it to shape it to my taste ‚Äì
which was achieved with a mix of follow-up prompting and local edits.&lt;/p&gt;</description></item><item><title>Logseq template for working out</title><link>https://perrotta.dev/2025/06/logseq-template-for-working-out/</link><pubDate>Sun, 22 Jun 2025 02:19:09 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/logseq-template-for-working-out/</guid><description>&lt;p&gt;Lately I&amp;rsquo;ve been tracking my gym sessions in &lt;a href="https://logseq.com/"&gt;Logseq&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This workflow has been in place for at least three months, therefore it&amp;rsquo;s stable
enough by now. Here&amp;rsquo;s the rough idea.&lt;/p&gt;
&lt;p&gt;First, create a &lt;code&gt;[[Templates]]&lt;/code&gt; page.&lt;/p&gt;
&lt;p&gt;How to remember whether it&amp;rsquo;s &lt;code&gt;Templates&lt;/code&gt; or &lt;code&gt;Template&lt;/code&gt;? Simple: add an
&lt;code&gt;alias::template&lt;/code&gt; attribute to the page. It should be the first bullet point.
Now there&amp;rsquo;s no need to remember: any of them will do.&lt;/p&gt;
&lt;p&gt;Then add a &lt;code&gt;[[Gym üí™]]&lt;/code&gt; bullet point&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; with &lt;code&gt;alias::gym&lt;/code&gt;. In it, add a
&lt;code&gt;template::gym&lt;/code&gt; attribute. Within it, add the template content. This is the part
where you should adapt it to your own desires and goals, but I&amp;rsquo;ll share mine:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Location
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- [[mygym]] (mylocation1 | mylocation2)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Defaults
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- 3-4x 8-12
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Warm-up
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- XX min what
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Upper
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- Exercise: 25 -&amp;gt; 30
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Lower
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	-
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Cooldown
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- XX min what
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Protein recovery
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- XX g (what)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- Body weight
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	- XX kg (gym | home)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A brief explanation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;location: links to the page of each gym, where I can add details such as its
Wi-Fi password, how much drinks cost there, etc.&lt;/li&gt;
&lt;li&gt;defaults: the baseline for the session ‚Äì how many sets, how many repetitions
in each?&lt;/li&gt;
&lt;li&gt;warm-up: what did I do, for how many minutes?&lt;/li&gt;
&lt;li&gt;upper: a bucket to group upper-body exercises: arms, chest, abs, etc.&lt;/li&gt;
&lt;li&gt;lower: a bucket to group lower-body exercises: legs, calves, glutes, etc.&lt;/li&gt;
&lt;li&gt;cooldown: what did I do, for how many minutes?&lt;/li&gt;
&lt;li&gt;protein recovery: in grams, what did I drink or eat?&lt;/li&gt;
&lt;li&gt;body weight: in kilos, and where did I measure it?&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;This template has served me well. The most important part is the one that
contains the exercises (upper and lower).&lt;/p&gt;
&lt;p&gt;Now, let&amp;rsquo;s say I am going to the gym today.&lt;/p&gt;
&lt;p&gt;First, I open the journal page (&lt;code&gt;[[2025-06-22]]&lt;/code&gt;).
Then I type in &lt;code&gt;/template gym&lt;/code&gt;. This inserts the template above.&lt;/p&gt;
&lt;p&gt;Now I click &lt;code&gt;[[Gym üí™]]&lt;/code&gt; to open up the gym page.&lt;/p&gt;
&lt;p&gt;The gym page contains a detailed explanation of my current goals and workflows.
In particular, it has an exercises reference section that looks like this (the
numbers are made up):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;* # Exercises
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;* Upper
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Biceps: 10 -&amp;gt; 12
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Triceps: 18 -&amp;gt; 20
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Butterfly normal: 20 -&amp;gt; 25
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Butterfly reverse: 20 -&amp;gt; 25
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; [...]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;* Lower
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Hip addiction: 17 -&amp;gt; 20
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Hip abduction: 15 -&amp;gt; 20&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Each entry tracks the latest weight and the one before it, which makes the
progression explicit (and doubles-down as a motivation factor!).&lt;/p&gt;
&lt;p&gt;Now, because this is an advanced PKM, the backlink we inserted earlier with the
template shows up under &amp;ldquo;linked references&amp;rdquo; at the bottom. And this is the magic
that makes Logseq useful for this kind of tracking: all gym entries are
accessible at a glance, connected to the main &lt;code&gt;[[Gym üí™]]&lt;/code&gt; page.&lt;/p&gt;
&lt;p&gt;During the workout, I use the appropriate weight from the gym page as an input
to the corresponding daily note entry, and slowly increase it in-between sets.&lt;/p&gt;
&lt;p&gt;For example, let&amp;rsquo;s say that for biceps the reference entry is &lt;code&gt;Biceps: 10 -&amp;gt; 12&lt;/code&gt;. Then, for today&amp;rsquo;s workout, I will add an entry like &lt;code&gt;Biceps: 12 -&amp;gt; 13 -&amp;gt; 14&lt;/code&gt;, starting with &lt;code&gt;12&lt;/code&gt;, the latest reference value.&lt;/p&gt;
&lt;p&gt;Repeat for each exercise.&lt;/p&gt;
&lt;p&gt;At the end of the workout, I update the reference entries with the progress of
the day. For example, the updated entry for biceps becomes &lt;code&gt;* Biceps: 12 -&amp;gt; 14&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;I never liked to go to the gym, but now I am starting to enjoy it, because I
feel this approach brings many self-motivating benefits:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;there&amp;rsquo;s a detailed record of every single workout that I do, down to the day
and the exercise / weight in each set. These entries are psychologically
powerful, they motivate me more than smartwatches and/or gym / workouts apps&lt;/li&gt;
&lt;li&gt;the progression ensures I am consistent and pick up where I left off in the
previous session. There&amp;rsquo;s no need to guess any longer which weight to use, I
know exactly which one to use, and whether it was difficult or easy last time
(as I also track this information in the reference).&lt;/li&gt;
&lt;li&gt;reduced risk of injury as I am increasing the weights slowly, and being
mindful of the ones that incur a lot of stress and/or strain on my muscles&lt;/li&gt;
&lt;li&gt;ability to track goals and be realistic about them, and even estimate when
I&amp;rsquo;ll be able to reach them, based on historical progression.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I tried to use gym apps before, but they were never effective. They are often
complicated and bloated. The advantage of keeping the format plain and flexible
in the PKM is that it can suit all my needs. In fact, I could even bring pen and
paper to the gym instead of my smartphone if needed, as there&amp;rsquo;s absolutely no
need for internet access when updating these entries, and no lock-in whatsoever.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s nothing revolutionary in my approach. Its core is merely: (i)
(annotated!) consistency and (ii) ability to shape the system to the format that
suits/fits my needs.&lt;/p&gt;
&lt;p&gt;Consistency is very important. Before adopting this system, I would always guess
which weight to use for each exercise. But there are too many of them, and as
such it&amp;rsquo;s quite difficult to keep track of them all in my head.&lt;/p&gt;
&lt;p&gt;The format flexibility is also important. The key is to shape a system to your
needs, not the other way around. With smartphone and smartwatch apps, I always
felt that I had to adapt myself to the input format the app expects, which is
painful from an UX perspective.&lt;/p&gt;
&lt;p&gt;And now it is time to work out again üí™&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Yes, including the emoji. Life is short to skip having fun.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;There are tiny differences, therefore I like to note down whether I used
the scale from the gym or the one at home.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>git delta</title><link>https://perrotta.dev/2025/06/git-delta/</link><pubDate>Mon, 16 Jun 2025 13:28:23 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/git-delta/</guid><description>&lt;p&gt;I&amp;rsquo;ve been using the venerable
&lt;a href="https://github.com/git/git/tree/master/contrib/diff-highlight"&gt;&lt;code&gt;diff-highlight&lt;/code&gt;&lt;/a&gt;
script to power various &lt;code&gt;git diff&lt;/code&gt; operations in the terminal. It is a decent
improvement on top of stock &lt;code&gt;git diff&lt;/code&gt;, but it&amp;rsquo;s somewhat of an
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/94fa66d62260c7c5e133f50beef6181f098b3599/git/.profile.d/git.sh#L11"&gt;annoying&lt;/a&gt;
maintenance burden to manage it across various environments, as it&amp;rsquo;s installed
in different ways on various systems:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt; git &amp;gt;/dev/null 2&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;1&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="c1"&gt;# git-diff-highlight: alpine:/usr/bin/, arch, debian&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	path_munge &lt;span class="s2"&gt;&amp;#34;/usr/share/git/diff-highlight&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/usr/share/doc/git/contrib/diff-highlight&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="c1"&gt;# brew&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;hash&lt;/span&gt; brew &amp;gt;/dev/null 2&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;1&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		path_munge &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;brew --prefix&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;/share/git-core/contrib/diff-highlight
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Thus I decided to migrate to &lt;a href="https://github.com/dandavison/delta"&gt;&lt;code&gt;git-delta&lt;/code&gt;&lt;/a&gt;,
which is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;quite popular&lt;/li&gt;
&lt;li&gt;written in Rust‚Ñ¢&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://repology.org/project/git-delta/versions"&gt;available&lt;/a&gt; in all package
managers I&amp;rsquo;m interested in ‚Äì hence it&amp;rsquo;s &lt;strong&gt;one install command away from my
system&lt;/strong&gt;, no need for extra configs &amp;lt;== And this is the main reason I wanted
to migrate to it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;On macOS, the package is called &lt;code&gt;git-delta&lt;/code&gt; whereas the binary is called
&lt;code&gt;delta&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew install git-delta
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew ls git-delta &lt;span class="p"&gt;|&lt;/span&gt; grep bin/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/git-delta/0.18.2_3/bin/delta&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The integration with &lt;code&gt;git&lt;/code&gt; is as follows:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% grep -E &lt;span class="s1"&gt;&amp;#39;\[core\]|pager =|delta&amp;#39;&lt;/span&gt; ~/.gitconfig
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;core&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# delta &amp;gt; diff-highlight &amp;gt; plain cat&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;pager&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;delta --diff-highlight 2&amp;gt;/dev/null || ((diff-highlight 2&amp;gt;/dev/null || cat) | &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;PAGER&lt;/span&gt;&lt;span class="k"&gt;:-&lt;/span&gt;&lt;span class="nv"&gt;less&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;)&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It falls back to &lt;code&gt;diff-highlight&lt;/code&gt; when &lt;code&gt;delta&lt;/code&gt; is not available.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;delta&lt;/code&gt; is quite
&lt;a href="https://dandavison.github.io/delta/configuration.html"&gt;configurable&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% grep -EA3 &lt;span class="s1"&gt;&amp;#39;\[delta\]&amp;#39;&lt;/span&gt; ~/.gitconfig
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;delta&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;navigate&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; side-by-side &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; line-numbers &lt;span class="o"&gt;=&lt;/span&gt; true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;One caveat of using &lt;code&gt;delta&lt;/code&gt;: the &lt;code&gt;git diff&lt;/code&gt; output is not suitable for sharing,
as it does not contain diff markers, relying on colors instead.
See &lt;a href="https://perrotta.dev/2025/08/git--no-pager/"&gt;this post&lt;/a&gt; for a workaround.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-09-07)&lt;/strong&gt;: I&amp;rsquo;ve been finding &lt;code&gt;delta&lt;/code&gt; quite pleasant to use.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Always an (over)hyped reason to migrate, but, oh well&amp;hellip;&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>ArgoCD: every application in unknown state</title><link>https://perrotta.dev/2025/06/argocd-every-application-in-unknown-state/</link><pubDate>Fri, 13 Jun 2025 22:34:33 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/argocd-every-application-in-unknown-state/</guid><description>&lt;p&gt;&lt;strong&gt;Symptom&lt;/strong&gt;: Every single application in the Kubernetes cluster that is managed
by Argo is in &lt;code&gt;Unknown&lt;/code&gt; sync status. A disaster! üò±&lt;/p&gt;
&lt;p&gt;This has only happened in one of our clusters. More specifically, in an
&lt;a href="https://learn.microsoft.com/en-us/azure/aks/core-aks-concepts"&gt;AKS&lt;/a&gt; cluster
(from Microsoft Azure).&lt;/p&gt;
&lt;p&gt;An observed effect:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% kubectl get --raw&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/openapi/v2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; head -c &lt;span class="m"&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Error from server &lt;span class="o"&gt;(&lt;/span&gt;ServiceUnavailable&lt;span class="o"&gt;)&lt;/span&gt;: the server is currently unable to handle the request&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Aha! The Kubernetes OpenAPI server is not responding properly.
That explains why Argo is having so much trouble to figure out the state of affairs in
the cluster.&lt;/p&gt;
&lt;p&gt;It was quite difficult to troubleshoot this issue. There are barely any
resources about it in the open web. We filed an Azure Support ticket, but it was
completely useless. They offered to restart&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; the OpenAPI server, but that
didn&amp;rsquo;t help (of course it wouldn&amp;rsquo;t!).&lt;/p&gt;
&lt;p&gt;Because this is a managed Kubernetes cluster, we have limited access to it,
which includes lack of access to raw logs. The Azure portal doesn&amp;rsquo;t make it easy
but, after digging quite deep into it, eventually we found this error message in
the logs:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {&amp;#34;pod&amp;#34;:&amp;#34;kube-apiserver-7785d59f4f-scqmp&amp;#34;,&amp;#34;stream&amp;#34;:&amp;#34;stderr&amp;#34;,&amp;#34;containerID&amp;#34;:&amp;#34;925345f6501626aa6cd40dd187d5cf57837389eec9cb39b2292fb9ae3f66242f&amp;#34;,&amp;#34;log&amp;#34;:&amp;#34;E0512 12:01:36.876768 1 handler.go:160] Error in OpenAPI handler: failed to build merge specs: unable to merge: duplicated path \/apis\/reports.kyverno.io\/v1\/clusterephemeralreports\n&amp;#34;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;That was the first clue! Now we know it&amp;rsquo;s related to
&lt;a href="https://kyverno.io/"&gt;Kyverno&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;That error eventually led us to
&lt;a href="https://github.com/kubernetes/kubernetes/issues/122668#issuecomment-2531243040"&gt;this&lt;/a&gt;
issue in Kubernetes:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We have the same issue here, actually also triggered by installing the kyverno
reports-server with both apiservices (different groups served by the same
api-server).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Aha!&lt;/p&gt;
&lt;p&gt;Deleting the duplicate CRDs installed by &lt;a href="https://github.com/kyverno/reports-server"&gt;kyverno reports
server&lt;/a&gt; has immediately resolved the
OpenAPI server unresponsiveness. It wasn&amp;rsquo;t even necessary to restart it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% kubectl delete crd ephemeralreports.reports.kyverno.io clusterephemeralreports.reports.kyverno.io clusterpolicyreports.wgpolicyk8s.io policyreports.wgpolicyk8s.io
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;customresourcedefinition.apiextensions.k8s.io &lt;span class="s2"&gt;&amp;#34;ephemeralreports.reports.kyverno.io&amp;#34;&lt;/span&gt; deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;customresourcedefinition.apiextensions.k8s.io &lt;span class="s2"&gt;&amp;#34;clusterephemeralreports.reports.kyverno.io&amp;#34;&lt;/span&gt; deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;customresourcedefinition.apiextensions.k8s.io &lt;span class="s2"&gt;&amp;#34;clusterpolicyreports.wgpolicyk8s.io&amp;#34;&lt;/span&gt; deleted
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;customresourcedefinition.apiextensions.k8s.io &lt;span class="s2"&gt;&amp;#34;policyreports.wgpolicyk8s.io&amp;#34;&lt;/span&gt; deleted&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$ kubectl get --raw&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;/openapi/v2&amp;#39;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; head -c &lt;span class="m"&gt;200&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;swagger&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;2.0&amp;#34;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;#34;info&amp;#34;&lt;/span&gt;:&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;title&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;Kubernetes&amp;#34;&lt;/span&gt;,&lt;span class="s2"&gt;&amp;#34;version&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;v1.30.11&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;,&lt;span class="s2"&gt;&amp;#34;paths&amp;#34;&lt;/span&gt;:&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;/.well-known/openid-configuration/&amp;#34;&lt;/span&gt;:&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;get&amp;#34;&lt;/span&gt;:&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;description&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;get service account issuer OpenID configuration, also known as&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;That was a tricky one! Interestingly: it has only occurred in AKS.
&lt;a href="https://aws.amazon.com/eks/"&gt;EKS&lt;/a&gt; was fine.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://en.wikiquote.org/wiki/The_IT_Crowd"&gt;Hello, IT. Have you tried turning it off and on
again?&lt;/a&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>ArgoCD: custom health check for StatefulSet (OnDelete)</title><link>https://perrotta.dev/2025/06/argocd-custom-health-check-for-statefulset-ondelete/</link><pubDate>Fri, 13 Jun 2025 21:40:01 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/argocd-custom-health-check-for-statefulset-ondelete/</guid><description>&lt;p&gt;It turns out the
&lt;a href="https://github.com/argoproj/gitops-engine/blob/master/pkg/health/health_statefulset.go"&gt;built-in&lt;/a&gt;
health check for
&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/"&gt;StatefulSets&lt;/a&gt;
in ArgoCD is not comprehensive enough.&lt;/p&gt;
&lt;p&gt;It covers
&lt;a href="https://kubernetes.io/docs/concepts/workloads/controllers/statefulset/#update-strategies"&gt;&lt;code&gt;RollingUpdate&lt;/code&gt;&lt;/a&gt;
well enough, but &lt;code&gt;OnDelete&lt;/code&gt; is incomplete.&lt;/p&gt;
&lt;p&gt;More specifically:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Observed&lt;/strong&gt;: whenever you push an update to an STS whose &lt;code&gt;.spec.updateStrategy&lt;/code&gt;
is &lt;code&gt;OnDelete&lt;/code&gt;, its health status stays as &lt;code&gt;Healthy&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Expected&lt;/strong&gt;: there should be an indication that the STS pods are not
up-to-date, and hence need to be restarted to incorporate the latest changes.&lt;/p&gt;
&lt;p&gt;There is &lt;a href="https://github.com/argoproj/argo-cd/issues/6527"&gt;an open bug&lt;/a&gt;:
&lt;code&gt;Statefulset healthcheck does not work #6527&lt;/code&gt; for it.&lt;/p&gt;
&lt;p&gt;I managed to work around it by defining my own health check. This is an use case
where Gen AI is helpful, though it does not shine. I could not have Gen AI
produce a fully working health check for this scenario. Instead, I used it to
bootstrap a basic example, then had to tweak it until it worked. This has been
tested multiple times, I am reasonably confident it works well (some edge cases
could be missing though).&lt;/p&gt;

&lt;div class="codeblock" data-lang="lua"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;lua&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;health_status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="kc"&gt;nil&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Progressing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Waiting for status to be reported&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;health_status&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;strategy&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.spec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;updateStrategy&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;obj.spec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;updateStrategy.type&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;RollingUpdate&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.spec&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replicas&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;ready_replicas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readyReplicas&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;updatedReplicas&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;status_replicas&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;replicas&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;current_revision&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;currentRevision&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;update_revision&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;obj.status&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;updateRevision&lt;/span&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;strategy&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;OnDelete&amp;#34;&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ready_replicas&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;status_replicas&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Healthy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;All replicas are ready and updated (OnDelete strategy)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;elseif&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Degraded&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;No replicas have been updated (OnDelete strategy): 0/&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; updated. Still running an old revision!&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Progressing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Progressing (OnDelete): &amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;ready_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;status_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; ready, &amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; updated&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;ready_replicas&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;status_replicas&lt;/span&gt; &lt;span class="ow"&gt;and&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;current_revision&lt;/span&gt; &lt;span class="o"&gt;~=&lt;/span&gt; &lt;span class="n"&gt;update_revision&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Progressing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Waiting for rollout to complete: revision mismatch (&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;current_revision&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; ‚â† &amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;update_revision&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Healthy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;All replicas updated, ready, and revisions match&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.status&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Progressing&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;health_status.message&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;RollingUpdate progressing: &amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;ready_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;status_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; ready, &amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;updated_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="n"&gt;spec_replicas&lt;/span&gt; &lt;span class="o"&gt;..&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; updated&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kr"&gt;return&lt;/span&gt; &lt;span class="n"&gt;health_status&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It is necessary to distinguish between &lt;code&gt;OnDelete&lt;/code&gt; and &lt;code&gt;RollingUpdate&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;OnDelete&lt;/code&gt; should not use &lt;code&gt;currentRevision&lt;/code&gt; / &lt;code&gt;update_revision&lt;/code&gt;, as these values
don&amp;rsquo;t mean anything for that update strategy. This can be observed
&lt;a href="https://github.com/argoproj/gitops-engine/blob/f8f1b61ba3fd5fcb647563db3106977e1364de31/pkg/health/health_statefulset.go#L63"&gt;upstream&lt;/a&gt;
as well.&lt;/p&gt;
&lt;p&gt;It is easy to write / tweak the health check when you look at the live STS
resource / manifest in the cluster. &lt;code&gt;obj&lt;/code&gt; refers to the STS manifest (&lt;code&gt;kubectl get sts -o yaml&lt;/code&gt;). The most relevant field is &lt;code&gt;status:&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;If you deploy ArgoCD via its helm chart, add that check for &lt;code&gt;argocd-cm&lt;/code&gt;. The
&lt;code&gt;values.yaml&lt;/code&gt; file:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;argo-cd&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;configs&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;cm&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;resource.customizations.health.apps_StatefulSet&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;|&lt;/span&gt;&lt;span class="sd"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt; health_status = {}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="sd"&gt; [...]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This custom health check was partly inspired by a Prometheus alert we have:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;alert&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;StatefulSetUpdateNotRolledOut&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="nt"&gt;expr&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;max without (revision) (kube_statefulset_status_current_revision unless kube_statefulset_status_update_revision) * (kube_statefulset_replicas != kube_statefulset_status_replicas_updated)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How long will it take until LLMs &lt;del&gt;steal&lt;/del&gt; adopt this novel solution from me?&lt;/p&gt;</description></item><item><title>Slack: public chats first</title><link>https://perrotta.dev/2025/06/slack-public-chats-first/</link><pubDate>Fri, 13 Jun 2025 20:01:10 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/slack-public-chats-first/</guid><description>&lt;p&gt;&lt;a href="https://www.mooreds.com/wordpress/archives/3706"&gt;Why Public Slack Chats are Better than Direct Messages&lt;/a&gt; by Dan Moore:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Bad&lt;/strong&gt;‚Ñ¢:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&amp;rsquo;ve noticed that I sometimes use direct messages when I should be asking a
question in a public channel. Upon examination, direct messages have the
following attributes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Less intrusive. I sometimes worry about an excessive amount of chatter
bothering other team members.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Protect my ego. When I ask a question it is admitting that I don&amp;rsquo;t know the
answer. As a &amp;ldquo;director of engineering&amp;rdquo; it can be humbling to admit
ignorance. But of course I don&amp;rsquo;t know everything! It&amp;rsquo;s just my ego talking.
However, it still stings a bit sometimes to ask publicly‚Äìit&amp;rsquo;s easier to just
side chat.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Good&lt;/strong&gt;‚Ñ¢:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;However, the benefits of posting in a public channel are many. A message in a
public channel is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Viewable. This means that others can chime in (as opposed to just the person
I DMed). And that others can learn in the present as they read my question
and the answers.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Linkable. This means that if I want to reference the conversation (in a PR,
trello card or elsewhere), I can. Of course, I should extract info into
documentation (future me will thank past me) but for context around a
decision, a link to a slack chat can be very helpful.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Searchable. This means that others in the future who are searching for this
information can find it. Yes, slack&amp;rsquo;s search leaves something to be desired,
but if the conversation is private, that&amp;rsquo;s a guarantee that no one else will
be able to search and find it.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Vulnerable. I want everyone to feel comfortable asking questions. That leads
to better outcomes for clients and for team members. How can I expect that
behavior of others if I don&amp;rsquo;t do it myself?&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;Surprisingly, I&amp;rsquo;ve had many teammates throughout the years that are unaware of
these benefits.&lt;/p&gt;
&lt;p&gt;One more for &lt;strong&gt;Bad&lt;/strong&gt; (direct messages):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;No load balancing&lt;/strong&gt;. Risk of bothering one person instead of distributing
question load amongst the team.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;One more for &lt;strong&gt;Good&lt;/strong&gt; (public messages):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Knowledge sharing&lt;/strong&gt;. What you ask, you learn. What you learn, your teammates
also learn. Win-win!&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>git commit: automatically add pull request template</title><link>https://perrotta.dev/2025/06/git-commit-automatically-add-pull-request-template/</link><pubDate>Thu, 12 Jun 2025 21:09:36 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/git-commit-automatically-add-pull-request-template/</guid><description>&lt;p&gt;GitHub supports &lt;a href="https://docs.github.com/en/communities/using-templates-to-encourage-useful-issues-and-pull-requests/creating-a-pull-request-template-for-your-repository"&gt;pull request
templates&lt;/a&gt;.
Define a &lt;code&gt;.github/PULL_REQUEST_TEMPLATE.md&lt;/code&gt; directory in your git repo, and it
will be automatically used when creating PRs via the GitHub web UI and via the
CLI tool (&lt;a href="https://cli.github.com/"&gt;&lt;code&gt;gh&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;But what about commits created locally, via a plain &lt;code&gt;git commit&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;As per &lt;a href="https://git-scm.com/docs/git-commit/2.49.0#Documentation/git-commit.txt-code--templateltfilegtcode"&gt;git
docs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;commit.template&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Specify the pathname of a file to use as the template for new commit messages.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Therefore, the following &lt;code&gt;~/.gitconfig&lt;/code&gt; works:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[commit]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; template = .github/PULL_REQUEST_TEMPLATE.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The file path (pathname) is relative to the git repository root.&lt;/p&gt;
&lt;p&gt;However, this will fail in repositories that do not have a template:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git commit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;fatal: could not read &amp;#39;.github/PULL_REQUEST_TEMPLATE.md&amp;#39;: No such file or directory&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s a workaround: use &lt;a href="https://git-scm.com/docs/git-config#_includes"&gt;&lt;code&gt;includeIf&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% tail -3 ~/.gitconfig
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Import corp configs if any.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;include&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; .gitconfig_corp&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.gitconfig_corp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;includeIf &lt;span class="s2"&gt;&amp;#34;gitdir:~/mycompany/**&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; .gitconfig_mycompany
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;includeIf &lt;span class="s2"&gt;&amp;#34;hasconfig:remote.*.url:git@github.com:mycompany/**&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;path&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; .gitconfig_mycompany&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.gitconfig_mycompany
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;commit&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;template&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; .github/PULL_REQUEST_TEMPLATE.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This way, the github PR template is only included for git repositories from my
company.&lt;/p&gt;</description></item><item><title>Alpine Linux packaging: track new software releases</title><link>https://perrotta.dev/2025/06/alpine-linux-packaging-track-new-software-releases/</link><pubDate>Tue, 03 Jun 2025 01:36:53 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/06/alpine-linux-packaging-track-new-software-releases/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: You maintain packages for a Linux distribution, for
example, &lt;a href="https://www.alpinelinux.org/"&gt;Alpine Linux&lt;/a&gt;. Find a way to keep track
of new software releases, to ensure your packages are kept up-to-date.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://release-monitoring.org/"&gt;Release Monitoring&lt;/a&gt; project (codename
&lt;em&gt;Anitya&lt;/em&gt;), part of the &lt;a href="https://www.fedoraproject.org/"&gt;Fedora Linux&lt;/a&gt; distro,
can accomplish that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Watch for releases of your favorite projects&lt;/p&gt;
&lt;p&gt;We all have our favorite projects and we all like to use their latest versions
with their latest features. However, it is hard to keep in touch with all of
them and be informed when they release a new version. Anitya can help!&lt;/p&gt;
&lt;p&gt;We monitor upstream releases and broadcast them on Fedora messaging bus.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The underlying project:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Anitya is a release monitoring project.&lt;/p&gt;
&lt;p&gt;Its goal is to regularly check if a project has made a new release. When
Anitya discovers a new release for a project, it publishes a RabbitMQ message
via fedora messaging. This makes it easy to integrate with Anitya and perform
actions when a new release is created for a project. For example, the Fedora
project runs a service called the-new-hotness which files a Bugzilla bug
against a package when the upstream project makes a new release.&lt;/p&gt;
&lt;p&gt;Anitya provides a user-friendly interface to add, edit, or browse projects.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Even though it is part of Fedora, we can use it for Alpine Linux just fine!&lt;/p&gt;
&lt;p&gt;Recently I packaged &lt;a href="https://github.com/zizmorcore/zizmor/issues/780"&gt;zizmor&lt;/a&gt;. I
noticed there was no entry for it in Anitya. I added one. It&amp;rsquo;s very
straightforward:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;head to &lt;a href="https://release-monitoring.org/"&gt;https://release-monitoring.org/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;ensure the project you want to monitor isn&amp;rsquo;t already present there&lt;/li&gt;
&lt;li&gt;log in (e.g. via GitHub)&lt;/li&gt;
&lt;li&gt;click &lt;a href="https://release-monitoring.org/project/new"&gt;add project&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fill in the form:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Project name: zizmor&lt;/li&gt;
&lt;li&gt;Homepage: &lt;a href="https://docs.zizmor.sh"&gt;https://docs.zizmor.sh&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;BackEnd: GitHub&lt;/li&gt;
&lt;li&gt;Version scheme: Semantic&lt;/li&gt;
&lt;li&gt;Github owner/project: &lt;a href="https://github.com/zizmorcore/zizmor"&gt;zizmorcore/zizmor&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Version prefix: &lt;code&gt;v&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Pre-release filter: &lt;code&gt;rc&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Version filter: &lt;code&gt;rc&lt;/code&gt; (excludes &lt;a href="https://github.com/zizmorcore/zizmor/releases/tag/v1.8.0-rc0"&gt;&lt;code&gt;1.8.0-rc0&lt;/code&gt;&lt;/a&gt;) and the like&lt;/li&gt;
&lt;li&gt;Check off &amp;ldquo;check releases instead of tags&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Once the project is &lt;a href="https://release-monitoring.org/project/378497/"&gt;created&lt;/a&gt;,
add a new distribution mapping:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Distribution: Alpine&lt;/li&gt;
&lt;li&gt;Package name: &lt;a href="https://pkgs.alpinelinux.org/package/edge/testing/x86_64/zizmor"&gt;zizmor&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And we&amp;rsquo;re done!&lt;/p&gt;
&lt;p&gt;As per &lt;a href="https://pkgs.alpinelinux.org/flagging"&gt;https://pkgs.alpinelinux.org/flagging&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Package flagging&lt;/p&gt;
&lt;p&gt;Manual package flagging has been disabled in favour of automatic flagging
based on Anitya.&lt;/p&gt;
&lt;p&gt;If you want a package to be up-to-date or to inform the maintainer about the
package status, please feel free to create a package mapping on Anitya. Once
the mapping is made, it should automatically send an email to the maintainer
whenever a new version is available.&lt;/p&gt;
&lt;p&gt;For details on how to create a project mapping for Alpine Linux, please refer
to the &lt;a href="https://release-monitoring.org/static/docs/user-guide.html"&gt;release monitoring
documentation&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>PostgreSQL major version upgrade on Alpine Linux</title><link>https://perrotta.dev/2025/05/postgresql-major-version-upgrade-on-alpine-linux/</link><pubDate>Sat, 24 May 2025 16:00:23 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/postgresql-major-version-upgrade-on-alpine-linux/</guid><description>&lt;h2 id="problem-statement"&gt;Problem statement&lt;/h2&gt;
&lt;p&gt;Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For
this specific example, consider a &lt;a href="https://miniflux.app/"&gt;&lt;code&gt;miniflux&lt;/code&gt;&lt;/a&gt; database.&lt;/p&gt;
&lt;h2 id="procedure"&gt;Procedure&lt;/h2&gt;
&lt;p&gt;Install PostgreSQL 17:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas apk add postgres&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It can coexist with &lt;code&gt;postgres16&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Stop the PostgreSQL daemon:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service postgresql stop&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If you navigate to the Miniflux server with your browser, it will fail, as
expected:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;store: unable to create app session: dial tcp [::1]:5432: connect: connection refused&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Change the PostgreSQL system version to the desired one:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas pg_versions set-default &lt;span class="m"&gt;17&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Change to the root user, for convenience, then change to the existing postgresql
directory:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas su
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; /var/lib/postgresql/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Prepare files and directories for the upgrade:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; 16/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% mv data olddata
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; ../
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% mkdir 17/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; 17/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% mkdir data tmp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% chown postgres:postgres data tmp&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Change to the &lt;code&gt;postgres&lt;/code&gt; user:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% su postgres
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; tmp/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Initialize the new cluster:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% initdb -D /var/lib/postgresql/17/data --locale&lt;span class="o"&gt;=&lt;/span&gt;en_US.UTF-8 --encoding&lt;span class="o"&gt;=&lt;/span&gt;UTF8 &lt;span class="o"&gt;[&lt;/span&gt;--data-checksums&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The files belonging to this database system will be owned by user &lt;span class="s2"&gt;&amp;#34;postgres&amp;#34;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;This user must also own the server process.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The database cluster will be initialized with locale &lt;span class="s2"&gt;&amp;#34;en_US.UTF-8&amp;#34;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The default text search configuration will be &lt;span class="nb"&gt;set&lt;/span&gt; to &lt;span class="s2"&gt;&amp;#34;english&amp;#34;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Data page checksums are disabled.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;fixing permissions on existing directory /var/lib/postgresql/17/data ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;creating subdirectories ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;selecting dynamic shared memory implementation ... posix
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;selecting default &lt;span class="s2"&gt;&amp;#34;max_connections&amp;#34;&lt;/span&gt; ... &lt;span class="m"&gt;100&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;selecting default &lt;span class="s2"&gt;&amp;#34;shared_buffers&amp;#34;&lt;/span&gt; ... 128MB
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;selecting default &lt;span class="nb"&gt;time&lt;/span&gt; zone ... America/Toronto
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;creating configuration files ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;running bootstrap script ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;performing post-bootstrap initialization ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;syncing data to disk ... ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;initdb: warning: enabling &lt;span class="s2"&gt;&amp;#34;trust&amp;#34;&lt;/span&gt; authentication &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="nb"&gt;local&lt;/span&gt; connections
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next &lt;span class="nb"&gt;time&lt;/span&gt; you run initdb.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Success.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In the previous command I chose to omit &lt;code&gt;--data-checksums&lt;/code&gt;, otherwise I get the
following error:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;old cluster does not use data checksums but the new one does
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Failure, exiting&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Upgrade the new cluster:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pg_upgrade -b /usr/libexec/postgresql16/ -B /usr/libexec/postgresql17/ -d /var/lib/postgresql/16/olddata/ -D /var/lib/postgresql/17/data/
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Performing Consistency Checks
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-----------------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking cluster versions ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking database user is the install user ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking database connection settings ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; prepared transactions ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; contrib/isn with bigint-passing mismatch ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking data &lt;span class="nb"&gt;type&lt;/span&gt; usage ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Creating dump of global objects ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Creating dump of database schemas
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; presence of required libraries ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking database user is the install user ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; prepared transactions ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; new cluster tablespace directories ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;If pg_upgrade fails after this point, you must re-initdb the
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;new cluster before continuing.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Performing Upgrade
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;------------------
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting locale and encoding &lt;span class="k"&gt;for&lt;/span&gt; new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Analyzing all rows in the new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Freezing all rows in the new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Deleting files from new pg_xact ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copying old pg_xact to new server ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting oldest XID &lt;span class="k"&gt;for&lt;/span&gt; new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting next transaction ID and epoch &lt;span class="k"&gt;for&lt;/span&gt; new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Deleting files from new pg_multixact/offsets ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copying old pg_multixact/offsets to new server ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Deleting files from new pg_multixact/members ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copying old pg_multixact/members to new server ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting next multixact ID and offset &lt;span class="k"&gt;for&lt;/span&gt; new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Resetting WAL archives ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting frozenxid and minmxid counters in new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Restoring global objects in the new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Restoring database schemas in the new cluster
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copying user relation files
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting next OID &lt;span class="k"&gt;for&lt;/span&gt; new cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Sync data directory to disk ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Creating script to delete old cluster ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Checking &lt;span class="k"&gt;for&lt;/span&gt; extension updates ok
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Upgrade Complete
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;----------------
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Optimizer statistics are not transferred by pg_upgrade.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Once you start the new server, consider running:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; /usr/libexec/postgresql17/vacuumdb --all --analyze-in-stages
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Running this script will delete the old cluster&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;s data files:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ./delete_old_cluster.sh&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now clean up:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ^D &lt;span class="c1"&gt;# go back to the root user&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% /var/lib/postgresql/17/tmp/delete_old_cluster.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% rmdir /var/lib/postgresql/16/ &lt;span class="c1"&gt;# it should be empty by now&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If you&amp;rsquo;re curious about this script, it&amp;rsquo;s a simple one-liner:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rm -rf &lt;span class="s1"&gt;&amp;#39;/var/lib/postgresql/16/olddata&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Finally, let&amp;rsquo;s get the cluster back up and vacuum it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ^D &lt;span class="c1"&gt;# go back to your main user&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service postgresql start
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas su - postgres -c &lt;span class="s1"&gt;&amp;#39;/usr/libexec/postgresql17/vacuumdb --all --analyze-in-stages&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;miniflux&amp;#34;&lt;/span&gt;: Generating minimal optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; target&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;postgres&amp;#34;&lt;/span&gt;: Generating minimal optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; target&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;template1&amp;#34;&lt;/span&gt;: Generating minimal optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; target&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;miniflux&amp;#34;&lt;/span&gt;: Generating medium optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; targets&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;postgres&amp;#34;&lt;/span&gt;: Generating medium optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; targets&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;template1&amp;#34;&lt;/span&gt;: Generating medium optimizer statistics &lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="m"&gt;10&lt;/span&gt; targets&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;miniflux&amp;#34;&lt;/span&gt;: Generating default &lt;span class="o"&gt;(&lt;/span&gt;full&lt;span class="o"&gt;)&lt;/span&gt; optimizer statistics
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;postgres&amp;#34;&lt;/span&gt;: Generating default &lt;span class="o"&gt;(&lt;/span&gt;full&lt;span class="o"&gt;)&lt;/span&gt; optimizer statistics
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;vacuumdb: processing database &lt;span class="s2"&gt;&amp;#34;template1&amp;#34;&lt;/span&gt;: Generating default &lt;span class="o"&gt;(&lt;/span&gt;full&lt;span class="o"&gt;)&lt;/span&gt; optimizer statistics&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;At this point, Miniflux should be working again.
Navigate to &lt;code&gt;/about&lt;/code&gt; and verify its database version: &lt;code&gt;Postgres version: 17.5&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Last step, delete the previous package:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas apk del postgresql16 postgres16-contrib&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Double-check the newer version is still installed:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% apk list -I &lt;span class="p"&gt;|&lt;/span&gt; grep postgres
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;libpq-17.5-r0 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql17&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql-common-1.2-r1 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql-common&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;MIT&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql-common-openrc-1.2-r1 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql-common&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;MIT&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql-zsh-completion-5.9-r5 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;zsh&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;MIT-Modern-Variant AND GPL-2.0-only&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql17-17.5-r0 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql17&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql17-client-17.5-r0 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql17&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql17-contrib-17.5-r0 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql17&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;postgresql17-openrc-17.5-r0 x86_64 &lt;span class="o"&gt;{&lt;/span&gt;postgresql17&lt;span class="o"&gt;}&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;PostgreSQL&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;installed&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And we&amp;rsquo;re done!&lt;/p&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://wiki.alpinelinux.org/wiki/Postgresql"&gt;https://wiki.alpinelinux.org/wiki/Postgresql&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://beune.dev/posts/upgrade-alpine-postgresql/"&gt;https://beune.dev/posts/upgrade-alpine-postgresql/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>fpp: facebook path picker</title><link>https://perrotta.dev/2025/05/fpp-facebook-path-picker/</link><pubDate>Sun, 18 May 2025 18:34:19 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/fpp-facebook-path-picker/</guid><description>&lt;p&gt;&lt;a href="https://github.com/facebook/PathPicker"&gt;&lt;code&gt;fpp&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;PathPicker accepts a wide range of input &amp;ndash; output from git commands, grep
results, searches &amp;ndash; pretty much anything. After parsing the input, PathPicker
presents you with a nice UI to select which files you&amp;rsquo;re interested in. After
that you can open them in your favorite editor or execute arbitrary commands.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Think of &lt;code&gt;fpp&lt;/code&gt; as the result of parsing file-looking paths in &lt;code&gt;stdout&lt;/code&gt; and
injecting them into &lt;a href="https://github.com/junegunn/fzf"&gt;&lt;code&gt;fzf&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s part of my daily tool belt.&lt;/p&gt;
&lt;p&gt;Sadly, the project is &lt;a href="https://github.com/facebook/PathPicker/commits/main/"&gt;somewhat
abandoned&lt;/a&gt; since 2022.
Nonetheless, it doesn&amp;rsquo;t need any new features: &lt;a href="https://en.wikipedia.org/wiki/Unix_philosophy"&gt;it does one thing and does it
well&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Its latest released version is
&lt;a href="https://github.com/facebook/PathPicker/releases/tag/0.9.5"&gt;0.9.5&lt;/a&gt;. Ironically,
due to a bug, there is a mismatch in &lt;code&gt;--version&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% fpp --version
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;fpp version 0.9.2&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A few usage examples:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;git st | fpp&lt;/code&gt;: modified files in a git repository&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fd -e ts --type file | fpp&lt;/code&gt;: files with a given extension&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ack -l {pattern} | fpp&lt;/code&gt;: files that match a given pattern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To continuously edit files in a loop, use &lt;code&gt;fpp -ko&lt;/code&gt; (&lt;code&gt;ko&lt;/code&gt; stands for
&lt;code&gt;--keep-open&lt;/code&gt;).&lt;/p&gt;</description></item><item><title>WinterBreak: hello world</title><link>https://perrotta.dev/2025/05/winterbreak-hello-world/</link><pubDate>Sat, 17 May 2025 12:21:26 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/winterbreak-hello-world/</guid><description>&lt;p&gt;I decided to
&lt;a href="https://en.wikipedia.org/wiki/Privilege_escalation#Jailbreaking"&gt;jailbreak&lt;/a&gt; my
Kindle on January 1st this year, once I got aware of the
&lt;a href="https://kindlemodding.org/jailbreaking/WinterBreak/"&gt;WinterBreak&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; exploit,
via the excellent
&lt;a href="https://www.mobileread.com/forums/showthread.php?t=365372"&gt;MobileRead&lt;/a&gt; forums:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I am proud to present the culmination of over a year of procrastination:
WinterBreak WinterBreak is a new jailbreak which works on ANY KINDLE (from
the K5) on ANY FIRMWARE&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Life happens though, and only now I got time to do so.&lt;/p&gt;
&lt;p&gt;However, I took one important precaution since then, which was &lt;em&gt;essential&lt;/em&gt;:
ensure my Kindle was &lt;em&gt;always&lt;/em&gt; in airplane mode.&lt;/p&gt;
&lt;p&gt;Whenever the Kindle is connected to Wi-Fi, it gets
&lt;a href="https://en.wikipedia.org/wiki/Over-the-air_update"&gt;OTA updates&lt;/a&gt; automatically
from Amazon. This is generally a sensible default and the desired behavior.
However, for jailbreaking purposes, you want your device to stay stuck on time
and &lt;a href="https://www.youtube.com/watch?v=WA4iX5D9Z64"&gt;&lt;em&gt;never ever ever&lt;/em&gt;&lt;/a&gt; get
updates. An update could make the jailbreak cease to work. In fact, that&amp;rsquo;s
exactly what happened during these last 4-5 months:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;*Note that models on 5.18.x no longer work, please check the wiki&amp;rsquo;s model list
for more info&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I was prudent to verify it was still running 5.17.x before proceeding.&lt;/p&gt;
&lt;p&gt;The expected time to do the whole process was about half an hour, and it&amp;rsquo;s super
user-friendly. Seriously, the folks at &lt;a href="https://kindlemodding.org/"&gt;Kindle
Modding&lt;/a&gt; did an amazing documentation job; arguably
the procedures are friendly even to non-developers. The process boils down to
connecting your Kindle to a laptop (the OS doesn&amp;rsquo;t really matter), copying a
bunch of files and directories over to it, ejecting it, tapping some buttons,
and repeating this procedure a couple of times.&lt;/p&gt;
&lt;p&gt;For me it took about one hour, because I was careful to take photos (in case I
screwed up) and notes (for this blog post, and also for the sake of reverting
the process should I want to ‚Äì for example, if I ever sell the device to a third
party).&lt;/p&gt;
&lt;p&gt;Before deciding to do it, I watched
&lt;a href="https://www.youtube.com/watch?v=hJ59M0io6zE"&gt;this&lt;/a&gt; and &lt;a href="https://www.youtube.com/watch?v=Qtk7ERwlIAk"&gt;this
video&lt;/a&gt; which made me feel even more
confident it is the outcome I was longing for. &lt;a href="https://perrotta.dev/2024/12/independence/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I won&amp;rsquo;t document the jailbreak procedure here: there&amp;rsquo;s no point. First, the
upstream documentation is amazing; second, the steps here would likely easily
get outdated. Head over to &lt;a href="https://kindlemodding.org/jailbreaking/WinterBreak/"&gt;the WinterBreak
docs&lt;/a&gt;. Even better, read
the &lt;a href="https://kindlemodding.org/jailbreaking/jailbreak-faq.html"&gt;FAQ&lt;/a&gt; first. That
said, here are a few notes and anecdotes.&lt;/p&gt;
&lt;p&gt;I had to disable parental controls on my Kindle. I had them enabled to prevent
me from accidentally buying books from the Amazon Store&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;. This is the closest
to adblocking I could find, and I was happy with that setting. That said, one of
the jailbreak steps is to open the store, therefore the parental controls must
be turned off. This is not documented upstream ‚Äì to be honest, most people
wouldn&amp;rsquo;t be in that situation anyway.&lt;/p&gt;
&lt;p&gt;The process failed in the first attempt. I am not quite sure why. It got stuck
at the &lt;code&gt;Jailbreaking - please wait...&lt;/code&gt; screen. The docs say:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you do not see any funky text then make sure Airplane mode is disabled to
avoid any automatic update. Turn it back on after you see the text though!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;That was not helpful to me though. What worked was to &lt;a href="https://www.youtube.com/watch?v=5UT8RkSmN4k"&gt;restart the
device&lt;/a&gt; and try again.&lt;/p&gt;
&lt;p&gt;The second attempt worked.&lt;/p&gt;
&lt;p&gt;Once the jailbreak is done, head over to &lt;a href="https://kindlemodding.org/jailbreaking/post-jailbreak/"&gt;Post
Jailbreak&lt;/a&gt;. Steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;set up a hotfix: to ensure the jailbreak persists, even after restarting the
device&lt;/li&gt;
&lt;li&gt;install KUAL &amp;amp; MRPI: package managers, basically&lt;/li&gt;
&lt;li&gt;disable OTA updates: important to ensure an automatic update does not revert
the jailbreak&lt;/li&gt;
&lt;li&gt;re-enable the store: not super relevant for me, but why not ‚Äì and then turn
parental controls back on&lt;/li&gt;
&lt;li&gt;install &lt;a href="https://koreader.rocks/"&gt;KOReader&lt;/a&gt;: surely this is the most exciting
part&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;KOReader is a document viewer for E Ink devices. Supported fileformats include
EPUB, PDF, DjVu, XPS, CBT, CBZ, FB2, PDB, TXT, HTML, RTF, CHM, DOC, MOBI and
ZIP files. It&amp;rsquo;s available for Kindle, Kobo, PocketBook, Android and desktop
Linux.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;A few highlights from the FAQ:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Is it possible to undo the jailbreak (&amp;ldquo;unjailbreak&amp;rdquo;)?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Yes, perform a factory reset on the device and then install the same firmware
update (or higher).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This makes the action of doing the jailbreak a no-brainer. Sure, there&amp;rsquo;s always
a (small) chance of bricking your device, but I think it&amp;rsquo;s worth the risk.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Will this get my Amazon account banned?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;No reports of Amazon accounts being banned after jailbreaking have been
reported so far. However, please refrain from telling support that you have
modified your device.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Common sense. I never contacted Amazon Support in 11+ years of owning Kindles,
so I don&amp;rsquo;t particularly care about it anyway.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Will this void the warranty on my Kindle device?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Probably.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is always the case with jailbreaking.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s much easier to commit when you have an old device that is already out of
the warranty period.&lt;/p&gt;
&lt;p&gt;Avoid jailbreaking brand new devices. :)&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Can I still use the default reader after jailbreaking?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Yes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s true: I verified it. This is great. In the (unlikely) case I find out that
KOReader sucks&lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;, I don&amp;rsquo;t need to regret it.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Is it possible to change screensavers in the native Kindle UI?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Although there are currently no extensions to change the screensavers in
hard-float firmware, it is still possible to change them, but it is not
recommended as it is very easy to brick the device.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Noted. But:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You can easily change screensavers with KOReader (search for the
&amp;ldquo;screensavers&amp;rdquo; feature).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;How can I check if my device is jailbroken?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Type &lt;code&gt;;log&lt;/code&gt; into the search bar, if a message pop ups, you&amp;rsquo;re jailbroken.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;And now I&amp;rsquo;m done.&lt;/p&gt;
&lt;p&gt;I cannot stress this enough: it&amp;rsquo;s very important to read the docs thoroughly
before deciding to jailbreak. &lt;a href="https://en.wikipedia.org/wiki/RTFM"&gt;RTFM&lt;/a&gt;!&lt;/p&gt;
&lt;p&gt;Perhaps I&amp;rsquo;ll write a follow-up post-jailbreaking user experience blog post.&lt;/p&gt;
&lt;h2 id="appendix"&gt;Appendix&lt;/h2&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% tree Downloads
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Downloads
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ koreader-kindlehf-v2025.04.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ kual-mrinstaller-khf.tar.xz
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ renameotabin.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ Update_hotfix_universal.bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îú‚îÄ‚îÄ Update_KUALBooklet_ALLDEVICES_KS2_install.bin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îî‚îÄ‚îÄ WinterBreak.tar.gz&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Yes, it&amp;rsquo;s called WinterBreak because it got released during Winter (in the
Northern hemisphere).&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Even if I were interested in doing so, I&amp;rsquo;d rather use my phone or my
computer for that. The Kindle Store experience &lt;em&gt;from the Kindle&lt;/em&gt; is
horrible.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;Their domain is &lt;a href="https://koreader.rocks"&gt;https://koreader.rocks&lt;/a&gt;&amp;hellip;&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Nostalgia: The Linux Setup - Thiago Perrotta, Student</title><link>https://perrotta.dev/2025/05/nostalgia-the-linux-setup-thiago-perrotta-student/</link><pubDate>Thu, 15 May 2025 22:43:17 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/nostalgia-the-linux-setup-thiago-perrotta-student/</guid><description>&lt;p&gt;Back in the (g)old(en) days&amp;hellip;in October 2014 I gave an interview to the blog
&amp;ldquo;Linux Rig&amp;rdquo; by &lt;a href="https://steven.ovadia.org/"&gt;Steven Ovadia&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The original interview was published at
&lt;code&gt;https://linuxrig.com/2015/01/20/the-linux-setup-thiago-perrotta-student/&lt;/code&gt;, but
the link no longer works. It&amp;rsquo;s purposely not hyperlinked because now it&amp;rsquo;s a
&lt;a href="https://en.wikipedia.org/wiki/Domain_parking"&gt;parked domain&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You can find the original at the &lt;a href="https://web.archive.org/web/20180527155224/https://linuxrig.com/2015/01/20/the-linux-setup-thiago-perrotta-student/"&gt;Web
Archive&lt;/a&gt;.
I wanted to reproduce it here&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; for archiving purposes. All credits go to Steven
:)&lt;/p&gt;
&lt;hr&gt;
&lt;h2 id="the-linux-setup--thiago-perrotta-student"&gt;The Linux Setup ‚Äì Thiago Perrotta, Student&lt;/h2&gt;
&lt;p&gt;Steven Ovadia ‚Äì January 20th, 2015 ‚Äì 0 Comments&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Thiago touches on a number of interesting points. For instance, he talks about
testing out new distributions and desktops to see what&amp;rsquo;s going on in Linux.
That&amp;rsquo;s something I kind of have to remind myself to do. Everything works well on
my main workhorse (knock wood‚Ä¶) so I have no natural desire to try out other
distributions and desktops. But I try and remember to give different things a
spin, just so I know if there&amp;rsquo;s something better out there, or if there&amp;rsquo;s
something I should steal for my own system. Finally, Thiago pays respect to his
package manager, which is super classy. Package managers are the unsung heroes
of most setups and without them, we&amp;rsquo;d probably have a rougher time trying new
things out.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;You can find more of The Linux Setup here.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;You can follow Linux Rig on Google+ here and follow me on Twitter here.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1. Who are you, and what do you do?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I am a Computer and Information Engineering student living in Rio de Janeiro,
Brazil. I usually use the &amp;rsquo;thiagowfx&amp;rsquo; nickname and I&amp;rsquo;d say I am a
free/open source software and community enthusiast. In particular, today I am an
active member of the Arch Linux community. I also have a blog where I write
about projects I&amp;rsquo;m currently working on and new technology and software I&amp;rsquo;m
trying out.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2. Why do you use Linux?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Questions we are passionate about are the hardest to answer. But hey, today I&amp;rsquo;d say I use Linux for at least for three reasons (not in any particular order):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;community: it is very hard to find a diverse and rich community such as the
GNU/Linux one;&lt;/li&gt;
&lt;li&gt;open source software: this is very important and includes implications on
philosophy and programming (e.g., pull requests);&lt;/li&gt;
&lt;li&gt;package managers!&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;3. What distribution do you run on your main desktop/laptop?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;For a long time, on a monthly basis, I was always switching distributions.
However, during the last year I discovered the one I most enjoy today: Arch
Linux. It is a very customizable, follows KISS (&amp;lsquo;Keep it Short &amp;amp; Simple&amp;rsquo;) and is
a user-centered distro, with a very nice and intelligent community. I still test
the latest improvements of other Linux distributions every now and then, even
though this is less frequent today.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;4. What desktop environment do you use and why do you use it?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;I am always switching desktop environments, mainly because I like to keep up to
date with the latest improvements on the Linux desktop (as with distros).
However, I&amp;rsquo;d say the two I use and like most are Cinnamon and i3. Usually I use
Cinnamon at home and i3 elsewhere (when I don&amp;rsquo;t have a mouse with me).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;5. What one piece of software do you depend upon with this distribution? Why is it so important?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Package manager: it is the piece of software I most value. I don&amp;rsquo;t know how to
live without one anymore. In particular, pacman is my preferred one. Now, if you
were referring to end-user software, I have no doubt that Emacs is the software
I most use today, although I am giving Vim a try. However, I&amp;rsquo;m not dependent of
any software in particular; each task has its own needs.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;6. What kind of hardware do you run this setup on?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Currently I have a Lenovo Ideapad S400U Ultrabook, which has an Intel Core i5
processor, 4GB RAM and an Intel Graphics HD 4000 graphics card. It
supports Linux pretty well and out-of-the-box with Intel open source drivers. It
has a small SSD (32GB) where I keep the root partition of whichever Linux
distribution I&amp;rsquo;m using at the moment, and a 500GB HDD where I keep my /home and
an alternate Linux distro.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;7. Will you share a screenshot of your desktop?&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;As I&amp;rsquo;ve said, I&amp;rsquo;m always switching desktop environments. However, I keep an
album on Flickr with my latest screenshots. This is the last one I
took, on Arch Linux, with KDE 4.14.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Interview conducted October 5, 2014&lt;/em&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;em&gt;&lt;strong&gt;The Linux Setup&lt;/strong&gt; is a feature where I interview people about their Linux
setups. The concept is borrowed, if not outright stolen, from this site. If
you&amp;rsquo;d like to participate, drop me a line.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;You can follow Linux Rig on Google+ here, follow me on Twitter here, and subscribe to the feed here.&lt;/em&gt;&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;The reproduction was done verbatim, with the exception of hyperlinks.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>How to file a great feature request</title><link>https://perrotta.dev/2025/05/how-to-file-a-great-feature-request/</link><pubDate>Wed, 14 May 2025 13:46:26 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/how-to-file-a-great-feature-request/</guid><description>&lt;p&gt;Obviously I&amp;rsquo;m biased to say this but I have just
&lt;a href="https://github.com/gruntwork-io/pre-commit/issues/130"&gt;filed&lt;/a&gt; a high-quality
feature request for a software project I am interested to adopt. What makes it
great‚Ñ¢:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;describe &lt;strong&gt;concisely&lt;/strong&gt; and &lt;strong&gt;precisely&lt;/strong&gt; &lt;strong&gt;what&lt;/strong&gt; you&amp;rsquo;re looking for&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;being concise is essential: we live in a fast-paced world. If no one looks
at your FR, then it won&amp;rsquo;t move forward. Period.&lt;/li&gt;
&lt;li&gt;being precise (unambiguous) is important to avoid back-and-forth and
potential bikeshedding&lt;/li&gt;
&lt;li&gt;I prefer to write it using my own words. Using an LLM risks making your FR
robotic and unappealing for anyone to consider. YMMV.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;describe &lt;strong&gt;why&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;what is the &lt;em&gt;raison d&amp;rsquo;√™tre&lt;/em&gt; of the feature? What is the rationale behind it?
How does it make the project better? How does it improve the developer
experience?&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;(&lt;em&gt;optional&lt;/em&gt;, but &lt;strong&gt;highly recommended&lt;/strong&gt;) suggest &lt;strong&gt;how&lt;/strong&gt; and offer to address it&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Everyone wants everything, but few people want to put in the effort to see
changes take place. Your FR has a much higher chance of becoming reality if
you volunteer your time, effort and expertise to implement the feature
yourself, rather than &lt;a href="https://xkcd.com/2347/"&gt;demanding&lt;/a&gt; someone (likely an
unpaid volunteer) to do so for you.&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;In my experience it&amp;rsquo;s better to file an issue / ticket / FR first, &lt;strong&gt;prior to&lt;/strong&gt;
sending a pull request. You &lt;em&gt;cannot&lt;/em&gt; know in advance whether the FR is welcome
by the project or its maintainers. Sending in a PR just to see its underlying
&lt;em&gt;raison d&amp;rsquo;√™tre&lt;/em&gt; be rejected is a waste of time, besides being a frustrating
experience.&lt;/p&gt;
&lt;p&gt;Furthermore, the ticket doubles-down as documentation for the PR description /
commit message in the future, should the FR be accepted. The small overhead of
time to file a ticket is a reasonable trade-off.&lt;/p&gt;
&lt;p&gt;Now, even if your FR is great and very reasonable&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;, there&amp;rsquo;s absolutely no
guarantee:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you will even get a reply in the first place&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;back-and-forth chatter will be quick and responsive&lt;/li&gt;
&lt;li&gt;the maintainers / developers will agree with your sense of &amp;lsquo;usefulness&amp;rsquo;&lt;/li&gt;
&lt;li&gt;the maintainers / developers will agree with &lt;em&gt;how&lt;/em&gt; you believe it should be
tackled or implemented&lt;/li&gt;
&lt;li&gt;your follow-up PR will even be reviewed and, let alone, merged&lt;/li&gt;
&lt;li&gt;your merged PR will make it into a new point release&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;em&gt;Life is hard&lt;/em&gt;. Nonetheless, do not give up! Open source software is beautiful
and serendipitous. :)&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;It&amp;rsquo;s a subjective matter.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Sometimes it takes &lt;a href="https://github.com/funtoo/keychain/issues/119"&gt;more than 3
years&lt;/a&gt;.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Kagi</title><link>https://perrotta.dev/2025/05/kagi/</link><pubDate>Sun, 04 May 2025 19:18:48 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/05/kagi/</guid><description>&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;: &lt;a href="https://kagi.com/"&gt;Kagi&lt;/a&gt; is a web search engine.&lt;/p&gt;
&lt;p&gt;Why would you use something other than Google, you may ask? &lt;a href="https://blog.kagi.com/age-pagerank-over"&gt;That&amp;rsquo;s out of scope
of this post&lt;/a&gt;. If you think Google is
the best and there&amp;rsquo;s no need to replace your search engine, this post is not for
you.&lt;/p&gt;
&lt;p&gt;A while ago I had &lt;a href="https://perrotta.dev/2024/12/switching-from-google-to-chatgpt-search/"&gt;switched&lt;/a&gt; my default search
engine from Google to ChatGPT Search, but that didn&amp;rsquo;t last long; eventually I
settled on &lt;a href="http://duckduckgo.com/"&gt;DuckDuckGo&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Last week, a friend told me he got a trial of Kagi. It wasn&amp;rsquo;t the first time
I&amp;rsquo;ve heard of it: &lt;a href="https://daringfireball.net/2025/04/try_switching_to_kagi"&gt;John
Gruber&lt;/a&gt; also blogged
about it.&lt;/p&gt;
&lt;p&gt;Then I decided to try it out myself as well. In general I am happy with
DuckDuckGo, but we can always try something new, and the company materials have
really impressed me.&lt;/p&gt;
&lt;p&gt;I emailed someone at the company and got an 1-month trial of their
&lt;a href="https://kagi.com/pricing"&gt;Professional plan&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; ‚Äì which includes &lt;strong&gt;unlimited&lt;/strong&gt;
searches. This is important: there should be no decision fatigue nor anxiety
about hitting a ceiling in the number of monthly searches.&lt;/p&gt;
&lt;p&gt;What is Kagi? In a Nutshell:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Kagi has no ads and is fully supported only by its users. We worked very hard
to provide high quality, fast and tracking-free results at a minimum cost to
ensure sustainability of our operation. By choosing a paid Kagi plan, you are
also helping accelerate our mission of humanizing the web.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Why should I pay for search?&lt;/p&gt;
&lt;p&gt;You&amp;rsquo;re already paying with your time and attention to advertisers who
manipulate your search results, waste your time, and exploit your privacy. Pay
with your wallet instead of your life, and get pure, powerful search that
works for you - not advertisers. Read more.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;What happens if I don&amp;rsquo;t use any searches?&lt;/p&gt;
&lt;p&gt;In months where you don&amp;rsquo;t utilize any searches on your plan, we will
automatically apply a full credit to your account. This credit will be applied
to your next billing cycle, effectively covering your subsequent month&amp;rsquo;s
subscription at no additional cost.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;See also their &lt;a href="https://help.kagi.com/kagi/faq/faq.html"&gt;FAQ&lt;/a&gt; and &lt;a href="https://kagi.com/privacy"&gt;privacy
policy&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Why does Kagi return so few results?&lt;/p&gt;
&lt;p&gt;Kagi only shows you actually relevant search results, so you may be confused
when Kagi returns 57 results and another, ad supported, search engine returns
2.6 million results. This is, in part, because ad supported search engines
have different incentives and want you to stay on their site longer, going
through pages and pages of results, as every interaction is another
opportunity to serve ads.&lt;/p&gt;
&lt;p&gt;Kagi, conversely, strives to deliver the most relevant, unique results within
the top three.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;What data does Kagi collect?&lt;/p&gt;
&lt;p&gt;Only bare necessities to run the service. Please see our privacy policy and
our documentation about privacy protection for more information.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Kagi&amp;rsquo;s business model is unlike any other search engine in the world. This
means we don&amp;rsquo;t need or want your personal information (it would just be an
unwelcome liability). By choosing this business model we know that we are
going to have far less users than mainstream search engine for example, but we
have also removed any incentive to misuse any information you have shared with
us.&lt;/p&gt;
&lt;p&gt;Privacy is a Kagi Feature&lt;/p&gt;
&lt;p&gt;At Kagi, you are our customer, not the product being sold The deal is simple:
Our customers pay for a service and we provide them with a service. This
business model ensures Kagi&amp;rsquo;s and our customers&amp;rsquo; interests are always aligned.&lt;/p&gt;
&lt;p&gt;We value your privacy, and whenever possible we will choose not to require or
save any user data. For Kagi, user data is only a liability - we do not need
or want it. Still, operating a paid service may require some basic information
from our customers, and this document describes how we use it to the best of
our ability.&lt;/p&gt;
&lt;p&gt;See for yourself Our technology choices show we&amp;rsquo;re serious about privacy. You
can check them in your browser.&lt;/p&gt;
&lt;p&gt;Unlike most websites, we do not load any analytics or telemetry.&lt;/p&gt;
&lt;p&gt;Unlike most search engines, we do not track which search result you choose to
click.&lt;/p&gt;
&lt;p&gt;When viewing images, videos or other media results, or using the Kagi
Assistant, we protect your privacy by proxying all connections and data
through our servers.&lt;/p&gt;
&lt;p&gt;We store only the bare minimum of cookies, those required to handle basic
application functionality, such as logging in.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I am currently digging through their
&lt;a href="https://help.kagi.com/kagi/"&gt;documentation&lt;/a&gt;. There&amp;rsquo;s a lot to read! There&amp;rsquo;s no
need to, but I am trying to assess whether to pay for them once the trial ends.&lt;/p&gt;
&lt;p&gt;Overall I am quite bullish about them. I have already updated all my browsers in
all my devices (including work) to them. I believe immersion is a very effective
way to evaluate a product.&lt;/p&gt;
&lt;p&gt;They support &lt;a href="https://help.kagi.com/kagi/features/bangs.html"&gt;bangs&lt;/a&gt;, just like
DuckDuckGo, meaning that I can append (for example) &lt;code&gt;!g&lt;/code&gt; or &lt;code&gt;!ddg&lt;/code&gt; to bail out
to Google or DuckDuckGo, respectively. I find their user experience around bangs
much better than DuckDuckGo&amp;rsquo;s:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;first, there&amp;rsquo;s a &lt;a href="https://kbe.smaertness.net/"&gt;bang explorer&lt;/a&gt;
(community-created), and the bang sources are
&lt;a href="https://github.com/kagisearch/bangs"&gt;open&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;it&amp;rsquo;s possible to add custom bangs&lt;/li&gt;
&lt;li&gt;it&amp;rsquo;s possible to add custom search engines&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;As a practical example: I can invoke their
&lt;a href="https://kagi.com/summarizer"&gt;Summarizer&lt;/a&gt; to make a summary of a page:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;!sum &amp;lt;url&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Or &amp;ldquo;I am feeling lucky&amp;rdquo; with &lt;code&gt;! {search term}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s &lt;a href="https://help.kagi.com/kagi/api/overview.html"&gt;API access&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s built-in &lt;a href="https://blog.kagi.com/kagi-translate"&gt;Translation&lt;/a&gt; (Kagi
Translate), accessible at
&lt;a href="https://translate.kagi.com/"&gt;https://translate.kagi.com/&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Add translate.kagi.com/ before any URL for instant translation. No apps
needed. Access 244 languages with zero tracking. Install our browser
bookmarklet for quick access.&lt;/p&gt;
&lt;p&gt;Kagi Translate is free for everyone. If you&amp;rsquo;re not a logged in Kagi user,
you&amp;rsquo;ll encounter a simple captcha to prevent automated abuse - a small step
that helps us maintain quality while keeping the service free. Kagi members
get direct access without captchas, integrating seamlessly with their existing
workflow.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://kagi.com/stats"&gt;Kagi Search Stats&lt;/a&gt;: it keeps healthily growing.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://help.kagi.com/kagi/search-details/search-speed.html"&gt;Kagi Performance&lt;/a&gt;:
it is fast and lightweight.&lt;/p&gt;
&lt;p&gt;If you append a question mark (&lt;code&gt;?&lt;/code&gt;) to a search query, then it automatically
invokes a LLM (&lt;a href="https://help.kagi.com/kagi/ai/quick-answer.html"&gt;&amp;lsquo;quick
answer&amp;rsquo;&lt;/a&gt;) to summarize results:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Even with an engine as powerful as Kagi you may not be interested in reading
every resulting page and want a synthesis of the information as well as
references to important pages in the search result. Kagi&amp;rsquo;s Quick Answer
quickly produces a summary of the results across the pages returned and
provides references to the pages that are used. This functionality allows you
to quickly consume the desired information from the search while giving you
the pointers to dive deeper into the information if desired.&lt;/p&gt;
&lt;p&gt;Once you have search results returned you can select Quick Answer to quickly
transform the information on the page into the easier to digest format.
Additionally, if you add a question mark at the end of your query (&amp;quot;?&amp;quot;) Quick
Answers will trigger automatically, making it even more convenient to get to
the information you need swiftly. You can also trigger Quick Answer by
pressing &amp;lsquo;q&amp;rsquo; on your keyboard, after the results have loaded.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I&amp;rsquo;ll end this post now, otherwise I&amp;rsquo;d just be parroting the entire Kagi
Documentation here. &lt;strong&gt;TL;DR&lt;/strong&gt;: So far, so good.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Edit(2025-05-14)&lt;/strong&gt;: After using Kagi for about 10 days, I am happy to report
that I&amp;rsquo;ve been quite happy with them. There&amp;rsquo;s no doubt they have a great
product.&lt;/p&gt;
&lt;p&gt;The question to ask yourself is whether it&amp;rsquo;s worth paying $10 / month for
their professional plan, or whether DuckDuckGo is enough for you. If you can
have your company expense them, then it&amp;rsquo;s definitely a no-brainer.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Their standard &lt;a href="https://kagi.com/pricing"&gt;trial&lt;/a&gt; sign-up has a limitation
of 100 searches.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item></channel></rss>