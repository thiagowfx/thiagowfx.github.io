<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Pt on Â¬ just serendipity ğŸ€</title><link>https://perrotta.dev/</link><description>Recent content in Pt on Â¬ just serendipity ğŸ€</description><generator>Hugo</generator><language>en-us</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>Â© 2021 - 2026 Thiago Perrotta Â·
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) Â·
a fork of [hugo Ê•â€¢á´¥â€¢Ê” bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Fri, 05 Sep 2025 18:20:12 +0200</lastBuildDate><atom:link href="https://perrotta.dev/tags/pt/index.xml" rel="self" type="application/rss+xml"/><item><title>Pare de receber telemarketing: NÃ£o Me Perturbe</title><link>https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/</link><pubDate>Mon, 13 Jan 2025 02:13:41 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>pt</category><category>privacy</category><category>serenity</category><guid>https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/</guid><description>&lt;p&gt;&lt;a href="https://naomeperturbe.com.br/"&gt;NÃ£o Me Perturbe&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Pare de receber ligaÃ§Ãµes de telemarketing das Empresas participantes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;O NÃ£o Me Perturbe permite, de forma fÃ¡cil e gratuita, evitar a oferta de
produtos e serviÃ§os por meio de contato telefÃ´nico provenientes exclusivamente
das Prestadoras de ServiÃ§os de TelecomunicaÃ§Ãµes (Telefone mÃ³vel, telefone
fixo, TV por assinatura e Internet) e pelas InstituiÃ§Ãµes Financeiras
(operaÃ§Ãµes de EmprÃ©stimo Consignado e CartÃ£o de CrÃ©dito Consignado).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Na prÃ¡tica: cadastre seu nÃºmero de celular (+55) + CPF na plataforma, alÃ©m de
email + senha para gerenciÃ¡-la.&lt;/p&gt;
&lt;p&gt;Em troca, chamadas automÃ¡ticas de operatoras de telefonia, bancos, entre outras
empresas irÃ£o (teoricamente&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;) parar de realizar chamadas de telemarketing (spam!)
para o seu nÃºmero.&lt;/p&gt;
&lt;p&gt;Uma vez cadastrado, o processo leva atÃ© 30 dias para ser efetivado.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;TambÃ©m descobri&lt;/strong&gt;: como identificar &lt;a href="https://qualempresameligou.com.br/"&gt;qual empresa me
ligou?&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A AgÃªncia Nacional de TelecomunicaÃ§Ãµes (Anatel) determinou a criaÃ§Ã£o de uma
ferramenta, que Ã© o Portal &amp;ldquo;Qual empresa me ligou?&amp;rdquo;
(&lt;a href="https://qualempresameligou.com.br/)"&gt;https://qualempresameligou.com.br/)&lt;/a&gt;, com o objetivo de identificar o CNPJ e a
RazÃ£o Social associados a determinados nÃºmeros de telefone. Assim, caso vocÃª
receba chamada de um nÃºmero que desconheÃ§a, e este pertencer a uma Pessoa
JurÃ­dica, poderÃ¡ identificar a empresa que te ligou.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Caso as empresas continuem violando o seu direito, mesmo apÃ³s a inclusÃ£o
na lista, Ã© possÃ­vel realizar uma reclamaÃ§Ã£o na prÃ³pria plataforma.&amp;#160;&lt;a href="https://perrotta.dev/2025/01/pare-de-receber-telemarketing-n%C3%A3o-me-perturbe/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Pare de receber telemarketing: NÃ£o Me Perturbe"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; pt, privacy, serenity&lt;/p&gt;</description></item><item><title>Emissor NFE Sebrae v4.01 para emissÃ£o de notas fiscais</title><link>https://perrotta.dev/2025/01/emissor-nfe-sebrae-v4.01-para-emiss%C3%A3o-de-notas-fiscais/</link><pubDate>Wed, 08 Jan 2025 00:29:46 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>pt</category><guid>https://perrotta.dev/2025/01/emissor-nfe-sebrae-v4.01-para-emiss%C3%A3o-de-notas-fiscais/</guid><description>&lt;p&gt;&lt;em&gt;To my English-speaking readers: this post contains Brazilian bureaucracy and
it&amp;rsquo;s in Portuguese, you may want to skip it.&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="instalaÃ§Ã£o"&gt;InstalaÃ§Ã£o&lt;/h2&gt;
&lt;p&gt;Baixe o arquivo JNLP (cÃ³pia): &lt;a href="emissorNfe-4_0_1.jnlp"&gt;emissorNfe-4_0_1.jnlp&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Ou direto da fonte: &lt;a href="https://storage.googleapis.com/nfe-sebrae-prd/nfe/v401/producao/emissorNFe-4_0_1.jnlp"&gt;GCS&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Execute-o com o Java Web Start (JWS) do Java 8. NÃ£o existe mais JWS a partir do
Java 11. Caso nÃ£o tenha um runtime (JRE), baixe-o diretamente do &lt;a href="https://www.java.com/pt-BR/download/manual.jsp"&gt;site da
Oracle&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Caso nÃ£o funcione, delete e reinstale o applet:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Abra o Menu Iniciar&lt;/li&gt;
&lt;li&gt;Procure &amp;ldquo;Configurar Java&amp;rdquo; no campo de busca&lt;/li&gt;
&lt;li&gt;Clique na Aba &amp;ldquo;Geral&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Em &amp;ldquo;Arquivos TemporÃ¡rios na Internet&amp;rdquo;, clique em &amp;ldquo;Exibir&amp;hellip;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Clique no Ã­cone do emissor, e depois no botÃ£o &amp;lsquo;X&amp;rsquo; vermelho.&lt;/li&gt;
&lt;li&gt;Execute o arquivo JNLP novamente.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="notas"&gt;Notas&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://openwebstart.com/"&gt;OpenWebStart&lt;/a&gt; nÃ£o funcionou. Ele lanÃ§a uma
exceÃ§Ã£o.&lt;/li&gt;
&lt;/ul&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Emissor NFE Sebrae v4.01 para emissÃ£o de notas fiscais"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; pt&lt;/p&gt;</description></item><item><title>Matroshka</title><link>https://perrotta.dev/2016/10/matroshka/</link><pubDate>Sun, 16 Oct 2016 15:49:01 -0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pt</category><guid>https://perrotta.dev/2016/10/matroshka/</guid><description>&lt;p&gt;Recentemente participei de uma
&lt;a href="https://ctf.tecland.com.br/Pwn2Win/game/scoreboard/"&gt;CTF&lt;/a&gt; promovida pelo
&lt;a href="https://ctf-br.org/elt"&gt;ELT&lt;/a&gt; (Epic Leet Team). Uma das &lt;em&gt;challs&lt;/em&gt; que consegui
resolver completamente foi a &lt;strong&gt;matroshka&lt;/strong&gt;, e aqui estÃ¡ um breve &lt;em&gt;write-up&lt;/em&gt;
sobre a mesma.&lt;/p&gt;
&lt;p&gt;Dado um arquivo &lt;code&gt;matroshka.tar.gz&lt;/code&gt;, precisÃ¡vamos encontrar a &lt;em&gt;flag&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;NÃ£o era difÃ­cil desconfiar do que esse arquivo / &lt;em&gt;chall&lt;/em&gt; se tratava: matroshkas
sÃ£o aquelas bonecas russas que se encaixam umas dentro das outras. EntÃ£o&amp;hellip;de
cara, logo jÃ¡ desconfiei: provavelmente existe um arquivo compactado dentro de
outro, dentro de outro, dentro de outro, e assim por diante&amp;hellip;&lt;/p&gt;
&lt;p&gt;Por experiÃªncia, nÃ£o valeria a pena tentar descompactar tudo manualmente, pois
sabe-se lÃ¡ quantos nÃ­veis de compactaÃ§Ã£o esse negÃ³cio iria ter (provavelmente
mais do que 100).&lt;/p&gt;
&lt;p&gt;De cara logo pensei em usar o &lt;a href="https://brettcsmith.org/2007/dtrx/"&gt;dtrx&lt;/a&gt;, que Ã©
um excelente programa (nÃ£o perco tempo e sempre rodo um &lt;code&gt;port install dtrx&lt;/code&gt;)
para extrair arquivos sem ter que ficar se lembrando das sintaxes individuais de
cada programa. Nesse caso, nÃ£o iria rolar: os arquivos eram renomeados de forma
a &lt;em&gt;trickear&lt;/em&gt; o dtrx, que funciona atravÃ©s de heurÃ­sticas, uma delas Ã© a
&amp;rsquo;extensÃ£o&amp;rsquo; do nome do arquivo. Por exemplo, vÃ¡rios arquivos (apÃ³s
descompactados) eram renomeados na forma &lt;code&gt;*.elt&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;A segunda alternativa foi (&lt;strong&gt;serendipidade&lt;/strong&gt;, nÃ£o conhecia essa ferramenta
antes) tentar utilizar o &lt;a href="http://www.nongnu.org/atool/"&gt;atool&lt;/a&gt;. Por motivos
similares ao &lt;code&gt;dtrx&lt;/code&gt;, nÃ£o rolou.&lt;/p&gt;
&lt;p&gt;Pois bem, entÃ£o o jeito ia ser descompactar tudo na marra. Pensei em escrever um
programa que faria o seguinte:&lt;/p&gt;

&lt;div class="codeblock" data-lang="cpp"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;cpp&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-cpp" data-lang="cpp"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="n"&gt;unzip&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="k"&gt;try&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		&lt;span class="n"&gt;tar&lt;/span&gt; &lt;span class="n"&gt;xf&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="k"&gt;catch&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		&lt;span class="c1"&gt;// ...e assim por diante
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;	&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Obviamente eu utilizaria os programas diretamente, entÃ£o a coisa poderia ficar
um pouco mais simples, utilizando os return codes dos mesmos para detectar se
descompactaram o arquivo com sucesso. Por exemplo, &lt;code&gt;tar xf &amp;lt;file&amp;gt;&lt;/code&gt; retorna &lt;code&gt;0&lt;/code&gt;
se rodou corretamente, do contrÃ¡rio ele retorna algo diferente de zero. Isso se
mostrou vÃ¡lido para todos os programas de descompactaÃ§Ã£o que utilizei, exceto o
lha, que insistia em retornar &lt;code&gt;0&lt;/code&gt; de qualquer jeito, mesmo quando falhava.&lt;/p&gt;
&lt;p&gt;Para automatizar essa tarefa, resolvi utilizar &lt;code&gt;python2&lt;/code&gt;. &lt;code&gt;C/C++&lt;/code&gt; provavelmente
tambÃ©m seriam bons candidatos, mas eu queria praticar o meu &lt;code&gt;python&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;ApÃ³s algumas inspeÃ§Ãµes, notei que cada arquivo continha um e somente um arquivo
dentro dele, entÃ£o a ideia base seria:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;mantenha uma lista com todos os arquivos conhecidos atÃ© entÃ£o (no comeÃ§o, sÃ³
haveria um);&lt;/li&gt;
&lt;li&gt;descompacte esse arquivo;&lt;/li&gt;
&lt;li&gt;detecte qual arquivo acabou de ser descompactado&lt;/li&gt;
&lt;li&gt;continue fazendo isso atÃ© encontrar a &lt;code&gt;flag&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Meu cÃ³digo ficou assim:&lt;/p&gt;

&lt;div class="codeblock" data-lang="python"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;python&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;TARGET_DIR&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;mat&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_kgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;kgb&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_gzip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;gunzip&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;-S&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_tar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;tar&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;xvf&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_rar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;unrar&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_lha&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;lha&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;e&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;unzip&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_arj&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;cp&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;.arj&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;arj&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;rm&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;.arj&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;uncompress_7z&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;call&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;7z&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;x&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;colorprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s1"&gt;[93m&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;repr&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;s&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;&lt;/span&gt;&lt;span class="se"&gt;\033&lt;/span&gt;&lt;span class="s1"&gt;[0m&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;chdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;TARGET_DIR&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="kc"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;newbase&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;listdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;.&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;diff&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;newbase&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;colorprint&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;len(diff) &amp;gt; 1&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;len(diff) == 0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;file&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;diff&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_kgb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_gzip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_tar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_rar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_zip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_arj&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_7z&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;uncompress_lha&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;err&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;lha fail&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;newbase&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Essa ideia funcionou bastante bem. A Ãºnica coisa &lt;em&gt;overkill&lt;/em&gt; foi que eu nÃ£o
deletei arquivos anteriores; isso poderia ter simplificado significativamente o
problema (e os &lt;em&gt;sets&lt;/em&gt; no python).&lt;/p&gt;
&lt;p&gt;Ademais, uma das coisas chatas do &lt;code&gt;arj&lt;/code&gt; Ã© que ele sÃ³ Ã© capaz de extrair arquivos
que terminam em &lt;code&gt;*.arj&lt;/code&gt;, entÃ£o fui obrigado a renomear/copiar um arquivo antes
de tentar utilizÃ¡-lo para extrair seu conteÃºdo.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Matroshka"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; dev, pt&lt;/p&gt;</description></item><item><title>Instalando o Gentoo a partir do Arch</title><link>https://perrotta.dev/2014/05/instalando-o-gentoo-a-partir-do-arch/</link><pubDate>Thu, 01 May 2014 02:20:00 +0000</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pt</category><guid>https://perrotta.dev/2014/05/instalando-o-gentoo-a-partir-do-arch/</guid><description>&lt;p&gt;&lt;strong&gt;TL;DR&lt;/strong&gt;: pequena TODO list sobre como instalar o Gentoo. VocÃª vai passar 90% do seu tempo olhando para &lt;strong&gt;texto&lt;/strong&gt; dando scroll na tela (processo demoradoâ€¦).&lt;/p&gt;
&lt;p&gt;Esse Ã© o mÃ©todo mais tradicional possÃ­vel (e que me interessa) que pude constatar. Adapte-o para as suas prÃ³prias necessidades:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Boote em um ambiente com o Arch (na verdade, vocÃª pode fazer isso a partir de qualquer distro decente).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Crie uma partiÃ§Ã£o &lt;code&gt;/&lt;/code&gt;, do tipo ext4, para acomodar a instalaÃ§Ã£o do Gentoo. De preferÃªncia, coloque um label decente lÃ¡. SugestÃµes de ferramentas para isso: &lt;code&gt;cfdisk&lt;/code&gt; ou &lt;code&gt;gparted&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Monte essa partiÃ§Ã£o em &lt;code&gt;/mnt/gentoo&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Continue a partir do &lt;a href="http:www.gentoo.org/doc/en/handbook/handbook-amd64.xml?part=1&amp;amp;chap=4"&gt;handbook&lt;/a&gt; oficial do Gentoo â€“ nesse caso, para a arquitetura amd64. No entanto, &lt;strong&gt;atenÃ§Ã£o&lt;/strong&gt;. Use &lt;a href="https:wiki.gentoo.org/wiki/Installation_alternatives"&gt;esse&lt;/a&gt; guia para perceber quais etapas de instalaÃ§Ã£o e configuraÃ§Ã£o sÃ£o diferentes (em relaÃ§Ã£o a se estivÃ©ssemos instalando pelo mÃ©todo oficial, a partir do live environment do gentoo), mais especificamente &lt;strong&gt;da parte 4 Ã  parte 6&lt;/strong&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Baixe o &lt;code&gt;PKGBUILD&lt;/code&gt; &lt;code&gt;gentoo-mirrorselect&lt;/code&gt; do AUR.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Use &lt;code&gt;mirrorselect -i -o&lt;/code&gt; e entÃ£o selecione interativamente os mirrors mais prÃ³ximos da sua localizaÃ§Ã£o atual. Copie o valor da variÃ¡vel &lt;code&gt;GENTOO_MIRRORS&lt;/code&gt; para o final do seu &lt;code&gt;/mnt/gentoo/etc/portage/make.conf&lt;/code&gt;.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Copie o seu &lt;code&gt;/etc/resolv.conf&lt;/code&gt; para &lt;code&gt;/mnt/gentoo/etc/resolv.conf&lt;/code&gt;. Isso Ã© &lt;a href="https:bbs.archlinux.org/viewtopic.php?id=95865"&gt;importante&lt;/a&gt; para ter conectividade dentro do ambiente de chroot.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;CFLAGS&lt;/code&gt; que recomendo para o &lt;code&gt;/etc/portake/make.conf&lt;/code&gt; (&lt;a href="https:forums.gentoo.org/viewtopic-t-933456-start-0.html"&gt;helper&lt;/a&gt;):&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-march=native -O2 -pipe&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A partir daqui, nada especial, apenas continue seguindo o handbook do gentoo, atÃ© a parte do bootloader.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Chegando na parte do bootloader, optei por deixar o Arch gerenciÃ¡-lo. Nesse caso, basta rodar um tÃ­pico &lt;code&gt;grub-mkconfig -o /boot/grub/grb.cfg&lt;/code&gt; que o Gentoo deverÃ¡ ser automaticamente detectado (supondo que o pacote &lt;code&gt;os-prober&lt;/code&gt; esteja instalado).&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Configure a rede no Gentoo. Isso Ã© bastante especÃ­fico, mas o procedimento Ã© bem parecido com a configuraÃ§Ã£o da rede no Arch. A Ãºnica questÃ£o Ã© que, ao dar emerge no &lt;code&gt;wpa_supplicant&lt;/code&gt; (no caso de vocÃª utilizar Wi-fi), vai demorar bastante atÃ© todas as dependÃªncias serem instaladas (esse Ã© o ponto principal que me afastou do Gentoo atÃ© hoje. Sem pacotes binÃ¡rios, ter que compilar tudo localmenteâ€¦ao menos, se no final a otimizaÃ§Ã£o do sistema for maior, poderia ter valido mais a pena.)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Teste o Gentoo durante uma semana e diga o que vocÃª achou dele ğŸ˜‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Decida se vocÃª gosta mais do Gentoo ou do Arch. Isso vale tanto para o sistema, tanto para a comunidade. NÃ£o tenho ideia de como seja a comunidade do Gentoo (a do Arch eu jÃ¡ tinha uma boa noÃ§Ã£o de como era mesmo antes de ter o sistema instalado).&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Valeu pessoal. Como sou 100% newbie no Gentoo, apreciarei quaisquer dicas! (Enquanto as dicas nÃ£o aparecem, Wiki Pages e Forums Threads me esperam). Sabe, Ã© bom, de vez em quando, ser newbie em alguma coisa. Claro que ser expert / muito bom / hacker em algumas aplicaÃ§Ãµes Ã© Ã³timo, mas eu acredito na importÃ¢ncia de possuir uma boa base de conhecimento em geral (nÃ£o necessariamente apenas para fins acadÃªmicos ou financeiros, mas tambÃ©m para satisfazer a mente: desafios sÃ£o importantes!).&lt;/p&gt;
&lt;p&gt;Ah, mais dois comentÃ¡rios:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;Terminando de escrever esse post e de editÃ¡-lo, a compilaÃ§Ã£o dos (130) pacotes que o &lt;code&gt;wpa_supplicant&lt;/code&gt; puxou nÃ£o chegou nem na metadeâ€¦ (eu teria instalado uns trÃªs ou quatro Archs automatizados nesse tempo â€“ tÃ¡ bom, nÃ£o vale comparar pacotes binÃ¡rios com cÃ³digo-fonte, eu sei)&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Esse Ã© o meu terceiro ou quarto post utilizando o &lt;code&gt;org2blog&lt;/code&gt; (do emacs). JÃ¡ ficou bastante claro para mim que vou passar a usÃ¡-lo de maneira fixa. O Ãºnico problema Ã© que eu ainda nÃ£o sei a sintaxe de formataÃ§Ã£o dele direito, Ã© muita informaÃ§Ã£o. NÃ£o Ã© nem que nÃ£o seja intuitiva, mas jÃ¡ tem LaTeX, BBCode, Markdown, aÃ­ eu tenho que aprender mais uma markup language. Mas, provavelmente vou me submeter a isso, o &lt;strong&gt;orgmode&lt;/strong&gt; Ã© sensacional para &lt;em&gt;management&lt;/em&gt; em geral.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Instalando o Gentoo a partir do Arch"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; dev, pt&lt;/p&gt;</description></item><item><title>Recovery tÃ­pico via USB</title><link>https://perrotta.dev/2014/04/recovery-t%C3%ADpico-via-usb/</link><pubDate>Fri, 18 Apr 2014 16:38:36 +0000</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pt</category><guid>https://perrotta.dev/2014/04/recovery-t%C3%ADpico-via-usb/</guid><description>&lt;ol&gt;
&lt;li&gt;Meu computador nÃ£o boota! E agora? PossÃ­veis sintomas: tela preta congelada, tela de splash congelada, &lt;code&gt;systemd&lt;/code&gt; travado, &lt;code&gt;upstart&lt;/code&gt; travado, corrupÃ§Ã£o (&lt;code&gt;fsck&lt;/code&gt; nÃ£o ficou satisfeito), bootloader (grub, syslinux, EFI) mal configurado (ou nÃ£o configurado)&lt;/li&gt;
&lt;li&gt;Obter uma distro de Linux e gravÃ¡-la num USB Flash Drive (pendrive). Meu gosto pessoal: System rescue cd, Parted magic, Slitaz ou Arch Linux.&lt;/li&gt;
&lt;li&gt;Bootar a distro e imediatamente abrir um console / emulador de terminal. Com interface grÃ¡fica ou nÃ£o, a gosto.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fdisk -l&lt;/code&gt; para detectar os discos do computador. Detectar o disco cujo sistema estÃ¡ com problema. Geralmente o que contÃ©m a partiÃ§Ã£o &lt;code&gt;/boot&lt;/code&gt; ou &lt;code&gt;/&lt;/code&gt;. Identificar as partiÃ§Ãµes tambÃ©m Ã© usualmente importante.&lt;/li&gt;
&lt;li&gt;Se vocÃª precisar formatar alguma partiÃ§Ã£o, use &lt;code&gt;cfdisk&lt;/code&gt; ou &lt;code&gt;parted&lt;/code&gt;. Exemplo: &lt;code&gt;cfdisk /dev/sda1&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Se vocÃª precisar (re)criar algum &lt;em&gt;filesystem&lt;/em&gt;, use &lt;code&gt;mkfs&lt;/code&gt; (por exemplo, &lt;code&gt;mkfs.ext4 -L &amp;quot;archroot&amp;quot; /dev/sda1&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Para (re)montar o seu sistema de arquivos: (por exemplo) &lt;code&gt;mount /dev/sda1 /mnt&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;chroot&lt;/code&gt; no sistema que vocÃª acabou de montar: &lt;code&gt;chroot /mnt&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Para recuperar (na verdade, gerar novamente) o arquivo de configuraÃ§Ã£o do grub &lt;strong&gt;dentro do chroot&lt;/strong&gt;: &lt;code&gt;grub-mkconfig -o /boot/grub/grub.cfg&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Para reinstalar o grub (&lt;strong&gt;fora do chroot&lt;/strong&gt;!), use &lt;code&gt;grub-install&lt;/code&gt;.&lt;/li&gt;
&lt;li&gt;Explorar o diretÃ³rio &lt;code&gt;/etc/systemd/system&lt;/code&gt;.&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;Usualmente um desses passos Ã© um caminho para resolver o problema. No final das contas, as coisas sÃ£o bastante especÃ­ficas, dependem do contexto.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Recovery tÃ­pico via USB"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; dev, pt&lt;/p&gt;</description></item><item><title>Testando uma ISO no Linux sem o VirtualBox</title><link>https://perrotta.dev/2014/01/testando-uma-iso-no-linux-sem-o-virtualbox/</link><pubDate>Tue, 07 Jan 2014 16:22:01 +0000</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pt</category><guid>https://perrotta.dev/2014/01/testando-uma-iso-no-linux-sem-o-virtualbox/</guid><description>&lt;p&gt;NÃ£o imagino que seja incomum o seguinte cenÃ¡rio:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;News: uma nova versÃ£o da distro &lt;em&gt;Debisuse&lt;/em&gt; estÃ¡ disponÃ­vel.&lt;/li&gt;
&lt;li&gt;UsuÃ¡rio: vou baixar a ISO,&lt;/li&gt;
&lt;li&gt;criar uma mÃ¡quina virtual no &lt;em&gt;VirtualBox&lt;/em&gt; (ou no &lt;em&gt;VMWare&lt;/em&gt;, vai que),&lt;/li&gt;
&lt;li&gt;Bootar a ISO a partir dela.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Isso tudo Ã© muito mais prÃ¡tico do que gravar a ISO num Flash (Pen) Drive e entÃ£o testÃ¡-la com um novo &lt;em&gt;boot&lt;/em&gt;. No entanto, podemos ser mais prÃ¡ticos ainda se utilizarmos, para isso, &lt;strong&gt;um Ãºnico comando&lt;/strong&gt;, com o &lt;code&gt;qemu&lt;/code&gt;! O comando tÃ­pico Ã©:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qemu-system-x86_64 --enable-kvm -m 512M -cdrom ~/Downloads/debisuse-latest.iso&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Se sua arquitetura for de 32 bits, vocÃª vai querer &lt;em&gt;qemu-system-i386&lt;/em&gt;. O parÃ¢metro &lt;em&gt;m&lt;/em&gt; regula a quantidade de memÃ³ria a ser alocada para a mÃ¡quina virtual.&lt;/p&gt;
&lt;p&gt;Para utilizar o QEMU, vocÃª vai precisar encontrar o pacote adequado na sua distro.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No Debian/Ubuntu e openSUSE: &lt;code&gt;qemu&lt;/code&gt; e &lt;code&gt;kvm&lt;/code&gt; (nÃ£o testei, mas tudo indica que sÃ£o esses)&lt;/li&gt;
&lt;li&gt;No Arch: &lt;code&gt;qemu&lt;/code&gt; (veja &lt;a href="https://wiki.archlinux.org/index.php/Kvm"&gt;https://wiki.archlinux.org/index.php/Kvm&lt;/a&gt; e &lt;a href="https://wiki.archlinux.org/index.php/QEMU"&gt;https://wiki.archlinux.org/index.php/QEMU&lt;/a&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;OBS.: O &lt;em&gt;KVM&lt;/em&gt; Ã© para deixar a execuÃ§Ã£o ainda mais rÃ¡pida. Mas ele nÃ£o Ã© obrigatÃ³rio, OK? Para poder usÃ¡-lo existe uma sÃ©rie de peculiaridades, tais como habilitar as opÃ§Ãµes de virtualizaÃ§Ã£o na sua &lt;em&gt;BIOS&lt;/em&gt; (isso Ã© mais comum em laptops) e assegurar-se de que o mÃ³dulo adequado do kernel foi carregado (geralmente &lt;code&gt;kvm\_intel&lt;/code&gt; ou &lt;code&gt;kvm\_amd&lt;/code&gt;). VocÃª pode conferir isso com o comando:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;lsmod &lt;span class="p"&gt;|&lt;/span&gt; grep kvm&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Se ver alguma saÃ­da, existem boas chances de o mÃ³dulo correto do &lt;em&gt;KVM&lt;/em&gt; jÃ¡ ter sido carregado pelo seu kernel. Para fins de comparaÃ§Ã£o, essa Ã© a minha saÃ­da:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kvm_intel &lt;span class="m"&gt;131191&lt;/span&gt; &lt;span class="m"&gt;3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;kvm &lt;span class="m"&gt;388773&lt;/span&gt; &lt;span class="m"&gt;1&lt;/span&gt; kvm_intel&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;Happy hacking!&lt;/em&gt;&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Testando uma ISO no Linux sem o VirtualBox"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; dev, pt&lt;/p&gt;</description></item></channel></rss>