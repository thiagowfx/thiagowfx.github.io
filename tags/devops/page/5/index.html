<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Devops | not just serendipity</title>
<meta name=keywords content><meta name=description content="not just serendipity"><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/tags/devops/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://www.perrotta.dev/tags/devops/index.xml><link rel=alternate hreflang=en href=https://www.perrotta.dev/tags/devops/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Devops"><meta property="og:description" content="not just serendipity"><meta property="og:type" content="website"><meta property="og:url" content="https://www.perrotta.dev/tags/devops/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Devops"><meta name=twitter:description content="not just serendipity"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Devops</h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>★ Erratic: human-friendly google3 piper snapshots</h2></header><div class=entry-content><p>In the google3 codebase, when working with Piper directly (i.e. not Fig[-on-CitC]), I often liked to use this tool called erratic (abbrev: er), which was a 20% project of another Software Engineer1.
...</p></div><footer class=entry-footer><span title='2024-10-02 13:33:56 +0200 +0200'>October 2, 2024</span>&nbsp;·&nbsp;518 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to ★ Erratic: human-friendly google3 piper snapshots" href=https://www.perrotta.dev/2024/10/erratic-human-friendly-google3-piper-snapshots/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>fd: match full path</h2></header><div class=entry-content><p>When using fd(1), only the filename is matched by default.
To match the full path, use -p. It is often useful to combine it with --type file.
...</p></div><footer class=entry-footer><span title='2024-10-02 13:30:29 +0200 +0200'>October 2, 2024</span>&nbsp;·&nbsp;62 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to fd: match full path" href=https://www.perrotta.dev/2024/10/fd-match-full-path/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>ack: match and return only the matched string</h2></header><div class=entry-content><p>Context: Helm charts use .Values.{foo} in templates/ for templating from values.yaml.
Goal: Return all unique values used in templates/. The intention for it is to add them all as defaults to values.yaml.
...</p></div><footer class=entry-footer><span title='2024-10-01 17:59:17 +0200 +0200'>October 1, 2024</span>&nbsp;·&nbsp;157 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to ack: match and return only the matched string" href=https://www.perrotta.dev/2024/10/ack-match-and-return-only-the-matched-string/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>helm: list recent chart upgrades</h2></header><div class=entry-content><p>Problem statement: Given a kubernetes cluster with many helm charts in different namespaces, how to use helm to query the list of the last recently “touched” charts?
By “touched” we mean either installed (via helm install) or upgraded (via helm upgrade).
Something like: helm ls --all --sort-by updated. Using kubectl directly would also be OK.
...</p></div><footer class=entry-footer><span title='2024-09-24 14:21:20 +0200 +0200'>September 24, 2024</span>&nbsp;·&nbsp;159 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to helm: list recent chart upgrades" href=https://www.perrotta.dev/2024/09/helm-list-recent-chart-upgrades/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Life without ack</h2></header><div class=entry-content><p>Every macOS upgrade comes with disappointment and sorrow in the form of some tool, dependency / library or system-wide configuration breaking1.
This time: the upgrade to macOS Sequoia (15.0) broke ack (Perl).
...</p></div><footer class=entry-footer><span title='2024-09-22 14:30:29 +0200 +0200'>September 22, 2024</span>&nbsp;·&nbsp;154 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Life without ack" href=https://www.perrotta.dev/2024/09/life-without-ack/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>less(1): scroll back one page</h2></header><div class=entry-content><p>less(1): you use SPC to scroll forward. How to scroll back?
...</p></div><footer class=entry-footer><span title='2024-09-10 12:02:31 +0200 +0200'>September 10, 2024</span>&nbsp;·&nbsp;38 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to less(1): scroll back one page" href=https://www.perrotta.dev/2024/09/less1-scroll-back-one-page/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>Diceware passphrases</h2></header><div class=entry-content><p>I wanted to create a new secure passphrase for my WLAN (Wi-Fi).
...</p></div><footer class=entry-footer><span title='2024-09-09 23:10:57 +0200 +0200'>September 9, 2024</span>&nbsp;·&nbsp;78 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Diceware passphrases" href=https://www.perrotta.dev/2024/09/diceware-passphrases/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>End of life package info</h2></header><div class=entry-content><p>https://endoflife.date/ is like Repology but, instead of package versions, it tracks the end of life of various packages, linux distributions, frameworks, etc.
...</p></div><footer class=entry-footer><span title='2024-09-06 17:41:30 +0200 +0200'>September 6, 2024</span>&nbsp;·&nbsp;27 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to End of life package info" href=https://www.perrotta.dev/2024/09/end-of-life-package-info/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>AWS S3: search by suffix</h2></header><div class=entry-content><p>Given an AWS S3 bucket, how to recursively list all objects within it that match a given suffix?
...</p></div><footer class=entry-footer><span title='2024-09-05 17:09:38 +0200 +0200'>September 5, 2024</span>&nbsp;·&nbsp;117 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to AWS S3: search by suffix" href=https://www.perrotta.dev/2024/09/aws-s3-search-by-suffix/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>git: create a throwaway branch</h2></header><div class=entry-content><p>Let’s say you want to submit a quick, perhaps even trivial, one-off pull request (PR).
One step you can do to minimize the number of decisions1 to make is to have a git alias that creates a branch with an arbitrary name.
% cat ~/.gitconfig # ... [alias] nbt = !git nb \"thiagowfx/$(shuf -n1 /usr/share/dict/words | tr \"[:upper:]\" \"[:lower:]\")\" Running git nbt2 will create a branch such as thiagowfx/foo.
The {username}/ prefix is to make it easier to attribute your branches to yourself, which can be handy when working collaboratively with other engineers in a team.
The word after the slash is sourced from dictionary words on your system.
...</p></div><footer class=entry-footer><span title='2024-09-04 22:01:29 +0200 +0200'>September 4, 2024</span>&nbsp;·&nbsp;118 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to git: create a throwaway branch" href=https://www.perrotta.dev/2024/09/git-create-a-throwaway-branch/></a></article><footer class=page-footer><nav class=pagination><a class=prev href=https://www.perrotta.dev/tags/devops/page/4/>«&nbsp;Prev&nbsp;
</a><a class=next href=https://www.perrotta.dev/tags/devops/page/6/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a> · Made with ♥ in 🇨🇦</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>