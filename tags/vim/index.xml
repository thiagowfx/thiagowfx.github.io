<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Vim on ¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content in Vim on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2021 - 2026 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Mon, 05 Jan 2026 04:58:34 -0300</lastBuildDate><atom:link href="https://perrotta.dev/tags/vim/index.xml" rel="self" type="application/rss+xml"/><item><title>‚òÖ neovim: inline git hunk control</title><link>https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/</link><pubDate>Sat, 03 Jan 2026 15:41:21 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>git</category><category>vim</category><guid>https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/</guid><description>&lt;p&gt;What is a
&lt;a href="https://stackoverflow.com/questions/37620729/in-the-context-of-git-and-diff-what-is-a-hunk"&gt;hunk&lt;/a&gt;?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When comparing two files, diff finds sequences of lines common to both files,
interspersed with groups of differing lines called hunks&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are various ways to treat git hunks as first-class citizens, manipulating
them one at a time ‚Äì staging, unstaging, or reverting them.&lt;/p&gt;
&lt;p&gt;The classic one is &lt;a href="https://millerb.co.uk/2021/11/16/git-add-patch.html"&gt;&lt;code&gt;git add [-p | --patch]&lt;/code&gt;&lt;/a&gt;. Hit yes or no
for each hunk, one by one:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git a/Justfile b/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index bbb3779a9..70840a008 &lt;span style="color:#ae81ff"&gt;100755&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- a/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ b/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -175,3 +175,6 @@ update-pre-commit:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Update JSON schemas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; update-json-schemas:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pre-commit run -a update-json-schemas --hook-stage manual
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+hello:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+ echo world
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;1/1&lt;span style="color:#f92672"&gt;)&lt;/span&gt; Stage this hunk &lt;span style="color:#f92672"&gt;[&lt;/span&gt;y,n,q,a,d,e,p,P,?&lt;span style="color:#f92672"&gt;]&lt;/span&gt;?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s also &lt;a href="https://nuclearsquid.com/writings/git-add/"&gt;&lt;code&gt;git add [-i | --interactive]&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -i
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;*** Commands ***
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1: status 2: update 3: revert 4: add untracked
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 5: patch 6: diff 7: quit 8: help
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;What now&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It&amp;rsquo;s also possible to manage hunks via git TUIs (=from the terminal) such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/gitui-org/gitui"&gt;gitui&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/jonas/tig"&gt;tig&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/jesseduffield/lazygit"&gt;lazygit&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;hellip;or graphically with IDEs with as VSCode.&lt;/p&gt;
&lt;p&gt;An honorable mention also goes to
&lt;a href="https://github.com/andrewshadura/git-crecord"&gt;&lt;code&gt;git-crecord&lt;/code&gt;&lt;/a&gt;, which I
originally discovered by looking for an open source alternative to Google&amp;rsquo;s
Fig&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; interactive commit and split commands.&lt;/p&gt;
&lt;p&gt;Now that you see how my mind is overloaded with many possibilities to manipulate
git hunks, the natural follow-up question is: how to do so right from within our
favorite text editor (&lt;code&gt;vim&lt;/code&gt;)?&lt;/p&gt;
&lt;p&gt;With classic &lt;code&gt;vim&lt;/code&gt;, Tim Pope&amp;rsquo;s
&lt;a href="https://github.com/tpope/vim-fugitive"&gt;&lt;code&gt;vim-fugitive&lt;/code&gt;&lt;/a&gt; is often touted as
best-in-class (paired with
&lt;a href="https://github.com/airblade/vim-gitgutter"&gt;&lt;code&gt;vim-gitgutter&lt;/code&gt;&lt;/a&gt;). I use it
occasionally. The workflow is as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;From an open file with modifications, run &lt;code&gt;:GDiff&lt;/code&gt; (&lt;code&gt;:GDiffsplit&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Proceed as you normally would in &lt;code&gt;vimdiff&lt;/code&gt;. Use &lt;code&gt;:diffget&lt;/code&gt; (&lt;code&gt;do&lt;/code&gt;) and
&lt;code&gt;:diffput&lt;/code&gt; (&lt;code&gt;dp&lt;/code&gt;) for each hunk. Use &lt;code&gt;[c&lt;/code&gt; and &lt;code&gt;]c&lt;/code&gt; to navigate to the previous
/ next hunk.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, we get to the meat of the post. Is there any workflow
improvement in &lt;code&gt;neovim&lt;/code&gt;, which I have recently &lt;a href="https://perrotta.dev/2025/12/vim-nvim/"&gt;switched to&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;First of all, the familiar vim-fugitive workflow still works there.&lt;/p&gt;
&lt;p&gt;Its evolution is &lt;a href="https://github.com/lewis6991/gitsigns.nvim"&gt;gitsigns.nvim&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Git integration for buffers&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Given the config below, the following becomes possible:&lt;/p&gt;

&lt;div class="codeblock" data-lang="lua"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;lua&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;-- Git integration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;lewis6991/gitsigns.nvim&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;config &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; require(&lt;span style="color:#e6db74"&gt;&amp;#39;gitsigns&amp;#39;&lt;/span&gt;).setup({
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; on_attach &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;(bufnr)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;local&lt;/span&gt; gs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; require(&lt;span style="color:#e6db74"&gt;&amp;#39;gitsigns&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;-- ]c / [c: next/prev hunk (falls back to default in diff mode)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;-- like git-gutter in vim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;]c&amp;#39;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; vim.wo.diff &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;]c&amp;#39;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.schedule(&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;() gs.nav_hunk(&lt;span style="color:#e6db74"&gt;&amp;#39;next&amp;#39;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;Ignore&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;, { expr &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;, buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Next hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;[c&amp;#39;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; vim.wo.diff &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;[c&amp;#39;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.schedule(&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;() gs.nav_hunk(&lt;span style="color:#e6db74"&gt;&amp;#39;prev&amp;#39;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;Ignore&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;, { expr &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;, buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Prev hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;leader&amp;gt;s&amp;#39;&lt;/span&gt;, gs.stage_hunk, { buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Stage hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;leader&amp;gt;u&amp;#39;&lt;/span&gt;, gs.reset_hunk, { buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Reset hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;tpope/vim-fugitive&amp;#39;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;]c&lt;/code&gt; and &lt;code&gt;[c&lt;/code&gt; to navigate hunks (compatible with vim-gitgutter)&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;&amp;lt;leader&amp;gt;s&lt;/code&gt; (comma + s in my setup) to toggle staging/unstaging hunks.&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;&amp;lt;leader&amp;gt;u&lt;/code&gt; to do the equivalent of &lt;code&gt;git checkout -- file&lt;/code&gt; for a single
hunk.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The last two shortcuts are wherein the magic lives.&lt;/p&gt;
&lt;p&gt;It is VERY convenient to choose what to stage/unstage/revert right from the
&lt;code&gt;nvim&lt;/code&gt; buffer I am currently editing. For fine-grained control, I can always use
&lt;code&gt;:Gdiff&lt;/code&gt; to perform hunk microsurgery.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Not to confound with &lt;em&gt;hook&lt;/em&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Internal mercurial VCS porcelain on top of Piper / google3.&amp;#160;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: neovim: inline git hunk control"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ vim ‚Üí nvim</title><link>https://perrotta.dev/2025/12/vim-nvim/</link><pubDate>Tue, 23 Dec 2025 12:14:33 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/12/vim-nvim/</guid><description>&lt;p&gt;I am piloting a transition from &lt;code&gt;vim&lt;/code&gt; to &lt;code&gt;nvim&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is the least disruptive way I found to accomplish that.&lt;/p&gt;
&lt;p&gt;First, install &lt;code&gt;neovim&lt;/code&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install neovim&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now, create &lt;code&gt;~/.config/nvim/init.lua&lt;/code&gt;. I decided to populate it based on my
original
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/vim/.vim/vimrc"&gt;&lt;code&gt;~/.vimrc&lt;/code&gt;&lt;/a&gt;,
without attempting to share configuration settings between the two.&lt;/p&gt;
&lt;p&gt;Multiple iterations with a LLM agent helped it achieve a decent shape, removing
redundant settings and replacing some native VimL plugins with Lua ones.&lt;/p&gt;
&lt;p&gt;The result:
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/nvim/.config/nvim/init.lua"&gt;&lt;code&gt;init.lua&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some notable changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;switch the package manager from vim-plug to lazy.nvim&lt;/li&gt;
&lt;li&gt;remove vim-sensible&lt;/li&gt;
&lt;li&gt;rewrite &lt;code&gt;just_one_space&lt;/code&gt; in Lua&lt;/li&gt;
&lt;li&gt;use nvim native OSC52 for yanking text&lt;/li&gt;
&lt;li&gt;vim-signify -&amp;gt; gitsigns&lt;/li&gt;
&lt;li&gt;add autopairs&lt;/li&gt;
&lt;li&gt;add telescope (fuzzy finder), replace fzf&lt;/li&gt;
&lt;li&gt;add oil (file manager), incorporates some functionality of &lt;code&gt;vidir&lt;/code&gt; from
&lt;code&gt;moreutils&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;remove vim-commentary, given native support for &lt;code&gt;gc&lt;/code&gt; in neovim&lt;/li&gt;
&lt;li&gt;lightline -&amp;gt; lualine&lt;/li&gt;
&lt;li&gt;highlight yanked text natively, replace vim-highlightedyank&lt;/li&gt;
&lt;li&gt;automkdir upon saving a file whose parent directory does not exist, replace
vim-mkdir&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now make it frictionless to use &lt;code&gt;nvim&lt;/code&gt; instead of &lt;code&gt;vim&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="gitdiff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;gitdiff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit 058433b9503477c8c162cac5eba191c704cb9361
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Date: Tue Dec 23 12:13:54 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; nvim
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git profile/.profile.d/env.sh profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 1c6507e..c6117a9 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -10,4 +10,6 @@ path_munge &amp;#34;$HOME/.bin&amp;#34; &amp;#34;$HOME/bin&amp;#34; &amp;#34;$HOME/.local/bin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; export CLICOLOR=1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # Set preferred text editor.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+# nvim should be preferred to vim if it is installed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; hash vim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;vim&amp;#34; VISUAL=&amp;#34;vim&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+hash nvim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;nvim&amp;#34; VISUAL=&amp;#34;nvim&amp;#34; &amp;amp;&amp;amp; alias vim=nvim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can still access &lt;code&gt;vim&lt;/code&gt; with &lt;code&gt;\vim&lt;/code&gt; (or &lt;code&gt;unalias vim&lt;/code&gt; if needed).&lt;/p&gt;
&lt;p&gt;Now let&amp;rsquo;s evaluate whether the &lt;code&gt;nvim&lt;/code&gt; switch is worth it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim ‚Üí nvim"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>j,k for navigation</title><link>https://perrotta.dev/2025/12/jk-for-navigation/</link><pubDate>Sun, 21 Dec 2025 02:31:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><category>vim</category><guid>https://perrotta.dev/2025/12/jk-for-navigation/</guid><description>&lt;p&gt;I just added vim-style keybindings to this site.&lt;/p&gt;
&lt;p&gt;Press &lt;strong&gt;j&lt;/strong&gt; to go to the previous post (chronologically, going down the list ‚¨áÔ∏è)
and &lt;strong&gt;k&lt;/strong&gt; to go to the next post (going up the list ‚¨ÜÔ∏è)&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;The boundary between &lt;em&gt;general&lt;/em&gt; vs &lt;em&gt;coding&lt;/em&gt; posts is respected.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I also added arrow keys (‚¨ÖÔ∏è for the previous post and ‚û°Ô∏è right for the next
one).&amp;#160;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: j,k for navigation"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>vim: spellchecker suggestions</title><link>https://perrotta.dev/2025/11/vim-spellchecker-suggestions/</link><pubDate>Sun, 02 Nov 2025 11:37:57 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/11/vim-spellchecker-suggestions/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/07/vim-add-word-to-spellchecker/"&gt;Previously&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you have the spellchecker from &lt;code&gt;vim&lt;/code&gt; turned on (&lt;code&gt;:set spell&lt;/code&gt;), it
highlights words that are not in the dictionary.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It turns out &lt;code&gt;vim&lt;/code&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/11/vim-spellchecker-suggestions/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; can also suggest corrections to these words.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:h z=&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;z= For the word under/after the cursor suggest correctly
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; spelled words. This also works to find alternatives
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; for a word that is not highlighted as a bad word,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; e.g., when the word after it is bad.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; In Visual mode the highlighted text is taken as the
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; word to be replaced.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; The results are sorted on similarity to the word being
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; replaced.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; This may take a long time. Hit CTRL-C when you get
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; bored.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For example: take the word &lt;code&gt;exampl&lt;/code&gt;. When pressing &lt;code&gt;z=&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Change &amp;#34;exampl&amp;#34; to:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1 &amp;#34;example&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 2 &amp;#34;example&amp;#34; &amp;lt; &amp;#34;exampl.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 3 &amp;#34;exam pl&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 4 &amp;#34;exempt&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 5 &amp;#34;exam Pl&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 6 &amp;#34;exam&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Upon pressing &lt;code&gt;1&amp;lt;Enter&amp;gt;&lt;/code&gt; it is automatically replaced.&lt;/p&gt;
&lt;p&gt;Alternatively we can skip the suggestions and simply &lt;a href="https://www.jakeworth.com/tils/select-first-spell-suggestion/"&gt;pick the first
one&lt;/a&gt; right away
with &lt;code&gt;1z=&lt;/code&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; never ceases to amaze me.&amp;#160;&lt;a href="https://perrotta.dev/2025/11/vim-spellchecker-suggestions/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim: spellchecker suggestions"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>vim: reflow current paragraph</title><link>https://perrotta.dev/2025/10/vim-reflow-current-paragraph/</link><pubDate>Wed, 08 Oct 2025 18:03:57 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/10/vim-reflow-current-paragraph/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given a paragraph (&lt;code&gt;lorem_ipsum.txt&lt;/code&gt;):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Reflow it in such a way each line does not exceed a certain number of
characters, say, in the 72-80 range. The number is not important, so
long as it is applied consistently and uniformly within a single file.&lt;/p&gt;
&lt;p&gt;In the terminal we can achieve that with &lt;a href="https://man.archlinux.org/man/fmt.1"&gt;&lt;code&gt;fmt(1)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cat lorem_ipsum.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro /tmp/thiago.perrotta-2025-10-08-eOaLRg
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% fmt lorem_ipsum.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can also do it in-place (&lt;a href="https://man.archlinux.org/man/sponge.1"&gt;sponge(1)&lt;/a&gt; from &lt;a href="https://perrotta.dev/2022/05/tools-you-should-know-about-moreutils/"&gt;moreutils&lt;/a&gt;):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% fmt lorem_ipsum.txt | sponge lorem_ipsum.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cat lorem_ipsum.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;commodo consequat. Duis aute irure dolor in reprehenderit in voluptate
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;cupidatat non proident, sunt in culpa qui officia deserunt mollit anim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Can we do it within &lt;code&gt;vim&lt;/code&gt;? Yes, with the following mapping:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;nnoremap&lt;/span&gt; &amp;lt;&lt;span style="color:#a6e22e"&gt;silent&lt;/span&gt;&amp;gt; &lt;span style="color:#a6e22e"&gt;W&lt;/span&gt; &amp;lt;&lt;span style="color:#a6e22e"&gt;Esc&lt;/span&gt;&amp;gt;!&lt;span style="color:#a6e22e"&gt;ipfmt&lt;/span&gt;&amp;lt;&lt;span style="color:#a6e22e"&gt;Enter&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Translation:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;silent&amp;gt;&lt;/code&gt;: does not echo the mapping in the vim command line&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Esc&amp;gt;&lt;/code&gt;: switch to normal mode&lt;/li&gt;
&lt;li&gt;&lt;code&gt;!&lt;/code&gt;: &lt;code&gt;!{motion}{filter} Filter {motion} text lines through the external program {filter}.&lt;/code&gt; (via &lt;code&gt;:h !&lt;/code&gt;).
&lt;ul&gt;
&lt;li&gt;Not to confound this with &lt;code&gt;:!&lt;/code&gt;: &lt;code&gt;:!{cmd} Execute {cmd} with the shell. See also the 'shell' and 'shelltype' option. For the filter command, see |:range!|.&lt;/code&gt; (via &lt;code&gt;:h :!&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;code&gt;ip&lt;/code&gt;: &amp;ldquo;inner paragraph&amp;rdquo; motion&lt;/li&gt;
&lt;li&gt;&lt;code&gt;fmt&lt;/code&gt;: the filter command&lt;/li&gt;
&lt;li&gt;&lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt;: execute the command&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Alternatively:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;nnoremap&lt;/span&gt; &amp;lt;&lt;span style="color:#a6e22e"&gt;silent&lt;/span&gt;&amp;gt; &lt;span style="color:#a6e22e"&gt;Q&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;gwip&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Wherein &lt;code&gt;:h gw&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;gw{motion}	Format the lines that {motion} moves over. Similar to
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;			|gq| but puts the cursor back at the same position in
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;			the text. However, &amp;#39;formatprg&amp;#39; and &amp;#39;formatexpr&amp;#39; are
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;			not used.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;One difference is that &lt;code&gt;gw&lt;/code&gt; accounts for comment characters, whereas &lt;code&gt;fmt&lt;/code&gt; does
not. Example, given a &lt;code&gt;.py&lt;/code&gt; (python) file:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# &amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;gw&lt;/code&gt; does:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# &amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# proident, sunt in culpa qui officia deserunt mollit anim id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Whereas &lt;code&gt;fmt&lt;/code&gt; does:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# &amp;#34;Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ex ea commodo consequat. Duis aute irure dolor in reprehenderit in
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;mollit anim id est laborum.&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim: reflow current paragraph"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>vim: remove trailing whitespace</title><link>https://perrotta.dev/2025/09/vim-remove-trailing-whitespace/</link><pubDate>Tue, 16 Sep 2025 14:27:55 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/09/vim-remove-trailing-whitespace/</guid><description>&lt;p&gt;A simple addition to remove all trailing whitespace from the current buffer by
pressing &lt;code&gt;,t&lt;/code&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/09/vim-remove-trailing-whitespace/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;
(&lt;a href="https://vi.stackexchange.com/questions/454/whats-the-simplest-way-to-strip-trailing-whitespace-from-all-lines-in-a-file"&gt;via&lt;/a&gt;):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% GIT_PAGER=cat git show
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit 1c22fcbc12ffd2cb3c40152d152d099c9a9b7f85 (HEAD -&amp;gt; master, origin/master, origin/HEAD)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Date: Tue Sep 16 14:26:46 2025 +0200
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim: remove trailing whitespace
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git vim/.vim/vimrc vim/.vim/vimrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 8cf33d8..004beda 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- vim/.vim/vimrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ vim/.vim/vimrc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -60,6 +60,9 @@ nnoremap J gJ
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;#34; Reflow current paragraph
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; nnoremap &amp;lt;silent&amp;gt; Q gwip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+&amp;#34; Remove all trailing whitespace
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+nnoremap &amp;lt;leader&amp;gt;t :let _s=@/&amp;lt;Bar&amp;gt;:%s/\s\+$//e&amp;lt;Bar&amp;gt;:let @/=_s&amp;lt;Bar&amp;gt;&amp;lt;CR&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;#34; Always use vertical diff splits.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; set diffopt+=vertical&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;My &lt;a href="https://stackoverflow.com/questions/1764263/what-is-the-leader-in-a-vimrc-file"&gt;leader&lt;/a&gt; key is mapped to &lt;code&gt;,&lt;/code&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2025/09/vim-remove-trailing-whitespace/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim: remove trailing whitespace"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>vim: add word to spellchecker</title><link>https://perrotta.dev/2025/07/vim-add-word-to-spellchecker/</link><pubDate>Sat, 26 Jul 2025 12:13:42 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><category>vim</category><guid>https://perrotta.dev/2025/07/vim-add-word-to-spellchecker/</guid><description>&lt;p&gt;When you have the spellchecker from &lt;code&gt;vim&lt;/code&gt; turned on (&lt;code&gt;:set spell&lt;/code&gt;), it
highlights words that are not in the dictionary.&lt;/p&gt;
&lt;p&gt;False positives will occasionally be flagged.&lt;/p&gt;
&lt;p&gt;To
&lt;a href="https://superuser.com/questions/133208/how-to-make-vim-spellcheck-remember-a-new-word"&gt;add&lt;/a&gt;
the current word under the cursor to the dictionary, hit &lt;code&gt;zg&lt;/code&gt;. From the &lt;code&gt;vim&lt;/code&gt;
manual:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;To add words to your own word list:&lt;/p&gt;
&lt;p&gt;zg&lt;/p&gt;
&lt;p&gt;Add word under the cursor as a good word to the first
name in &amp;lsquo;spellfile&amp;rsquo;. A count may precede the command
to indicate the entry in &amp;lsquo;spellfile&amp;rsquo; to be used. A
count of two uses the second entry.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Once you do so, you&amp;rsquo;ll see feedback text in the status bar:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Word &amp;#39;hacky&amp;#39; added to ~/.vim/spell/en.utf-8.add&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This file can be easily tracked in your dotfiles.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Word &amp;#39;dotfiles&amp;#39; added to ~/.vim/spell/en.utf-8.add&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim: add word to spellchecker"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>vim: join lines without producing a space</title><link>https://perrotta.dev/2025/07/vim-join-lines-without-producing-a-space/</link><pubDate>Tue, 22 Jul 2025 11:50:28 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/07/vim-join-lines-without-producing-a-space/</guid><description>&lt;p&gt;Here&amp;rsquo;s a common issue I have when blogging, when inserting a markdown link with
&lt;code&gt;vim&lt;/code&gt;. The edit progression is as follows, wherein &lt;code&gt;|&lt;/code&gt; represents the cursor:&lt;/p&gt;
&lt;p&gt;First, blank:&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;|&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then, type out the hyperlink label and prepare to insert the link:&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#f92672"&gt;example&lt;/span&gt;](&lt;span style="color:#a6e22e"&gt;|
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now go to another buffer (window) and copy the link (with &lt;code&gt;y&lt;/code&gt; + motion).&lt;/p&gt;
&lt;p&gt;Go back to the original buffer and paste it with &lt;code&gt;p&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#f92672"&gt;example&lt;/span&gt;](&lt;span style="color:#a6e22e"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;|https://example.com/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Press &lt;code&gt;kJ&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#f92672"&gt;example&lt;/span&gt;](&lt;span style="color:#a6e22e"&gt;| https://example.com/
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Press &lt;code&gt;J&lt;/code&gt; again:&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#f92672"&gt;example&lt;/span&gt;](&lt;span style="color:#a6e22e"&gt;| https://example.com/&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;J&lt;/code&gt; is for &amp;ldquo;join lines&amp;rdquo; (&lt;code&gt;:help J&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Do you see the issue above? The first &lt;code&gt;J&lt;/code&gt; inserts a space, the second one does
not. This inconsistency is frustrating.&lt;/p&gt;
&lt;p&gt;This &lt;a href="https://vi.stackexchange.com/questions/439/how-to-join-lines-without-producing-a-space"&gt;vi stack
exchange&lt;/a&gt;
question seeks to address it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The standard J command for joining lines replaces the newline character(s)
with a space. It&amp;rsquo;s useful when editing &amp;rsquo;literature&amp;rsquo; but can be troublesome if
I, say, edit a hex dump by hand if I forget to remove the superfluous space.&lt;/p&gt;
&lt;p&gt;Is there a quick &amp;amp; easy method to join two lines without producing a space
between them?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The standard recommendation is to use &lt;code&gt;gJ&lt;/code&gt; to do so. From &lt;code&gt;:help gJ&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Join [count] lines, with a minimum of two lines. Don&amp;rsquo;t insert or remove any
spaces.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;But it&amp;rsquo;s harder to memorize than simply &lt;code&gt;J&lt;/code&gt;. Plus, it&amp;rsquo;s an extra keystroke. I&amp;rsquo;d
rather unconditionally use &lt;code&gt;J&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It turns out it&amp;rsquo;s possible to do so with a simple config setting, added to
&lt;code&gt;~/.vimrc&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;nnoremap&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;J&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;gJ&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;When repeating the original link insertion sequence, it yields the following
result, as desired (no spaces anywhere!):&lt;/p&gt;

&lt;div class="codeblock" data-lang="md"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;md&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-md" data-lang="md"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#f92672"&gt;example&lt;/span&gt;](&lt;span style="color:#a6e22e"&gt;|https://example.com/&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim: join lines without producing a space"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>pre-commit + vim integration</title><link>https://perrotta.dev/2025/01/pre-commit--vim-integration/</link><pubDate>Sun, 05 Jan 2025 01:46:06 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pre-commit</category><category>vim</category><guid>https://perrotta.dev/2025/01/pre-commit--vim-integration/</guid><description>&lt;p&gt;Is it possible to transparently invoke &lt;code&gt;pre-commit&lt;/code&gt; in the background upon saving in &lt;code&gt;vim&lt;/code&gt; (&lt;code&gt;:w&lt;/code&gt;)?&lt;/p&gt;
&lt;p&gt;Initially I found this &lt;a href="https://stackoverflow.com/questions/70713450/pre-commit-results-in-vim"&gt;Stack
Overflow&lt;/a&gt;
question, but it had no answer.&lt;/p&gt;
&lt;p&gt;Digging a bit deeper I realized that I could do it with an &lt;code&gt;autocmd&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;autocmd&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;BufWritePost&lt;/span&gt; * &lt;span style="color:#66d9ef"&gt;execute&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;! if [ -e $(git root)/.pre-commit-config.yaml &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 ]; then pre-commit run; fi&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;That trashes the screen upon completion. This can be resolved by invoking
&lt;code&gt;:redraw!&lt;/code&gt; afterwards:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;autocmd&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;BufWritePost&lt;/span&gt; * &lt;span style="color:#66d9ef"&gt;execute&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;! if [ -e $(git root)/.pre-commit-config.yaml &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 ]; then pre-commit run; fi&amp;#39;&lt;/span&gt; | &lt;span style="color:#a6e22e"&gt;redraw&lt;/span&gt;!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can be less intrusive by prepending &lt;code&gt;silent!&lt;/code&gt; so that, even if the command
fails, it doesn&amp;rsquo;t get in the way:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;autocmd&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;BufWritePost&lt;/span&gt; * &lt;span style="color:#a6e22e"&gt;silent&lt;/span&gt;! &lt;span style="color:#66d9ef"&gt;execute&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;! if [ -e $(git root)/.pre-commit-config.yaml &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 ]; then pre-commit run; fi&amp;#39;&lt;/span&gt; | &lt;span style="color:#a6e22e"&gt;redraw&lt;/span&gt;!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And last but not least, ideally &lt;code&gt;pre-commit&lt;/code&gt; should run only on the file
associated with the current buffer. Pass &lt;code&gt;--files&lt;/code&gt; to pre-commit with the &lt;code&gt;%&lt;/code&gt;
argument:&lt;/p&gt;

&lt;div class="codeblock" data-lang="vim"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;vim&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-vim" data-lang="vim"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;autocmd&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;BufWritePost&lt;/span&gt; * &lt;span style="color:#a6e22e"&gt;silent&lt;/span&gt;! &lt;span style="color:#66d9ef"&gt;execute&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;! if [ -e $(git root)/.pre-commit-config.yaml &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 ]; then pre-commit run --files %; fi&amp;#39;&lt;/span&gt; | &lt;span style="color:#a6e22e"&gt;redraw&lt;/span&gt;!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This approach works as intended.
There&amp;rsquo;s a brief period in which you can see &lt;code&gt;pre-commit&lt;/code&gt; running in the
background. It&amp;rsquo;s arguable whether that&amp;rsquo;s a feature or a bug.&lt;/p&gt;
&lt;p&gt;Ah, and &lt;code&gt;git root&lt;/code&gt; is simply an alias in my &lt;code&gt;~/.gitconfig&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;root = rev-parse --show-toplevel&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Whenever there are pre-commit violations (e.g. &lt;code&gt;end-of-file-fixer&lt;/code&gt;) they are
applied inplace. There&amp;rsquo;s no need to run &lt;code&gt;:e!&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This is bare, but I am happy.&lt;/p&gt;
&lt;p&gt;Perhaps the only missing piece is to extend it in such a way it&amp;rsquo;s only executed
in the repositories I opt into.&lt;/p&gt;
&lt;p&gt;If this turns out to be too intrusive, I am thinking to switch to using a vim
keymap e.g. &lt;code&gt;&amp;lt;leader&amp;gt;p&lt;/code&gt; instead of an &lt;code&gt;autocmd&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: pre-commit + vim integration"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pre-commit/"&gt;#pre-commit&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item></channel></rss>