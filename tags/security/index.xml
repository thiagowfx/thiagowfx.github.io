<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev/rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Security on ¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content in Security on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2013 - 2026 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Fri, 20 Feb 2026 18:40:07 +0100</lastBuildDate><atom:link href="https://perrotta.dev/tags/security/index.xml" rel="self" type="application/rss+xml"/><item><title>Superwhisper</title><link>https://perrotta.dev/2026/02/superwhisper/</link><pubDate>Fri, 20 Feb 2026 18:33:28 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><category>macos</category><category>meta</category><category>security</category><guid>https://perrotta.dev/2026/02/superwhisper/</guid><description>&lt;p&gt;Hello world.&lt;/p&gt;
&lt;p&gt;This blog post is being dictated by &lt;a href="https://superwhisper.com/"&gt;Superwhisper&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;m not writing any text at all. Every word that is coming out was dictated one
by one. Frankly I have no idea whether this works effectively or not, but
apparently Superwhisper seems to be a good way to make it faster to type in
words with your mouth and with your voice instead of using your hands.&lt;/p&gt;
&lt;p&gt;The main use case seems to be intended for LLMs. We are getting so lazy to write
code that now we are even getting lazy to prompt LLMs to write code for us.&lt;/p&gt;
&lt;p&gt;We can do everything by just talking with our mouth. And now I&amp;rsquo;m going one step
beyond and using this application to write blog posts for me.&lt;/p&gt;
&lt;p&gt;I have no idea whether this will stick but I find it interesting to use this
application to automate some typing. At the very least it would be helpful to
alleviate some RSI on our hands.&lt;/p&gt;
&lt;p&gt;Well, this was a hello word post, bye bye.&lt;/p&gt;
&lt;p&gt;And I should also add, this is using the parakeet model from Nvidia. Everything
is being processed locally on my MacBook. Nothing is being sent to the cloud. I
think this is important these days.&lt;/p&gt;
&lt;h2 id="colophon"&gt;Colophon&lt;/h2&gt;
&lt;p&gt;The previous sentences were manually formatted by this human, plus manual
corrections and links were added.&lt;/p&gt;
&lt;p&gt;The raw version came very close. &lt;strong&gt;IMPRESSIVE&lt;/strong&gt; stuff, goodness:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Hello world. This blog post is being dictated by Superwhisper Pro. I&amp;rsquo;m not
writing any text at all. Every word that is coming out was dictated one by
one. Frankly I have no idea whether this works effectively or not, but
apparently Superwhisper seems to be a good way to make it faster to type in
words With your mouth and with your voice instead of using your hands. The
main use case seems to be intended for LLM We are getting so lazy to write
code that now we are even getting lazy to prompt LLMs to write code for us can
do everything by just talking with just your mouth. And now I&amp;rsquo;m going one step
beyond and using this application to write blog posts for me. I have no idea
what I do with stick but I find it interesting to use this application to
automate some typing. At the very least it would be helpful to alleviate some
RSE on a hands well with your this was a hello word post bye bye and I should
also add this is using the parakeet model from Nvidia everything is being
processed locally on my MacBook Nothing is being sent to the cloud. I think
this is important these days&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Superwhisper"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ Open Source security in spite of AI</title><link>https://perrotta.dev/2026/02/open-source-security-in-spite-of-ai/</link><pubDate>Sat, 07 Feb 2026 11:12:24 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>bestof</category><category>dev</category><category>fosdem</category><category>meta</category><category>posse</category><category>security</category><category>serenity</category><guid>https://perrotta.dev/2026/02/open-source-security-in-spite-of-ai/</guid><description>&lt;p&gt;&lt;a href="https://daniel.haxx.se/blog/2026/02/03/open-source-security-in-spite-of-ai/"&gt;Open Source security in spite of
AI&lt;/a&gt;
by &lt;a href="https://daniel.haxx.se/blog/"&gt;Daniel Stenberg&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/02/open-source-security-in-spite-of-ai/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; (of &lt;em&gt;curl&lt;/em&gt; fame):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The title of my ending keynote at FOSDEM February 1, 2026.&lt;/p&gt;
&lt;p&gt;As the last talk of the conference, at 17:00 on the Sunday lots of people had
already left, and presumably a lot of the remaining people were quite tired
and ready to call it a day.&lt;/p&gt;
&lt;p&gt;Still, the 1500 seats in Janson got occupied and there was even a group of
more people outside wanting to get in that had to be refused entry.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;They say: &lt;a href="https://en.wiktionary.org/wiki/never_meet_your_heroes"&gt;&amp;ldquo;never meet your
heroes&amp;rdquo;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It is unwise to seek personal acquaintance with people whom one has regarded
with high esteem, as they often fail to fulfill one&amp;rsquo;s expectations, resulting
in disappointment&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I had the opportunity to meet Daniel in person and I&amp;rsquo;m glad to state that I am
not disappointed.&lt;/p&gt;
&lt;p&gt;I was the volunteer who held the Q&amp;amp;A at the end for his talk, and that was a
pleasure.&lt;/p&gt;
&lt;p&gt;In my opinion, this was the best talk from FOSDEM 2026.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://perrotta.dev/2026/02/open-source-security-in-spite-of-ai/open-source-security-in-spite-of-ai-daniel-stenberg.webp" alt="Open Source security in spite of AI ‚Äî Daniel Stenberg"
 loading="lazy" decoding="async" /&gt;
&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://www.youtube.com/watch?v=6wYSwZ20NJU"&gt;Recording&lt;/a&gt;.
&lt;a href="https://daniel.haxx.se/media/FOSDEM%202026%20OSS%20security%20in%20spite%20of%20AI.pdf"&gt;Slides&lt;/a&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2026/02/open-source-security-in-spite-of-ai/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Open Source security in spite of AI"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/fosdem/"&gt;#fosdem&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/posse/"&gt;#posse&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>npm error code EBADF</title><link>https://perrotta.dev/2026/02/npm-error-code-ebadf/</link><pubDate>Thu, 05 Feb 2026 13:21:00 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>pre-commit</category><category>security</category><guid>https://perrotta.dev/2026/02/npm-error-code-ebadf/</guid><description>&lt;p&gt;Symptom:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% pre-commit run -a
[INFO] Installing environment for https://github.com/rbubley/mirrors-prettier.
[INFO] Once installed this environment will be reused.
[INFO] This may take a few minutes...
An unexpected error has occurred: CalledProcessError: command: (&amp;#39;/Users/thiago.perrotta/.cache/pre-commit/repo78y8p1fk/node_env-system/bin/node&amp;#39;, &amp;#39;/opt/homebrew/bin/npm&amp;#39;, &amp;#39;install&amp;#39;, &amp;#39;-g&amp;#39;, &amp;#39;/Users/thiago.perrotta/.cache/pre-commit/repo78y8p1fk/placeholder_package-0.0.0.tgz&amp;#39;, &amp;#39;prettier@3.8.1&amp;#39;)
return code: 1
stdout: (none)
stderr:
 npm error code EBADF
 npm error errno EBADF
 npm error request to https://registry.npmjs.org/prettier failed, reason:
 npm error A complete log of this run can be found in: /Users/thiago.perrotta/.npm/_logs/2026-02-04T12_22_05_104Z-debug-0.log
Check the log at /Users/thiago.perrotta/.cache/pre-commit/pre-commit.log&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Initially I thought it was an issue with &lt;code&gt;prettier&lt;/code&gt;. The pre-commit repository
is deprecated after all:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a fork of the (now archived)
&lt;a href="https://github.com/pre-commit/mirrors-prettier"&gt;https://github.com/pre-commit/mirrors-prettier&lt;/a&gt; with the only difference being
that it only references release versions of prettier, not e.g. alpha/beta
versions.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The actual error was &lt;a href="https://www.obdev.at/products/littlesnitch/index.html"&gt;Little
Snitch&lt;/a&gt; on macOS blocking
all outgoing connections to the NPM registry.&lt;/p&gt;
&lt;p&gt;How to address it?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Click &amp;ldquo;Manage Rules&amp;hellip;&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Click &amp;ldquo;Deny&amp;rdquo; to list all network blocks&lt;/li&gt;
&lt;li&gt;Delete the NPM registry entry&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: npm error code EBADF"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pre-commit/"&gt;#pre-commit&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ Canary tokens</title><link>https://perrotta.dev/2025/11/canary-tokens/</link><pubDate>Sun, 30 Nov 2025 19:30:23 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/11/canary-tokens/</guid><description>&lt;p&gt;&lt;a href="https://canarytokens.org/"&gt;Canary Tokens&lt;/a&gt;,
&lt;a href="https://docs.canarytokens.org/guide/"&gt;introduction&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What are Canarytokens&lt;/p&gt;
&lt;p&gt;Canarytokens are like motion sensors for your networks, computers and clouds.
You can put them in folders, on network devices and on your phones.&lt;/p&gt;
&lt;p&gt;Place them where nobody should be poking around and get a clear alarm if they
are accessed. They are designed to look juicy to attackers to increase the
likelihood that they are opened (and they are completely free).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;They are like &lt;a href="https://en.wikipedia.org/wiki/Honeypot_%28computing%29"&gt;honeypots&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;They are like a digital version of &lt;a href="https://www.apple.com/airtag/"&gt;Air Tags&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Our Canarytokens are easy to sprinkle all over and forget about, until you get
the notification that matters. They are super lightweight and don&amp;rsquo;t require
installing software or running more background processes that can slow down
your PC.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I especially like the idea of the &lt;a href="https://canarytokens.org/nest/"&gt;Credit Card
Token&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We give you unique Credit Card details&lt;/p&gt;
&lt;p&gt;You place it somewhere.&lt;/p&gt;
&lt;p&gt;We send you an alert when that Credit Card is used.&lt;/p&gt;
&lt;p&gt;Ideas for using the Credit Card token:&lt;/p&gt;
&lt;p&gt;You can use any name or address in association with the card number and CVV&lt;/p&gt;
&lt;p&gt;Stick this in a database that stores payment information and get alerted if it
is ever breached.&lt;/p&gt;
&lt;p&gt;Put it in a document with other personal information regarding e.g., travel
preferences in case someone snoops around your computer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are various other canary tokens that are super useful.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s like &lt;a href="https://www.youtube.com/watch?v=S03VAuxH7lM"&gt;adding tripping wires&lt;/a&gt;
all over the place.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://blueclouddrive.com/"&gt;See also&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Canary tokens"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ Shell memoization: lazy-load LLM API keys</title><link>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</link><pubDate>Mon, 10 Nov 2025 13:55:56 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>bestof</category><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given LLM keys shell environment variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GEMINI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OPENAI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Export them only when they are needed.&lt;/p&gt;
&lt;p&gt;When are they needed? If I launch any one of these binaries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;llm&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aider&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gemini&lt;/code&gt; (provider-specific: Google)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;codex&lt;/code&gt; (provider-specific: OpenAI)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;claude&lt;/code&gt; (provider-specific: Anthropic)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I added the following snippet in my shell profile:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;# Lazy-load API keys only when needed to avoid shell startup delay
if command -v llm &amp;amp;&amp;gt;/dev/null; then
 _load_api_keys() {
 export ANTHROPIC_API_KEY=&amp;#34;$(command llm keys get anthropic)&amp;#34;
 export GEMINI_API_KEY=&amp;#34;$(command llm keys get gemini)&amp;#34;
 export OPENAI_API_KEY=&amp;#34;$(command llm keys get openai)&amp;#34;
 # Redefine itself to be a no-op after first call
 _load_api_keys() { :; }
 }

 # Wrap all AI CLI commands to auto-load keys
 for cmd in claude llm aider codex gemini; do
 command -v $cmd &amp;amp;&amp;gt;/dev/null &amp;amp;&amp;amp; eval &amp;#34;${cmd}() { _load_api_keys; command ${cmd} \&amp;#34;\$@\&amp;#34;; }&amp;#34;
 done
fi&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The keys are loaded via &lt;code&gt;llm keys get&lt;/code&gt;. This is not secure, but it is practical.
A more secure approach would be to read the credentials directly from a password
manager. This trade-off is acceptable in the environment I am currently
operating on, but I would not recommend it as an universal approach.&lt;/p&gt;
&lt;p&gt;A temporary &lt;code&gt;_load_api_keys&lt;/code&gt; shell function is defined. The first time it is
executed, it &lt;code&gt;export&lt;/code&gt;s each one of the LLM API keys. From the second time
onwards it will be a no-op, thanks to &lt;code&gt;:&lt;/code&gt;. In bash/zsh we can redefine a
function from within itself thanks to dynamic scoping. Wild.&lt;/p&gt;
&lt;p&gt;Last but not least: I wrapped up (&amp;ldquo;decorated&amp;rdquo; in function parlance) all
LLM-related commands with a shell function that runs &lt;code&gt;_load_api_keys&lt;/code&gt; before
invoking the original command.&lt;/p&gt;
&lt;p&gt;This approach is elegant and easy to maintain.&lt;/p&gt;
&lt;p&gt;My initial implementation had been more fine-grained: &lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt; would
drive &lt;code&gt;claude&lt;/code&gt;, &lt;code&gt;llm&lt;/code&gt; and &lt;code&gt;aider&lt;/code&gt;, but not &lt;code&gt;gemini&lt;/code&gt; and &lt;code&gt;codex&lt;/code&gt;, and so on.
Ultimately I decided that the additional complexity of mapping individual
providers optimally is not warranted.&lt;/p&gt;
&lt;p&gt;Why is this memoization necessary in the first place?&lt;/p&gt;
&lt;p&gt;My shell (&lt;code&gt;zsh&lt;/code&gt;) startup was significantly slow before this change,
&lt;code&gt;O(seconds)&lt;/code&gt;. Each call to &lt;code&gt;llm keys get&lt;/code&gt; takes about half a second in my
machine. I do not think it&amp;rsquo;s acceptable to wait for 2s before having your shell
readily available with a prompt.&lt;/p&gt;
&lt;p&gt;Before this approach, I had used
&lt;a href="https://github.com/romkatv/zsh-defer"&gt;&lt;code&gt;zsh-defer&lt;/code&gt;&lt;/a&gt; to delay populating the API
keys. However, this has only &lt;em&gt;deferred&lt;/em&gt; (&lt;em&gt;cof&lt;/em&gt;) my problems. The startup delay
was still noticeable.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Shell memoization: lazy-load LLM API keys"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>GitHub: the organization has enabled or enforced SAML sso</title><link>https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/</link><pubDate>Tue, 21 Oct 2025 08:15:41 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><category>ssh</category><guid>https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/</guid><description>&lt;p&gt;Error message when doing &lt;code&gt;git push&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% git push
ERROR: The &amp;#39;{corp}&amp;#39; organization has enabled or enforced SAML SSO.
To access this repository, you must use the HTTPS remote with a personal access token or SSH with an SSH key and passphrase that has been authorized for this organization.
Visit https://docs.github.com/articles/authenticating-to-a-github-organization-with-saml-single-sign-on/ for more information.

fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Even after authenticating by logging in, the error persists.&lt;/p&gt;
&lt;p&gt;The solution is to &lt;strong&gt;restart the ssh agent&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;How to do so is out of scope of this post, because it depends on which one you
use.&lt;/p&gt;
&lt;p&gt;For the 1Password ssh agent, the following has worked for me:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;disable it by toggling the checkbox: Settings &amp;gt; Developer &amp;gt; SSH Agent &amp;gt; Use the SSH Agent&lt;/li&gt;
&lt;li&gt;kill the ssh agent (&lt;code&gt;pkill ssh-agent&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;kill open ssh multiplexing connections (e.g. with &lt;code&gt;pkill&lt;/code&gt;):&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% pgrep -afl ssh
48564 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]
50845 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;quit 1Password, then reopen it&lt;/li&gt;
&lt;li&gt;re-enable the 1Password ssh agent&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git push&lt;/code&gt; again&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Surely there is a way to script this?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-10-28)&lt;/strong&gt;: In a second try, killing the process below was enough to
address the issue.&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% pgrep -afl ssh
7242 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]
% kill 7242&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: GitHub: the organization has enabled or enforced SAML sso"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/ssh/"&gt;#ssh&lt;/a&gt;&lt;/p&gt;</description></item><item><title>New script: AWS China MFA login</title><link>https://perrotta.dev/2025/10/new-script-aws-china-mfa-login/</link><pubDate>Sat, 04 Oct 2025 11:34:58 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>aws</category><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/10/new-script-aws-china-mfa-login/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2024/12/skopeo-operate-container-images-and-registries/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/pancake/tree/5c4122f7ee0dd7917b3f21054a8e7d6b7101687a/aws_china_mfa"&gt;aws_china_mfa&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A script to authenticate to AWS China using MFA and export temporary session credentials.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The idea is simple. To log into AWS, we need the following environment variables
to be defined:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;export AWS_PROFILE=&amp;#39;china&amp;#39;
export AWS_ACCESS_KEY_ID=&amp;#39;AKIAWHEATLICIOUSPANCAK&amp;#39;
export AWS_SECRET_ACCESS_KEY=&amp;#39;wSyrupyDeliciousSecretKeyForBreakfastDelight42&amp;#39;
export AWS_SESSION_TOKEN=&amp;#39;FwoGZXIvYXdzEBaaDCakesYrUpSWeetToKenArEDelIcIoUs...&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;AWS_PROFILE&lt;/code&gt; is static and can be hard-coded. It&amp;rsquo;s also possible to supply it
to the &lt;code&gt;aws&lt;/code&gt; CLI via &lt;code&gt;--profile&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The other three are fetched upon a successful authentication against AWS, using
MFA (multi-factor authentication) with an OTP.&lt;/p&gt;
&lt;p&gt;The usage experience of the script is like this:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% ./aws_china_mfa.sh
Note: Script is being executed. To apply credentials, run:
 eval &amp;#34;$(./aws_china_mfa.sh china)&amp;#34;

Using AWS profile: china
Enter the MFA token code for your AWS China account: 123456
Retrieving MFA device ARN...
Requesting session token...

 export AWS_PROFILE=&amp;#39;china&amp;#39;
 export AWS_ACCESS_KEY_ID=&amp;#39;AKIAWHEATLICIOUSPANCAK&amp;#39;
 export AWS_SECRET_ACCESS_KEY=&amp;#39;wSyrupyDeliciousSecretKeyForBreakfastDelight42&amp;#39;
 export AWS_SESSION_TOKEN=&amp;#39;FwoGZXIvYXdzEBaaDCakesYrUpSWeetToKenArEDelIcIoUs...&amp;#39;

‚úì Successfully authenticated to AWS China

Copy and paste the export commands above to apply credentials.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The script prompts the user for an OTP; that&amp;rsquo;s the only input.&lt;/p&gt;
&lt;p&gt;There are three ways to execute it:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;source it: the variables are then exported directly&lt;/li&gt;
&lt;li&gt;eval it: ditto&lt;/li&gt;
&lt;li&gt;execute it: in this mode it&amp;rsquo;s not possible to export the variables. Instead,
they are simply printed to stdout, and there&amp;rsquo;s a message instructing the user
to manually copy and paste the exports&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Later on I added integration with 1Password, via &lt;code&gt;--op-account&lt;/code&gt; and &lt;code&gt;--op-item&lt;/code&gt;,
so that the OTP can be retrieved directly from it, without any user intervention
or interruption ‚Äì besides using biometrics (touch ID) to confirm the
operation.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: New script: AWS China MFA login"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/aws/"&gt;#aws&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ zizmor</title><link>https://perrotta.dev/2025/10/zizmor/</link><pubDate>Fri, 03 Oct 2025 12:44:21 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>alpine-linux</category><category>bestof</category><category>dev</category><category>fosdem</category><category>security</category><guid>https://perrotta.dev/2025/10/zizmor/</guid><description>&lt;p&gt;I originally heard of &lt;a href="https://docs.zizmor.sh/"&gt;zizmor&lt;/a&gt; at &lt;a href="https://fosdem.org/2025/"&gt;FOSDEM 2025&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;zizmor is a static analysis tool for GitHub Actions. It can find and fix many
common security issues in typical GitHub Actions CI/CD setups.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;One month later, I adopted it in the most important repos of our company.&lt;/p&gt;
&lt;p&gt;A few months later, I &lt;a href="https://perrotta.dev/2025/06/alpine-linux-packaging-track-new-software-releases/"&gt;added&lt;/a&gt; it to the
Alpine Linux repositories, and am happily
&lt;a href="https://pkgs.alpinelinux.org/packages?name=zizmor"&gt;maintaining&lt;/a&gt; it there.&lt;/p&gt;
&lt;p&gt;Now I use it &lt;em&gt;everywhere&lt;/em&gt;, via a git &lt;a href="https://pre-commit.com/"&gt;pre-commit&lt;/a&gt; hook:&lt;/p&gt;
&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-yaml"&gt;repos:
 - repo: https://github.com/woodruffw/zizmor-pre-commit
 rev: b933184438555436e38621f46ceb0c417cbed400 # frozen: v1.13.0
 hooks:
 - id: zizmor&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The project has recently reached a milestone: &lt;a href="https://blog.yossarian.net/2025/09/14/one-year-of-zizmor"&gt;it has turned one year
old&lt;/a&gt;. Its adoption,
community and feature set have all significantly increased during that time, in
a good way.&lt;/p&gt;
&lt;p&gt;The goal, impact and spirit of the project are all really great. And I&amp;rsquo;m sure
this is mainly thanks to the initiative and dedication of its author, &lt;a href="https://blog.yossarian.net/"&gt;William
Woodruff&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: zizmor"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/alpine-linux/"&gt;#alpine-linux&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/fosdem/"&gt;#fosdem&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>GitHub: disable dependabot CLI notifications</title><link>https://perrotta.dev/2025/09/github-disable-dependabot-cli-notifications/</link><pubDate>Wed, 03 Sep 2025 10:51:49 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/09/github-disable-dependabot-cli-notifications/</guid><description>&lt;p&gt;Good morning!&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% git push
Enumerating objects: 1, done.
Counting objects: 100% (1/1), done.
Writing objects: 100% (1/1), 189 bytes | 189.00 KiB/s, done.
Total 1 (delta 0), reused 0 (delta 0), pack-reused 0 (from 0)
remote:
remote: GitHub found 247 vulnerabilities on org/repo&amp;#39;s default branch (8 critical, 86 high, 92 moderate, 61 low). To find out more, visit:
remote: https://github.com/org/repo/security/dependabot
[...]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;These are simply non-actionable by our team; we have a dedicated security team
to look into these matters. Even worse: the constant output makes us accustomed
to it, until it becomes background noise.&lt;/p&gt;
&lt;p&gt;GitHub allows us to
&lt;a href="https://docs.github.com/en/code-security/dependabot/dependabot-alerts/configuring-notifications-for-dependabot-alerts#configuring-notifications-for-dependabot-alerts"&gt;disable&lt;/a&gt;
these CLI notifications: Settings &amp;gt; Notifications&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;System &amp;gt; &amp;ldquo;Dependabot alerts: New vulnerabilities&amp;rdquo; &amp;gt; &amp;ldquo;Notify me&amp;rdquo;: &amp;ldquo;on GitHub&amp;rdquo;
only.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: GitHub: disable dependabot CLI notifications"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>/security-review</title><link>https://perrotta.dev/2025/08/security-review/</link><pubDate>Fri, 22 Aug 2025 15:31:01 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/08/security-review/</guid><description>&lt;p&gt;Anthropic, &lt;a href="https://support.anthropic.com/en/articles/11932705-automated-security-reviews-in-claude-code"&gt;Automated Security Reviews in Claude Code&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Claude Code now includes automated security review features to help you
identify and fix vulnerabilities in your code. This guide explains how to use
the &lt;code&gt;/security-review&lt;/code&gt; command and GitHub Actions to improve your code security.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Of course, there are also
&lt;a href="https://github.com/anthropics/claude-code-security-review/tree/main?tab=readme-ov-file#security-review-slash-command"&gt;docs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It is merely a &lt;a href="https://github.com/anthropics/claude-code-security-review/blob/main/.claude/commands/security-review.md?plain=1"&gt;glorified system
prompt&lt;/a&gt;,
which is exactly what I expected:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Complete a security review of the pending changes on the current branch&lt;/p&gt;
&lt;p&gt;You are a senior security engineer conducting a focused security review of the changes on this branch.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The prompt employs the well-established pattern of outlining countless examples
and instructing the model to follow a certain output format.&lt;/p&gt;
&lt;p&gt;In 2025, the Gen AI arms race is mostly about (i) cost-benefit and (ii) user /
developer experience. Anthropic surely has a good taste in user experience; to
me, they often resemble Apple.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: /security-review"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Block "Sign in to XXX with google.com"</title><link>https://perrotta.dev/2025/08/block-sign-in-to-xxx-with-google.com/</link><pubDate>Sat, 02 Aug 2025 21:26:25 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/08/block-sign-in-to-xxx-with-google.com/</guid><description>&lt;p&gt;Jeff Johnson, &lt;a href="https://underpassapp.com/news/2025/7/5.html"&gt;Sign in with Google in Chrome&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Many websites such as Yelp show an annoying &amp;ldquo;Sign in with Google&amp;rdquo; banner when
you visit.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://underpassapp.com/news/2025/7/5-images/Safari.png" alt="Sign in with Google
banner"
 loading="lazy" decoding="async" /&gt;
&lt;/p&gt;
&lt;p&gt;This is what Google calls the One Tap user experience. Fortunately, my web
browser extension StopTheMadness Pro hides &amp;ldquo;Sign in with Google&amp;rdquo; banners.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Annoying is an understatement.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Although Chrome avoids the &amp;ldquo;Sign in with Google&amp;rdquo; banners, Google&amp;rsquo;s browser
still has its own custom annoyance. If you&amp;rsquo;re already signed in to your Google
account when you visit a participating website such as Yelp, Chrome will
display a One Tap dialog.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Jeff helpfully points out how to block these banners in Google Chrome:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Navigate to &lt;code&gt;chrome://settings/content/federatedIdentityApi&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Switch the default behavior to &amp;ldquo;Block sign-in prompts from identity services&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;If the courts and antitrust regulators are reading‚Äîthey probably won&amp;rsquo;t read my
blog, but one can dream‚Äîthis is yet another example of Google advantaging its
own browser Chrome over other web browsers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Block "Sign in to XXX with google.com""&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Okta: enroll into 2FA</title><link>https://perrotta.dev/2025/07/okta-enroll-into-2fa/</link><pubDate>Sun, 27 Jul 2025 18:49:30 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/07/okta-enroll-into-2fa/</guid><description>&lt;p&gt;More specifically, enroll into 2FA other than
&lt;a href="https://en.wikipedia.org/wiki/One-time_password"&gt;OTP&lt;/a&gt;.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Log into https://{company}.okta.com/&lt;/li&gt;
&lt;li&gt;Go to Settings (https://{company}.okta.com/enduser/settings)&lt;/li&gt;
&lt;li&gt;Under &amp;ldquo;Security Key or Biometric Authenticator&amp;rdquo;, click &amp;ldquo;Set up another&amp;rdquo;&lt;/li&gt;
&lt;li&gt;From this point, you could add &lt;em&gt;either&lt;/em&gt;:
‚Äî a hardware security key (e.g. &lt;a href="https://www.yubico.com/"&gt;YubiCo&lt;/a&gt;)
‚Äî a &lt;a href="http://passkeys.dev/"&gt;passkey&lt;/a&gt;, which will be stored in your password
manager, iCloud Keychain (Apple devices) or web browser profile&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;A hardware security key needs to be plugged in during authentication, when it
needs to be gently tapped.&lt;/p&gt;
&lt;p&gt;A passkey does not require external hardware, but it requires you to be logged
into wherever it is stored (e.g. your password manager or your Apple ID).&lt;/p&gt;
&lt;p&gt;What is the motivation to do this?&lt;/p&gt;
&lt;p&gt;Previously, I would need to open up my laptop lid to touch ID, which is quite
inconvenient in clamshell mode (i.e. with the laptop lid closed).&lt;/p&gt;
&lt;p&gt;Now, touching the security key or signing in with the passkey eliminates the
need to do so.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Okta: enroll into 2FA"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>SSH: hash known hosts</title><link>https://perrotta.dev/2025/06/ssh-hash-known-hosts/</link><pubDate>Sun, 15 Jun 2025 12:05:11 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><category>ssh</category><guid>https://perrotta.dev/2025/06/ssh-hash-known-hosts/</guid><description>&lt;p&gt;A security / privacy tip: hash ssh hosts, especially in machines you have
access to that are in the cloud.
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/6a5bb6a20eeede82dfcbbc56ef4db91ffe2dd65d/ssh/.ssh/config#L40-L42"&gt;&lt;code&gt;~/.ssh/config&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Host *
	# Automatically hash new host keys added to ~/.ssh/known_hosts.
	# Manually for pre-existing hosts: ssh-keygen -H
	HashKnownHosts yes&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The default is not to hash.&lt;/p&gt;
&lt;p&gt;As a side effect, &lt;code&gt;~/.ssh/known_hosts&lt;/code&gt; (sample entry):&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;|1|F1E1KeoE/eEWhi10WpGv4OdiO6Y=|3988QV0VE8wmZL7suNrYQLITLCg= sh-ed25519 [...]&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Why do this? As per &lt;a href="https://security.stackexchange.com/questions/56268/ssh-benefits-of-using-hashed-known-hosts"&gt;Security Stack Exchange&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The only change is that if a machine is compromised, the idea is to minimize
how much usable information is given to an attacker.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;To retroactively hash existing entries, run:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% ssh-keygen -H
/Users/tperrotta/.ssh/known_hosts updated.
Original contents retained as /Users/tperrotta/.ssh/known_hosts.old&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: SSH: hash known hosts"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/ssh/"&gt;#ssh&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Apple App Store Geo-blocking</title><link>https://perrotta.dev/2025/06/apple-app-store-geo-blocking/</link><pubDate>Thu, 05 Jun 2025 19:22:15 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/06/apple-app-store-geo-blocking/</guid><description>&lt;p&gt;Apple Accounts are tied to a specific country. You can have one and only one
country associated with an account at any given time.&lt;/p&gt;
&lt;p&gt;This is a problem whenever certain apps are restricted to &lt;em&gt;only&lt;/em&gt; certain countries
(&lt;a href="https://en.wikipedia.org/wiki/Geo-blocking"&gt;geo-blocking&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;For example, an app from a bank or a financial broker may be made available
&lt;em&gt;only&lt;/em&gt; in the country wherein it operates, thereby completely ignoring the
existence and needs of expats.&lt;/p&gt;
&lt;p&gt;How do you know in which countries certain apps are made available? Here&amp;rsquo;s one
way:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Brazil: &lt;a href="https://www.apple.com/br/search/"&gt;https://www.apple.com/br/search/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Canada: &lt;a href="https://www.apple.com/ca/search/"&gt;https://www.apple.com/ca/search/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Germany: &lt;a href="https://www.apple.com/de/search/"&gt;https://www.apple.com/de/search/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;USA: &lt;a href="https://www.apple.com/us/search/"&gt;https://www.apple.com/us/search/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Wanna see examples? Try searching for these apps in different stores&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/06/apple-app-store-geo-blocking/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://www.apple.com/de/search/commerzbank?src=serp"&gt;Commerzbank&lt;/a&gt; is only available in Germany.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.apple.com/br/search/MEI?src=serp"&gt;MEI&lt;/a&gt; is only available in Brazil.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.apple.com/us/search/venmo?src=serp"&gt;Venmo&lt;/a&gt; is only available in the USA.&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.apple.com/ca/search/wealthsimple?src=serp"&gt;WealthSimple&lt;/a&gt; is only available in Canada.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You can change the country associated with your App Store by following Apple&amp;rsquo;s
&lt;a href="https://support.apple.com/en-us/118283"&gt;official documentation&lt;/a&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;For the sake of basic
&lt;a href="https://en.wikipedia.org/wiki/Operations_security"&gt;OpSec&lt;/a&gt;, I don&amp;rsquo;t have an
account in any of these services, in case you were wondering :-)&amp;#160;&lt;a href="https://perrotta.dev/2025/06/apple-app-store-geo-blocking/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Apple App Store Geo-blocking"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>git pull: authentication issues</title><link>https://perrotta.dev/2025/06/git-pull-authentication-issues/</link><pubDate>Tue, 03 Jun 2025 14:35:04 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>git</category><category>security</category><category>ssh</category><guid>https://perrotta.dev/2025/06/git-pull-authentication-issues/</guid><description>&lt;p&gt;&lt;code&gt;git pull&lt;/code&gt; authentication issues is &lt;em&gt;really&lt;/em&gt; a disguise for &lt;code&gt;ssh&lt;/code&gt; auth issues.&lt;/p&gt;
&lt;p&gt;Today a teammate could not &lt;code&gt;git pull&lt;/code&gt; one of our internal repos:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% git pull
Enter passphrase for key &amp;#39;/Users/user/.ssh/id_ed25519&amp;#39;:
git@github.com: Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The first thing we verified was that his public key was
&lt;a href="https://github.com/settings/keys"&gt;added&lt;/a&gt; to his github profile, and that the
private key was present in &lt;code&gt;~/.ssh/id_ed25519&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Next, verify &lt;code&gt;~/.ssh/config&lt;/code&gt;:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Host github.com
AddKeysToAgent yes
UseKeychain yes
IdentityFile ~/.ssh/id_ed25519&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Looks fine. Then:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% export GIT_SSH_COMMAND=&amp;#34;ssh -vvv&amp;#34;
% git pull
[...]
debug3: Search for item with query: {
 acct = &amp;#34;/Users/user/.ssh/id_ed25519&amp;#34;;
 agrp = &amp;#34;com.apple.ssh.passphrases&amp;#34;;
 class = genp;
 labl = &amp;#34;SSH: /Users/user/.ssh/id_ed25519&amp;#34;;
 nleg = 1;
 &amp;#34;r_Data&amp;#34; = 1;
 svce = OpenSSH;
 &amp;#34;u_AuthUI&amp;#34; = &amp;#34;u_AuthUIF&amp;#34;;
}
debug2: Unexpected keychain error while searching for an item: User interaction is not allowed.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Herein lies the error! The interaction with the system keychain in macOS was not
successful.&lt;/p&gt;
&lt;p&gt;I suggested him to remove &lt;code&gt;AddKeysToAgent&lt;/code&gt; and &lt;code&gt;UseKeychain&lt;/code&gt; from this config
file, but that did not work either:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% git pull
[...]
Enter passphrase for key &amp;#39;/Users/user/.ssh/id_ed25519&amp;#39;:
debug2: no passphrase given, try next key
debug2: we did not send a packet, disable method
debug1: No more authentication methods to try.
git@github.com: Permission denied (publickey).
fatal: Could not read from remote repository.

Please make sure you have the correct access rights
and the repository exists.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The ssh key is protected with a passphrase.&lt;/p&gt;
&lt;p&gt;In this case, it&amp;rsquo;s better to fix the keychain issue. We readd the two deleted
lines.&lt;/p&gt;
&lt;p&gt;Restart the &lt;code&gt;ssh-agent&lt;/code&gt; and readd the key there:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% eval &amp;#34;$(ssh-agent -s)&amp;#34;
% ssh-add -K ~/.ssh/id_ed25519&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Problem resolved! &lt;code&gt;git pull&lt;/code&gt; works now.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: git pull: authentication issues"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/ssh/"&gt;#ssh&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Web browser privacy tests</title><link>https://perrotta.dev/2025/05/web-browser-privacy-tests/</link><pubDate>Fri, 23 May 2025 01:13:56 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/05/web-browser-privacy-tests/</guid><description>&lt;p&gt;&lt;a href="https://privacytests.org/"&gt;Privacy Tests&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Most web browsers leak your identity and your browsing history, but some
browsers are more leaky than others.&lt;/p&gt;
&lt;p&gt;The goal of PrivacyTests.org is to understand in detail: what data is each web
browser leaking? Which web browsers offer the best privacy protections?&lt;/p&gt;
&lt;p&gt;PrivacyTests.org is an open-source initiative that subjects popular web
browsers to a suite of automated tests. These tests are designed to audit web
browsers&amp;rsquo; privacy properties in an unbiased manner. The results of the tests
are made public to help users make an informed choice about which browser to
use, and to encourage browser makers to fix leaks of private user data.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I wasn&amp;rsquo;t aware of &lt;a href="https://mullvad.net/en/browser"&gt;Mullvad Browser&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Web browser privacy tests"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Github: dependabot: group updates</title><link>https://perrotta.dev/2025/05/github-dependabot-group-updates/</link><pubDate>Wed, 14 May 2025 15:08:40 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/05/github-dependabot-group-updates/</guid><description>&lt;p&gt;&lt;a href="https://docs.github.com/en/code-security/getting-started/dependabot-quickstart-guide"&gt;dependabot&lt;/a&gt;
supports
&lt;a href="https://docs.github.com/en/code-security/dependabot/working-with-dependabot/dependabot-options-reference#groups--"&gt;grouping&lt;/a&gt;
commits into fewer, targeted pull requests.&lt;/p&gt;
&lt;p&gt;A recent example in the repository of this blog:&lt;/p&gt;
&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-diff"&gt;% git show
commit 1fa93bed4d0faa9dfcdd6e554201d708baa38dbb (HEAD -&amp;gt; master, origin/master, origin/HEAD)
Author: Thiago Perrotta &amp;lt;{email redacted}&amp;gt;
Date: Wed May 14 15:08:23 2025 &amp;#43;0200

 group dependabot updates

diff --git .github/dependabot.yml .github/dependabot.yml
index d6ca206c..3a5d1b09 100644
--- .github/dependabot.yml
&amp;#43;&amp;#43;&amp;#43; .github/dependabot.yml
@@ -4,7 &amp;#43;4,15 @@ updates:
 directory: /
 schedule:
 interval: monthly
&amp;#43; groups:
&amp;#43; all:
&amp;#43; patterns:
&amp;#43; - &amp;#34;*&amp;#34;
 - package-ecosystem: github-actions
 directory: /
 schedule:
 interval: monthly
&amp;#43; groups:
&amp;#43; all:
&amp;#43; patterns:
&amp;#43; - &amp;#34;*&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;This is better for my workflow because then I will have less pull requests to
deal with at once, instead of having to review them one by one for each
individual github action or git submodule bump.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Github: dependabot: group updates"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>helm-secrets + vals: string interpolation</title><link>https://perrotta.dev/2025/05/helm-secrets--vals-string-interpolation/</link><pubDate>Thu, 08 May 2025 15:25:14 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>kubernetes</category><category>security</category><guid>https://perrotta.dev/2025/05/helm-secrets--vals-string-interpolation/</guid><description>&lt;p&gt;&lt;a href="https://github.com/jkroepke/helm-secrets"&gt;helm-secrets&lt;/a&gt; is:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;a helm plugin that helps to manage secrets with Git workflow and store them
anywhere.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It uses &lt;a href="https://github.com/helmfile/vals"&gt;vals&lt;/a&gt; underneath, which is a:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Helm-like configuration values loader with support for various sources&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;including, in particular, &lt;a href="https://www.hashicorp.com/en/products/vault"&gt;HashiCorp Vault&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;vals&lt;/code&gt; syntax is documented
&lt;a href="https://github.com/helmfile/vals?tab=readme-ov-file#expression-syntax"&gt;in the vals documentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: construct a string composed of the following two vault
entries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;vault://kv-v2/services/common/postgres/#url&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;vault://kv-v2/services/common/postgres/#params&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;hellip;to yield &lt;code&gt;{url}?{params}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;How do we concatenate two vault entries?
The secret is in the &lt;code&gt;+&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Finally, the optional trailing &lt;code&gt;+&lt;/code&gt; is the explicit &amp;ldquo;end&amp;rdquo; of the expression.
You usually don&amp;rsquo;t need it, as if omitted, it treats anything after &lt;code&gt;ref+&lt;/code&gt; and
before the new-line or the end-of-line as an expression to be evaluated. An
explicit &lt;code&gt;+&lt;/code&gt; is handy when you want to do a simple string interpolation. That
is, &lt;code&gt;foo ref+SECRET1+ ref+SECRET2+ bar&lt;/code&gt; evaluates to &lt;code&gt;foo SECRET1_VALUE SECRET2_VALUE bar&lt;/code&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The final result:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;secrets&amp;#43;literal://ref&amp;#43;vault://kv-v2/services/common/postgres/#url&amp;#43;?ref&amp;#43;vault://kv-v2/services/common/postgres/#params&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;wherein &lt;code&gt;secrets+literal://&lt;/code&gt; comes from &lt;code&gt;helm-secrets&lt;/code&gt;. It needs to appear only
once. &lt;code&gt;ref+vault://&lt;/code&gt; comes from &lt;code&gt;vals&lt;/code&gt;, it appears once for each vault entry.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: helm-secrets + vals: string interpolation"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/kubernetes/"&gt;#kubernetes&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>1Password SSH agent error</title><link>https://perrotta.dev/2025/05/1password-ssh-agent-error/</link><pubDate>Wed, 07 May 2025 12:52:00 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><category>ssh</category><guid>https://perrotta.dev/2025/05/1password-ssh-agent-error/</guid><description>&lt;p&gt;A day in the life:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% ssh {my-server}
STDERR:
 sign_and_send_pubkey: signing failed for ED25519 &amp;#34;/Users/thiago/.ssh/id_ed25519&amp;#34; from agent: agent refused operation

 git@github.com: Permission denied (publickey).

 fatal: Could not read from remote repository.

 Please make sure you have the correct access rights

 and the repository exists.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;What&amp;rsquo;s the matter?&lt;/p&gt;
&lt;p&gt;My ssh config is integrated with the &lt;a href="https://developer.1password.com/docs/ssh/agent/"&gt;1Password ssh
agent&lt;/a&gt;:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Host *
 # Use 1Password SSH agent when available
 # macOS only
 # Linux: &amp;#34;~/.1password/agent.sock&amp;#34;
 IdentityAgent &amp;#34;~/Library/Group Containers/2BUA8C4S2C.com.1password/t/agent.sock&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Solution&lt;/strong&gt;: Ensure 1Password is unlocked, so that the agent can be used.&lt;/p&gt;
&lt;p&gt;It can be unlocked from its macOS app, or from the CLI (&lt;code&gt;op signin --account {my-account}&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: 1Password SSH agent error"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/ssh/"&gt;#ssh&lt;/a&gt;&lt;/p&gt;</description></item><item><title>HashiCorp Vault from helm values</title><link>https://perrotta.dev/2025/04/hashicorp-vault-from-helm-values/</link><pubDate>Wed, 23 Apr 2025 16:56:16 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>kubernetes</category><category>security</category><guid>https://perrotta.dev/2025/04/hashicorp-vault-from-helm-values/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Populate HashiCorp Vault with select keys from &lt;code&gt;helm get values&lt;/code&gt; for a given chart release.&lt;/p&gt;
&lt;p&gt;The following script works:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;#!/bin/bash
# Usage: Tweak entries as needed and then run the script.

set -euo pipefail

# It&amp;#39;s an associative array: a dictionary, a hash map
#
# Key: the entry to be populated in vault
# Value: a `jq` JSON selector from the output of `helm get values -o json`
declare -A entries=(
 # keep-sorted start
 [config.aws.accessKey]=&amp;#34;.config.aws.accessKey&amp;#34;
 [config.aws.secretKey]=&amp;#34;.config.aws.secretKey&amp;#34;
 [config.cronjob.apiPassword]=&amp;#34;.config.cronjob.apiPassword&amp;#34;
 [config.cronjob.apiUser]=&amp;#34;.config.cronjob.apiUser&amp;#34;
 [config.postgresql.adminpass]=&amp;#34;.config.postgresql.adminpass&amp;#34;
 [config.postgresql.password]=&amp;#34;.config.postgresql.password&amp;#34;
 [config.postgresql.ropass]=&amp;#34;.config.postgresql.ropass&amp;#34;
 [config.postgresql.rwpass]=&amp;#34;.config.postgresql.rwpass&amp;#34;
 [config.slack.token]=&amp;#34;.config.slack.token&amp;#34;
 [config.slack.verificationToken]=&amp;#34;.config.slack.verificationToken&amp;#34;
 # keep-sorted end
)

main() {
 vault login

 FIRST=1
 for entry in &amp;#34;${!entries[@]}&amp;#34;; do
 key=&amp;#34;$entry&amp;#34;
 value=&amp;#34;${entries[$entry]}&amp;#34;
 content=&amp;#34;$(helm get values -n tools mychart -o json | jq -r &amp;#34;$value&amp;#34;)&amp;#34;

 echo &amp;#34;Populating vault $key from helm value $key: $content...&amp;#34;

 if [[ &amp;#34;$FIRST&amp;#34; == &amp;#34;1&amp;#34; ]]; then
 vault kv put -mount=&amp;#34;kv-v2&amp;#34; &amp;#34;services/mychart/&amp;#34; &amp;#34;$key=$content&amp;#34;
 FIRST=0
 else
 vault kv patch -mount=&amp;#34;kv-v2&amp;#34; &amp;#34;services/mychart/&amp;#34; &amp;#34;$key=$content&amp;#34;
 fi
 done

 vault kv get -mount=&amp;#34;kv-v2&amp;#34; &amp;#34;services/mychart&amp;#34;

 rm ~/.vault-token
}

main&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;FIRST&lt;/code&gt;: In the first time we need to create an entry (&lt;code&gt;vault kv put&lt;/code&gt;), in the
second time we need to patch it (&lt;code&gt;vault kv patch&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: HashiCorp Vault from helm values"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/kubernetes/"&gt;#kubernetes&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ 1Password CLI + direnv integration</title><link>https://perrotta.dev/2025/03/1password-cli--direnv-integration/</link><pubDate>Wed, 26 Mar 2025 14:15:15 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/03/1password-cli--direnv-integration/</guid><description>&lt;p&gt;Let&amp;rsquo;s stay you&amp;rsquo;re working on a terraform module that has a sensitive variable
named &lt;code&gt;api_key&lt;/code&gt; in &lt;code&gt;variables.tf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;When running &lt;code&gt;terraform apply&lt;/code&gt;, you&amp;rsquo;ll need to supply its value. Every. Single.
Time.&lt;/p&gt;
&lt;p&gt;We can make it persistent by setting &lt;code&gt;export TF_VAR_api_key={my value}&lt;/code&gt;.
However this is only persistent within the current shell.&lt;/p&gt;
&lt;p&gt;To make it persistent across multiple sessions, create a &lt;code&gt;.envrc&lt;/code&gt; file at the
root module:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;#!/bin/sh
export TF_VAR_api_key={my value}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then source it: &lt;code&gt;source ~/.envrc&lt;/code&gt;. Now you have to source it every single time
you open a new shell.&lt;/p&gt;
&lt;p&gt;We can use &lt;a href="http://direnv.net/"&gt;&lt;code&gt;direnv&lt;/code&gt;&lt;/a&gt; to do so automatically. It has been
&lt;a href="https://perrotta.dev/2022/01/direnv-automate-your-environment-variables/"&gt;previously covered&lt;/a&gt;. But&amp;hellip;now we have
a secret stored as plain text in our filesystem.&lt;/p&gt;
&lt;p&gt;We could store it in a more secure place, like a password manager, and then have
a mechanism automatically fetch its value.&lt;/p&gt;
&lt;h2 id="first-approach"&gt;First approach&lt;/h2&gt;
&lt;p&gt;When using 1Password, the &lt;a href="https://developer.1password.com/docs/cli/"&gt;1Password
CLI&lt;/a&gt; is such a mechanism.&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;#!/bin/sh
export TF_VAR_api_key=$(op run --no-masking -- op read &amp;#34;op://{vault name}/{entry name}/{item name}&amp;#34;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;You can fetch the secret reference path from 1Password:
&lt;a href="https://developer.1password.com/docs/cli/secret-references/"&gt;docs&lt;/a&gt;. Click &amp;ldquo;Copy
Secret Reference&amp;rdquo; in the corresponding entry item.&lt;/p&gt;
&lt;h2 id="second-approach"&gt;Second approach&lt;/h2&gt;
&lt;p&gt;The above is one possibility, and it works flawlessly, but there&amp;rsquo;s a second
approach that uses &lt;code&gt;op run&lt;/code&gt; alone with a secret reference that is dynamically
replaced.&lt;/p&gt;
&lt;p&gt;Create an &lt;code&gt;.env&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;TF_VAR_api_key=&amp;#34;op://{vault name}/{entry name}/{item name}&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Update the &lt;code&gt;.envrc&lt;/code&gt; file:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;#!/bin/sh
dotenv&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Now run &lt;code&gt;terraform apply&lt;/code&gt; via &lt;code&gt;op run&lt;/code&gt;, as follows:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;op run --env-file=.env -- terraform apply&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://mattedwards.org/2024/01/inject-secrets-into-terraform-environment-using-1password/"&gt;https://mattedwards.org/2024/01/inject-secrets-into-terraform-environment-using-1password/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://nshipster.com/1password-cli/"&gt;https://nshipster.com/1password-cli/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: 1Password CLI + direnv integration"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ AWS IAM resources</title><link>https://perrotta.dev/2025/03/aws-iam-resources/</link><pubDate>Thu, 13 Mar 2025 15:30:10 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/03/aws-iam-resources/</guid><description>&lt;p&gt;When working on Amazon Web Services (AWS), at some point you&amp;rsquo;ll need to fiddle
with &lt;a href="https://en.wikipedia.org/wiki/Identity_and_access_management"&gt;IAM&lt;/a&gt;
(Identity and access management).&lt;/p&gt;
&lt;p&gt;It can be daunting to navigate the massive &lt;a href="https://docs.aws.amazon.com/iam/"&gt;AWS
Documentation&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I am collecting a couple of useful resources in this post.&lt;/p&gt;
&lt;h2 id="permissions"&gt;Permissions&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://aws.permissions.cloud/usage"&gt;https://aws.permissions.cloud/usage&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The aws.permissions.cloud website uses a variety of information gathered
within the &lt;a href="https://github.com/iann0036/iam-dataset"&gt;IAM Dataset&lt;/a&gt; and exposes
that information in a clean, easy-to-read format.&lt;/p&gt;
&lt;p&gt;aws.permissions.cloud was built in order to provide an alternate,
community-driven source of truth for AWS identity.&lt;/p&gt;
&lt;p&gt;The website can be navigated using the left sidebar or by quickly looking up a
specific managed policy, IAM permission or API method in the top search bar.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;For example, search for &amp;ldquo;route53&amp;rdquo; or for &amp;ldquo;s3&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;The main goal of figuring out &lt;strong&gt;permissions&lt;/strong&gt; is to add them to a &lt;strong&gt;policy&lt;/strong&gt;.&lt;/p&gt;
&lt;h2 id="policies"&gt;Policies&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://aws.permissions.cloud/policyevaluator"&gt;https://aws.permissions.cloud/policyevaluator&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;Use the Policy Evaluator to validate your &lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_resource.html"&gt;policy
JSON&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;A policy associates permissions (actions) with resources (ARNs).&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Enter your IAM policy in the box below.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-json"&gt;{
 &amp;#34;Version&amp;#34;: &amp;#34;2012-10-17&amp;#34;,
 &amp;#34;Statement&amp;#34;: [
 {
 &amp;#34;Action&amp;#34;: [
 &amp;#34;route53:ChangeResourceRecordSets&amp;#34;
 ],
 &amp;#34;Effect&amp;#34;: &amp;#34;Allow&amp;#34;,
 &amp;#34;Resource&amp;#34;: [
 &amp;#34;arn:aws:route53:::hostedzone/01234567890123&amp;#34;,
 &amp;#34;arn:aws:route53:::hostedzone/01234567890124&amp;#34;
 ]
 }
 ]
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Each resource above represents a distinct &lt;a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/hosted-zones-working-with.html"&gt;hosted zone&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A hosted zone is a container for records, and records contain information
about how you want to route traffic for a specific domain, such as
example.com, and its subdomains (acme.example.com, zenith.example.com). A
hosted zone and the corresponding domain have the same name. There are two
types of hosted zones: public and private.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: &lt;code&gt;&amp;quot;Resource&amp;quot;&lt;/code&gt; is singular but it accepts an array of ARNs as well.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Tip&lt;/strong&gt;: Wildcards (&lt;code&gt;'*'&lt;/code&gt;) are accepted e.g. &lt;code&gt;&amp;quot;arn:aws:route53:::hostedzone/*&amp;quot;&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Another example, with S3 buckets:&lt;/p&gt;
&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-json"&gt;{
 &amp;#34;Version&amp;#34;: &amp;#34;2012-10-17&amp;#34;,
 &amp;#34;Statement&amp;#34;: [
 {
 &amp;#34;Sid&amp;#34;: &amp;#34;VisualEditor0&amp;#34;,
 &amp;#34;Effect&amp;#34;: &amp;#34;Allow&amp;#34;,
 &amp;#34;Action&amp;#34;: &amp;#34;s3:ListBucket&amp;#34;,
 &amp;#34;Resource&amp;#34;: &amp;#34;arn:aws:s3:::*&amp;#34;
 },
 {
 &amp;#34;Sid&amp;#34;: &amp;#34;VisualEditor1&amp;#34;,
 &amp;#34;Effect&amp;#34;: &amp;#34;Allow&amp;#34;,
 &amp;#34;Action&amp;#34;: [
 &amp;#34;s3:PutObject&amp;#34;,
 &amp;#34;s3:GetObject&amp;#34;
 ],
 &amp;#34;Resource&amp;#34;: &amp;#34;arn:aws:s3:::*/*&amp;#34;
 }
 ]
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;Action&lt;/code&gt; can be either a single entry or an array.&lt;/p&gt;
&lt;h3 id="testing"&gt;Testing&lt;/h3&gt;
&lt;p&gt;Test out policies and permissions with the &lt;a href="https://policysim.aws.amazon.com/"&gt;IAM Policy
Simulator&lt;/a&gt;. This service is provided by AWS
itself.
&lt;a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_testing-policies.html"&gt;Docs&lt;/a&gt;.&lt;/p&gt;
&lt;h2 id="terraform"&gt;Terraform&lt;/h2&gt;
&lt;p&gt;Terraform Registry: &lt;a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs"&gt;AWS Provider Docs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-09-17)&lt;/strong&gt;:&lt;/p&gt;
&lt;h3 id="roles"&gt;Roles&lt;/h3&gt;
&lt;p&gt;Permissions and permissions policies can be associated with roles.&lt;/p&gt;
&lt;p&gt;A role is an entity kind that can be &lt;em&gt;assumed&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Roles can have trust relationships, which are entities that can assume the role under specified conditions.&lt;/p&gt;
&lt;p&gt;For example, it&amp;rsquo;s possible to associate GitHub as a federated web identity provider (IdP) for a given role.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: AWS IAM resources"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>SAML Chrome Panel</title><link>https://perrotta.dev/2025/03/saml-chrome-panel/</link><pubDate>Wed, 12 Mar 2025 00:51:05 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/03/saml-chrome-panel/</guid><description>&lt;p&gt;&lt;a href="https://chromewebstore.google.com/detail/saml-chrome-panel/paijfdbeoenhembfhkhllainmocckace"&gt;SAML Chrome Panel&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Extends the (Chrome) Developer Tools, adding support for SAML Requests and
Responses to be displayed in the Developer Tools window&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;This is an Open Source SAML debugger for Chrome. It operates as another panel
in the Chrome Developer Tools section, which monitors the traffic in the
current active tab. This panel is trying to replicate what the Firefox version
of SAML Tracer does as there wasn&amp;rsquo;t a good enough one (or any) for Chrome at
the time of writing this.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;It is designed to display all network traffic, along with the request and
response data. If there is a SAML request or response, then it will grab the
message, format it nicely and show it to you in another tab.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Upstream: &lt;a href="https://github.com/milton-lai/saml-chrome-panel"&gt;https://github.com/milton-lai/saml-chrome-panel&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;This Chrome extension has proven useful to me at least twice.&lt;/p&gt;
&lt;p&gt;Recently I was integrating &lt;a href="https://argo-cd.readthedocs.io/en/stable/"&gt;ArgoCD&lt;/a&gt;
and &lt;a href="https://www.mongodb.com/atlas"&gt;MongoDB Atlas&lt;/a&gt; with
&lt;a href="https://www.okta.com/"&gt;Okta&lt;/a&gt;. You can do it via SAML or via OIDC.&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s always a chance of having one tiny configuration mistake, perhaps a
typo or a missing field. I found:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ArgoCD: a typo in the callback URL (&lt;code&gt;foo-foo&lt;/code&gt; instead of &lt;code&gt;foo&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;MongoDB Atlas: an &lt;code&gt;acsError&lt;/code&gt; in the response
(&lt;a href="https://www.mongodb.com/community/forums/t/mongodb-atlas-okta-integration-login-error/230897"&gt;example&lt;/a&gt;,
&lt;a href="https://www.mongodb.com/community/forums/t/sso-issue-with-idp-azure-entraid-okta-mongodb-saml/278500"&gt;example&lt;/a&gt;):
&lt;a href="https://cloud.mongodb.com/okta/hooks/acsError"&gt;https://cloud.mongodb.com/okta/hooks/acsError&lt;/a&gt;: it was a certificate error.
Instead of copying and pasting the certificate content (&lt;code&gt;------ BEGIN CERTIFICATE ------&lt;/code&gt;), upload the file directly. The
&lt;a href="https://www.mongodb.com/docs/cloud-manager/security/federated-auth-okta/"&gt;documentation&lt;/a&gt;
(item &lt;code&gt;1.h.&lt;/code&gt;) notes so. Convert it to &lt;code&gt;.pem&lt;/code&gt; prior to uploading it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: SAML Chrome Panel"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ Have I Been Pwned?</title><link>https://perrotta.dev/2025/03/have-i-been-pwned/</link><pubDate>Tue, 11 Mar 2025 16:29:34 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/03/have-i-been-pwned/</guid><description>&lt;p&gt;&lt;a href="https://haveibeenpwned.com/"&gt;Have I Been Pwned?&lt;/a&gt; by the great &lt;a href="https://www.troyhunt.com/"&gt;Troy Hunt&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Check if your email address is in a data breach&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id="individual-sign-up"&gt;Individual sign-up&lt;/h2&gt;
&lt;p&gt;Sign up and then verify your email:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You&amp;rsquo;ve just been sent a verification email, all you need to do now is confirm
your address by clicking on the link when it hits your mailbox and you&amp;rsquo;ll be
automatically notified of future pwnage. In case it doesn&amp;rsquo;t show up, check
your junk mail and if you still can&amp;rsquo;t find it, you can always repeat this
process.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The email:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You (or possibly someone else), just subscribed &lt;code&gt;{email}&lt;/code&gt; to the
notification service that will automatically let you know if your address is
caught up in a future data breach. It&amp;rsquo;s a free service and you can unsubscribe
at any time if you don&amp;rsquo;t want the notifications.&lt;/p&gt;
&lt;p&gt;Just to confirm that you&amp;rsquo;re a real person behind a real email address, click
on the link below then you&amp;rsquo;ll be automatically subscribed to new breach
notifications where this email address has been pwned.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Verification complete&lt;/p&gt;
&lt;p&gt;All done, you&amp;rsquo;ll be sent an email if this address gets pwned in future, below
is your existing exposure&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There&amp;rsquo;s a lot of lore in the &lt;a href="https://www.goodreads.com/book/show/74960566-pwned---the-collected-blog-posts"&gt;PWNED ‚Äî The Collected Blog
Posts&lt;/a&gt;
book by Troy Hunt &amp;amp; Rob Conery, which I would recommend.&lt;/p&gt;
&lt;h2 id="domain-sign-up"&gt;Domain sign-up&lt;/h2&gt;
&lt;p&gt;Furthermore, there&amp;rsquo;s also a domain search service:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Search for pwned accounts across an entire domain and receive future
notifications.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Domain search allows you to find all breached email addresses on a domain you
control via a dedicated domain search dashboard. Once verified, you will also
receive notifications via email if they appear in future breaches. Before you
can perform a domain search, you need to verify your email address and that
you control the domains you&amp;rsquo;re searching. If you cannot verify that you
control a domain, you will not be able to search for breached email addresses
on it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Upon signing up:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Welcome to the Have I Been Pwned domain search&lt;/p&gt;
&lt;p&gt;You (or possibly someone else), just began the process to access the domain
search dashboard using the email address &lt;code&gt;{email}&lt;/code&gt;. Just to confirm
that you&amp;rsquo;re a real person behind a real email address, click on the link below
which will take you to the dashboard (the link will remain valid for 60
minutes).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then you can choose a way to verify your domain:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;with a pre-defined address like &lt;code&gt;security@&lt;/code&gt; or &lt;code&gt;webmaster@&lt;/code&gt; or &lt;code&gt;postmaster@&lt;/code&gt;
or &lt;code&gt;hostmaster@&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;with a DNS TXT record&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When following the first route:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;An email containing a verification token has been sent off to the address you
chose, just copy and paste it into the text box below and you&amp;rsquo;ll be able to
perform the domain search right after that.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I was already familiar with the individual service, but only now discovered the
domain service, at work, by happenstance.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Have I Been Pwned?"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ DuckDuckGo email protection</title><link>https://perrotta.dev/2025/02/duckduckgo-email-protection/</link><pubDate>Sat, 08 Feb 2025 14:50:39 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/02/duckduckgo-email-protection/</guid><description>&lt;p&gt;One of my best discoveries this year: &lt;a href="https://duckduckgo.com/duckduckgo-help-pages/email-protection/"&gt;DuckDuckGo email
protection&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;DuckDuckGo Email Protection is a free email forwarding service that removes
multiple types of hidden email trackers and lets you create multiple unique
private email addresses on the fly. Email Protection works with your current
email account ‚Äì no need to change providers or juggle multiple inboxes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2022/01/throwaway-disposable-accounts-for-ephemeral-use-cases/"&gt;Previously&lt;/a&gt;: &lt;a href="https://10minutemail.com"&gt;https://10minutemail.com&lt;/a&gt;, &lt;a href="https://dispostable.com"&gt;https://dispostable.com&lt;/a&gt;, etc.&lt;/p&gt;
&lt;p&gt;DuckDuckGo is (IMHO) better. Why?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;First of all, you can create a memorable and fixed email, which acts as an
entrypoint. For example, &lt;code&gt;foo@duck.com&lt;/code&gt;. In principle you could keep using
this email for all new services, especially when in a hurry. Emails delivered
there get redirected to a forwarding email of your choice. Thus this
integrates with your existing setup, and there&amp;rsquo;s no need to bypass CAPTCHAs
just for the sake of reading emails, and you get to optionally keep them
archived should you want to.&lt;/li&gt;
&lt;li&gt;The added value comes from throwaway, disposable emails though: DuckDuckGo
allows you to generate one-off emails in the form
&lt;code&gt;word1-word2-word3@duck.com&lt;/code&gt;. You can create as many of these as you want,
with a single click. These also get redirected to the previously specified
forwarding email address.&lt;/li&gt;
&lt;li&gt;The emails are scrubbed so to remove tracking and analytics. You get to know
whether there were any trackers in the original email and, if yes, which ones
were removed.&lt;/li&gt;
&lt;li&gt;You can disassociate these emails at any time. It&amp;rsquo;s very easy to do so, by
clicking a link that is embedded into each received email.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;@duck.com&lt;/code&gt; tends to be more reputable than other email services. Which means,
chances are, it is less likely to be blocked. I ran into roadblocks many times
when trying to use &lt;code&gt;@dispostable.com&lt;/code&gt; to sign up with throwaway accounts.&lt;/li&gt;
&lt;li&gt;It&amp;rsquo;s completely free! A comparable service is &lt;a href="https://support.apple.com/en-ca/guide/icloud/mm9d9012c9e8/icloud"&gt;iCloud+ Hide My
Email&lt;/a&gt; by
Apple, but it&amp;rsquo;s not free. Also, the Duck emails are manageable from the web,
whereas iCloud+ can only be managed from Apple devices (as far as I know).&lt;/li&gt;
&lt;li&gt;It integrates seamlessly with sign-up flows if you use its &lt;a href="https://duckduckgo.com/duckduckgo-help-pages/desktop/chrome/"&gt;Chrome
extension&lt;/a&gt;.
Similar to how password managers typically integrate with sign-up forms.&lt;/li&gt;
&lt;li&gt;The DuckDuckGo mobile app also supports it.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Ever since adopting this workflow I find it&amp;rsquo;s much easier to sign up to try out
new services and/or websites, without having to use my personal email and
worrying whether it would be possible to delete my account later on.&lt;/p&gt;
&lt;p&gt;Furthermore it&amp;rsquo;s very easy to organize these emails in my client, as all I have
to do is match emails coming from &lt;code&gt;@duck.com&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;And I don&amp;rsquo;t have to worry about &amp;ldquo;wasting&amp;rdquo; my personal domain email address space
with catch-all sign-ups (e.g. &lt;code&gt;foo at perrotta . dev&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;The only downside is that it&amp;rsquo;s not possible to &lt;em&gt;send&lt;/em&gt; emails from these
addresses. Therefore, it&amp;rsquo;s not an universal solution.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-05-10)&lt;/strong&gt;: Alternative: &lt;a href="https://simplelogin.io/"&gt;Simple Login&lt;/a&gt; by Proton.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: DuckDuckGo email protection"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Cloudflare DNS for families</title><link>https://perrotta.dev/2025/01/cloudflare-dns-for-families/</link><pubDate>Tue, 21 Jan 2025 01:42:59 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/01/cloudflare-dns-for-families/</guid><description>&lt;p&gt;&lt;a href="https://developers.cloudflare.com/1.1.1.1/ip-addresses/"&gt;Cloudflare&lt;/a&gt; has one of
the coolest DNS IP addresses on the planet: &lt;code&gt;1.1.1.1&lt;/code&gt; (primary) and &lt;code&gt;1.0.0.1&lt;/code&gt;
(secondary).&lt;/p&gt;
&lt;p&gt;Furthermore they have another class of DNS servers &lt;a href="https://blog.cloudflare.com/introducing-1-1-1-1-for-families/"&gt;&amp;ldquo;for
families&amp;rdquo;&lt;/a&gt;,
intended to block malware and/or adult content.&lt;/p&gt;
&lt;p&gt;They are also quite memorable:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Malware: &lt;code&gt;1.1.1.2&lt;/code&gt;, &lt;code&gt;1.0.0.2&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Adult content: &lt;code&gt;1.1.1.3&lt;/code&gt;, &lt;code&gt;1.0.0.3&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Cloudflare DNS for families"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Quick and dirty random password generator</title><link>https://perrotta.dev/2025/01/quick-and-dirty-random-password-generator/</link><pubDate>Thu, 09 Jan 2025 16:41:15 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/01/quick-and-dirty-random-password-generator/</guid><description>&lt;p&gt;On Linux / macOS, use &lt;code&gt;/dev/urandom&lt;/code&gt;, with a &lt;code&gt;tr&lt;/code&gt; pass-through filter:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% tr -dc &amp;#39;A-Za-z0-9&amp;#39; &amp;lt; /dev/urandom | head -c 20 &amp;amp;&amp;amp; echo
BLH1gVgdukdmTcvopOuC&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;In the example above only alphanumeric characters are allowed.&lt;/p&gt;
&lt;p&gt;There are other popular ways to do so:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dice (&lt;a href="https://diceware.dmuth.org/"&gt;Douglas Muth&lt;/a&gt;,
&lt;a href="https://www.eff.org/dice"&gt;EFF&lt;/a&gt;).&lt;/li&gt;
&lt;li&gt;&lt;a href="https://pwgen.sourceforge.net/"&gt;&lt;code&gt;pwgen&lt;/code&gt;&lt;/a&gt; (via &lt;code&gt;brew home pwgen&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Quick and dirty random password generator"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>nginx: add basic auth</title><link>https://perrotta.dev/2025/01/nginx-add-basic-auth/</link><pubDate>Tue, 07 Jan 2025 03:28:02 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2025/01/nginx-add-basic-auth/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: You want to expose a HTTPS service from your cloud VPS to
the public Internet. You do not wish to use a VPN (e.g.
&lt;a href="https://tailscale.com/"&gt;tailscale&lt;/a&gt;) to do so ‚Äì which is a great way to address
this, but it&amp;rsquo;s out of scope in this particular instance. How to proceed?&lt;/p&gt;
&lt;p&gt;Here&amp;rsquo;s a simple yet effective way: use / configure &lt;a href="https://nginx.org/"&gt;nginx&lt;/a&gt;
as a reverse proxy.&lt;/p&gt;
&lt;p&gt;Then add &lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Authentication"&gt;HTTP basic
auth&lt;/a&gt; to it:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% doas htpasswd -c /etc/nginx/.htpasswd myuser&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The command will prompt for a password.&lt;/p&gt;
&lt;p&gt;Once it&amp;rsquo;s set, add two lines to the corresponding &lt;code&gt;server {}&lt;/code&gt; block in your
nginx config:&lt;/p&gt;
&lt;div class="codeblock" data-lang="nginxconf"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;nginxconf&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-nginxconf"&gt;server {
[...]
 auth_basic &amp;#34;Restricted Access&amp;#34;;
 auth_basic_user_file /etc/nginx/.htpasswd;
[...]
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;And finally: run &lt;code&gt;nginx -s reload&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Now, whenever you navigate to that host, you&amp;rsquo;ll be prompted to enter the basic
HTTP auth creds above.&lt;/p&gt;
&lt;p&gt;The beauty of this approach is that it works for any HTTPS server, as it is
service agnostic.&lt;/p&gt;
&lt;p&gt;The next level would be to integrate an SSO solution such as
&lt;a href="https://goauthentik.io/"&gt;Authentik&lt;/a&gt;, however it&amp;rsquo;s quite more complex.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: nginx: add basic auth"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>iOS lockdown mode</title><link>https://perrotta.dev/2025/01/ios-lockdown-mode/</link><pubDate>Sat, 04 Jan 2025 23:58:11 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2025/01/ios-lockdown-mode/</guid><description>&lt;p&gt;&lt;a href="https://www.dedoimedo.com/computers/iphone-lockdown-mode.html"&gt;dedoimedo&lt;/a&gt; makes
me realize that the iOS lockdown mode is actually quite usable, even for us
normies:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For a while now, I&amp;rsquo;ve been hearing about this tool. Mostly in regard to
high-profile zero-day, zero-click, hands-free, security vulnerabilities in
iPhones and subsequent hacking of said devices by nation-state actors. Sounds
blockbustery, which piqued my interest. I am usually rather disdainful of
mainstream media reporting of tech affairs, but that does not mean there isn&amp;rsquo;t
something genuinely cool behind flashy, scary headlines. And so I decided to
test the Lockdown Mode.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;What are its effects?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Specifically, most attachments are blocked in Messages, websites that use
JavaScript engines that run Just-in-Time (JIT) compilers or use remote fonts
will not render their pages correctly, various app invitations and calls are
blocked from people you haven&amp;rsquo;t approved beforehand, location information for
shared photos is excluded, Wi-Fi connectivity to insecure networks is limited,
and so on.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Aren&amp;rsquo;t these all sensible defaults anyway?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Pretty much everything in the list above makes absolute sense. None of the
&amp;ldquo;restricted&amp;rdquo; features are actually important or desired. Think about it. Calls
from people you don&amp;rsquo;t know? Check! Photo location blocking? Check! Web pages
with pointless remote fonts? Double check! Sounds like an Internet reset,
going back to 2010, when the computing world was nicer, saner, cleaner!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Enabling it is trivial, the prompts are perhaps a bit scarier than necessary
though:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You get a whole bunch of explanations and warnings. Confirm. Reboot. The
iPhone will load without any visible signs that it&amp;rsquo;s actually running in a
&amp;ldquo;restricted&amp;rdquo; mode. Now. Launch Safari, and you will see a notification
displayed below the address bar. This is the first indication that the phone
is using the Lockdown Mode. But that does not mean you will be affected. Far
from it. I spent quite some time browsing, and I didn&amp;rsquo;t notice any website not
working correctly. Then again, the sites I go to are normal, sane sites, with
no sensory overload.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Initially Logseq and Obsidian would not properly work: they didn&amp;rsquo;t seem to be
able to read files from iCloud. I had to explicitly whitelist them in lockdown
mode settings. All other apps worked just fine.&lt;/p&gt;
&lt;p&gt;When web browsing with Safari I didn&amp;rsquo;t find any issue (so far) in the websites I
normally surf. The only noticeable UI difference is that, as web fonts are
blocked, the visual identity of websites are gone&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/01/ios-lockdown-mode/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;This is not necessarily a negative point: blocking web fonts has the positive
side effect of loading less remote data / reducing bandwidth.&lt;/p&gt;
&lt;p&gt;Furthermore, by making websites look more generic, perhaps that doubles-down as
a feature to make them less appealing / interesting, akin to using a
software filter to make your phone display everything in black-and-white; we&amp;rsquo;re
all spending a lot of screen time after all.&lt;/p&gt;
&lt;p&gt;I am curious how long it will take until I run into some limitation and/or
strong annoyance from using lockdown mode. If that doesn&amp;rsquo;t ever happen though,
perhaps it&amp;rsquo;s a good idea to stick to it.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Ironically, not mine, as I &lt;a href="https://perrotta.dev/2022/02/website-fonts-just-use-the-system-font-stack/"&gt;don&amp;rsquo;t&lt;/a&gt; use any custom
fonts in this blog.&amp;#160;&lt;a href="https://perrotta.dev/2025/01/ios-lockdown-mode/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: iOS lockdown mode"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Pin all github actions</title><link>https://perrotta.dev/2024/12/pin-all-github-actions/</link><pubDate>Sat, 28 Dec 2024 20:49:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pre-commit</category><category>security</category><guid>https://perrotta.dev/2024/12/pin-all-github-actions/</guid><description>&lt;p&gt;&lt;a href="https://cedwards.xyz/github-actions-are-an-impending-security-disaster/"&gt;via Connor Edwards&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Since git tags can be moved arbitrarily by the author, there&amp;rsquo;s nothing stopping them going rogue and changing the Action to be malicious at any time. The author could change the code to exfiltrate the repository itself, the GITHUB_TOKEN (which in many cases can have more power than it should), or other CI/CD secrets.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Hence, bad:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;uses: actions/checkout@v4&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Good:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;uses: actions/checkout@11bd71901bbe5b1630ceea73d27597364c9af683 # v4&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;I find an effective way to address and enforce this practice is via &lt;a href="https://pre-commit.com/"&gt;pre-commit&lt;/a&gt;:&lt;/p&gt;
&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-yaml"&gt;- repo: https://github.com/lalten/check-gha-pinning
 rev: v1.2.0 # or whatever is the latest version
 hooks:
 - id: check-gha-pinning&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Try this to check whether there are any existing violations in your repositories:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% pre-commit try-repo https://github.com/lalten/check-gha-pinning --all-files&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;I had some in my blog:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;GitHub Actions Pinning...................................................Failed
- hook id: check-gha-pinning
- exit code: 1

.github/workflows/gh-pages.yml:22: peaceiris/actions-hugo@v3 is not pinned to commit (should be e3b661c523413d13d642651a5ba5fc0d2b344c0d # v3)
.github/workflows/gh-pages.yml:27: extractions/setup-just@v2 is not pinned to commit (should be dd310ad5a97d8e7b41793f8ef055398d51ad4de6 # v2.0.0)
.github/workflows/gh-pages.yml:33: peaceiris/actions-gh-pages@v4 is not pinned to commit (should be e9c66a37f080288a11235e32cbe2dc5fb3a679cc # v4)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;They are now fixed.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Pin all github actions"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pre-commit/"&gt;#pre-commit&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>‚òÖ Update DNS NS servers from Porkbun to Cloudflare</title><link>https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/</link><pubDate>Fri, 27 Dec 2024 22:45:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/</guid><description>&lt;p&gt;&lt;a href="porkbun.com"&gt;Porkbun&lt;/a&gt; is my registrar of choice. It is quite decent but alas it
&lt;a href="https://kb.porkbun.com/article/10-how-to-set-up-email-forwarding-service"&gt;does
not&lt;/a&gt;
support wildcard or catch-all emails, as per their own docs.&lt;/p&gt;
&lt;p&gt;Cloudflare, on the other hand,
&lt;a href="https://community.cloudflare.com/t/creating-an-email-catchall/646357"&gt;does&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: How to migrate from Porkbun to Cloudflare?&lt;/p&gt;
&lt;p&gt;To be more precise: I&amp;rsquo;d still like to keep Porkbun as my registrar. They are
quite solid and I am very content with them. Cloudflare is also very solid but,
for now, I do not intend to switch my registrar to it.&lt;/p&gt;
&lt;p&gt;Therefore the only transfer that should happen is the DNS management (DNS
server), via the authoritative nameservers (NS) setting.&lt;/p&gt;
&lt;p&gt;It turns out both providers have excellent documentation on this process:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Porkbun&lt;/strong&gt;: &lt;a href="https://kb.porkbun.com/article/22-how-to-change-your-nameservers"&gt;https://kb.porkbun.com/article/22-how-to-change-your-nameservers&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloudflare&lt;/strong&gt;: &lt;a href="https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/"&gt;https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Upon creating an account on Cloudflare, I imported my site and its existing DNS
records by using their &lt;a href="https://developers.cloudflare.com/dns/zone-setups/reference/dns-quick-scan/"&gt;records quick scan
tool&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Since the DNS records quick scan is based on this predefined list of commonly
used record types and names, and is not tailored to the specific zone you are
adding to Cloudflare, there can be cases where not all records are picked up.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Three DNS records were not automatically detected (two A records and one TXT
record)&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. I just added them manually. I chose to keep the records in Porkbun
intact in case I decide to revert back to them in the future.&lt;/p&gt;
&lt;p&gt;For starters, I chose to &lt;a href="https://developers.cloudflare.com/fundamentals/concepts/how-cloudflare-works/"&gt;disable
proxying&lt;/a&gt;
via Cloudflare. It&amp;rsquo;s quite interesting though, and it&amp;rsquo;s a setting I would
consider to enable at some point.&lt;/p&gt;
&lt;p&gt;From Porkbun, I had to update my &lt;a href="https://kb.porkbun.com/article/63-how-to-switch-to-porkbuns-nameservers"&gt;NS
entries&lt;/a&gt;&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; from:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;curitiba.ns.porkbun.com
fortaleza.ns.porkbun.com
maceio.ns.porkbun.com
salvador.ns.porkbun.com&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://blog.cloudflare.com/whats-the-story-behind-the-names-of-cloudflares-name-servers/"&gt;To&lt;/a&gt;:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;anirban.ns.cloudflare.com
celine.ns.cloudflare.com&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;During the transfer, it&amp;rsquo;s
&lt;a href="https://developers.cloudflare.com/dns/dnssec/"&gt;important&lt;/a&gt; to delete
&lt;a href="https://developers.cloudflare.com/dns/zone-setups/full-setup/setup/#before-you-begin"&gt;DNSSEC&lt;/a&gt;
records at Porkbun:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;If you are onboarding an existing domain to Cloudflare, make sure DNSSEC is
disabled at your registrar (where you purchased your domain name). Otherwise,
your domain will experience connectivity errors when you change your
nameservers.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Then I can keep an eye on
&lt;a href="https://www.whatsmydns.net/#NS/perrotta.dev"&gt;WhatsMyDNS&lt;/a&gt; to monitor the NS
propagation. It may take up to 48 hours to be fully rolled out.&lt;/p&gt;
&lt;p&gt;Or via CLI:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% dig perrotta.dev &amp;#43;trace @1.1.1.1 | grep perrotta.dev
; &amp;lt;&amp;lt;&amp;gt;&amp;gt; DiG 9.10.6 &amp;lt;&amp;lt;&amp;gt;&amp;gt; perrotta.dev &amp;#43;trace @1.1.1.1
perrotta.dev.		10800	IN	NS	anirban.ns.cloudflare.com.
perrotta.dev.		10800	IN	NS	celine.ns.cloudflare.com.
perrotta.dev.		300	IN	A	185.199.110.153
perrotta.dev.		300	IN	A	185.199.111.153
perrotta.dev.		300	IN	A	185.199.108.153
perrotta.dev.		300	IN	A	185.199.109.153&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Just a few minutes after the update I could already see some nameservers picking
up the changes:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Paris, France
France Telecom
id 22228
opcode QUERY
rcode NOERROR
flags QR RD RA
;QUESTION
perrotta.dev. IN NS
;ANSWER
perrotta.dev. 10800 IN NS anirban.ns.cloudflare.com.
perrotta.dev. 10800 IN NS celine.ns.cloudflare.com.
;AUTHORITY
;ADDITIONAL&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Seoul, South Korea
KT
id 14115
opcode QUERY
rcode NOERROR
flags QR RD RA
;QUESTION
perrotta.dev. IN NS
;ANSWER
perrotta.dev. 10800 IN NS anirban.ns.cloudflare.com.
perrotta.dev. 10800 IN NS celine.ns.cloudflare.com.
;AUTHORITY
;ADDITIONAL
anirban.ns.cloudflare.com. 50728 IN A 108.162.193.64
anirban.ns.cloudflare.com. 50728 IN A 172.64.33.64
anirban.ns.cloudflare.com. 50728 IN A 173.245.59.64
anirban.ns.cloudflare.com. 50728 IN AAAA 2606:4700:58::adf5:3b40
anirban.ns.cloudflare.com. 50728 IN AAAA 2803:f800:50::6ca2:c140
anirban.ns.cloudflare.com. 50728 IN AAAA 2a06:98c1:50::ac40:2140
celine.ns.cloudflare.com. 137333 IN A 108.162.194.98
celine.ns.cloudflare.com. 137333 IN A 162.159.38.98
celine.ns.cloudflare.com. 137333 IN A 172.64.34.98
celine.ns.cloudflare.com. 702 IN AAAA 2606:4700:50::a29f:2662
celine.ns.cloudflare.com. 702 IN AAAA 2803:f800:50::6ca2:c262
celine.ns.cloudflare.com. 702 IN AAAA 2a06:98c1:50::ac40:2262&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Once the transfer is done, go to your Cloudflare dashboard. You should see the
following message:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Great news! Cloudflare is now protecting your site&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I also got an email from Cloudflare confirming it:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;perrotta.dev is now active on a Cloudflare Free plan&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now it&amp;rsquo;s time to &lt;a href="https://developers.cloudflare.com/dns/dnssec/"&gt;re-enable
DNSSEC&lt;/a&gt;. Porkbun instructions are
in &lt;a href="https://kb.porkbun.com/article/93-how-to-install-dnssec"&gt;the Porkbun DNSSEC
guide&lt;/a&gt;: do not fill out
&lt;strong&gt;keyData&lt;/strong&gt;. It&amp;rsquo;s possible to verify it was properly configured via &lt;a href="https://dnssec-analyzer.verisignlabs.com/perrotta.dev"&gt;DNSSEC
Analyzer&lt;/a&gt; by VeriSign
Labs, wherein all checkboxes should be green. Furthermore, from Cloudflare,
verify that &lt;code&gt;DNS &amp;gt; Settings &amp;gt; DNSSEC&lt;/code&gt; is properly configured.&lt;/p&gt;
&lt;p&gt;If you choose to &lt;a href="https://developers.cloudflare.com/cloudflare-one/policies/gateway/proxy/"&gt;proxy your traffic through
Cloudflare&lt;/a&gt;,
you can verify whether it&amp;rsquo;s hiding your origin IP address with &lt;a href="https://ping.eu"&gt;https://ping.eu&lt;/a&gt;.
Or, alternatively, &lt;code&gt;ping &amp;lt;hostname&amp;gt;&lt;/code&gt; from the terminal. Beware of DNS caching.
It seems a no-brainer and sensible idea to enable it for your VPS instances&lt;sup id="fnref:3"&gt;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;. I
would not enable it for &lt;a href="https://community.cloudflare.com/t/github-pages-require-disabling-cfs-http-proxy/147401/21"&gt;Github
Pages&lt;/a&gt;
though.&lt;/p&gt;
&lt;p&gt;Up to this point everything was a no-op in terms of feature parity. The optional
Cloudflare goodies (e.g. proxying, blocking AI bots, caching, etc.) are just
cherries on top.&lt;/p&gt;
&lt;p&gt;The most exciting part comes now: configuring email and MX records to use
Cloudflare&amp;rsquo;s, with the final goal of supporting catch-all / wildcard emails.&lt;/p&gt;
&lt;h2 id="email"&gt;Email&lt;/h2&gt;
&lt;p&gt;Follow the steps at
&lt;a href="https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/"&gt;https://developers.cloudflare.com/dns/manage-dns-records/how-to/email-records/&lt;/a&gt;
to configure MX, SPF and DMARC. It&amp;rsquo;s mostly a point-and-click process.
Cloudflare makes it easy and boring‚Ñ¢.&lt;/p&gt;
&lt;p&gt;Once the MX record is configured, verify it&amp;rsquo;s working via &lt;a href="https://www.whatsmydns.net/#MX/perrotta.dev"&gt;WhatsMyDNS&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Verify DMARC is working via &lt;a href="https://mxtoolbox.com/SuperTool.aspx?action=dmarc%3aperrotta.dev&amp;amp;run=toolpage"&gt;MX
Toolbox&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Then &lt;a href="https://blog.cloudflare.com/introducing-email-routing/#cloudflare-email-routing"&gt;create custom routing
rules&lt;/a&gt;.
If desired, add a catch-all rule.&lt;/p&gt;
&lt;p&gt;Once it is working test it by sending an email to yourself. And we&amp;rsquo;re done!&lt;/p&gt;
&lt;p&gt;More references on DKIM and DMARC:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;Porkbun&lt;/strong&gt;: &lt;a href="https://kb.porkbun.com/article/179-how-to-turn-on-dkim-dmarc"&gt;https://kb.porkbun.com/article/179-how-to-turn-on-dkim-dmarc&lt;/a&gt; (for
comparison only)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Cloudflare&lt;/strong&gt;: &lt;a href="https://www.cloudflare.com/en-ca/learning/email-security/dmarc-dkim-spf/"&gt;https://www.cloudflare.com/en-ca/learning/email-security/dmarc-dkim-spf/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://developers.cloudflare.com/learning-paths/get-started-free/"&gt;https://developers.cloudflare.com/learning-paths/get-started-free/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;The A records were subdomains of my domain, and the TXT record was the
github pages site / domain verification.&amp;#160;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;&lt;a href="https://www.reddit.com/r/PorkBun/comments/170d6ve/unimportant_nameserver_naming_question/"&gt;Fun
fact&lt;/a&gt;:
The nameservers are named after Brazilian cities: &amp;ldquo;our CTO is a big fan of
Brazil&amp;rdquo;. Huh.&amp;#160;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;However it didn&amp;rsquo;t work for my instances out-of-the-box. That&amp;rsquo;s a problem
for another day: &lt;code&gt;ERR_TOO_MANY_REDIRECTS&lt;/code&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2024/12/update-dns-ns-servers-from-porkbun-to-cloudflare/#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Update DNS NS servers from Porkbun to Cloudflare"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Diceware passphrases</title><link>https://perrotta.dev/2024/09/diceware-passphrases/</link><pubDate>Mon, 09 Sep 2024 23:10:57 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2024/09/diceware-passphrases/</guid><description>&lt;p&gt;I wanted to create a new secure passphrase for my WLAN (Wi-Fi).&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s always an option to use the password generator built into my password
manager, however I wanted to take this opportunity to employ &lt;em&gt;Diceware&lt;/em&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Diceware Password Generator
Generate high-entropy passwords the easy way!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;The original source has the best explanation: &lt;a href="https://diceware.dmuth.org/"&gt;https://diceware.dmuth.org/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Or you could read &lt;a href="https://en.wikipedia.org/wiki/Diceware"&gt;Wikipedia&lt;/a&gt; as well.&lt;/p&gt;
&lt;p&gt;For example, for this post:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ScratchObscureTrendHumiliate&lt;/p&gt;
&lt;p&gt;Number of possible passwords:
3 quadrillion&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Good (and memorable!) enough for me.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Diceware passphrases"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Disallow AI scraping</title><link>https://perrotta.dev/2024/08/disallow-ai-scraping/</link><pubDate>Thu, 01 Aug 2024 00:54:55 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>privacy</category><category>security</category><guid>https://perrotta.dev/2024/08/disallow-ai-scraping/</guid><description>&lt;p&gt;Although there&amp;rsquo;s never a guarantee, you can attempt to disallow &amp;ldquo;AI&amp;rdquo; from
scraping the posts in your blog, in the same spirit of &amp;ldquo;DNT ‚Äî Do Not Track&amp;rdquo; in
modern web browsers.&lt;/p&gt;
&lt;p&gt;If you have control over your
&lt;a href="https://perrotta.dev/robots.txt"&gt;&lt;code&gt;robots.txt&lt;/code&gt;&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2024/08/disallow-ai-scraping/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;,
add something like the following to it:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;User-agent: GPTBot
Disallow: /

User-agent: ChatGPT-User
Disallow: /

User-agent: CCBot
Disallow: /

User-agent: Google-Extended
Disallow: /

User-agent: anthropic-ai
Disallow: /

User-agent: Claude-Web
Disallow: /

User-agent: ClaudeBot
Disallow: /

User-agent: cohere-ai
Disallow: /

User-agent: PerplexityBot
Disallow: /

User-agent: FacebookBot
Disallow: /

# Default rule
User-agent: *
Disallow:&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The list above is non-exhaustive and will not be kept up-to-date, it&amp;rsquo;s just
meant as a reference and/or starting point.&lt;/p&gt;
&lt;p&gt;You could always use Gen AI itself to help you populate it, credits go to
&lt;a href="https://grubz.blog/ai-scrapers-post/"&gt;https://grubz.blog/ai-scrapers-post/&lt;/a&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;You &lt;em&gt;really&lt;/em&gt; should.&amp;#160;&lt;a href="https://perrotta.dev/2024/08/disallow-ai-scraping/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Disallow AI scraping"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Bcrypt-hash a password</title><link>https://perrotta.dev/2024/06/bcrypt-hash-a-password/</link><pubDate>Thu, 06 Jun 2024 13:35:05 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2024/06/bcrypt-hash-a-password/</guid><description>&lt;p&gt;Given the password &lt;code&gt;correct horse battery staple&lt;/code&gt;, we would like to bcrypt-hash
it.&lt;/p&gt;
&lt;figure&gt;&lt;a href="https://xkcd.com/936/"&gt;&lt;img src="https://imgs.xkcd.com/comics/password_strength.png"
 alt="Through 20 years of effort, we&amp;#39;ve successfully trained everyone to use passwords that are hard for humans to remember, but easy for computers to guess."&gt;&lt;/a&gt;&lt;figcaption&gt;
 &lt;p&gt;XKCD Courtesy of Randall Munroe&lt;/p&gt;
 &lt;/figcaption&gt;
&lt;/figure&gt;

&lt;p&gt;Here&amp;rsquo;s one way to do so via the command line:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;$ htpasswd -nbBC 10 &amp;#34;&amp;#34; &amp;#39;correct horse battery staple&amp;#39; | tr -d &amp;#39;:\n&amp;#39; | sed &amp;#39;s/$2y/$2a/&amp;#39;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;which yields:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;$2a$10$HKSHfLu4l7TvOmnLkhUngu2U1pJUUw7hEU0LE1iN84S09fJsZowHm&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;You could verify it matches e.g. via &lt;a href="https://bcrypt-generator.com/"&gt;https://bcrypt-generator.com/&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Context&lt;/strong&gt;: &lt;a href="https://argo-cd.readthedocs.io/en/stable/"&gt;ArgoCD&lt;/a&gt; expects a
bcrypt-hashed password in its config file.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Bcrypt-hash a password"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Pritunl log in via CLI</title><link>https://perrotta.dev/2024/05/pritunl-log-in-via-cli/</link><pubDate>Tue, 07 May 2024 16:03:27 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2024/05/pritunl-log-in-via-cli/</guid><description>&lt;p&gt;&lt;a href="https://pritunl.com/"&gt;Pritunl&lt;/a&gt; is an Enterprise Distributed OpenVPN server.&lt;/p&gt;
&lt;p&gt;In order to run its client on macOS, an &lt;code&gt;.app&lt;/code&gt; is provided. However, using it to
log in every day is quite tedious.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s automate it so that we can connect to the VPN with a single command.&lt;/p&gt;
&lt;p&gt;In order to fetch the credentials in this example in a secure manner, we&amp;rsquo;ll be
using 1password. &lt;a href="https://www.passwordstore.org/"&gt;&lt;code&gt;pass&lt;/code&gt;&lt;/a&gt; would have worked just
as fine.&lt;/p&gt;
&lt;p&gt;First, configure Pritunl via its app UI, creating a profile for your corp
credentials.&lt;/p&gt;
&lt;p&gt;Then figure out what the profile ID you just created is:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;profile_id=$(/Applications/Pritunl.app/Contents/Resources/pritunl-client list --json | jq -r &amp;#39;.[0].id&amp;#39;)&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Now, create an entry in 1Password for your Pritunl credentials associated with
the profile above.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s use the &lt;code&gt;op&lt;/code&gt; official CLI tool from 1Password to fetch the password and
the OTP (one-time password) for the &amp;ldquo;Pritunl (VPN)&amp;rdquo; entry (change it
accordingly).&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;op_id=&amp;#34;$(op item get &amp;#39;Pritunl (VPN)&amp;#39; --format json | jq -r &amp;#39;.id&amp;#39;)&amp;#34;
password=&amp;#34;$(op read &amp;#34;op://private/$op_id/password&amp;#34;)&amp;#34;
otp=&amp;#34;$(op item get &amp;#34;$op_id&amp;#34; --totp)&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Now we can use the &lt;code&gt;pritunl-client&lt;/code&gt; to log in programmatically:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;pritunl-client start &amp;#34;$profile_id&amp;#34; --password &amp;#34;$password$otp&amp;#34;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then verify it has indeed connected:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;pritunl-client list&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;The trick is that it accepts the concatenation of the password with the OTP as
the password. There&amp;rsquo;s not a separate &lt;code&gt;--otp&lt;/code&gt; flag.&lt;/p&gt;
&lt;p&gt;Putting everything together, we can create a function for our favorite shell:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;# Log into corp VPN
pritunl_login() {
	local profile_id=$(/Applications/Pritunl.app/Contents/Resources/pritunl-client list --json | jq -r &amp;#39;.[0].id&amp;#39;)

	local op_id=&amp;#34;$(op item get &amp;#39;Pritunl (VPN)&amp;#39; --format json | jq -r &amp;#39;.id&amp;#39;)&amp;#34;
	local password=&amp;#34;$(op read &amp;#34;op://private/$op_id/password&amp;#34;)&amp;#34;
	local otp=&amp;#34;$(op item get &amp;#34;$op_id&amp;#34; --totp)&amp;#34;

	pritunl-client start &amp;#34;$profile_id&amp;#34; --password &amp;#34;$password$otp&amp;#34;
	pritunl-client list
}&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Pritunl log in via CLI"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Be aware that your public SSH keys can reveal your identity</title><link>https://perrotta.dev/2024/05/be-aware-that-your-public-ssh-keys-can-reveal-your-identity/</link><pubDate>Fri, 03 May 2024 16:46:28 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>security</category><category>ssh</category><guid>https://perrotta.dev/2024/05/be-aware-that-your-public-ssh-keys-can-reveal-your-identity/</guid><description>&lt;p&gt;If you have a GitHub account configured with SSH, your public keys are available
at &lt;code&gt;https://github.com/$USERNAME.keys&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;For example, mine: &lt;a href="https://github.com/thiagowfx.keys"&gt;https://github.com/thiagowfx.keys&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;And then let&amp;rsquo;s say you also use your full name on GitHub.&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;% ssh whoami.filippo.io
The authenticity of host &amp;#39;whoami.filippo.io (2a09:8280:1::a:5d6)&amp;#39; can&amp;#39;t be established.
ED25519 key fingerprint is SHA256:qGAqPqtlvFBCt4LfMME3IgJqZWlcrlBMxNmGjhLVYzY.
This key is not known by any other names.
Are you sure you want to continue connecting (yes/no/[fingerprint])? yes
Warning: Permanently added &amp;#39;whoami.filippo.io&amp;#39; (ED25519) to the list of known hosts.

 &amp;#43;---------------------------------------------------------------------&amp;#43;
 | |
 | _o/ Hello Thiago Perrotta!
 | |
 | |
 | Did you know that ssh sends all your public keys to any server |
 | it tries to authenticate to? |
 | |
 | We matched them to the keys of your GitHub account, |
 | @thiagowfx, which are available via the GraphQL API
 | and at https://github.com/thiagowfx.keys
 | |
 | -- Filippo (https://filippo.io) |
 | |
 | |
 | P.S. The source of this server is at |
 | https://github.com/FiloSottile/whoami.filippo.io |
 | |
 &amp;#43;---------------------------------------------------------------------&amp;#43;

Shared connection to whoami.filippo.io closed.&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then be careful when connecting to random public ssh servers when you have an
intent to be anonymous.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s possible to &amp;ldquo;hide&amp;rdquo; yourself by either setting the &lt;code&gt;IdentitiesOnly=yes&lt;/code&gt;
option, or by removing all your local ssh keys altogether, even if only
temporarily.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Be aware that your public SSH keys can reveal your identity"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/ssh/"&gt;#ssh&lt;/a&gt;&lt;/p&gt;</description></item><item><title>macOS: sudo with touch ID: survive upgrades</title><link>https://perrotta.dev/2023/12/macos-sudo-with-touch-id-survive-upgrades/</link><pubDate>Mon, 04 Dec 2023 22:40:21 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><guid>https://perrotta.dev/2023/12/macos-sudo-with-touch-id-survive-upgrades/</guid><description>&lt;p&gt;Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.&lt;/p&gt;
&lt;p&gt;It is also possible to use it for &lt;code&gt;sudo&lt;/code&gt; authentication via &lt;a href="https://en.wikipedia.org/wiki/Pluggable_authentication_module"&gt;PAM&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This was previously covered &lt;a href="https://perrotta.dev/2022/03/macos-sudo-with-touch-id/"&gt;here&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Now, with macOS Sonoma, it&amp;rsquo;s also possible to make this setting survive OS upgrades.&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% sudo cp /etc/pam.d/sudo_local{.template,}
% sudo $EDITOR /etc/pam.d/sudo_local&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Then uncomment (or add, if not existing) the following line:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;auth sufficient pam_tid.so&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;You can test it out by opening a new terminal and executing &lt;code&gt;sudo echo&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Credits: &lt;a href="https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/"&gt;https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: sudo with touch ID: survive upgrades"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>HTTPS Everywhere: So long and thanks for all the fish</title><link>https://perrotta.dev/2022/03/https-everywhere-so-long-and-thanks-for-all-the-fish/</link><pubDate>Tue, 22 Mar 2022 01:09:13 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>privacy</category><category>security</category><guid>https://perrotta.dev/2022/03/https-everywhere-so-long-and-thanks-for-all-the-fish/</guid><description>&lt;p&gt;EFF&amp;rsquo;s&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2022/03/https-everywhere-so-long-and-thanks-for-all-the-fish/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; &lt;a href="https://chrome.google.com/webstore/detail/https-everywhere/gcbommkclmclpchllfjekcdonpmejbdp"&gt;HTTPS Everywhere&lt;/a&gt; is a browser extension available for all major browsers that automatically upgrades HTTP to HTTPS on supported websites.&lt;/p&gt;
&lt;p&gt;Other than adblocking, it&amp;rsquo;s one of the first extensions I add to a fresh browser installation.&lt;/p&gt;
&lt;p&gt;Today I learned it is apparently not needed anymore. Both Google Chrome and Firefox have settings these days to perform exactly the same functionality of the extension.&lt;/p&gt;
&lt;p&gt;In Google Chrome do: &lt;a href="https://perrotta.dev/2022/03/https-everywhere-so-long-and-thanks-for-all-the-fish/#ZgotmplZ"&gt;chrome://settings&lt;/a&gt; -&amp;gt; Security and Privacy -&amp;gt; Advanced -&amp;gt; Toggle &amp;lsquo;Always use secure connections&amp;rsquo; on.&lt;/p&gt;
&lt;p&gt;In Firefox the option is located on Settings -&amp;gt; Privacy &amp;amp; Security -&amp;gt; HTTPs only mode.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;EFF is a big proponent and advocate for a secure web, being one of the core responsible actors for &lt;a href="http://certbot.eff.org"&gt;certbot&lt;/a&gt; and &lt;a href="https://letsencrypt.org"&gt;Let&amp;rsquo;s Encrypt&lt;/a&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2022/03/https-everywhere-so-long-and-thanks-for-all-the-fish/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: HTTPS Everywhere: So long and thanks for all the fish"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>macOS: sudo with touch ID</title><link>https://perrotta.dev/2022/03/macos-sudo-with-touch-id/</link><pubDate>Mon, 21 Mar 2022 02:13:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>security</category><guid>https://perrotta.dev/2022/03/macos-sudo-with-touch-id/</guid><description>&lt;p&gt;Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.&lt;/p&gt;
&lt;p&gt;It is also possible to use it for &lt;code&gt;sudo&lt;/code&gt; authentication via &lt;a href="https://en.wikipedia.org/wiki/Pluggable_authentication_module"&gt;PAM&lt;/a&gt;:&lt;/p&gt;
&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-bash"&gt;% $EDITOR /etc/pam.d/sudo
# sudo: auth account password session
auth sufficient pam_tid.so # &amp;lt;== add this line
auth sufficient pam_smartcard.so
auth required pam_opendirectory.so
account required pam_permit.so
password required pam_deny.so
session required pam_permit.so&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;Once the file is saved with the added line, a command with &lt;code&gt;sudo&lt;/code&gt; will spawn the touch ID prompt. I confirmed it works on both Terminal.app and Kitty.&lt;/p&gt;
&lt;p&gt;This solution &lt;a href="https://apple.stackexchange.com/a/392407"&gt;does not&lt;/a&gt; work within &lt;code&gt;tmux&lt;/code&gt; (confirmed), and apparently within iTerm2 as well (not confirmed). A separate PAM module is needed to do so (&lt;a href="https://github.com/fabianishere/pam_reattach"&gt;&lt;code&gt;pam_reattach.so&lt;/code&gt;&lt;/a&gt;). I&amp;rsquo;d rather keep my core dependencies surface small though and not include a third party, so for now I am satisfied with the native touch ID module.&lt;/p&gt;
&lt;h2 id="references"&gt;References&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://sixcolors.com/post/2020/11/quick-tip-enable-touch-id-for-sudo/"&gt;https://sixcolors.com/post/2020/11/quick-tip-enable-touch-id-for-sudo/&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://apple.stackexchange.com/a/306324"&gt;https://apple.stackexchange.com/a/306324&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: sudo with touch ID"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item><item><title>HTTP: a few acronyms</title><link>https://perrotta.dev/2022/02/http-a-few-acronyms/</link><pubDate>Sun, 27 Feb 2022 21:48:03 -0500</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>security</category><guid>https://perrotta.dev/2022/02/http-a-few-acronyms/</guid><description>&lt;p&gt;I keep forgetting these, so I wrote a small summary for my own reference.&lt;/p&gt;
&lt;h2 id="hsts"&gt;HSTS&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/HTTP_Strict_Transport_Security"&gt;Wikipedia ‚Äî HSTS&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;HTTP Strict Transport Security (HSTS) is a policy mechanism that helps to
protect websites against man-in-the-middle attacks such as protocol downgrade
attacks and cookie hijacking. It allows web servers to declare that web
browsers (or other complying user agents) should automatically interact with
it using only HTTPS connections.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In layman&amp;rsquo;s terms: &lt;em&gt;Force HTTPS on a given domain&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://hstspreload.org/"&gt;HSTS Preload List&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This form is used to submit domains for inclusion in Chrome&amp;rsquo;s HTTP Strict
Transport Security (HSTS) preload list. This is a list of sites that are
hardcoded into Chrome as being HTTPS only.&lt;/p&gt;
&lt;p&gt;Most major browsers (Chrome, Firefox, Opera, Safari, IE 11 and Edge) also
have HSTS preload lists based on the Chrome list. (See the HSTS compatibility
matrix.)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;If you add your website to that list, major browsers will honor it and only use
HTTPS for your domain.&lt;/p&gt;
&lt;p&gt;Some &lt;a href="https://en.wikipedia.org/wiki/Top-level_domain"&gt;TLDs&lt;/a&gt; enforce HTTPS
through HSTS, some popular ones are &lt;code&gt;.app&lt;/code&gt; and &lt;code&gt;.dev&lt;/code&gt;.
&lt;a href="https://serverfault.com/q/1067229/180092"&gt;A more comprehensive list is available on ServerFault&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;HSTS&lt;/code&gt; is fire-and-forget, you&amp;rsquo;ll usually only need to worry about it once,
when configuring a SSL certificate (HTTPS) for your domain or subdomains.&lt;/p&gt;
&lt;h2 id="csp"&gt;CSP&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Content_Security_Policy"&gt;Wikipedia ‚Äî CSP&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Content Security Policy (CSP) is a computer security standard introduced to
prevent cross-site scripting (XSS), clickjacking and other code injection
attacks resulting from execution of malicious content in the trusted web page
context.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP"&gt;MDN ‚Äî CSP&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Content Security Policy (CSP) is an added layer of security that helps to
detect and mitigate certain types of attacks, including Cross-Site Scripting
(XSS) and data injection attacks. These attacks are used for everything from
data theft, to site defacement, to malware distribution.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CSP can be configured in at least two distinct ways:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Web server: return the &lt;code&gt;Content-Security-Policy&lt;/code&gt; HTTP header:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Content-Security-Policy: default-src &amp;#39;self&amp;#39;; img-src https://*; child-src &amp;#39;none&amp;#39;;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;ol start="2"&gt;
&lt;li&gt;HTML &lt;code&gt;&amp;lt;meta&amp;gt;&lt;/code&gt; tag:&lt;/li&gt;
&lt;/ol&gt;
&lt;div class="codeblock" data-lang="html"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;html&lt;/span&gt;
 &lt;/div&gt;
 &lt;pre&gt;&lt;code class="language-html"&gt;&amp;lt;meta http-equiv=&amp;#34;Content-Security-Policy&amp;#34; content=&amp;#34;default-src &amp;#39;self&amp;#39;; img-src https://*; child-src &amp;#39;none&amp;#39;;&amp;#34;&amp;gt;&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;CSP&lt;/code&gt; is something to worry about at the application level. For example,
&lt;a href="https://github.com/miniflux/v2/issues/748"&gt;miniflux&lt;/a&gt; to fetch resources
(fonts) from another domain (Google Fonts).&lt;/p&gt;
&lt;h2 id="cors"&gt;CORS&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Cross-origin_resource_sharing"&gt;Wikipedia ‚Äî CORS&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cross-origin resource sharing (CORS) is a mechanism that allows restricted
resources on a web page to be requested from another domain outside the
domain from which the first resource was served.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;CORS can be configured via web server: return the &lt;code&gt;Access-Control-Allow-Origin&lt;/code&gt; HTTP header:&lt;/p&gt;
&lt;div class="codeblock"&gt;
 &lt;pre&gt;&lt;code class="language-plaintext"&gt;Access-Control-Allow-Origin: *
Access-Control-Allow-Origin: http://example.com:8080&lt;/code&gt;&lt;/pre&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;CORS&lt;/code&gt; is something to worry about at the application level. For example,
&lt;a href="https://keep.google.com/"&gt;https://keep.google.com/&lt;/a&gt; ‚ü∑ &lt;a href="https://google.com/"&gt;https://google.com/&lt;/a&gt; cookies.&lt;/p&gt;
&lt;h2 id="csrf"&gt;CSRF&lt;/h2&gt;
&lt;p&gt;&lt;a href="https://en.wikipedia.org/wiki/Cross-site_request_forgery"&gt;Wikipedia ‚Äî CSRF&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Cross-site request forgery, also known as one-click attack or session riding
and abbreviated as CSRF (sometimes pronounced sea-surf) or XSRF, is a type of
malicious exploit of a website where unauthorized commands are submitted from
a user that the web application trusts.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;code&gt;CSRF&lt;/code&gt; is something to be aware of and to watch out for.
&lt;a href="https://owasp.org/www-community/attacks/csrf"&gt;OWASP&lt;/a&gt; has some additional
resources on it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: HTTP: a few acronyms"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/security/"&gt;#security&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>