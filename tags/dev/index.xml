<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Dev on Â¬ just serendipity ğŸ€</title><link>https://perrotta.dev/</link><description>Recent content in Dev on Â¬ just serendipity ğŸ€</description><generator>Hugo</generator><language>en-us</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>Â© 2021 - 2026 Thiago Perrotta Â·
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) Â·
a fork of [hugo Ê•â€¢á´¥â€¢Ê” bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Wed, 31 Dec 2025 02:14:52 -0300</lastBuildDate><atom:link href="https://perrotta.dev/tags/dev/index.xml" rel="self" type="application/rss+xml"/><item><title>Who watches the watchmen?</title><link>https://perrotta.dev/2025/12/who-watches-the-watchmen/</link><pubDate>Tue, 30 Dec 2025 11:02:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/who-watches-the-watchmen/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2022/01/watch-files-and-react-to-changes-during-development/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been in love with &lt;a href="https://github.com/watchexec/watchexec"&gt;&lt;code&gt;watchexec&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Recursively monitors the current directory for changes, executing the command
when a filesystem change is detected (among other event sources). By default,
watchexec uses efficient kernel-level mechanisms to watch for changes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s a modern version of &lt;a href="https://jvns.ca/blog/2020/06/28/entr/"&gt;&lt;code&gt;entr&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Its usage is very simple and easy to remember:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;watchexec &lt;span class="o"&gt;[&lt;/span&gt;--clear&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;--&lt;span class="o"&gt;]&lt;/span&gt; python main.py&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;will re-run &lt;code&gt;python main.py&lt;/code&gt; whenever it changes on disk.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--clear&lt;/code&gt; will &lt;code&gt;clear&lt;/code&gt; the screen between successive runs.&lt;/p&gt;
&lt;p&gt;Other useful invocations:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;watchexec make
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;watchexec just
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;watchexec -e html,css,js make &lt;span class="c1"&gt;# watch the given extensions for changes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;watchexec -w src make &lt;span class="c1"&gt;# watch the given directory&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There are various other useful command-line switches, its &lt;a href="https://man.archlinux.org/man/watchexec.1"&gt;man
page&lt;/a&gt; is very descriptive.&lt;/p&gt;
&lt;p&gt;Here is a practical example when iterating on &lt;a href="https://perrotta.dev/2025/12/stack/"&gt;&lt;code&gt;stack.py&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% watchexec --clear -- python stack.py
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;Running: python stack.py&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;Command was successful&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% watchexec --clear -- ty check
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;Running: ty check&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;Command was successful&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Who watches the watchmen?"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Kagi: Add LeetCode !bang</title><link>https://perrotta.dev/2025/12/kagi-add-leetcode-bang/</link><pubDate>Tue, 30 Dec 2025 10:56:00 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/kagi-add-leetcode-bang/</guid><description>&lt;p&gt;&lt;a href="https://kagi.com/"&gt;Kagi&lt;/a&gt;, a paid search engine, allows adding &lt;a href="https://duckduckgo.com/bangs"&gt;custom&lt;/a&gt; &lt;a href="https://help.kagi.com/kagi/features/bangs.html"&gt;bangs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Today we&amp;rsquo;ll add a custom bang for &lt;a href="https://leetcode.com/"&gt;LeetCode&lt;/a&gt;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Navigate to &lt;a href="https://kagi.com/settings/custom_bangs"&gt;https://kagi.com/settings/custom_bangs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Click &amp;lsquo;Add Bang&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Input:
&lt;ul&gt;
&lt;li&gt;Bang name: LeetCode&lt;/li&gt;
&lt;li&gt;Bang shortcut: leetcode&lt;/li&gt;
&lt;li&gt;URL template: &lt;a href="https://leetcode.com/search/?q=%25s"&gt;https://leetcode.com/search/?q=%s&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input checked="" disabled="" type="checkbox"&gt; Shortcut Menu (&amp;ldquo;Show this custom bang in the More search menu&amp;rdquo;)&lt;/li&gt;
&lt;li&gt;&lt;input checked="" disabled="" type="checkbox"&gt; Open Base Path (&amp;ldquo;When using this bang without a query, navigate to the
base path of the URL instead&amp;rdquo;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Save&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;To trigger the bang, search for e.g. &lt;code&gt;!leetcode Remove Duplicates from Sorted Array&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You could also add this URL to your &lt;a href="https://support.google.com/chrome/answer/95426?hl=en&amp;amp;co=GENIE.Platform%3DDesktop"&gt;browser search engine
settings&lt;/a&gt;, just set the shortcut starting with an exclamation mark / bang (&lt;code&gt;!&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;When to choose which?
Kagi settings will work seamlessly on mobile.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Kagi: Add LeetCode !bang"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Finicky</title><link>https://perrotta.dev/2025/12/finicky/</link><pubDate>Sun, 28 Dec 2025 02:14:14 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/finicky/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: I have one web browser for work, and another web browser
for personal use. These are two distinct web browsers, not two distinct profiles
in the same browser. Route work-related links to the work web browser, and
vice-versa. This is on macOS.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/johnste/finicky"&gt;Finicky&lt;/a&gt; addresses it very well:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A macOS app for customizing which browser to start&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is an app. Install it via homebrew: &lt;code&gt;brew install finicky&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Create a config file (&lt;code&gt;~/.config/finicky/finicky.js&lt;/code&gt;) for it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="js"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;js&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// Finicky configuration
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;// https://github.com/johnste/finicky
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;module&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;exports&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;defaultBrowser&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Brave Browser&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c1"&gt;// pick your poison
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="nx"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;// Open Azure, GitHub, Atlassian and company-related domains in Chrome
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt; &lt;span class="nx"&gt;match&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;*.atlassian.net/*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;*.{company_intranet}/*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;*.{company}.com/*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;*{company}*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;github.com/{company_org}*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;portal.azure.com/*&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nx"&gt;browser&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Google Chrome&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;],&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;};&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now make Finicky your default system browser.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s it. Now links will open be properly routed, automagically, upon clicking.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Finicky"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Flameshot</title><link>https://perrotta.dev/2025/12/flameshot/</link><pubDate>Sat, 27 Dec 2025 17:42:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/flameshot/</guid><description>&lt;p&gt;Install Flameshot.app on macOS:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install flameshot
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo xattr -rd com.apple.quarantine /Applications/flameshot.app
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;open -a Flameshot&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;xattr&lt;/code&gt; is &lt;a href="https://github.com/flameshot-org/flameshot/issues/3572"&gt;necessary&lt;/a&gt; or else:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;flameshot&amp;rdquo; cannot be opened because the developer cannot be verified&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Flameshot"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Starship</title><link>https://perrotta.dev/2025/12/starship/</link><pubDate>Sat, 27 Dec 2025 02:34:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/starship/</guid><description>&lt;p&gt;After years using the default prompt from
&lt;a href="https://grml.org/zsh/"&gt;&lt;code&gt;grml-zsh-config&lt;/code&gt;&lt;/a&gt; (with minor modifications), I adopted
&lt;a href="https://starship.rs/"&gt;starship&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The minimal, blazing-fast, and infinitely customizable prompt for any shell!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;My &lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/starship/.config/starship.toml"&gt;&lt;code&gt;~/.config/starship.toml&lt;/code&gt;&lt;/a&gt; is meant to resemble the zsh prompt I&amp;rsquo;ve been using,
with minor tweaks and improvements:&lt;/p&gt;

&lt;div class="codeblock" data-lang="toml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;toml&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# Minimal starship config matching grml prompt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;$status$sudo$username$hostname$directory$git_branch$git_state$git_status$line_break$character&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;right_format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;$cmd_duration$jobs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;add_newline&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;disabled&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$status ]($style)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;style&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;bold red&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;username&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;show_always&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$user](bold green)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;hostname&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;ssh_only&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;trim_at&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;@$hostname&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;directory&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;truncation_length&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;40&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;truncate_to_repo&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34; [$path](bold) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;git_branch&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;symbol&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$symbol$branch]() &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;git_state&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;|[$state]()&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;git_status&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$conflicted$deleted$renamed$modified$staged$untracked$ahead_behind](red) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;cmd_duration&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;min_time&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;2000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$duration](yellow) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;jobs&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[$number](cyan) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;sudo&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;disabled&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;format&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[ğŸ”“](red) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="nx"&gt;character&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;success_symbol&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[â¯](green)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;error_symbol&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;[â¯](red)&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My prompt:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta .dotfiles master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â¯&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Details you cannot easily tell from above:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;display the exit code if it is non-zero, and make the â¯ symbol red&lt;/li&gt;
&lt;li&gt;omit the hostname when not in SSH (no need to see &lt;code&gt;thiagoperrotta-MacBook-Pro&lt;/code&gt; all the time)&lt;/li&gt;
&lt;li&gt;display the command duration when a command took too long (&amp;gt;2s) to complete
(right side)&lt;/li&gt;
&lt;li&gt;display the number of background jobs if any (right side)&lt;/li&gt;
&lt;li&gt;display a couple of git markers (e.g. pending pull, pending push, pending changes)&lt;/li&gt;
&lt;li&gt;display an icon when &lt;code&gt;sudo&lt;/code&gt; / &lt;code&gt;doas&lt;/code&gt; is cached&lt;/li&gt;
&lt;li&gt;separate prompts with a blank line (breathe!)&lt;/li&gt;
&lt;li&gt;colors!&lt;/li&gt;
&lt;li&gt;truncate the full directory path when inside a VCS repo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My &lt;code&gt;.zshrc&lt;/code&gt; looks like this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Use starship prompt if available, otherwise customize grml prompt.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v starship &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt; /dev/null&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; prompt off
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;starship init zsh&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Customize grml prompt: two lines, user in bold green&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; zstyle &lt;span class="s1"&gt;&amp;#39;:prompt:grml:left:items:user&amp;#39;&lt;/span&gt; pre &lt;span class="s1"&gt;&amp;#39;%B%F{green}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; zstyle &lt;span class="s1"&gt;&amp;#39;:prompt:grml:left:setup&amp;#39;&lt;/span&gt; items rc change-root user at host path vcs newline percent
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;gracefully degrade when &lt;code&gt;starship&lt;/code&gt; is not installed, using my original
grml-derived zsh prompt.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Side effect&lt;/strong&gt;: now &lt;code&gt;bash&lt;/code&gt; has a similar prompt to &lt;code&gt;zsh&lt;/code&gt;!&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Starship"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>UptimeKuma</title><link>https://perrotta.dev/2025/12/uptimekuma/</link><pubDate>Sat, 27 Dec 2025 01:53:05 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>meta</category><guid>https://perrotta.dev/2025/12/uptimekuma/</guid><description>&lt;p&gt;This site is now monitored via self-hosted &lt;a href="https://uptime.perrotta.dev/status/serendipity"&gt;uptime infrastructure&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;How did I do it?&lt;/p&gt;
&lt;p&gt;Software: &lt;a href="https://github.com/louislam/uptime-kuma"&gt;UptimeKuma&lt;/a&gt;. Open-source,
self-hosted, simple &amp;amp; easy, has a docker image for deployment, sensible
defaults, lots of customization possibilities. Modern, solid, well-maintained,
popular (80k+ stars on GitHub). A no-brainer choice, really.&lt;/p&gt;
&lt;p&gt;I deployed it via Docker on Alpine Linux.&lt;/p&gt;
&lt;p&gt;Install docker and docker-compose:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas apk add docker docker-compose&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Update the docker storage driver from the &lt;code&gt;overlay2&lt;/code&gt; default as it was failing
for some reason:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doasedit /etc/docker/daemon.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	 &lt;span class="s2"&gt;&amp;#34;storage-driver&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;vfs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Start docker, now and on startup:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service docker start
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas rc-update add docker&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;equivalently to &lt;code&gt;systemctl enable --now docker&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Create a &lt;code&gt;docker-compose.yml&lt;/code&gt; file for the service:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat docker/docker-compose.yml
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; uptime-kuma:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; image: louislam/uptime-kuma:latest
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; container_name: uptime-kuma
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; restart: unless-stopped
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ports:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - &lt;span class="s2"&gt;&amp;#34;127.0.0.1:3001:3001&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; volumes:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - /opt/uptime-kuma:/app/data&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;ensure to bind it to localhost only (&lt;code&gt;127.0.0.1&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Start it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% docker-compose up -d&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;-d&lt;/code&gt; to start it in the background.&lt;/p&gt;
&lt;p&gt;From here we access the service and configure it (out of scope of this post):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;create an admin user, set a secure password&lt;/li&gt;
&lt;li&gt;enable 2FA (TOTP)&lt;/li&gt;
&lt;li&gt;add the first monitor (&lt;code&gt;https://perrotta.dev&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To access the service securely for the first time, there are various
possibilities:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;expose it under a reverse proxy with HTTP basic auth&lt;/li&gt;
&lt;li&gt;employ a VPN (e.g. Tailscale, Wireguard)&lt;/li&gt;
&lt;li&gt;use SSH port forwarding from your VPS to your laptop&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;hellip;just &lt;em&gt;do not&lt;/em&gt; expose the service to &lt;code&gt;0.0.0.0&lt;/code&gt; without credentials.&lt;/p&gt;
&lt;p&gt;Next, expose the service via a user-friendly URL, with the creation of a DNS
record. As you can see, I chose uptime.perrotta.dev.&lt;/p&gt;
&lt;p&gt;Configure your reverse proxy (&lt;a href="https://perrotta.dev/2025/12/nginx-caddy/"&gt;Caddy&lt;/a&gt; in
this case):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;uptime.perrotta.dev {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	log {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		output file /var/log/caddy/uptime.log
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	reverse_proxy * {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		to 127.0.0.1:3001
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		header_up Host {host}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy reload&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now sit back and enjoy free uptime monitoring!&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: UptimeKuma"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/meta/"&gt;meta&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ctop</title><link>https://perrotta.dev/2025/12/ctop/</link><pubDate>Fri, 26 Dec 2025 18:08:52 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/ctop/</guid><description>&lt;p&gt;Too many tops:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;top&lt;/code&gt;: vanilla, classic&lt;/li&gt;
&lt;li&gt;&lt;code&gt;htop&lt;/code&gt;: alternative&lt;/li&gt;
&lt;li&gt;&lt;code&gt;btop&lt;/code&gt;: modern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now I found out: &lt;a href="https://github.com/bcicen/ctop"&gt;&lt;code&gt;ctop&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Top-like interface for container metrics&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;it&amp;rsquo;s &lt;code&gt;top&lt;/code&gt; for (Docker) containers!&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/bcicen/ctop/raw/master/_docs/img/grid.gif" alt="ctop demo"&gt;&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: ctop"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>ranger â†’ lf</title><link>https://perrotta.dev/2025/12/ranger-lf/</link><pubDate>Thu, 25 Dec 2025 15:37:03 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/ranger-lf/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: replace &lt;code&gt;ranger&lt;/code&gt; with &lt;code&gt;lf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ranger/ranger"&gt;Ranger&lt;/a&gt; config (&lt;code&gt;~/.config/ranger/rc.conf&lt;/code&gt;):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# List all keybindings: &amp;#39;? k&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Generate config: &amp;#39;ranger --copy-config=rc&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Delete selection / files.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;alias remove delete
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Draw borders around columns? (separators, outline, both, or none)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;set draw_borders separators
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Show hidden files. Shortcut: &amp;#39;zh&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;set show_hidden true
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# Edit file: Set &amp;#39;e&amp;#39; in addition to &amp;#39;E&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;map e edit_file&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://github.com/gokcehan/lf"&gt;Lf&lt;/a&gt; config (&lt;code&gt;~/.config/lf/lfrc&lt;/code&gt;):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# lf configuration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# See `lf -doc` for documentation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Delete selection / files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;cmd remove delete
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Show hidden files by default&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;set&lt;/span&gt; hidden &lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Edit file: &amp;#39;e&amp;#39; (mapped out-of-the-box)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Toggle hidden files: &amp;#39;zh&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Their feature sets are very similar.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lf&lt;/code&gt; is a single binary written in go. &lt;code&gt;ranger&lt;/code&gt; is written in Python.&lt;/p&gt;
&lt;p&gt;The motivation to do this, other than performance, was quite silly:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas ranger
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ranger version: ranger 1.9.4
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Python version: 3.12.12 (main, Oct 11 2025, 01:16:26) [GCC 15.2.0]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Locale: C.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Traceback (most recent call last):
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/core/main.py&amp;#34;, line 171, in main
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fm.initialize()
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/core/fm.py&amp;#34;, line 132, in initialize
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; self.ui.initialize()
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/gui/ui.py&amp;#34;, line 127, in initialize
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; self.handle_multiplexer()
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/gui/ui.py&amp;#34;, line 503, in handle_multiplexer
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; self._screen_title = check_output(
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ^^^^^^^^^^^^^
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/ext/spawn.py&amp;#34;, line 35, in check_output
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; process = Popen(popenargs, stderr=fd_devnull, **kwargs)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/subprocess.py&amp;#34;, line 1026, in __init__
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; self._execute_child(args, executable, preexec_fn, close_fds,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; File &amp;#34;/usr/lib/python3.12/subprocess.py&amp;#34;, line 1955, in _execute_child
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; raise child_exception_type(errno_num, err_msg, err_filename)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;FileNotFoundError: [Errno 2] No such file or directory: &amp;#39;screen&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ranger crashed. Please report this traceback at:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;https://github.com/ranger/ranger/issues&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;&lt;code&gt;ranger&lt;/code&gt; crashes on my Alpine Linux VPS when running as root because
&lt;code&gt;screen&lt;/code&gt; is not installed there. This is with the stock config. It&amp;rsquo;s not a
great experience.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lf&lt;/code&gt; does not crash.&lt;/p&gt;
&lt;p&gt;Installing &lt;code&gt;screen&lt;/code&gt; addresses the error above but it is the wrong remedy.&lt;/p&gt;
&lt;p&gt;I could update the &lt;code&gt;ranger&lt;/code&gt; config for the root user but that is beside the
point. I do not want to customize the root user because I&amp;rsquo;m not supposed to
use the root user routinely in the first place.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: ranger â†’ lf"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>nginx â†’ caddy</title><link>https://perrotta.dev/2025/12/nginx-caddy/</link><pubDate>Wed, 24 Dec 2025 23:59:02 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/nginx-caddy/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Replace &lt;code&gt;nginx&lt;/code&gt; with &lt;code&gt;caddy&lt;/code&gt; for &lt;code&gt;miniflux&lt;/code&gt; on my Alpine
Linux VPS host.&lt;/p&gt;
&lt;p&gt;First, install &lt;code&gt;caddy&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;doas apk add caddy&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, migrate the existing nginx config to caddy.&lt;/p&gt;
&lt;p&gt;The stock config:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat /etc/caddy/Caddyfile
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Caddy&amp;#39;s configuration file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# see: https://caddyserver.com/docs/caddyfile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The new config:&lt;/p&gt;

&lt;div class="codeblock" data-lang="caddyfile"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;caddyfile&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-caddyfile" data-lang="caddyfile"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Caddy&amp;#39;s configuration file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# see: https://caddyserver.com/docs/caddyfile
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="se"&gt;{miniflux_host}&lt;/span&gt;&lt;span class="gh"&gt;.perrotta.dev&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;reverse_proxy&lt;/span&gt; &lt;span class="nd"&gt;*&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;Host&lt;/span&gt; &lt;span class="se"&gt;{host}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;X-Forwarded-For&lt;/span&gt; &lt;span class="se"&gt;{remote}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span class="se"&gt;{scheme}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Stop nginx:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;doas service nginx stop&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Start caddy:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy start
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy status
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * status: started&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now I tried to access my server via a web browser, and it worked out-of-the-box
:)&lt;/p&gt;
&lt;p&gt;I can see information about the SSL certificate in my web browser:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Issued On	Thursday, December 25, 2025 at 1:41:33â€¯AM
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Expires On	Wednesday, March 25, 2026 at 1:41:32â€¯AM&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It was issued just a few seconds ago!&lt;/p&gt;
&lt;p&gt;How to view logs?&lt;/p&gt;
&lt;p&gt;I expect to find them at &lt;code&gt;/var/log/caddy&lt;/code&gt; but there&amp;rsquo;s nothing there.&lt;/p&gt;
&lt;p&gt;I need to add an explicit directive to enable logging:&lt;/p&gt;

&lt;div class="codeblock" data-lang="caddy"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;caddy&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-caddy" data-lang="caddy"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="se"&gt;{miniflux_host}&lt;/span&gt;&lt;span class="gh"&gt;.perrotta.dev&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;log&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;output&lt;/span&gt; &lt;span class="s"&gt;file&lt;/span&gt; &lt;span class="s"&gt;/var/log/caddy/miniflux.log&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;reverse_proxy&lt;/span&gt; &lt;span class="nd"&gt;*&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;to&lt;/span&gt; &lt;span class="n"&gt;127.0.0.1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;Host&lt;/span&gt; &lt;span class="se"&gt;{host}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;X-Forwarded-For&lt;/span&gt; &lt;span class="se"&gt;{remote}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;header_up&lt;/span&gt; &lt;span class="s"&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span class="se"&gt;{scheme}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then reload caddy:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;~ &lt;span class="c1"&gt;# service caddy reload&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:49:04.531	INFO	using config from file	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:49:04.532	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span class="s1"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;2025/12/25 05:49:04.532	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:49:04.532	INFO	adapted config to JSON	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:49:04.533	WARN	Caddyfile input is not formatted&lt;span class="p"&gt;;&lt;/span&gt; run &lt;span class="s1"&gt;&amp;#39;caddy fmt --overwrite&amp;#39;&lt;/span&gt; to fix inconsistencies	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;, &lt;span class="s2"&gt;&amp;#34;line&amp;#34;&lt;/span&gt;: 4&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Error: sending configuration to instance: caddy responded with error: HTTP 400: &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;loading config: loading new config: setting up custom log &amp;#39;log0&amp;#39;: opening log writer using \u0026logging.FileWriter{Filename:\&amp;#34;/var/log/caddy/miniflux.log\&amp;#34;, Mode:0x0, Roll:(*bool)(nil), RollSizeMB:0, RollCompress:(*bool)(nil), RollLocalTime:false, RollKeep:0, RollKeepDays:0}: open /var/log/caddy/miniflux.log: permission denied&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Let&amp;rsquo;s address these issues:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/caddy % doas caddy fmt --overwrite&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The formatting warning is gone:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:53:06.079	INFO	using config from file	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:53:06.079	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span class="s1"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;2025/12/25 05:53:06.079	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:53:06.080	INFO	adapted config to JSON	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Error: sending configuration to instance: caddy responded with error: HTTP 400: &lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&lt;span class="s2"&gt;&amp;#34;loading config: loading new config: setting up custom log &amp;#39;log0&amp;#39;: opening log writer using \u0026logging.FileWriter{Filename:\&amp;#34;/var/log/caddy/miniflux.log\&amp;#34;, Mode:0x0, Roll:(*bool)(nil), RollSizeMB:0, RollCompress:(*bool)(nil), RollLocalTime:false, RollKeep:0, RollKeepDays:0}: open /var/log/caddy/miniflux.log: permission denied&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, logging:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas mkdir /var/log/caddy
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas touch /var/log/caddy/miniflux.log
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas chown -R caddy:caddy /var/log/caddy&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now it&amp;rsquo;s much better:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:56:11.041	INFO	using config from file	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:56:11.041	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span class="s1"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt;2025/12/25 05:56:11.041	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 05:56:11.042	INFO	adapted config to JSON	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Regarding the two &amp;ldquo;unnecessary&amp;rdquo; configs, just remove them from the &lt;code&gt;Caddyfile&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;- header_up X-Forwarded-For {remote}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;- header_up X-Forwarded-Proto {scheme}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And here&amp;rsquo;s the cleanest possible startup:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 06:22:17.476	INFO	using config from file	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2025/12/25 06:22:17.478	INFO	adapted config to JSON	&lt;span class="o"&gt;{&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span class="s2"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How did I know which user to &lt;code&gt;chown&lt;/code&gt; to? &lt;code&gt;/etc/init.d/caddy&lt;/code&gt; has the following
line:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ini"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ini&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="na"&gt;command_user&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s"&gt;caddy:caddy&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;though it wouldn&amp;rsquo;t have been difficult to guess it anyways.&lt;/p&gt;
&lt;p&gt;I can see some logs at &lt;code&gt;/var/log/caddy/miniflux.log&lt;/code&gt; already.&lt;/p&gt;
&lt;p&gt;Use &lt;code&gt;tail -f&lt;/code&gt; or &lt;code&gt;tspin -f&lt;/code&gt; (from tailspin) for live log tailing.&lt;/p&gt;
&lt;p&gt;LLM security analysis, for completeness:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;I reviewed /etc/caddy/Caddyfile. Overall, it&amp;#39;s a straightforward reverse proxy for {miniflux_host}.perrotta.dev to 127.0.0.1:8080 with logging to
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; /var/log/caddy/miniflux.log. Caddy will automatically manage HTTPS and pass the appropriate headers upstream, and Caddy&amp;#39;s defaults already
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; set the Host and X-Forwarded-* headersâ€”so explicitly setting them is optional but not harmful.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Security considerations:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Ensure the local Miniflux instance is bound to loopback only (127.0.0.1) so it&amp;#39;s not exposed directly.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Confirm /var/log/caddy/ and the log file are readable by the Caddy user but not world-readable if the logs might contain sensitive data.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - If you ever place Caddy behind another proxy (e.g., Cloudflare), configure trusted_proxies in Caddy to ensure X-Forwarded-* is accurate.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Beyond that, the config is minimal and doesn&amp;#39;t expose extra surfaces.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Last step: let&amp;rsquo;s make caddy auto start, and disable nginx startup + uninstall
it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;doas rc-update del nginx
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;doas rc-update add caddy
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;doas apk del nginx&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Out of curiosity: the certificates live here:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/&lt;span class="o"&gt;{&lt;/span&gt;miniflux_host&lt;span class="o"&gt;}&lt;/span&gt;.perrotta.dev/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There are three files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;crt and key: SSL / TLS&lt;/li&gt;
&lt;li&gt;json: configuration / metadata for let&amp;rsquo;s encrypt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And we&amp;rsquo;re done!&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: nginx â†’ caddy"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>vim â†’ nvim</title><link>https://perrotta.dev/2025/12/vim-nvim/</link><pubDate>Tue, 23 Dec 2025 12:14:33 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/vim-nvim/</guid><description>&lt;p&gt;I am piloting a transition from &lt;code&gt;vim&lt;/code&gt; to &lt;code&gt;nvim&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is the least disruptive way I found to accomplish that.&lt;/p&gt;
&lt;p&gt;First, install &lt;code&gt;neovim&lt;/code&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install neovim&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now, create &lt;code&gt;~/.config/nvim/init.lua&lt;/code&gt;. I decided to populate it based on my
original
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/vim/.vim/vimrc"&gt;&lt;code&gt;~/.vimrc&lt;/code&gt;&lt;/a&gt;,
without attempting to share configuration settings between the two.&lt;/p&gt;
&lt;p&gt;Multiple iterations with a LLM agent helped it achieve a decent shape, removing
redundant settings and replacing some native VimL plugins with Lua ones.&lt;/p&gt;
&lt;p&gt;The result:
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/nvim/.config/nvim/init.lua"&gt;&lt;code&gt;init.lua&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some notable changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;switch the package manager from vim-plug to lazy.nvim&lt;/li&gt;
&lt;li&gt;remove vim-sensible&lt;/li&gt;
&lt;li&gt;rewrite &lt;code&gt;just_one_space&lt;/code&gt; in Lua&lt;/li&gt;
&lt;li&gt;use nvim native OSC52 for yanking text&lt;/li&gt;
&lt;li&gt;vim-signify -&amp;gt; gitsigns&lt;/li&gt;
&lt;li&gt;add autopairs&lt;/li&gt;
&lt;li&gt;add telescope (fuzzy finder), replace fzf&lt;/li&gt;
&lt;li&gt;add oil (file manager), incorporates some functionality of &lt;code&gt;vidir&lt;/code&gt; from
&lt;code&gt;moreutils&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;remove vim-commentary, given native support for &lt;code&gt;gc&lt;/code&gt; in neovim&lt;/li&gt;
&lt;li&gt;lightline -&amp;gt; lualine&lt;/li&gt;
&lt;li&gt;highlight yanked text natively, replace vim-highlightedyank&lt;/li&gt;
&lt;li&gt;automkdir upon saving a file whose parent directory does not exist, replace
vim-mkdir&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now make it frictionless to use &lt;code&gt;nvim&lt;/code&gt; instead of &lt;code&gt;vim&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="gitdiff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;gitdiff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit 058433b9503477c8c162cac5eba191c704cb9361
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Tue Dec 23 12:13:54 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; nvim
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;diff --git profile/.profile.d/env.sh profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;index 1c6507e..c6117a9 100644
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+++ profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;&lt;span class="gu"&gt;@@ -10,4 +10,6 @@ path_munge &amp;#34;$HOME/.bin&amp;#34; &amp;#34;$HOME/bin&amp;#34; &amp;#34;$HOME/.local/bin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt; export CLICOLOR=1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # Set preferred text editor.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+# nvim should be preferred to vim if it is installed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt; hash vim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;vim&amp;#34; VISUAL=&amp;#34;vim&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+hash nvim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;nvim&amp;#34; VISUAL=&amp;#34;nvim&amp;#34; &amp;amp;&amp;amp; alias vim=nvim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can still access &lt;code&gt;vim&lt;/code&gt; with &lt;code&gt;\vim&lt;/code&gt; (or &lt;code&gt;unalias vim&lt;/code&gt; if needed).&lt;/p&gt;
&lt;p&gt;Now let&amp;rsquo;s evaluate whether the &lt;code&gt;nvim&lt;/code&gt; switch is worth it.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim â†’ nvim"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>atuin: limit scope to current directory</title><link>https://perrotta.dev/2025/12/atuin-limit-scope-to-current-directory/</link><pubDate>Tue, 23 Dec 2025 12:08:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/atuin-limit-scope-to-current-directory/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/12/atuin-delete-history-entries/"&gt;Previously&lt;/a&gt;,
&lt;a href="https://perrotta.dev/2025/11/atuin/"&gt;previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pressing &lt;code&gt;C-r&lt;/code&gt; opens the global history search by default.&lt;/p&gt;
&lt;p&gt;To limit the history lookup to the current directory only, keep pressing &lt;code&gt;C-r&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The scope will cycle through:&lt;/p&gt;
&lt;p&gt;Global &amp;gt; Host &amp;gt; Session &amp;gt; Workspace &amp;gt; Directory&lt;/p&gt;
&lt;p&gt;This makes it easier to find commands previously executed in a given directory.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: atuin: limit scope to current directory"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>macOS: keyboard repeat</title><link>https://perrotta.dev/2025/12/macos-keyboard-repeat/</link><pubDate>Tue, 23 Dec 2025 11:54:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/macos-keyboard-repeat/</guid><description>&lt;p&gt;Run:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;defaults write NSGlobalDomain InitialKeyRepeat -int &lt;span class="m"&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;defaults write NSGlobalDomain KeyRepeat -int &lt;span class="m"&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;to configure the macOS keyboard repeat behavior for significantly faster
responsiveness.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;InitialKeyRepeat -int 10 â€” Sets the delay before a held key starts repeating
(lower -&amp;gt; faster). Default is 15.&lt;/li&gt;
&lt;li&gt;KeyRepeat -int 1 â€” Sets the repeat rate once a key is held (lower -&amp;gt; faster).
Default is 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Together, they make the keyboard feel snappier with minimal delay before repeat
and faster repetition speed.&lt;/p&gt;
&lt;p&gt;Should have done that ages ago!&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: keyboard repeat"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Pi</title><link>https://perrotta.dev/2025/12/pi/</link><pubDate>Tue, 23 Dec 2025 11:45:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/pi/</guid><description>&lt;p&gt;Mario Zechner&amp;rsquo;s pi (&lt;a href="https://steipete.me/posts/2025/signature-flicker"&gt;via Peter Steinberger&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Mario Zechner&amp;rsquo;s pi is currently the gold-standard for differential rendering,
while also using all tricks of modern terminals â€” including showing inline
images:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This paragraph was enough to entice my curiosity to try it out.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://shittycodingagent.ai/"&gt;https://shittycodingagent.ai/&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are many shitty coding agents, but this one is mine.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Minimal. Opinionated. Extensible.&lt;/p&gt;
&lt;p&gt;Lean core keeps your context clean. Use only what you need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This was love at first sight.&lt;/p&gt;
&lt;p&gt;Sounds &lt;a href="https://miniflux.app/"&gt;familiar&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;I love its philosophy:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What we didn&amp;rsquo;t build&lt;/p&gt;
&lt;p&gt;pi is opinionated about what it won&amp;rsquo;t do. These are intentional design
decisions to minimize context bloat and avoid anti-patterns.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No MCP. Build CLI tools with READMEs (see Skills). The agent reads them on demand. Would you like to know more? If you must, use mcporter.&lt;/li&gt;
&lt;li&gt;No sub-agents. Spawn pi instances via tmux, or build your own sub-agent tool. Observability and steerability for you and the agent.&lt;/li&gt;
&lt;li&gt;No permission popups. Security theater. Run in a container or build your own with Hooks.&lt;/li&gt;
&lt;li&gt;No plan mode. Gather context in one session, write plans to file, start fresh for implementation.&lt;/li&gt;
&lt;li&gt;No built-in to-dos. They confuse models. Use a TODO.md file, or build your own with custom tools.&lt;/li&gt;
&lt;li&gt;No background bash. Use tmux. Full observability, direct interaction.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;The full rationale is in the &lt;a href="https://mariozechner.at/posts/2025-11-30-pi-coding-agent/"&gt;blog
post&lt;/a&gt;, which is a
very recommended read.&lt;/p&gt;
&lt;p&gt;We need more of this. It is currently one of my favorite CLI agents, alongside
Claude Code (the golden standard) and Amp Code.&lt;/p&gt;
&lt;p&gt;Note that &lt;code&gt;pi&lt;/code&gt; is model agnostic, comparable to
&lt;a href="https://opencode.ai/"&gt;OpenCode&lt;/a&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Pi"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Kindle: KOReader dictionaries</title><link>https://perrotta.dev/2025/12/kindle-koreader-dictionaries/</link><pubDate>Tue, 23 Dec 2025 03:55:11 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/kindle-koreader-dictionaries/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/06/kindle-paperwhite-koreader-calibre-sync/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;KOReader does not come with many installed dictionaries out-of-the-box, but it&amp;rsquo;s
possible to download a few extras. The default ones leave a lot to be desired.&lt;/p&gt;
&lt;p&gt;Follow these steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connect your Kindle to Wi-Fi&lt;/li&gt;
&lt;li&gt;Open KOReader in your Kindle&lt;/li&gt;
&lt;li&gt;Click the magnifying glass at the top menu&lt;/li&gt;
&lt;li&gt;Settings &amp;gt; Dictionary settings &amp;gt; Download dictionaries&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There is a vast selection (to the point of being overwhelming!) of dictionaries
available for download, including translations (e.g. English-Portuguese). When
in doubt, choose Wiktionary files.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://adolfoparra.com"&gt;Reference&lt;/a&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Kindle: KOReader dictionaries"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>myrepos: chain configs</title><link>https://perrotta.dev/2025/12/myrepos-chain-configs/</link><pubDate>Mon, 22 Dec 2025 14:45:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/myrepos-chain-configs/</guid><description>&lt;p&gt;&lt;a href="https://myrepos.branchable.com/"&gt;myrepos&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You have a lot of version control repositories. Sometimes you want to update
them all at once. Or push out all your local changes. You use special command
lines in some repositories to implement specific workflows. Myrepos provides a
mr command, which is a tool to manage all your version control repositories.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I use &lt;code&gt;mr&lt;/code&gt; to manage my local git checkouts, see my
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/git/.mrconfig"&gt;&lt;code&gt;~/.mrconfig&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From &lt;code&gt;$HOME&lt;/code&gt;, running &lt;code&gt;mr update&lt;/code&gt; keeps all managed repositories up-to-date
(&lt;code&gt;git fetch&lt;/code&gt; / &lt;code&gt;git pull&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Extend (chain) my mrconfig with git repositories from
work.&lt;/p&gt;
&lt;p&gt;I keep my git repos from work in &lt;code&gt;~/Corp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Changing directory to it and running &lt;code&gt;mr update&lt;/code&gt; updates work repos only.&lt;/p&gt;
&lt;p&gt;The goal is to have &lt;code&gt;mr update&lt;/code&gt; in &lt;code&gt;~&lt;/code&gt; perform updates for personal AND work
repos. We can achieve this with configuration chaining.&lt;/p&gt;
&lt;p&gt;This
&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/3f5c5e02dd7cc29bbc30d74f8329ce7bf654bd5e"&gt;commit&lt;/a&gt;
addresses it:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;# chain corp repositories
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;include = test -f $HOME/Corp/.mrconfig &amp;amp;&amp;amp; sed &amp;#39;s|^\[\([^/DEFAULT]\)|[Corp/\1|&amp;#39; $HOME/Corp/.mrconfig || true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Rationale&lt;/strong&gt;: If &lt;code&gt;~/Corp/.mrconfig&lt;/code&gt; exists, include it in the original
&lt;code&gt;~/.mrconfig&lt;/code&gt;. The &lt;code&gt;sed&lt;/code&gt; expression is necessary to adjust relative paths when
operating on work repos, so that they all stay within &lt;code&gt;~/Corp&lt;/code&gt;, otherwise they
would be cloned in &lt;code&gt;~&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;test&lt;/code&gt; and &lt;code&gt;|| true&lt;/code&gt; is to make this inclusion optional, with graceful
degradation in case the work &lt;code&gt;.mrconfig&lt;/code&gt; does not exist, thereby simply skipping
it.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: myrepos: chain configs"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>git: stash untracked files</title><link>https://perrotta.dev/2025/12/git-stash-untracked-files/</link><pubDate>Mon, 22 Dec 2025 02:30:06 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/git-stash-untracked-files/</guid><description>&lt;p&gt;As I write this very post, this is what my git repository status looks like:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;## master...origin/master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;?? content/posts/2025-12-22-git-stash-untracked.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What if I wanted to stash it?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git stash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;No &lt;span class="nb"&gt;local&lt;/span&gt; changes to save
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;## master...origin/master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;?? content/posts/2025-12-22-git-stash-untracked.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Nothing happens, because this post is a new file, not yet tracked by git.&lt;/p&gt;
&lt;p&gt;The classic way to address this is to switch to another branch, commit
everything (e.g. with &lt;a href="https://perrotta.dev/2025/03/git-freeze-git-thaw/"&gt;&lt;code&gt;git-freeze&lt;/code&gt;&lt;/a&gt;), and then switch back. But this is slow.&lt;/p&gt;
&lt;p&gt;Today I learned about &lt;code&gt;git stash -u&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-u, --include-untracked, --no-include-untracked
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; When used with the push and save commands, all untracked files are also stashed and then cleaned up with git clean.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; When used with the show command, show the untracked files in the
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; stash entry as part of the diff.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Let&amp;rsquo;s try it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git stash -u
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Saved working directory and index state WIP on master: 58cde6e88 hide codeblock header in RSS feeds
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;## master...origin/master&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The new post gets stashed indeed!&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t know how I missed this feature â€“ I&amp;rsquo;ve wanted this functionality for
&lt;code&gt;stash&lt;/code&gt; since forever!&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: git: stash untracked files"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>.apk-new</title><link>https://perrotta.dev/2025/12/.apk-new/</link><pubDate>Mon, 22 Dec 2025 01:00:02 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/.apk-new/</guid><description>&lt;p&gt;After running an Alpine Linux server for a couple of months (or years), you&amp;rsquo;ll
inevitably find a couple of &lt;code&gt;.apk-new&lt;/code&gt; files scattered in your filesystem within
&lt;code&gt;/etc&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas find / -name &lt;span class="s2"&gt;&amp;#34;*.apk-new&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/rc.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/inittab.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/fstab.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/ssh/sshd_config.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/passwd.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/crontabs/root.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/group.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/ufw/ufw.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/ufw/user6.rules.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/ufw/user.rules.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/abuild.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/default/grub.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/shadow.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/network/interfaces.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/profile.d/locale.sh.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/etc/doas.conf.apk-new&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;As per the &lt;a href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html#_installing_packages"&gt;alpine user
handbook&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Installing a package means that the package itself will be downloaded from a
repository (specified in /etc/apk/repositories) and unpacked to the system.
Existing files will be overwritten. An exception are configuration files in
/etc, which will be preserved. The configuration files (which comes from the
package) will be renamed to *.apk-new.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s very similar to what happens in Arch Linux with
&lt;a href="https://wiki.archlinux.org/title/Pacman/Pacnew_and_Pacsave"&gt;&lt;code&gt;.pacnew&lt;/code&gt;&lt;/a&gt; files.
Arch Linux has an utility called
&lt;a href="https://wiki.archlinux.org/title/Pacman/Pacnew_and_Pacsave#pacdiff"&gt;&lt;code&gt;pacdiff&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It will search for .pacnew, .pacsave and .pacorig files, and will then prompt
to take action upon them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;and also in Gentoo Linux with
&lt;a href="https://wiki.gentoo.org/wiki/Etc-update"&gt;&lt;code&gt;etc-update&lt;/code&gt;&lt;/a&gt; or
&lt;a href="https://wiki.gentoo.org/wiki/Dispatch-conf"&gt;&lt;code&gt;dispatch-conf&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Alpine Linux lacks such an utility, to the best of my knowledge.&lt;/p&gt;
&lt;p&gt;As such, I vibe coded one in &lt;a href="https://github.com/thiagowfx/pancake"&gt;&lt;code&gt;pancake&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I hereby introduce &lt;a href="https://github.com/thiagowfx/pancake/tree/master/apknew"&gt;&lt;code&gt;apknew&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Reconcile .apk-new configuration files on Alpine Linux, similar to pacdiff on
Arch Linux.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;By default, it operates on &lt;code&gt;/etc&lt;/code&gt; only.&lt;/p&gt;
&lt;p&gt;A sample run looks like the following, prompting a pair of files at a time:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;File: /etc/crontabs/root.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Original: /etc/crontabs/root
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Action:&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You&amp;rsquo;ll want to hit &lt;code&gt;v&lt;/code&gt; first to inspect the diff, and then decide whether to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;keep the original file&lt;/li&gt;
&lt;li&gt;replace it with the newer package file&lt;/li&gt;
&lt;li&gt;interactively merge them (e.g. with &lt;code&gt;vimdiff&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;do nothing (skip)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It&amp;rsquo;s much easier than diffing each file manually.&lt;/p&gt;
&lt;p&gt;Another example:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% apknew/apknew.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Searching for .apk-new files in /etc...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found 14 file(s) to process.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;File: /etc/passwd.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Original: /etc/passwd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Action: s
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Skipping /etc/passwd.apk-new...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;File: /etc/shells.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Original: /etc/shells
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Action: v
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;--- /etc/shells	2025-12-21 11:07:42.531531775 -0500
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+++ /etc/shells.apk-new	2025-12-15 09:00:47.000000000 -0500
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;@@ -1,5 +1,3 @@
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # valid login shells
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; /bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; /bin/ash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-/bin/zsh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;-/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Action: k
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Removing /etc/shells.apk-new...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Done. Kept original file.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: .apk-new"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>MIUI debloater</title><link>https://perrotta.dev/2025/12/miui-debloater/</link><pubDate>Sun, 21 Dec 2025 19:28:50 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><guid>https://perrotta.dev/2025/12/miui-debloater/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/coreldraw-disable-ads-on-windows/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From &amp;lsquo;Technical Support&amp;rsquo; tales of the trenches.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: My parents have a Xiaomi Android phone. The amount of
bloat in it is horrifying, incredibly disgusting.&lt;/p&gt;
&lt;p&gt;It is not possible to &lt;em&gt;uninstall&lt;/em&gt; system apps â€“ including Xiaomi&amp;rsquo;s and Google&amp;rsquo;s
â€“ by normal means. Once upon a time it used to be possible to, at the very
least, &lt;em&gt;disable&lt;/em&gt; them. But now there are many apps that can&amp;rsquo;t even be disabled!&lt;/p&gt;
&lt;p&gt;One example: YouTube Music. It&amp;rsquo;s such a shame that vendors, even supposedly
reputable ones, need to employ such consumer-hostile dark patterns in order to
artificially inflate their engagement metrics.
Shove it in our face, but we&amp;rsquo;re not using YouTube Music, full stop.&lt;/p&gt;
&lt;p&gt;The goal is to remove as many of these apps as possible, using whichever means
to be necessary.&lt;/p&gt;
&lt;p&gt;I found &lt;a href="https://github.com/kirthandev/MIUI-Debloater-official"&gt;MIUI debloater&lt;/a&gt;
to work well. Instructions, executed preferably from a Windows machine:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;install a modern Java SDK (e.g. 21 or 25)&lt;/li&gt;
&lt;li&gt;install ADB&lt;/li&gt;
&lt;li&gt;open the &lt;code&gt;.jar&lt;/code&gt; provided by the project&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;From the &lt;del&gt;ill patient&lt;/del&gt; affected phone:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;enable USB debugging via system settings â€“ multiple confirmation prompts are
needed to do so&lt;/li&gt;
&lt;li&gt;connect the device with a USB cable to the computer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;From this point on it is quite straightforward to remove undesired / unwanted
apps.&lt;/p&gt;
&lt;p&gt;The project is a GUI Java app with options to install and uninstall
applications, among other functionalities (e.g. download and install custom
ROMs).&lt;/p&gt;
&lt;p&gt;Just be careful not to remove important Android system apps â€“ triple-check that
you&amp;rsquo;re only removing non-essentials.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: MIUI debloater"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/privacy/"&gt;privacy&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Toggle light / dark mode</title><link>https://perrotta.dev/2025/12/toggle-light-/-dark-mode/</link><pubDate>Sun, 21 Dec 2025 18:24:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><guid>https://perrotta.dev/2025/12/toggle-light-/-dark-mode/</guid><description>&lt;p&gt;After dabbling about this for a while, I decided to add a non-intrusive icon to
the footer of this site, wherein you can manually toggle between the light and
dark theme. Your choice is persistent locally indefinitely, courtesy of
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"&gt;&lt;code&gt;localStorage&lt;/code&gt;&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/toggle-light-/-dark-mode/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Previously, the theme used to be set automatically depending upon your system /
browser preferences
(&lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/At-rules/@media/prefers-color-scheme"&gt;&lt;code&gt;prefers-color-scheme&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;code&gt;localStorage.getItem('theme')&lt;/code&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/toggle-light-/-dark-mode/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Toggle light / dark mode"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/meta/"&gt;meta&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Claude Code: block dangerous commands</title><link>https://perrotta.dev/2025/12/claude-code-block-dangerous-commands/</link><pubDate>Sun, 21 Dec 2025 18:16:12 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-block-dangerous-commands/</guid><description>&lt;p&gt;The outcome:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; Run rm -rf /tmp/test
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;âº Bash(rm -rf /tmp/test)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; â¿ PreToolUse:Bash hook returned blocking error
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; â¿ Error: rm -rf is blocked for safety
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;âº The rm -rf command was blocked by a safety hook in your configuration (~/.claude/hooks/block-dangerous-commands.sh).
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; If you want to remove /tmp/test, you have a few options:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 1. Run the command directly in your terminal (outside of Claude Code)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 2. Modify your hooks configuration to allow this specific command
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 3. Use a safer alternative like rm -r /tmp/test (without force flag) which may prompt for confirmation
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Would you like me to try one of the alternatives, or would you prefer to run this directly in your terminal?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How to achieve this?&lt;/p&gt;
&lt;p&gt;So far I had a &lt;a href="https://github.com/thiagowfx/.dotfiles/blob/8a61441dbe1adf5760544e0db6b4c64a145bb6e7/claude/.claude/settings.json#L63"&gt;deny
list&lt;/a&gt;
in &lt;code&gt;~/.claude/settings.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;permissions&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;deny&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(rm -rf:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(terraform apply:*)&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;Bash(terraform destroy:*)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;This is enough&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;For extra safety though, I added a &lt;a href="https://code.claude.com/docs/en/hooks#pretooluse"&gt;pre-tool use
hook&lt;/a&gt; for redundancy:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Runs after Claude creates tool parameters and before processing the
tool call.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;hooks&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;PreToolUse&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;matcher&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Bash&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;hooks&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;~/.claude/hooks/block-dangerous-commands.sh&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;timeout&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The hook file (generated by Claude itself, needless to say):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;span class="c1"&gt;# PreToolUse hook to block dangerous commands like &amp;#34;rm -rf&amp;#34; and &amp;#34;terraform apply&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Read hook input from stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;input&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;cat&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Extract tool name and command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;tool_name&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$input&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;.tool_name // &amp;#34;&amp;#34;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;command&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$input&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; jq -r &lt;span class="s1"&gt;&amp;#39;.tool_input.command // &amp;#34;&amp;#34;&amp;#39;&lt;/span&gt;&lt;span class="k"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Exit early if not a Bash tool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$tool_name&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; !&lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Bash&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Check for dangerous patterns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;blocked&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;reason&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Check for rm -rf (with various flag orderings)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$command&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -qE &lt;span class="s1"&gt;&amp;#39;rm\s+(-[a-zA-Z]*r[a-zA-Z]*f|(-[a-zA-Z]*f[a-zA-Z]*\s+)?-[a-zA-Z]*r|-rf|-fr)\b&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;blocked&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;reason&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;rm -rf is blocked for safety&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Check for terraform apply (without -auto-approve is still dangerous)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$command&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -qE &lt;span class="s1"&gt;&amp;#39;terraform\s+apply&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;blocked&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;reason&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;terraform apply is blocked - use terraform plan first&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Check for terraform destroy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$command&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; grep -qE &lt;span class="s1"&gt;&amp;#39;terraform\s+destroy&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;blocked&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="nb"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nv"&gt;reason&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;terraform destroy is blocked for safety&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# If blocked, return denial via JSON&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$blocked&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;true&lt;/span&gt; &lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; cat &lt;span class="s"&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; &amp;#34;hookSpecificOutput&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; &amp;#34;hookEventName&amp;#34;: &amp;#34;PreToolUse&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; &amp;#34;permissionDecision&amp;#34;: &amp;#34;deny&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; &amp;#34;permissionDecisionReason&amp;#34;: &amp;#34;$reason&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Allow command to proceed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;exit&lt;/span&gt; &lt;span class="m"&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: block dangerous commands"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Claude Code: stash</title><link>https://perrotta.dev/2025/12/claude-code-stash/</link><pubDate>Sun, 21 Dec 2025 16:48:26 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-stash/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: You&amp;rsquo;re midway in a long, multi-line prompt in Claude
Code.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sed diam voluptua. At vero eos et accusam et justo duo dolores et ea
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;dolor sit amet.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now you would like to &amp;ldquo;stash&amp;rdquo; it away temporarily to run a more important,
one-off prompt, before resuming.&lt;/p&gt;
&lt;p&gt;If this were an one-line prompt, you could hit &lt;code&gt;C-u&lt;/code&gt;, run your one-off, and then
hit &lt;code&gt;C-y&lt;/code&gt;. This is pure &lt;code&gt;readline&lt;/code&gt; / &lt;code&gt;emacs&lt;/code&gt; wizardry, supported natively in the
TUI that Claude Code employs.&lt;/p&gt;
&lt;p&gt;For the multi-line situation, hit &lt;code&gt;C-s&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Claude will then show:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â€º Stashed (auto-restores after submit)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;From here, run your one-off. Your initial prompt will be automatically
restored upon completion.&lt;/p&gt;
&lt;p&gt;Alternatively, press &lt;code&gt;C-s&lt;/code&gt; again to restore the initial prompt.&lt;/p&gt;
&lt;p&gt;This is a simple quality-of-life improvement, but it&amp;rsquo;s specific to Claude Code.
&lt;code&gt;C-u&lt;/code&gt; + &lt;code&gt;C-y&lt;/code&gt; works almost everywhere though.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: stash"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>j,k for navigation</title><link>https://perrotta.dev/2025/12/jk-for-navigation/</link><pubDate>Sun, 21 Dec 2025 02:31:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><guid>https://perrotta.dev/2025/12/jk-for-navigation/</guid><description>&lt;p&gt;I just added vim-style keybindings to this site.&lt;/p&gt;
&lt;p&gt;Press &lt;strong&gt;j&lt;/strong&gt; to go to the previous post (chronologically, going down the list â¬‡ï¸)
and &lt;strong&gt;k&lt;/strong&gt; to go to the next post (going up the list â¬†ï¸)&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;The boundary between &lt;em&gt;general&lt;/em&gt; vs &lt;em&gt;coding&lt;/em&gt; posts is respected.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I also added arrow keys (â¬…ï¸ for the previous post and â¡ï¸ right for the next
one).&amp;#160;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: j,k for navigation"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/meta/"&gt;meta&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Claude Code: add context window % to status line</title><link>https://perrotta.dev/2025/12/claude-code-add-context-window-to-status-line/</link><pubDate>Sat, 20 Dec 2025 15:42:11 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-add-context-window-to-status-line/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Claude code now officially supports showing context window information like
percentage of usage in status line (&lt;a href="https://aiengineerguide.com/blog/show-context-window-information-in-claude-code-statusline/"&gt;via Ashik Nesin&lt;/a&gt;):&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; /statusline Add a progress bar showing the percentage of context currently used
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;âº statusline-setup(Configure statusline progress bar)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; â¿ Done (3 tool uses Â· 7.4k tokens Â· 44s)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;âº I&amp;#39;ve configured your statusline to include a context usage progress bar. Your status line will now show something like:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; .claude (git:main) [Claude 3.5 Sonnet] [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘ 60%]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; The progress bar displays:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Filled blocks (â–ˆ) for used context
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Empty blocks (â–‘) for remaining context
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - Percentage showing exact usage
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; The context calculation includes input tokens, cache creation tokens, and cache read tokens relative to the total context window size.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My updated
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/8ab831db16c8e042f024081744e723c5abf790c7/claude/.claude/statusline.sh"&gt;&lt;code&gt;.claude/statusline.sh&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/8ab831db16c8e042f024081744e723c5abf790c7"&gt;The
diff&lt;/a&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: add context window % to status line"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Miniflux: NetNewsWire integration</title><link>https://perrotta.dev/2025/12/miniflux-netnewswire-integration/</link><pubDate>Sat, 20 Dec 2025 14:39:24 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/miniflux-netnewswire-integration/</guid><description>&lt;p&gt;&lt;a href="https://netnewswire.com/"&gt;NetNewsWire&lt;/a&gt; is a great RSS &lt;strong&gt;client&lt;/strong&gt; reader for
macOS and iOS.&lt;/p&gt;
&lt;p&gt;I already use &lt;a href="https://miniflux.app/"&gt;miniflux&lt;/a&gt; though. It&amp;rsquo;s too bad NetNewsWire
does not support miniflux as a server back-end:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Syncing via iCloud, Feedbin, Feedly, BazQux, Inoreader, NewsBlur, The Old
Reader, and FreshRSS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or does it?&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href="https://www.lkhrs.com/blog/app-defaults-2025/"&gt;Luke Harris&lt;/a&gt;, I just
realized it does &lt;em&gt;in fact&lt;/em&gt; support Miniflux, albeit indirectly!&lt;/p&gt;
&lt;p&gt;When adding your self-hosted miniflux server, select the &amp;ldquo;FreshRSS&amp;rdquo; option,
which is also compatible with the Google Reader API.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Add the URL without a trailing slash.&lt;/p&gt;
&lt;p&gt;Why use NetNewsWire instead of accessing Miniflux directly on iOS as a web app?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It works off-line (e.g. read your feeds while flying) â€“ in the meantime,
there&amp;rsquo;s a &lt;a href="https://github.com/miniflux/v2/issues/1395"&gt;Feature Request&lt;/a&gt; for
Miniflux to support an off-line mode&lt;/li&gt;
&lt;li&gt;It caches articles and posts locally: a) saving mobile data when syncing
upfront via Wi-Fi and b) yielding faster transitions between feed entries&lt;/li&gt;
&lt;/ol&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Miniflux: NetNewsWire integration"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Offloading iOS apps</title><link>https://perrotta.dev/2025/12/offloading-ios-apps/</link><pubDate>Sat, 06 Dec 2025 00:51:48 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>serenity</category><guid>https://perrotta.dev/2025/12/offloading-ios-apps/</guid><description>&lt;p&gt;Going on vacation?&lt;/p&gt;
&lt;p&gt;Have an iPhone?&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s no need to delete Slack, or your &lt;del&gt;favorite&lt;/del&gt; on-call app.&lt;/p&gt;
&lt;p&gt;Simply &lt;a href="https://support.apple.com/en-al/guide/iphone/iph47c931112/ios"&gt;offload&lt;/a&gt;
noisy apps.&lt;/p&gt;
&lt;p&gt;Why is this better than uninstalling them?&lt;/p&gt;
&lt;p&gt;Because it&amp;rsquo;s much easier to restore them once you are back. You do so with a
single tap in each app.&lt;/p&gt;
&lt;p&gt;Of course, this method is only effective if you don&amp;rsquo;t have the urge to tap your
offloaded apps. Some people have more self-control than others.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Offloading iOS apps"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/privacy/"&gt;privacy&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Reordering mobile editing icons in logseq</title><link>https://perrotta.dev/2025/12/reordering-mobile-editing-icons-in-logseq/</link><pubDate>Sat, 06 Dec 2025 00:42:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/reordering-mobile-editing-icons-in-logseq/</guid><description>&lt;p&gt;&lt;a href="https://bate.dev/posts/logseq-mobile/"&gt;Reordering mobile editing icons in
logseq&lt;/a&gt; by Colin Bate:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I found a way to avoid needing to constantly scroll sideways to access the
icons I need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is why I love the indie web.&lt;/p&gt;
&lt;p&gt;I was looking for how to do exactly the same operation, for exactly the same
icon.&lt;/p&gt;
&lt;p&gt;Isn&amp;rsquo;t it so amazing when a person documents their solutions publicly online, in
the open? Colin, you are my hero.&lt;/p&gt;
&lt;p&gt;Update &lt;code&gt;custom.css&lt;/code&gt; in LogSeq settings:&lt;/p&gt;

&lt;div class="codeblock" data-lang="css"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;css&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;/* Move icons 3+ to order 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;mobile-editor-toolbar&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;toolbar-commands&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;nth-child&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;n&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="nt"&gt;3&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nf"&gt;var&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kc"&gt;cyan&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;/* Insert icon 11 (brackets) at order 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;#&lt;/span&gt;&lt;span class="nn"&gt;mobile-editor-toolbar&lt;/span&gt; &lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nc"&gt;toolbar-commands&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nt"&gt;div&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="nd"&gt;nth-child&lt;/span&gt;&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nt"&gt;11&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;order&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;color&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="nf"&gt;var&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;--&lt;/span&gt;&lt;span class="kc"&gt;orange&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Side effect&lt;/strong&gt;: The &lt;code&gt;[]&lt;/code&gt; wikilink button will be moved to be the third one in
the editor toolbar.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Reordering mobile editing icons in logseq"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>friendly_ping: track your stale GitHub pull requests</title><link>https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/</link><pubDate>Thu, 04 Dec 2025 18:36:16 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/</guid><description>&lt;p&gt;I released a new tool:
&lt;a href="https://github.com/thiagowfx/pancake/tree/master/friendly_ping"&gt;&lt;strong&gt;friendly_ping&lt;/strong&gt;&lt;/a&gt;,
a shell script to list all your open GitHub pull requests (still) waiting for
review.&lt;/p&gt;
&lt;h2 id="problem"&gt;Problem&lt;/h2&gt;
&lt;p&gt;When contributing to multiple repositories on GitHub, it&amp;rsquo;s easy to lose track of
which PRs are waiting for reviewer feedback&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. You end up doing one of:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Manually checking GitHub every few days&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;Forgetting about contributions entirely&lt;sup id="fnref:3"&gt;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;&lt;/li&gt;
&lt;li&gt;Having no visibility into the review status across various projects&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="solution"&gt;Solution&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;friendly_ping&lt;/code&gt; queries the GitHub API and groups your open PRs by repository:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$ friendly_ping
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;helm/helm
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; fix&lt;span class="o"&gt;(&lt;/span&gt;helm-lint&lt;span class="o"&gt;)&lt;/span&gt;: &lt;span class="k"&gt;do&lt;/span&gt; not validate metadata.name &lt;span class="k"&gt;for&lt;/span&gt; List resources
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; https://github.com/helm/helm/pull/31169
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Reviewers: john, jane
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; docs: update helm plugin installation guide
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; https://github.com/helm/helm/pull/31204
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Reviewers: jane
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;loeffel-io/ls-lint
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; feat: introduce a json schema file &lt;span class="k"&gt;for&lt;/span&gt; ls-lint
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; https://github.com/loeffel-io/ls-lint/pull/256&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;em&gt;(The examples above are semi-fictitious.)&lt;/em&gt;&lt;/p&gt;
&lt;h2 id="features"&gt;Features&lt;/h2&gt;
&lt;p&gt;&lt;strong&gt;Filtering&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Filter by organization: &lt;code&gt;friendly_ping --org helm&lt;/code&gt; (your company)&lt;/li&gt;
&lt;li&gt;Filter by date range: &lt;code&gt;friendly_ping --created-after &amp;quot;30 days&amp;quot;&lt;/code&gt; (find old PRs)&lt;/li&gt;
&lt;li&gt;Filter by specific repos: &lt;code&gt;friendly_ping thiagowfx/.dotfiles thiagowfx/pre-commit-hooks&lt;/code&gt; (or one repo at a time)&lt;/li&gt;
&lt;li&gt;Filter by reviewer/assignee: &lt;code&gt;friendly_ping --involves alice --detailed&lt;/code&gt;
(filter by a specific teammate, handy for your 1:1s)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Grouping&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;By reviewer: &lt;code&gt;friendly_ping --group-by reviewer --detailed&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;By assignee: &lt;code&gt;friendly_ping --group-by assignee --detailed&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;By user (reviewers and assignees combined): &lt;code&gt;friendly_ping --group-by user --detailed&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The default grouping is per repo.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Comments&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Add &amp;ldquo;friendly ping&amp;rdquo; comments to PRs: &lt;code&gt;friendly_ping --comment&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Custom messages: &lt;code&gt;friendly_ping --comment &amp;quot;Please review when you get a chance. Deadline is approaching!&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Automatically skips PRs wherein you already commented&lt;/li&gt;
&lt;li&gt;Appends context about how long the PR has been waiting (&amp;ldquo;waiting for 3 days&amp;rdquo;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Other modes&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;JSON output: &lt;code&gt;friendly_ping --json&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Quiet mode for scripts: &lt;code&gt;friendly_ping --quiet &amp;amp;&amp;amp; echo &amp;quot;You have open PRs&amp;quot;&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;gh&lt;/code&gt; (GitHub CLI) â€” preferred method, or &lt;code&gt;curl&lt;/code&gt; as fallback&lt;/li&gt;
&lt;li&gt;&lt;code&gt;jq&lt;/code&gt; â€” for JSON processing&lt;/li&gt;
&lt;li&gt;Git configured with &lt;code&gt;user.name&lt;/code&gt; (or use &lt;code&gt;--user&lt;/code&gt; flag)&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="repository"&gt;Repository&lt;/h2&gt;
&lt;p&gt;Contributions welcome. This was fully vibe-coded with &lt;a href="https://ampcode.com/"&gt;Amp
Code&lt;/a&gt;. The CLI design was fully my own.&lt;/p&gt;
&lt;p&gt;This could be extended beyond GitHub, naturally.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Some people take forever to review PRs / CLs&amp;hellip;&amp;#160;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Or multiple times a day.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;The non-urgent ones.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/friendly_ping-track-your-stale-github-pull-requests/#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: friendly_ping: track your stale GitHub pull requests"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Claude Code: notify when needed</title><link>https://perrotta.dev/2025/12/claude-code-notify-when-needed/</link><pubDate>Thu, 04 Dec 2025 02:36:16 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/claude-code-notify-when-needed/</guid><description>&lt;p&gt;This is one little productivity boost to make you a 10x Engineer! None of the
popular AI blogs talk about this!!1!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Make Claude Code emit a chime whenever it needs
attention.&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit e668b387b6b34943143b046ad915effbd3945601
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Thu Dec 4 02:33:11 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; add a notification hook
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;diff --git claude/.claude/settings.json claude/.claude/settings.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;index 1979baf..1ac35da 100644
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- claude/.claude/settings.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+++ claude/.claude/settings.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;&lt;span class="gu"&gt;@@ -1,7 +1,20 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;env&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;CLAUDE_CODE_ENABLE_TELEMETRY&amp;#34;: &amp;#34;0&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;hooks&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;Notification&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;hooks&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;command&amp;#34;: &amp;#34;afplay /System/Library/Sounds/Glass.aiff &amp;amp;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;type&amp;#34;: &amp;#34;command&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ ]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ },
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This is the JSON snippet for ease of copy and paste, you&amp;rsquo;ll add it to your
&lt;code&gt;~/.claude/settings.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;#34;hooks&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;Notification&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;hooks&amp;#34;: [
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;command&amp;#34;: &amp;#34;afplay /System/Library/Sounds/Glass.aiff &amp;amp;&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &amp;#34;type&amp;#34;: &amp;#34;command&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This command is for macOS only, but it could be easily adapted to Linux (use
&lt;code&gt;aplay&lt;/code&gt; instead).&lt;/p&gt;
&lt;p&gt;&lt;a href="https://code.claude.com/docs/en/hooks#notification"&gt;Claude Code Hooks docs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Runs when Claude Code sends notifications. Supports matchers to filter by
notification type.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;macOS ships with various system sounds in &lt;code&gt;/System/Library/Sounds&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;This inspiration came from &lt;a href="https://ampcode.com/"&gt;Amp Code&lt;/a&gt;. Amp plays the
&lt;code&gt;Submarine.aiff&lt;/code&gt; sound by default.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: notify when needed"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Stale bot considered harmful</title><link>https://perrotta.dev/2025/12/stale-bot-considered-harmful/</link><pubDate>Thu, 04 Dec 2025 00:25:59 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/stale-bot-considered-harmful/</guid><description>&lt;p&gt;&lt;a href="https://github.com/helm/chart-testing/pull/755"&gt;This&lt;/a&gt;
&lt;a href="https://drewdevault.com/2021/10/26/stalebot.html"&gt;will&lt;/a&gt;
never get
&lt;a href="https://jacobtomlinson.dev/posts/2024/most-stale-bots-are-anti-user-and-anti-contributor-but-they-dont-have-to-be/"&gt;old&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2025/09/github-stale-bot-considered-harmful/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It&amp;rsquo;s likely that person will never try and contribute to your project again.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Stale bot considered harmful"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>jj: hello world</title><link>https://perrotta.dev/2025/12/jj-hello-world/</link><pubDate>Wed, 03 Dec 2025 03:43:01 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/jj-hello-world/</guid><description>&lt;p&gt;I am reasonably confident to end up (&lt;em&gt;fully&lt;/em&gt;) adopting
&lt;a href="https://github.com/jj-vcs/jj"&gt;&lt;code&gt;jj&lt;/code&gt;&lt;/a&gt; in 2026. Baby steps though.&lt;/p&gt;
&lt;p&gt;Can I attempt to start to use &lt;code&gt;jj&lt;/code&gt; to manage this blog?&lt;/p&gt;
&lt;p&gt;First, the usual:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install jj&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Second, a basic config file. &lt;code&gt;git&lt;/code&gt; requires one too:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.config/jj/config.toml
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;user&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;name&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Thiago Perrotta&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;email&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;{redacted}&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;ui&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;default-command &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;log&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;So far so good.&lt;/p&gt;
&lt;p&gt;Third, initialize a &lt;code&gt;jj&lt;/code&gt; repo alongside (&amp;ldquo;co-located&amp;rdquo;) the existing &lt;code&gt;git&lt;/code&gt; repo
of this blog:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj git init --colocate
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Done importing changes from the underlying Git repo.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ignoring git submodule at &lt;span class="s2"&gt;&amp;#34;vendor/ai.robots.txt&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Setting the revset &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="sb"&gt;`&lt;/span&gt;trunk&lt;span class="o"&gt;()&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; to &lt;span class="sb"&gt;`&lt;/span&gt;master@origin&lt;span class="sb"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hint: The following remote bookmarks aren&lt;span class="err"&gt;&amp;#39;&lt;/span&gt;t associated with the existing &lt;span class="nb"&gt;local&lt;/span&gt; bookmarks:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; master@origin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hint: Run the following &lt;span class="nb"&gt;command&lt;/span&gt; to keep &lt;span class="nb"&gt;local&lt;/span&gt; bookmarks updated on future pulls:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; jj bookmark track master@origin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Initialized repo in &lt;span class="s2"&gt;&amp;#34;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hint: Running &lt;span class="sb"&gt;`&lt;/span&gt;git clean -xdf&lt;span class="sb"&gt;`&lt;/span&gt; will remove &lt;span class="sb"&gt;`&lt;/span&gt;.jj/&lt;span class="sb"&gt;`&lt;/span&gt;!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I am fine with the second hint, even though I don&amp;rsquo;t fully comprehend it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj bookmark track master@origin&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I got this advice&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/jj-hello-world/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;For jj in a blog repo (especially with colocated Git):&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;ol&gt;
&lt;li&gt;Use small, focused commits - jj makes this easy; amend frequently with jj
amend instead of stashing&lt;/li&gt;
&lt;li&gt;Leverage jj log - understand your repo state before operations&lt;/li&gt;
&lt;li&gt;Work on branches - jj new -b feature-name for feature work, keeps main
clean&lt;/li&gt;
&lt;li&gt;Keep commits working - jj can track your working changes automatically&lt;/li&gt;
&lt;li&gt;Use jj sync - pulls and pushes in one command with Git&lt;/li&gt;
&lt;/ol&gt;
&lt;/blockquote&gt;
&lt;p&gt;OK.&lt;/p&gt;
&lt;p&gt;I know &lt;code&gt;jj&lt;/code&gt; does not have the concept of a staging area, thus there&amp;rsquo;s no
&lt;code&gt;jj add&lt;/code&gt;. I double-checked:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj add
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: unrecognized subcommand &lt;span class="s1"&gt;&amp;#39;add&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then what should I do&amp;hellip;commit?!&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj commit&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Opens &lt;code&gt;$EDITOR&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;add hello world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;JJ: Change ID: vvvzruls
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;JJ: This commit contains the following changes:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;JJ: A content/posts/2025-12-03-jj-hello-world.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;JJ:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;JJ: Lines starting with &amp;#34;JJ:&amp;#34; (like this one) will be removed.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Follow-up:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj commit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy &lt;span class="o"&gt;(&lt;/span&gt;@&lt;span class="o"&gt;)&lt;/span&gt; now at: loyssymn 4ba8427d &lt;span class="o"&gt;(&lt;/span&gt;empty&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;no description &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Parent commit &lt;span class="o"&gt;(&lt;/span&gt;@-&lt;span class="o"&gt;)&lt;/span&gt; : vvvzruls d6c2ee34 add hello world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Fancy! Now what? I learned that whenever I am lost, &lt;code&gt;jj&lt;/code&gt; is your friend. &lt;code&gt;jj&lt;/code&gt;
(or &lt;code&gt;jj log&lt;/code&gt;) is akin to &lt;code&gt;git status&lt;/code&gt; and/or &lt;code&gt;git log&lt;/code&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;@ loyssymn &lt;span class="o"&gt;{&lt;/span&gt;redacted email&lt;span class="o"&gt;}&lt;/span&gt; 2025-12-03 04:00:08 9df24e6a
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ &lt;span class="o"&gt;(&lt;/span&gt;no description &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â—‹ vvvzruls &lt;span class="o"&gt;{&lt;/span&gt;redacted email&lt;span class="o"&gt;}&lt;/span&gt; 2025-12-03 03:59:00 git_head&lt;span class="o"&gt;()&lt;/span&gt; d6c2ee34
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ add hello world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ â—‹ oqwvuopo &lt;span class="o"&gt;{&lt;/span&gt;redacted email&lt;span class="o"&gt;}&lt;/span&gt; 2025-12-03 03:36:43 likes 907c5e72
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â•¯ git-freeze
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â—† oqwnlpuv &lt;span class="o"&gt;{&lt;/span&gt;redacted email&lt;span class="o"&gt;}&lt;/span&gt; 2025-12-02 23:12:39 master a9efb058
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ bytebytego: Product Array Without Current Elemen
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;~&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s also:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj status
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy changes:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;M content/posts/2025-12-03-jj-hello-world.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy &lt;span class="o"&gt;(&lt;/span&gt;@&lt;span class="o"&gt;)&lt;/span&gt; : loyssymn 54ba540b &lt;span class="o"&gt;(&lt;/span&gt;no description &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Parent commit &lt;span class="o"&gt;(&lt;/span&gt;@-&lt;span class="o"&gt;)&lt;/span&gt;: vvvzruls d6c2ee34 add hello world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Whilst I keep adding text to this file&amp;hellip;&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;## HEAD (no branch)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; M content/posts/2025-12-03-jj-hello-world.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Oh, look! Our friend is still around.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj amend
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: unrecognized subcommand &lt;span class="s1"&gt;&amp;#39;amend&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;For more information, try &lt;span class="s1"&gt;&amp;#39;--help&amp;#39;&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Hint: You probably want &lt;span class="sb"&gt;`&lt;/span&gt;jj squash&lt;span class="sb"&gt;`&lt;/span&gt;. You can configure &lt;span class="sb"&gt;`&lt;/span&gt;aliases.amend &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;squash&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="k"&gt;if&lt;/span&gt; you want &lt;span class="sb"&gt;`&lt;/span&gt;jj amend&lt;span class="sb"&gt;`&lt;/span&gt; to work.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Really? Oh.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~blog &lt;span class="o"&gt;(&lt;/span&gt;git&lt;span class="o"&gt;)&lt;/span&gt;-&lt;span class="o"&gt;[&lt;/span&gt;jj/keep/d6c2ee34fe38ec5a63644114c4c3b13bb09401f1&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj squash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy &lt;span class="o"&gt;(&lt;/span&gt;@&lt;span class="o"&gt;)&lt;/span&gt; now at: kpumvxpm e60fb5b5 &lt;span class="o"&gt;(&lt;/span&gt;empty&lt;span class="o"&gt;)&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;no description &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Parent commit &lt;span class="o"&gt;(&lt;/span&gt;@-&lt;span class="o"&gt;)&lt;/span&gt; : vvvzruls bba2f04e add hello world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Weird:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~blog (git)-[jj/keep/bba2f04ecd437d8d27e4c8103cb61fc936cd0d89]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;@ kpumvxpm {redacted email} 2025-12-03 04:03:57 41b2cf2f
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ (no description set)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â—‹ vvvzruls {redacted email} 2025-12-03 04:03:21 git_head() bba2f04e
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ add hello world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ â—‹ oqwvuopo {redacted email} 2025-12-03 03:36:43 likes 907c5e72
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”œâ”€â•¯ git-freeze
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â—† oqwnlpuv {redacted email} 2025-12-02 23:12:39 master a9efb058
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;â”‚ bytebytego: Product Array Without Current Elemen
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~blog (git)-[jj/keep/bba2f04ecd437d8d27e4c8103cb61fc936cd0d89]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj status
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy changes:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;M content/posts/2025-12-03-jj-hello-world.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy (@) : kpumvxpm 41b2cf2f (no description set)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Parent commit (@-): vvvzruls bba2f04e add hello world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~blog (git)-[jj/keep/bba2f04ecd437d8d27e4c8103cb61fc936cd0d89]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git status
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;## HEAD (no branch)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; M content/posts/2025-12-03-jj-hello-world.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I thought &lt;code&gt;amend&lt;/code&gt; (or &lt;code&gt;squash&lt;/code&gt;) would be akin to &lt;code&gt;git commit --amend&lt;/code&gt;, but
apparently not? I see two nodes.&lt;/p&gt;
&lt;p&gt;Remember the advice from a while ago?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj sync
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: unrecognized subcommand &lt;span class="s1"&gt;&amp;#39;sync&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Lame.&lt;/p&gt;
&lt;p&gt;Time for &lt;code&gt;jj help -k tutorial&lt;/code&gt; (linked to from &lt;code&gt;jj --help&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;At this point I just want to end the post. I&amp;rsquo;ll try &lt;code&gt;jj git push&lt;/code&gt;. If I am
cut-off, it means it has worked. And we&amp;rsquo;ll continue this in 2026.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj git push
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Warning: No bookmarks found in the default push revset: remote_bookmarks&lt;span class="o"&gt;(&lt;/span&gt;&lt;span class="nv"&gt;remote&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;origin&lt;span class="o"&gt;)&lt;/span&gt;..@
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Nothing changed.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Errr.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj checkout master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: unrecognized subcommand &lt;span class="s1"&gt;&amp;#39;checkout&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Usage: jj &lt;span class="o"&gt;[&lt;/span&gt;OPTIONS&lt;span class="o"&gt;]&lt;/span&gt; &amp;lt;COMMAND&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;For more information, try &lt;span class="s1"&gt;&amp;#39;--help&amp;#39;&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% jj describe -m &lt;span class="s2"&gt;&amp;#34;new just: jj hello world&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Working copy &lt;span class="o"&gt;(&lt;/span&gt;@&lt;span class="o"&gt;)&lt;/span&gt; now at: kpumvxpm 516b5d69 new just: jj hello world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Parent commit &lt;span class="o"&gt;(&lt;/span&gt;@-&lt;span class="o"&gt;)&lt;/span&gt; : vvvzruls bba2f04e add hello world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This is the moment of the post when I had to bail out to &lt;code&gt;git&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Somehow two distinct commits were created. :(&lt;/p&gt;
&lt;p&gt;Until next time.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;From whom? From what? Mystery? I think you know the answer.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/jj-hello-world/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: jj: hello world"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Try</title><link>https://perrotta.dev/2025/12/try/</link><pubDate>Tue, 02 Dec 2025 12:50:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/try/</guid><description>&lt;p&gt;Inspired by &lt;a href="https://github.com/tobi/try"&gt;&lt;code&gt;tobi/try&lt;/code&gt;&lt;/a&gt;
(&lt;a href="https://world.hey.com/dhh/six-billion-reasons-to-cheer-for-shopify-55720846"&gt;via&lt;/a&gt;),
I created my own &lt;code&gt;try&lt;/code&gt; in &lt;a href="https://github.com/thiagowfx/pancake/tree/master/try"&gt;pancake&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Interactive ephemeral workspace manager.&lt;/p&gt;
&lt;p&gt;Create and navigate to temporary project directories with fuzzy finding,
automatic date-prefixing, and recency scoring. Automatically spawns a new
shell in the selected workspace.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Usage:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% try +feature
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~/workspace/tries/2025-12-02-feature&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This creates a dated throwaway directory wherein to make experiments. I need not
worry about deleting it later.&lt;/p&gt;
&lt;p&gt;If, in the future, I need to recall that experiment, I can simply run
&lt;code&gt;try feature&lt;/code&gt;. It will open &lt;code&gt;fzf&lt;/code&gt; with fuzzy finding, prompting me to select a
workspace.&lt;/p&gt;
&lt;p&gt;Normally I delete these directories. This workflow encourages me to keep them
around, should I need to recall something from them.&lt;/p&gt;
&lt;p&gt;For &lt;em&gt;truly&lt;/em&gt; throwaway directories, use &lt;a href="https://perrotta.dev/2024/10/cdtmp-change-to-a-temporary-directory/"&gt;&lt;code&gt;cdtmp&lt;/code&gt;&lt;/a&gt;
instead.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Try"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Snippets manager</title><link>https://perrotta.dev/2025/12/snippets-manager/</link><pubDate>Tue, 02 Dec 2025 11:52:39 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/snippets-manager/</guid><description>&lt;p&gt;Humans are terrible at remembering complex command lines.&lt;/p&gt;
&lt;p&gt;This issue compounds whenever there is a myriad of commands to remember.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been thinking for ages on how to address this gap efficiently. I finally
got a decent workflow.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Unlimited + synchronized shell history: &lt;a href="https://perrotta.dev/2025/11/atuin/"&gt;&lt;code&gt;atuin&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Text expander: &lt;a href="https://perrotta.dev/2025/05/espanso-hello-world/"&gt;&lt;code&gt;espanso&lt;/code&gt;&lt;/a&gt;.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And now, the missing piece: a snippets manager.&lt;/p&gt;
&lt;p&gt;There are three good options:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://masscode.io/"&gt;MassCode&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.renfei.org/snippets-lab/"&gt;Snippets Lab&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/knqyf263/pet"&gt;&lt;code&gt;pet&lt;/code&gt;&lt;/a&gt;: command-line&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I am piloting Snippets Lab&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/snippets-manager/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. It has integration with
&lt;a href="https://www.raycast.com/renfei_song/snippetslab"&gt;Raycast&lt;/a&gt;, and also a system
tray icon.&lt;/p&gt;
&lt;p&gt;These three solutions are enough to manage anything I may ever want to recall.
Commands at my fingertips.&lt;/p&gt;
&lt;p&gt;We can finish with the cherry on top: &lt;a href="https://logseq.com/"&gt;LogSeq&lt;/a&gt; entries to
archive deprecated or &lt;em&gt;potentially&lt;/em&gt; useful commands.&lt;/p&gt;
&lt;p&gt;From 2026 onwards, no command shall ever be lost.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: The aforementioned programs are intended for macOS. Atuin, Espanso,
MassCode, &lt;code&gt;pet&lt;/code&gt; and LogSeq are cross-platform. Snippets Lab is macOS only.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;It is very comparable to MassCode. This choice was a bit arbitrary.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/snippets-manager/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Snippets manager"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Atuin: delete history entries</title><link>https://perrotta.dev/2025/12/atuin-delete-history-entries/</link><pubDate>Mon, 01 Dec 2025 13:35:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/atuin-delete-history-entries/</guid><description>&lt;p&gt;Deleting, scrubbing, redacting old shell history entries is now easier
than ever, thanks to &lt;a href="https://github.com/atuinsh/atuin"&gt;atuin&lt;/a&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% atuin search &lt;span class="s1"&gt;&amp;#39;^aws_login_headless&amp;#39;&lt;/span&gt; --delete
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;deleting 019ad59e973b7c139c4a1d67fe2155be
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;deleting 019ad59e973b7c139c4a1d40a0da15f1&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;First do the search without &lt;code&gt;--delete&lt;/code&gt;, and then re-run the command with
&lt;code&gt;--delete&lt;/code&gt; if the output is what you expect.&lt;/p&gt;
&lt;p&gt;You would want to do so in these two scenarios:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;prevent irrelevant entries from showing up in &lt;code&gt;C-r&lt;/code&gt; (history search), reducing
clutter&lt;/li&gt;
&lt;li&gt;delete sensitive entries e.g. passwords (&lt;code&gt;docker login --password {foo}&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/atuin/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Atuin: delete history entries"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Canary tokens</title><link>https://perrotta.dev/2025/11/canary-tokens/</link><pubDate>Sun, 30 Nov 2025 19:30:23 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>privacy</category><guid>https://perrotta.dev/2025/11/canary-tokens/</guid><description>&lt;p&gt;&lt;a href="https://canarytokens.org/"&gt;Canary Tokens&lt;/a&gt;,
&lt;a href="https://docs.canarytokens.org/guide/"&gt;introduction&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What are Canarytokens&lt;/p&gt;
&lt;p&gt;Canarytokens are like motion sensors for your networks, computers and clouds.
You can put them in folders, on network devices and on your phones.&lt;/p&gt;
&lt;p&gt;Place them where nobody should be poking around and get a clear alarm if they
are accessed. They are designed to look juicy to attackers to increase the
likelihood that they are opened (and they are completely free).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;They are like &lt;a href="https://en.wikipedia.org/wiki/Honeypot_(computing)"&gt;honeypots&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;They are like a digital version of &lt;a href="https://www.apple.com/airtag/"&gt;Air Tags&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Our Canarytokens are easy to sprinkle all over and forget about, until you get
the notification that matters. They are super lightweight and don&amp;rsquo;t require
installing software or running more background processes that can slow down
your PC.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I especially like the idea of the &lt;a href="https://canarytokens.org/nest/"&gt;Credit Card
Token&lt;/a&gt;.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;We give you unique Credit Card details&lt;/p&gt;
&lt;p&gt;You place it somewhere.&lt;/p&gt;
&lt;p&gt;We send you an alert when that Credit Card is used.&lt;/p&gt;
&lt;p&gt;Ideas for using the Credit Card token:&lt;/p&gt;
&lt;p&gt;You can use any name or address in association with the card number and CVV&lt;/p&gt;
&lt;p&gt;Stick this in a database that stores payment information and get alerted if it
is ever breached.&lt;/p&gt;
&lt;p&gt;Put it in a document with other personal information regarding e.g., travel
preferences in case someone snoops around your computer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are various other canary tokens that are super useful.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s like &lt;a href="https://www.youtube.com/watch?v=S03VAuxH7lM"&gt;adding tripping wires&lt;/a&gt;
all over the place.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://blueclouddrive.com/"&gt;See also&lt;/a&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Canary tokens"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/privacy/"&gt;privacy&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Homebrew: bin.install: mv instead of cp</title><link>https://perrotta.dev/2025/11/homebrew-bin.install-mv-instead-of-cp/</link><pubDate>Sun, 30 Nov 2025 19:27:00 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/11/homebrew-bin.install-mv-instead-of-cp/</guid><description>&lt;p&gt;LLM:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Unlike &lt;code&gt;bin.install&lt;/code&gt; in Homebrew (which moves files by default if not given a
hash), &lt;code&gt;install&lt;/code&gt; (the Unix command) copies files. It does not consume the
source file.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Why would you design
&lt;a href="https://docs.brew.sh/Formula-Cookbook#bininstall-foo"&gt;&lt;code&gt;bin.install&lt;/code&gt;&lt;/a&gt; like
this??!&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You&amp;rsquo;ll see stuff like this in some formulae. This moves the file foo into the
formula&amp;rsquo;s bin directory (/opt/homebrew/Cellar/pkg/0.1/bin) and makes it
executable (chmod 0555 foo). Variables for the most common directory locations
are available.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This breaks Unix tradition! &lt;code&gt;install -&amp;gt; copy&lt;/code&gt;.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Homebrew: bin.install: mv instead of cp"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Ghostty shaders</title><link>https://perrotta.dev/2025/11/ghostty-shaders/</link><pubDate>Sun, 30 Nov 2025 18:17:36 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/11/ghostty-shaders/</guid><description>&lt;p&gt;Ghostty supports &lt;a href="https://mitchellh.com/writing/ghostty-devlog-005"&gt;shaders&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/sahaj-b/ghostty-cursor-shaders"&gt;This repo&lt;/a&gt; hosts a
collection of custom shaders readily available.&lt;/p&gt;
&lt;p&gt;I integrated them with my &lt;a href="https://github.com/thiagowfx/.dotfiles"&gt;.dotfiles&lt;/a&gt;
via a
&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/d1a8779290d0ec9181dcc6a7c092d825cd187186"&gt;submodule&lt;/a&gt;:&lt;/p&gt;
&lt;p&gt;Ghostty config:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;custom-shader = shaders/cursor_tail.glsl&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The
&lt;a href="https://github.com/sahaj-b/ghostty-cursor-shaders/blob/main/cursor_tail.glsl"&gt;&lt;code&gt;cursor_tail.glsl&lt;/code&gt;&lt;/a&gt;
file was added with a symlink to the submodule.&lt;/p&gt;
&lt;p&gt;The end result? See the &lt;a href="https://github.com/sahaj-b/ghostty-cursor-shaders?tab=readme-ov-file#demos"&gt;demo in the repo README&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;#power&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Mitchell Hashimoto:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Okay, but this is all completely pointless,right? The most common use case is
fun and that&amp;rsquo;s certainly not necessary (yeah, screw fun, right?). However, the
primary practical use case for custom shaders is accessibility. Custom shaders
are a really great way to specifically address certain forms of
colorblindness, affect contrast or brightness to make things more readable,
create &amp;ldquo;magnifying glass&amp;rdquo; effects, etc.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;See also: &lt;a href="https://catskull.net/fun-with-ghostty-shaders.html"&gt;Fun with Ghostty
Shaders&lt;/a&gt;,
&lt;a href="https://l-o-o-s-e-d.net/kb/terminals/ghostty"&gt;l-o-o-s-e-d.net&lt;/a&gt;&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Ghostty shaders"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/serenity/"&gt;serenity&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Chrome -&gt; Orion</title><link>https://perrotta.dev/2025/11/chrome-orion/</link><pubDate>Sun, 30 Nov 2025 14:03:19 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/11/chrome-orion/</guid><description>&lt;p&gt;It takes effort to overcome friction.&lt;/p&gt;
&lt;p&gt;This year I have completely moved away from Google Search. First, thanks to
&lt;a href="https://perrotta.dev/2024/12/switching-from-google-to-chatgpt-search/"&gt;ChatGPT&lt;/a&gt;.
Then, thanks to &lt;a href="https://perrotta.dev/2025/05/kagi/"&gt;Kagi&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;You may think this is a blog post gimmick to sound dramatic, but it is really
not. Nowadays I bail out to Google (&lt;code&gt;!g&lt;/code&gt; in Kagi and in DuckDuckGo) very rarely:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;to search for a store to buy a product from (it&amp;rsquo;s a commercial search engine
after all) â€“ do not use it to seek product recommendations though, they would
be biased&lt;/li&gt;
&lt;li&gt;to see what mainstream search results look like for a specific search term&lt;/li&gt;
&lt;li&gt;to search for something obscure or rare â€“ for example, torrents of Linux ISOsâ„¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And now I had been meaning to &lt;a href="https://onlinesafety.substack.com/p/digital-fingerprinting-the-reason-to-ditch-chrome"&gt;switch from Google
Chrome&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Chromium or &lt;a href="https://github.com/ungoogled-software/ungoogled-chromium"&gt;Ungoogled
Chromium&lt;/a&gt; are solid
choices, but I wanted to move away completely from the Chromium ecosystem.&lt;/p&gt;
&lt;p&gt;Firefox is not a real choice anymore. Firefox &lt;strong&gt;was&lt;/strong&gt; amazing in the 2010s.&lt;/p&gt;
&lt;p&gt;Excluding the above, there isn&amp;rsquo;t a lot of choice.&lt;/p&gt;
&lt;p&gt;Safari is solid but it evolves slowly and babysits the power user. I am
flabbergasted that I still, in 2025, cannot change its default search engine to
one of my choice. This is not OK. It&amp;rsquo;s possible to use Kagi in Safari by working
around its restrictions with an extension, but it is hacky.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://ladybird.org/"&gt;Ladybird&lt;/a&gt; is promising but it&amp;rsquo;s still a baby.&lt;/p&gt;
&lt;p&gt;If we backtrack to Chromium derivatives, there&amp;rsquo;s Opera, Vivaldi, Edge and Brave.&lt;/p&gt;
&lt;p&gt;Edge is full of Copilot and classic MSFT stuff these days. MSFT, you know, from
Internet Explorer.&lt;/p&gt;
&lt;p&gt;Vivaldi has way too many features. It is confusing. I want simplicity and
minimalism. Vivaldi is like the KDE of Web Browsers.&lt;/p&gt;
&lt;p&gt;Opera has no moat. It has lots of bookmarks with sponsors though.&lt;/p&gt;
&lt;p&gt;Brave could be a good choice, it ships with some good defaults, but it is
surrounded by controversy.&lt;/p&gt;
&lt;p&gt;Arc / Dia are very, very, very far from being real options. No, thank you.&lt;/p&gt;
&lt;p&gt;Browser vendors have their own interests in mind. They all have their own
agenda. It is very hard to find one that has the user interests in mind.&lt;/p&gt;
&lt;p&gt;So now I am trying out &lt;a href="https://orionbrowser.com/"&gt;Orion&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Orion is based on WebKit. It heavily resembles Safari. It supports both Firefox
and Chrome extensions, including manifest V2 ones. It ships with a content
blocker (adblocker). It has no telemetry. Kagi products and features (search,
translate) are well integrated into Orion, but they do not feel pushy in case
you do not want to use them. There&amp;rsquo;s Orion for iOS, so it&amp;rsquo;s possible to
seamlessly sync your browsing history and bookmarks across multiple devices
should you want to â€“ and that is done via iCloud.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;WebKit. Extensions. Privacy. Pick all three.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I do not have more to say at this time. The test of time will tell whether it
will stick.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Chrome -&gt; Orion"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Atuin</title><link>https://perrotta.dev/2025/11/atuin/</link><pubDate>Sun, 30 Nov 2025 13:35:54 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/11/atuin/</guid><description>&lt;p&gt;My current workflow to manage shell history is simple, I have this config in
my &lt;code&gt;~/.zshrc.d/&lt;/code&gt;&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# fzf: fuzzy file finder&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt; $+commands&lt;span class="o"&gt;[&lt;/span&gt;fzf&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;))&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# alpine/arch, debian&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; src_files &lt;span class="o"&gt;{&lt;/span&gt;/usr/share/fzf,/usr/share/doc/fzf/examples&lt;span class="o"&gt;}&lt;/span&gt;/&lt;span class="o"&gt;{&lt;/span&gt;completion,key-bindings&lt;span class="o"&gt;}&lt;/span&gt;.zsh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# brew&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="o"&gt;((&lt;/span&gt; $+commands&lt;span class="o"&gt;[&lt;/span&gt;brew&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;))&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; src_files &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;brew --prefix&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;/opt/fzf/shell/&lt;span class="o"&gt;{&lt;/span&gt;completion,key-bindings&lt;span class="o"&gt;}&lt;/span&gt;.zsh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://github.com/junegunn/fzf"&gt;&lt;code&gt;fzf&lt;/code&gt;&lt;/a&gt; does it all.&lt;/p&gt;
&lt;p&gt;I hit &lt;code&gt;C-r&lt;/code&gt; and get fuzzy finding over all my &lt;code&gt;history&lt;/code&gt;, this has been
overpowering my productivity for ages, likely since university.&lt;/p&gt;
&lt;p&gt;Then I found out I could go one step further.&lt;/p&gt;
&lt;p&gt;Enter &lt;a href="https://atuin.sh"&gt;Atuin&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Making your shell magical&lt;/p&gt;
&lt;p&gt;Sync, search and backup shell history with Atuin.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Installing &lt;code&gt;atuin&lt;/code&gt; is simple: it&amp;rsquo;s available &lt;a href="https://repology.org/project/atuin/versions"&gt;everywhere&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install atuin&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Configuring &lt;code&gt;atuin&lt;/code&gt; is simple, start by adding this snippet to your &lt;code&gt;/.zshrc&lt;/code&gt;
file&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/11/atuin/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# atuin: https://docs.atuin.sh/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;((&lt;/span&gt; $+commands&lt;span class="o"&gt;[&lt;/span&gt;atuin&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;atuin init zsh --disable-up-arrow&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now run &lt;code&gt;atuin import auto&lt;/code&gt; to import your shell history entries to &lt;code&gt;atuin&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;By default, &lt;code&gt;atuin init&lt;/code&gt; binds both &lt;code&gt;C-r&lt;/code&gt; and the up arrow. I find the up
arrow binding disruptive.&lt;/p&gt;
&lt;p&gt;I want my workflow to stay as close as possible to &lt;code&gt;fzf&lt;/code&gt; &lt;code&gt;C-r&lt;/code&gt;.
&lt;a href="https://docs.atuin.sh/configuration/key-binding/#disable-up-arrow"&gt;&lt;code&gt;--disable-up-arrow&lt;/code&gt;&lt;/a&gt;
is essential for that.&lt;/p&gt;
&lt;p&gt;Pressing &lt;code&gt;C-r&lt;/code&gt; will invoke a fuzzy find window that behaves similarly to &lt;code&gt;fzf&lt;/code&gt;,
though it&amp;rsquo;s more powerful. It&amp;rsquo;s hard to describe, you must try it out.&lt;/p&gt;
&lt;p&gt;This is enough to make the migration. Which makes me feel bad for having
procrastinated for so long to do so. Trying out &lt;code&gt;atuin&lt;/code&gt; has been in my TODO list
for ages!&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s an optional step of syncing your history with their remote cloud. Or
with your own, because there&amp;rsquo;s an option of self-hosting a server (&lt;code&gt;atuin server start&lt;/code&gt;). Self-hosting is optimal, but trying out their cloud first to get a feel
of the sync experience is reasonable.&lt;/p&gt;
&lt;p&gt;Syncing happens every hour by default, but this is configurable.&lt;/p&gt;
&lt;p&gt;See &lt;a href="https://docs.atuin.sh/reference/sync/"&gt;sync docs&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Atuin can back up your history to a server, and use this to ensure multiple
machines have the same shell history. This is all encrypted end-to-end, so the
server operator can never see your data!&lt;/p&gt;
&lt;p&gt;Anyone can host a server (try atuin server start, more docs to follow), but I
host one at &lt;a href="https://api.atuin.sh"&gt;https://api.atuin.sh&lt;/a&gt;. This is the default server address, which
can be changed in the config. Again, I cannot see your data, and do not want
to.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;You can create a &lt;code&gt;~/.config/atuin/config.toml&lt;/code&gt; to customize &lt;code&gt;atuin&lt;/code&gt;. I added
this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="toml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;toml&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## With workspace filtering enabled, Atuin will filter for commands executed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## in any directory within a git repository tree (default: false).&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;##&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## To use workspace mode by default when available, set this to true and&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## set filter_mode to &amp;#34;workspace&amp;#34; or leave it unspecified and&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## set search.filters to include &amp;#34;workspace&amp;#34; before other filter modes.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# workspaces = false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;workspaces&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## which filter mode to use when atuin is invoked from a shell up-key binding&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## the accepted values are identical to those of &amp;#34;filter_mode&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## leave unspecified to use same mode set in &amp;#34;filter_mode&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# filter_mode_shell_up_key_binding = &amp;#34;global&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;filter_mode_shell_up_key_binding&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;directory&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## Defaults to true. If enabled, upon hitting enter Atuin will immediately execute the command. Press tab to return to the shell and edit.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# This applies for new installs. Old installs will keep the old behaviour unless configured otherwise.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# Similarly to fzf C-r&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;enter_accept&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="kc"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## Defaults to &amp;#34;emacs&amp;#34;. This specifies the keymap on the startup of `atuin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## search`. If this is set to &amp;#34;auto&amp;#34;, the startup keymap mode in the Atuin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## search is automatically selected based on the shell&amp;#39;s keymap where the&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## keybinding is defined. If this is set to &amp;#34;emacs&amp;#34;, &amp;#34;vim-insert&amp;#34;, or&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## &amp;#34;vim-normal&amp;#34;, the startup keymap mode in the Atuin search is forced to be&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;## the specified one.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c"&gt;# keymap_mode = &amp;#34;auto&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nx"&gt;keymap_mode&lt;/span&gt; &lt;span class="p"&gt;=&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;vim-insert&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;enter_accept&lt;/code&gt; is an important tweak to resemble &lt;code&gt;fzf&lt;/code&gt;. By default, pressing
Enter when looking up history entries in &lt;code&gt;atuin&lt;/code&gt; will automatically execute the
command. In &lt;code&gt;fzf&lt;/code&gt; you have an opportunity to edit/tweak the command before
execution, which is what I prefer. Set &lt;code&gt;enter_accept = false&lt;/code&gt; to achieve the
same behavior in &lt;code&gt;atuin&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;atuin&lt;/code&gt; has an option to manage
&lt;a href="https://docs.atuin.sh/guide/dotfiles/"&gt;dotfiles&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;While Atuin started as a tool for syncing and searching shell history, we are
building tooling for syncing dotfiles across machines, and making them easier
to work with.&lt;/p&gt;
&lt;p&gt;At the moment, we support managing and syncing of shell aliases and
environment variables - with more coming soon.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;but I don&amp;rsquo;t feel the need to use this.&lt;/p&gt;
&lt;p&gt;The magic of &lt;code&gt;atuin&lt;/code&gt;, when using multiple computers is its shell history
synchronization. Picking up the slack in my personal computer would reveal my
work computer history and vice-versa. In some environments this is very
welcome!&lt;/p&gt;
&lt;p&gt;Also cool: &lt;code&gt;stats&lt;/code&gt; for free:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% atuin stats
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–®â–®â–®â–®â–®â–®â–®â–®â–®&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;4540&lt;/span&gt; git commit
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–®â–®â–®â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;3062&lt;/span&gt; ack
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–®â–®â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;2636&lt;/span&gt; vim
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;1304&lt;/span&gt; &lt;span class="nb"&gt;cd&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;1240&lt;/span&gt; fd
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;1186&lt;/span&gt; tsh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;915&lt;/span&gt; grep
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–®â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;913&lt;/span&gt; just
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;822&lt;/span&gt; git add
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;â–® &lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="m"&gt;818&lt;/span&gt; git nb
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Total commands: &lt;span class="m"&gt;29464&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Unique commands: &lt;span class="m"&gt;20610&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Query past entries with a SQL-like CLI:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% atuin search --exit &lt;span class="m"&gt;0&lt;/span&gt; --after&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;4 months ago&amp;#34;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;^skopeo&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Clearly I&amp;rsquo;m a die-hard &lt;a href="https://beyondgrep.com/"&gt;&lt;code&gt;ack&lt;/code&gt;&lt;/a&gt; fan. Will I ever switch
to &lt;a href="https://github.com/BurntSushi/ripgrep"&gt;&lt;code&gt;rg&lt;/code&gt;&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;&lt;a href="https://just.systems/"&gt;&lt;code&gt;just&lt;/code&gt;&lt;/a&gt; is starting to become part of my core tool belt.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;See also&lt;/strong&gt;: &lt;a href="https://archive.fosdem.org/2023/schedule/event/rust_atuin_magical_shell_history_with_rust/"&gt;Tech
Talk&lt;/a&gt;,
including
&lt;a href="https://archive.fosdem.org/2023/schedule/event/rust_atuin_magical_shell_history_with_rust/attachments/slides/5735/export/events/attachments/rust_atuin_magical_shell_history_with_rust/slides/5735/Atuin_FOSDEM_1.pdf"&gt;slides&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Next chapter: &lt;a href="https://github.com/atuinsh/desktop"&gt;Atuin Desktop&lt;/a&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;code&gt;bash&lt;/code&gt;, &lt;code&gt;fish&lt;/code&gt;, &lt;code&gt;xonsh&lt;/code&gt; are also supported at the time of this writing.&amp;#160;&lt;a href="https://perrotta.dev/2025/11/atuin/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Atuin"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>python-is-python3 with macOS homebrew</title><link>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</link><pubDate>Sun, 30 Nov 2025 00:22:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/</guid><description>&lt;p&gt;I face this annoyance all the time:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;zsh: command not found: python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;127 thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Python 3.14.0 (main, Oct 7 2025, 09:34:52) [Clang 17.0.0 (clang-1700.0.13.3)] on darwin
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Type &amp;#34;help&amp;#34;, &amp;#34;copyright&amp;#34;, &amp;#34;credits&amp;#34; or &amp;#34;license&amp;#34; for more information.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt;&amp;gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;python&lt;/code&gt; executable is not available on macOS natively.&lt;/p&gt;
&lt;p&gt;It is not available on homebrew either, even with &lt;code&gt;brew install python&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;python3&lt;/code&gt; is there though:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which -a python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/python3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/usr/bin/python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I want to be able to run &lt;code&gt;python&lt;/code&gt; without having to remember I am running
Python 3. Python 3 is the &lt;em&gt;de facto standard&lt;/em&gt; in the 2020s, there should be no
need to remember this explicitly, we take it as gospel already.&lt;/p&gt;
&lt;p&gt;There are various ways to resolve this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Classic. I hate it. Now you&amp;rsquo;ll have a &lt;code&gt;python&lt;/code&gt; alias even if &lt;code&gt;python3&lt;/code&gt; is not
available. This is not elegant at all. You could make it a bit better, sure:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;command&lt;/span&gt; -v python3 &amp;gt;/dev/null 2&amp;gt;&lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Or even a bit more idiomatically if using &lt;code&gt;zsh&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;((&lt;/span&gt; $+commands&lt;span class="o"&gt;[&lt;/span&gt;python3&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;))&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;alias&lt;/span&gt; &lt;span class="nv"&gt;python&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Still, this is not a problem the shell should own. It just &lt;em&gt;feels&lt;/em&gt; wrong. This
is a package management problem. The shell remedy is just a cheap band-aid.
Can we do better than this?&lt;/p&gt;
&lt;p&gt;What about a wrapper script in &lt;code&gt;/usr/local/bin&lt;/code&gt;?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;#!/usr/bin/env bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="cp"&gt;&lt;/span&gt;&lt;span class="nb"&gt;exec&lt;/span&gt; python3 &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;This is better. Much better. However, why not make it even simpler?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% sudo ln -s /usr/bin/python3 /usr/local/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;A symlink suffices. You just need to decide whether to point it out to &lt;code&gt;python3&lt;/code&gt;
in homebrew or in the system.&lt;/p&gt;
&lt;p&gt;A symlink is not reproducible&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; though. If you reinstall your system, or acquire a
new one, now you&amp;rsquo;ll have to remember to re-create it.&lt;/p&gt;
&lt;p&gt;Sure, you could script it in your .dotfiles installation script, or add it to
the system installation notes section in your second brain app. Who am I to tell
you what to do?&lt;/p&gt;
&lt;p&gt;Here is my favorite way to address the issue: install a package!&lt;/p&gt;
&lt;p&gt;For example, there was a time in Debian and Ubuntu that the
&lt;a href="https://packages.debian.org/sid/python-is-python3"&gt;&lt;code&gt;python-is-python3&lt;/code&gt;&lt;/a&gt; package
did exactly that:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a convenience package which ships a symlink to point the
/usr/bin/python interpreter at the current default python3. It may improve
compatibility with other modern systems, whilst breaking some obsolete or
3rd-party software.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Now you can guess what the source of my inspiration was. I created a homebrew
formula to do the same:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;PythonIsPython3&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Make python point to python3&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;homepage&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/homebrew-taps&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;url&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;file:///dev/null&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;1.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;sha256&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;depends_on&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install_symlink&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="n"&gt;opt_bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python3&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install_symlink&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;python&amp;#34;&lt;/span&gt;&lt;span class="o"&gt;].&lt;/span&gt;&lt;span class="n"&gt;opt_bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pip3&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pip&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now that I have a formula, I need to create a tap to host it somewhere.&lt;/p&gt;
&lt;p&gt;Hence &lt;a href="https://github.com/thiagowfx/homebrew-taps"&gt;https://github.com/thiagowfx/homebrew-taps&lt;/a&gt; is born.&lt;/p&gt;
&lt;p&gt;To install it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew tap thiagowfx/taps
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install python-is-python3&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Enjoy peace!&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which python
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/python&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;This is a very loose usage of &amp;ldquo;reproducible&amp;rdquo;. Sorry Nix folks, I meant no
harm!&amp;#160;&lt;a href="https://perrotta.dev/2025/11/python-is-python3-with-macos-homebrew/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: python-is-python3 with macOS homebrew"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;bestof&lt;/a&gt;, &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item><item><title>CorelDRAW: disable ads on Windows</title><link>https://perrotta.dev/2025/11/coreldraw-disable-ads-on-windows/</link><pubDate>Sat, 29 Nov 2025 13:21:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/11/coreldraw-disable-ads-on-windows/</guid><description>&lt;p&gt;From &amp;lsquo;Technical Support&amp;rsquo; tales of the trenches.&lt;/p&gt;
&lt;p&gt;Whenever CorelDRAW is installed on Windows, by default it will display ads upon
startup, every single day. I call this malware.&lt;/p&gt;
&lt;p&gt;To disable this hostile behavior:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open Task Scheduler (&amp;lsquo;Agendador de Tarefas&amp;rsquo;)&lt;/li&gt;
&lt;li&gt;Look at the task library (&amp;lsquo;biblioteca do agendador de tarefas&amp;rsquo;)&lt;/li&gt;
&lt;li&gt;Deactivate or delete the entries named &lt;code&gt;CorelUpdateHelperTaskCore*&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Enjoy peace.&lt;/p&gt;
&lt;p style="text-align: center; margin-top: 2em;"&gt;â€” Â§ â€”&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: CorelDRAW: disable ads on Windows"&gt;email&lt;/a&gt; â€¢ &lt;strong&gt;Tags:&lt;/strong&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;dev&lt;/a&gt;&lt;/p&gt;</description></item></channel></rss>