<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Dev on ¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content in Dev on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en-us</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2021 - 2025 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><lastBuildDate>Sat, 29 Nov 2025 02:35:12 -0300</lastBuildDate><atom:link href="https://perrotta.dev/tags/dev/index.xml" rel="self" type="application/rss+xml"/><item><title>chrome://bookmarks</title><link>https://perrotta.dev/2025/11/chrome/bookmarks/</link><pubDate>Sat, 29 Nov 2025 02:32:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/chrome/bookmarks/</guid><description>&lt;p&gt;When using Chromium or derivatives, you can add a bookmark to your Bookmarks Bar
with the following link:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;chrome://bookmarks&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It&amp;rsquo;s a quick shortcut to Settings &amp;gt; Bookmarks and Lists &amp;gt; Bookmark Manager.&lt;/p&gt;</description></item><item><title>Chrome DevTools: toggle prefers-color-scheme</title><link>https://perrotta.dev/2025/11/chrome-devtools-toggle-prefers-color-scheme/</link><pubDate>Thu, 27 Nov 2025 18:46:08 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/chrome-devtools-toggle-prefers-color-scheme/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: My blog automatically selects a light or dark color theme
depending on the user&amp;rsquo;s browser or system preferences. Assume it currently
defaults to light. How to force dark mode temporarily?&lt;/p&gt;
&lt;p&gt;This is needed for local testing and theme development purposes.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/57606960/how-can-i-emulate-prefers-color-scheme-media-query-in-chrome"&gt;Stack
Overflow&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Open Chromium (or Google Chrome)&lt;/li&gt;
&lt;li&gt;Open DevTools&lt;/li&gt;
&lt;li&gt;Open the Command Control (Palette): &lt;code&gt;Cmd + Shift+ P&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;Type &amp;ldquo;Show rendering&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Set the Emulate CSS media feature &lt;code&gt;prefers-color-scheme&lt;/code&gt; to the desired value&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>git: prune stale branches</title><link>https://perrotta.dev/2025/11/git-prune-stale-branches/</link><pubDate>Thu, 27 Nov 2025 18:04:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/git-prune-stale-branches/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Delete all local git branches whose counterpart remote
branches have already been merged upstream.&lt;/p&gt;
&lt;p&gt;Update &lt;code&gt;~/.gitconfig&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="gitconfig"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;gitconfig&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;[alias]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="na"&gt;prune-gone&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;!git fetch -p &amp;amp;&amp;amp; git branch -vv | awk &amp;#39;/: gone]/{print $1}&amp;#39; | xargs -r git branch -D
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s"&gt; world = !git fetch --all &amp;amp;&amp;amp; git remote prune origin &amp;amp;&amp;amp; git prune &amp;amp;&amp;amp; git prune-gone&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now simply run &lt;code&gt;git prune-gone&lt;/code&gt; ‚Äì or, even better, &lt;code&gt;git world&lt;/code&gt; for a more
complete cleanup.&lt;/p&gt;
&lt;p&gt;This is much more ergonomic than hunting down individual branches and doing &lt;code&gt;git push origin :{my branch}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Example usage:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ~/Workspace/pancake &lt;span class="o"&gt;(&lt;/span&gt;git&lt;span class="o"&gt;)&lt;/span&gt;-&lt;span class="o"&gt;[&lt;/span&gt;master&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;From github.com:thiagowfx/pancake
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - &lt;span class="o"&gt;[&lt;/span&gt;deleted&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt; -&amp;gt; origin/thiagowfx/apkbuild-sync
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - &lt;span class="o"&gt;[&lt;/span&gt;deleted&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;none&lt;span class="o"&gt;)&lt;/span&gt; -&amp;gt; origin/thiagowfx/wt-no-origin-graceful
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Enumerating objects: 13, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Counting objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;13/13&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Compressing objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;5/5&lt;span class="o"&gt;)&lt;/span&gt;, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;remote: Total &lt;span class="m"&gt;8&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 5&lt;span class="o"&gt;)&lt;/span&gt;, reused &lt;span class="m"&gt;3&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;delta 3&lt;span class="o"&gt;)&lt;/span&gt;, pack-reused &lt;span class="m"&gt;0&lt;/span&gt; &lt;span class="o"&gt;(&lt;/span&gt;from 0&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Unpacking objects: 100% &lt;span class="o"&gt;(&lt;/span&gt;8/8&lt;span class="o"&gt;)&lt;/span&gt;, 2.61 KiB &lt;span class="p"&gt;|&lt;/span&gt; 668.00 KiB/s, &lt;span class="k"&gt;done&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; f727bd7..51f81ee master -&amp;gt; origin/master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Deleted branch thiagowfx/wt-cd-dash &lt;span class="o"&gt;(&lt;/span&gt;was 6403261&lt;span class="o"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>GitHub labels vs merge when ready</title><link>https://perrotta.dev/2025/11/github-labels-vs-merge-when-ready/</link><pubDate>Thu, 27 Nov 2025 16:00:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/github-labels-vs-merge-when-ready/</guid><description>&lt;p&gt;GitHub allows marking PRs to be &lt;a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/merging-a-pull-request-with-a-merge-queue"&gt;merged when
ready&lt;/a&gt;.
This means a merge operation will automatically happen in the background once
all PR requirements are satisfied i.e. CI checks pass, teammate approvals, etc.&lt;/p&gt;
&lt;p&gt;At Google (Critique, Piper) there&amp;rsquo;s an equivalent setting for internal
CLs, which happens to be named &amp;ldquo;Auto Submit&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;I am a big fan of both mechanisms.&lt;/p&gt;
&lt;p&gt;Marking a PR as ready to be auto-merged, or a CL as ready to be auto submitted,
is a signal from my side that I am confident the PR / CL is in its final state,
expecting few to no review comments.&lt;/p&gt;
&lt;p&gt;That said: this happens to be an issue whenever I need two or more reviewers to
sign-off on my changes.&lt;/p&gt;
&lt;p&gt;As soon as the first reviewer approves the PR / CL, it would be merged, right
away. What if I need to wait for the second reviewer as well?&lt;/p&gt;
&lt;p&gt;In Critique one can address this by adding a &lt;code&gt;WANT_LGTM=all&lt;/code&gt; footer to the CL
description. Now Piper will enforce that the CL is only merged once all
reviewers approve it.&lt;/p&gt;
&lt;p&gt;In GitHub there&amp;rsquo;s no straightforward out-of-the-box equivalent. There are ways
to work around the platform limitations, but they all seem hacky to me.&lt;/p&gt;
&lt;p&gt;I found an alternative: designate a &lt;code&gt;done&lt;/code&gt;
&lt;a href="https://docs.github.com/en/issues/using-labels-and-milestones-to-track-work/managing-labels"&gt;label&lt;/a&gt;
to represent that no further changes are planned in the PR.&lt;/p&gt;
&lt;p&gt;Now the second (or last, if more than two) reviewer can be confident to trigger
the merge of the PR as soon as they approve it.&lt;/p&gt;
&lt;p&gt;Adopting this convention is a team process.&lt;/p&gt;</description></item><item><title>ghostty: quick terminal</title><link>https://perrotta.dev/2025/11/ghostty-quick-terminal/</link><pubDate>Thu, 27 Nov 2025 01:43:35 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/ghostty-quick-terminal/</guid><description>&lt;p&gt;&lt;a href="https://ghostty.org/"&gt;Ghostty&lt;/a&gt; has a
&lt;a href="https://en.wikipedia.org/wiki/Quake_(video_game)"&gt;Quake&lt;/a&gt;-like&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; mode to pop
up a terminal (console) from the top of the screen, no matter where you are.&lt;/p&gt;
&lt;p&gt;Enable it with this setting in your Ghostty config:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;keybind = global:cmd+;=toggle_quick_terminal&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;global:&lt;/code&gt; is what does the &amp;ldquo;no matter where you are&amp;rdquo; magic. Even if your focus
is in another application / window, the shortcut will still work. I did not test
it with conflicting shortcuts, it&amp;rsquo;s better to pick an uncommon one (don&amp;rsquo;t pick
&lt;code&gt;Cmd + T&lt;/code&gt;!).&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Cmd + ;&lt;/code&gt; seems reasonable. I am also dabbling with &lt;code&gt;Cmd + Shift + Enter&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The terminal session persists. Say you open &lt;code&gt;vim&lt;/code&gt; and then close the terminal.
Upon opening it again, &lt;code&gt;vim&lt;/code&gt; will still be there. This blog post was written
from the quick terminal.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;See also: &lt;a href="https://guake.github.io/"&gt;Guake Terminal&lt;/a&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>The almighty Blogroll</title><link>https://perrotta.dev/2025/11/the-almighty-blogroll/</link><pubDate>Tue, 25 Nov 2025 14:13:57 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/the-almighty-blogroll/</guid><description>&lt;p&gt;It&amp;rsquo;s about time: I added a &lt;a href="https://perrotta.dev/blogroll"&gt;blogroll&lt;/a&gt; to my site.&lt;/p&gt;
&lt;p&gt;The list comprises not even 10% of my subscriptions, but it was carefully
curated.&lt;/p&gt;
&lt;p&gt;I am just trying to do my part to keep the &lt;a href="https://indieweb.org/"&gt;Indie Web&lt;/a&gt;
alive. :)&lt;/p&gt;</description></item><item><title>fx</title><link>https://perrotta.dev/2025/11/fx/</link><pubDate>Mon, 24 Nov 2025 23:51:59 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/fx/</guid><description>&lt;p&gt;&lt;a href="https://fx.wtf/"&gt;fx&lt;/a&gt; is the new &lt;a href="https://jqlang.org/"&gt;&lt;code&gt;jq&lt;/code&gt;&lt;/a&gt;
(&lt;a href="https://andre.arko.net/2025/06/13/fx.wtf/"&gt;via&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I&amp;rsquo;m a longtime user of jq, but its language is‚Ä¶ not intuitive to me. I spent a
lot of time searching for prewritten jq programs I can use, or reading the
docs trying to figure out the exact thing that I want to do. Mostly, I think
to myself &amp;ldquo;why do I have to learn a new language to manipulate JSON&amp;rdquo; every
time I use it, even if my use is successful and does the thing I want.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;Good news, you don&amp;rsquo;t have to learn a new language to filter JSON anymore,
thanks to fx. With a docs site at the excellent domain fx.wtf, and the ability
to filter interactively or by providing Javascript as arguments, fx is the
program I have always wished that jq was.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Definitely adding it to my tool belt.&lt;/p&gt;
&lt;p&gt;I did some experimentation and it seems to be very user-friendly and intuitive
to use.&lt;/p&gt;</description></item><item><title>howto</title><link>https://perrotta.dev/2025/11/howto/</link><pubDate>Mon, 24 Nov 2025 23:20:46 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/howto/</guid><description>&lt;p&gt;&lt;a href="https://github.com/nalgeon/howto"&gt;https://github.com/nalgeon/howto&lt;/a&gt; (&lt;a href="https://antonz.org/howto/"&gt;via&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Humble command-line assistant&lt;/p&gt;
&lt;p&gt;Howto helps you solve command-line tasks with AI. Describe the task, and howto
will suggest a solution:&lt;/p&gt;
&lt;p&gt;Howto works with any OpenAI-compatible provider and local Ollama models. It&amp;rsquo;s
a simple tool that doesn&amp;rsquo;t interfere with your terminal. Not an &amp;ldquo;intelligent
terminal&amp;rdquo; or anything. You ask, and howto answers. That&amp;rsquo;s the deal.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Installation:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew tap nalgeon/howto https://github.com/nalgeon/howto
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install howto&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Configuration: add to my shell startup file:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Lazy-load API keys only when needed to avoid shell startup delay&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v howto &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	_load_api_keys_howto&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		&lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;HOWTO_AI_TOKEN&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get openai&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		&lt;span class="c1"&gt;# Redefine itself to be a no-op after first call&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;		_load_api_keys_howto&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; :&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="c1"&gt;# Wrap all AI CLI commands to auto-load keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;	&lt;span class="nb"&gt;command&lt;/span&gt; -v howto &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;howto() { _load_api_keys_howto; command howto \&amp;#34;\$@\&amp;#34;; }&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In this case, I retrieve the API token from
&lt;a href="https://github.com/simonw/llm"&gt;&lt;code&gt;llm&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Usage examples:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% howto curl post request
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;curl -X POST &lt;span class="o"&gt;[&lt;/span&gt;URL&lt;span class="o"&gt;]&lt;/span&gt; -d &lt;span class="s2"&gt;&amp;#34;[data]&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;curl&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; is used to make HTTP requests from the &lt;span class="nb"&gt;command&lt;/span&gt; line.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;-X POST&lt;span class="sb"&gt;`&lt;/span&gt; option specifies that the request method is POST.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;-d &lt;span class="s2"&gt;&amp;#34;[data]&amp;#34;&lt;/span&gt;&lt;span class="sb"&gt;`&lt;/span&gt; option is used to send the specified data in the POST request
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;body.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% howto terraform init given a backend and a tfvars
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;terraform init -backend-config&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;backend-config-file&amp;gt; -var-file&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;variables-file&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;terraform init&lt;span class="sb"&gt;`&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; initializes a Terraform working directory,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;preparing it &lt;span class="k"&gt;for&lt;/span&gt; other commands.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;-backend-config&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;backend-config-file&amp;gt;&lt;span class="sb"&gt;`&lt;/span&gt; option specifies a file containing
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;backend configuration settings.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;The &lt;span class="sb"&gt;`&lt;/span&gt;-var-file&lt;span class="o"&gt;=&lt;/span&gt;&amp;lt;variables-file&amp;gt;&lt;span class="sb"&gt;`&lt;/span&gt; option specifies a file containing variable
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;definitions.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Workflow: when stuck, press &lt;code&gt;Ctrl + a&lt;/code&gt; (go to beginning of line), type &lt;code&gt;howto&lt;/code&gt;,
press &lt;code&gt;&amp;lt;Enter&amp;gt;&lt;/code&gt;.&lt;/p&gt;</description></item><item><title>Canary</title><link>https://perrotta.dev/2025/11/canary/</link><pubDate>Mon, 24 Nov 2025 22:42:09 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/canary/</guid><description>&lt;p&gt;Inspired by &lt;a href="https://www.usecue.com/blog/warrant-canary-added/"&gt;Joost van der
Schee&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Warrant canary added&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;I have added a canary to the homepage. It is not just a pretty illustration,
it is a signal that is accompanied by a timestamp in the head, called a
warrant canary. I got the idea from &lt;a href="https://ecirtam.net/"&gt;this website&lt;/a&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;The warrant canary is the digital equivalent of the canary coal miners take
into the mine. As long as the canary is alive everything is okay. In this case
the timestamp is the equivalent of the last time somebody checked the canary&amp;rsquo;s
well-being. The canary implicitly inform visitors about being served with a
government subpoena (forcing the delivery of PII and meta data to the
government), despite legal prohibitions on revealing the existence of the
subpoena. It basically tells you that there has NOT been a court-issued
subpoena before the canary&amp;rsquo;s timestamp. The timestamp only updates when I
publish to this website. If I ever get a subpoena I will simply stop
publishing posts on this website. So‚Ä¶ with every new post you will know the
canary is still alive and our (and your) data has not been breached. Isn&amp;rsquo;t
that great news?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;I added the canary to be more transparent, but also (and more importantly) to
raise awareness of the growing digital surveillance worldwide.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/canary"&gt;Canary&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;üê§&lt;/p&gt;</description></item><item><title>Stow</title><link>https://perrotta.dev/2025/11/stow/</link><pubDate>Mon, 24 Nov 2025 02:17:08 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/stow/</guid><description>&lt;p&gt;For a long time I wanted to write a blog post about &lt;code&gt;stow&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;My procrastination has paid off: &lt;a href="https://pbrisbin.com/posts/stow/"&gt;pbrisbin&lt;/a&gt;
has written one first.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I recently migrated my dotfiles from rcm to GNU Stow. I didn&amp;rsquo;t really have a
reason, I wasn&amp;rsquo;t unhappy with rcm at all, but I saw Stow mentioned somewhere
and felt like trying it out. After migrating, I still don&amp;rsquo;t have strong
feelings ‚Äì both tools are appropriately good and boring ‚Äì but I can at least
now speak to the differences and maybe that would help someone out there
decide for their own dotfiles.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I am also a former user of
&lt;a href="https://thoughtbot.com/blog/rcm-for-rc-files-in-dotfiles-repos"&gt;rcm&lt;/a&gt;. I share
the same considerations as the author.&lt;/p&gt;
&lt;p&gt;I am quite happy with &lt;code&gt;stow&lt;/code&gt; as a dotfiles manager. Every once in a while I
attempt to integrate Ansible to manage the rest of my dotfiles setup, but it
never sticks. Simplicity always wins in the test of time.&lt;/p&gt;</description></item><item><title>Claude: new slash commands</title><link>https://perrotta.dev/2025/11/claude-new-slash-commands/</link><pubDate>Sun, 23 Nov 2025 17:43:04 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/claude-new-slash-commands/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/claude-code-custom-commands/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Instead of creating custom slash commands myself, now I am turning to Claude to
do so for me.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Prompt&lt;/strong&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;@agent-claude-code-guide create a slash command for&amp;hellip;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is a built-in agent.&lt;/p&gt;
&lt;p&gt;Let the &lt;del&gt;experts&lt;/del&gt; agents handle the cruft.&lt;/p&gt;
&lt;p&gt;For example, &lt;code&gt;/commit&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.claude/commands/commit.md
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;allowed_tools: [&amp;#34;Bash(git add:*)&amp;#34;, &amp;#34;Bash(git commit:*)&amp;#34;, &amp;#34;Bash(git status:*)&amp;#34;, &amp;#34;Bash(git rev-parse:*)&amp;#34;]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;argument-hint: [message]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;description: Make a concise git commit on the current branch
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;---
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Create a concise git commit with the provided message.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Steps:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;1. Show current git status to confirm changes
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;2. Commit with the provided message
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;3. Ask the user if they want to push the changes
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;If the user provides a message as argument, use it directly. Otherwise, ask them for a commit message.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>git stash -m</title><link>https://perrotta.dev/2025/11/git-stash-m/</link><pubDate>Sun, 23 Nov 2025 13:14:09 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/git-stash-m/</guid><description>&lt;p&gt;When running &lt;code&gt;git stash&lt;/code&gt;, it&amp;rsquo;s possible to pass a &amp;ldquo;stash message&amp;rdquo; to it with
&lt;code&gt;-m&lt;/code&gt;, just like how you give a &amp;ldquo;commit message&amp;rdquo; to &lt;code&gt;git commit&lt;/code&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git stash -m &lt;span class="s2"&gt;&amp;#34;first draft, approach #1 from design doc&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You can view past stashes with &lt;code&gt;git stash list&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git stash list
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;stash@&lt;span class="o"&gt;{&lt;/span&gt;0&lt;span class="o"&gt;}&lt;/span&gt;: On master: first draft, approach &lt;span class="c1"&gt;#1 from design doc&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now your &lt;del&gt;junk&lt;/del&gt; stashes can be properly organized!&lt;/p&gt;</description></item><item><title>help2man</title><link>https://perrotta.dev/2025/11/help2man/</link><pubDate>Sun, 23 Nov 2025 00:59:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/help2man/</guid><description>&lt;p&gt;Thanks to &lt;a href="https://www.gnu.org/software/help2man/"&gt;&lt;code&gt;help2man&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;help2man&lt;/code&gt; produces simple manual pages from the &lt;code&gt;--help&lt;/code&gt; and &lt;code&gt;--version&lt;/code&gt;
output of other commands.&lt;/p&gt;
&lt;p&gt;[&amp;hellip;]&lt;/p&gt;
&lt;p&gt;This program is intended to provide an easy way for software authors to
include a manual page in their distribution without having to maintain that
document.&lt;/p&gt;
&lt;p&gt;Given a program which produces reasonably standard &lt;code&gt;--help&lt;/code&gt; and &lt;code&gt;--version&lt;/code&gt;
outputs, &lt;code&gt;help2man&lt;/code&gt; can re-arrange that output into something which resembles
a manual page.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;&lt;a href="https://github.com/thiagowfx/pancake"&gt;pancake&lt;/a&gt; scripts/tools now all have
man pages! The integration was quite straightforward&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git --no-pager show HEAD~3
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit fd319657199d740138236b0b56eb47a4fb9dc1d9 (tag: 2025.11.23.1)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Sun Nov 23 00:45:19 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; formula: add man page generation with help2man
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ü§ñ Generated with [Claude Code](https://claude.com/claude-code)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Co-Authored-By: Claude &amp;lt;noreply@anthropic.com&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;diff --git Formula/pancake.rb Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;index 921df77..808eac6 100644
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gh"&gt;&lt;/span&gt;&lt;span class="gd"&gt;--- Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gd"&gt;&lt;/span&gt;&lt;span class="gi"&gt;+++ Formula/pancake.rb
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt;&lt;span class="gu"&gt;@@ -5,6 +5,8 @@ class Pancake &amp;lt; Formula
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt; sha256 &amp;#34;1e2ee2a7cd22a659c541361b1d50761e672a197a76176aa04683eb430bb080fd&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; head &amp;#34;https://github.com/thiagowfx/pancake.git&amp;#34;, branch: &amp;#34;master&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ depends_on &amp;#34;help2man&amp;#34; =&amp;gt; :build
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt; # Script definitions: [directory, script_file, command_name]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; SCRIPTS = [
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;@@ -39,6 +41,14 @@ class Pancake &amp;lt; Formula
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gu"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # aws_login_headless requires additional Python script
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; bin.install &amp;#34;aws_login_headless/aws_login_headless_playwright.py&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ # Generate and install man pages
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ SCRIPTS.each do |_, _, command|
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ system &amp;#34;help2man&amp;#34;, &amp;#34;--no-info&amp;#34;, &amp;#34;--no-discard-stderr&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;--version-string=#{version}&amp;#34;, &amp;#34;--output=#{command}.1&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ &amp;#34;--name=#{command}&amp;#34;, bin/command
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ man1.install &amp;#34;#{command}.1&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;+ end
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="gi"&gt;&lt;/span&gt; end
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; test do
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It parses the output of &lt;code&gt;--help&lt;/code&gt; to compose a man page. DRY.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;With the assistance of an LLM, as (can&amp;rsquo;t believe I&amp;rsquo;ll say this) &lt;em&gt;usual&lt;/em&gt;.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>No adblocker detected</title><link>https://perrotta.dev/2025/11/no-adblocker-detected/</link><pubDate>Sun, 23 Nov 2025 00:23:26 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/no-adblocker-detected/</guid><description>&lt;p&gt;&lt;a href="https://maurycyz.com/misc/ads/"&gt;https://maurycyz.com/misc/ads/&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Internet ads are horrible: They waste your time, and the advertising industry
makes the internet a worse place. Payouts are so small that the only way to
survive is to turn your site into an ad filled hellhole with no real
substance.&lt;/p&gt;
&lt;p&gt;If you want to support your favorite authors: send them money. A dollar helps
more than viewing ads ever would.&lt;/p&gt;
&lt;p&gt;However, most people see advertising as a part of the internet experience, which is why I added this message to my site:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;No adblocker detected. Consider using an extension like uBlock Origin to
save time and bandwidth. Click here to close.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s shown off to the side, and never covers content. It won&amp;rsquo;t be shown if
there isn&amp;rsquo;t enough space. The close button actually works and it stays closed.&lt;/p&gt;
&lt;p&gt;The specific recommendation is important because a lot of people have only
heard of adblockers from ads. Commercial adblockers range from sketchy to
outright scams: If they are paying to be promoted, they must expect to make
money from users.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is a very cool activist idea.&lt;/p&gt;
&lt;p&gt;I prototyped it in this blog:&lt;/p&gt;
&lt;p&gt;&lt;img src="https://perrotta.dev/2025/11/no-adblocker-detected/ad.jpg" alt="ad"&gt;&lt;/p&gt;
&lt;p&gt;However I would need to add a cookie in order to implement the close button
effectively, and I&amp;rsquo;d rather not do so.&lt;/p&gt;</description></item><item><title>Radio</title><link>https://perrotta.dev/2025/11/radio/</link><pubDate>Sat, 22 Nov 2025 22:12:24 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/radio/</guid><description>&lt;p&gt;New script: &lt;a href="https://github.com/thiagowfx/pancake/tree/master/radio"&gt;radio&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Stream internet radio stations using available media players.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Available Stations:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% radio --list
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Available stations:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; defcon DEF CON Radio - Music &lt;span class="k"&gt;for&lt;/span&gt; hacking
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; lofi Lo-fi hip hop beats
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; trance HBR1 Trance
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; salsa Latina Salsa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; kfai KFAI &lt;span class="o"&gt;(&lt;/span&gt;Minneapolis community radio&lt;span class="o"&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If no station is specified, a random station will be selected.&lt;/p&gt;
&lt;p&gt;Automatically detects and uses available media players (mpv, vlc, ffplay,
mplayer).&lt;/p&gt;
&lt;p&gt;Sometimes it&amp;rsquo;s handy to have access to a music stream quickly, without having to
resort to Spotify or YouTube, or to add cognitive overhead to choosing what to
play.&lt;/p&gt;
&lt;p&gt;Internet radios are cool. They remind me of my good ol&amp;rsquo; times with
&lt;a href="https://bsplayer.com/"&gt;BSPlayer&lt;/a&gt; on Windows XP / Windows 7&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2025/04/defcon-radio/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Inspired by &lt;a href="https://evanhahn.com/scripts-i-wrote-that-i-use-all-the-time/"&gt;Evan
Hahn&lt;/a&gt;&amp;rsquo;s &lt;code&gt;radio&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Any suggestions of other internet radios to add?&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Interesting to see that BSPlayer is still around!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Logitech MX Master 2S</title><link>https://perrotta.dev/2025/11/logitech-mx-master-2s/</link><pubDate>Sat, 22 Nov 2025 14:09:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/logitech-mx-master-2s/</guid><description>&lt;p&gt;To set up &lt;a href="https://www.logitech.com/en-us/setup/mxsetup/mouse-setup/bluetooth.html"&gt;Bluetooth
pairing&lt;/a&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;turn the mouse on&lt;/li&gt;
&lt;li&gt;hold the switch button for 3 seconds. The light will begin blinking
momentarily, which is when the mouse is ready to pair up with the computer&lt;/li&gt;
&lt;li&gt;go on bluetooth settings of your OS and connect with &amp;ldquo;MX Master 2S&amp;rdquo;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Fin.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://wiki.archlinux.org/title/Logitech_MX_Master"&gt;See also&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;To use Bluetooth, change the channel on the bottom of the mouse, and click the
connect button. Now, search for the mouse with a Bluetooth manager of your
choice and pair. In future it should connect as soon as you switch to that
channel when your Bluetooth is active. If you have problems with the mouse not
showing when scanning, see Bluetooth#Device does not show up in scan.&lt;/p&gt;
&lt;/blockquote&gt;</description></item><item><title>Open the most recent blog post</title><link>https://perrotta.dev/2025/11/open-the-most-recent-blog-post/</link><pubDate>Fri, 21 Nov 2025 14:07:48 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/open-the-most-recent-blog-post/</guid><description>&lt;p&gt;Added a new &lt;a href="https://just.systems/"&gt;just&lt;/a&gt;
&lt;a href="https://just.systems/man/en/the-default-recipe.html"&gt;recipe&lt;/a&gt; to open the latest
(=most recent) blog post in &lt;code&gt;$EDITOR&lt;/code&gt;. Very handy to make quick edits!&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% GIT_PAGER=cat git show HEAD
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;commit 9fac587c257da57a9abb37e4ea1d7b2502ba51d2 (HEAD -&amp;gt; master, origin/master, origin/HEAD)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Date: Fri Nov 21 14:07:35 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; just: add last
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;diff --git Justfile Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;index a6ba3d0b9..ba6268b98 100755
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;--- Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+++ Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;@@ -51,6 +51,18 @@ code title *args:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; alias coding := code
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+# Edit the most recent blog post
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+last:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ #!/usr/bin/env bash
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ set -euo pipefail
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ latest=$(ls -t content/posts/*.md 2&amp;gt;/dev/null | head -n 1 || true)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ if [ -z &amp;#34;$latest&amp;#34; ]; then
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ echo &amp;#34;No posts found in content/posts/&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ exit 1
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ fi
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+ {{ editor }} &amp;#34;$latest&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; # Delete hugo build artifacts
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; clean:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; rm -rf public/ resources/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://man7.org/linux/man-pages/man1/ls.1.html"&gt;&lt;code&gt;ls -t&lt;/code&gt;&lt;/a&gt; sorts by time, newest
first.&lt;/p&gt;</description></item><item><title>Stress</title><link>https://perrotta.dev/2025/11/stress/</link><pubDate>Fri, 21 Nov 2025 14:02:14 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/stress/</guid><description>&lt;p&gt;Lately I&amp;rsquo;ve been running a lot of &lt;code&gt;terraform apply&lt;/code&gt; in &lt;strong&gt;PROD&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;Goodness, this is so stressful.&lt;/p&gt;
&lt;p&gt;Even when your brain knows that the plan is safe to apply, your heart completely
ignores all rationality anyway.&lt;/p&gt;</description></item><item><title>realpath</title><link>https://perrotta.dev/2025/11/realpath/</link><pubDate>Thu, 20 Nov 2025 21:37:42 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/realpath/</guid><description>&lt;p&gt;Given &lt;code&gt;/Users/thiago.perrotta/Corp/gitops/apps/overlays/hoth&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Assume I am in &lt;code&gt;/Users/thiago.perrotta/Corp/gitops&lt;/code&gt; (a git repo).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Copy the full path of &lt;code&gt;apps/overlays/hoth&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Option #1&lt;/strong&gt;: &lt;code&gt;cd apps/overlays/hoth &amp;amp;&amp;amp; pwd&lt;/code&gt;, then &lt;a href="https://perrotta.dev/2025/11/new-script-copy/"&gt;copy&lt;/a&gt; the output.&lt;/p&gt;
&lt;p&gt;This is disruptive though. I would rather not change my working directory.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Option #2&lt;/strong&gt;: &lt;code&gt;realpath apps/overlays/hoth&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;As per &lt;a href="https://man.archlinux.org/man/realpath.1"&gt;&lt;code&gt;realpath(1)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;realpath - print the resolved path&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This works perfectly!&lt;/p&gt;
&lt;p&gt;Why do this? To retrieve file / directory context for the LLM.&lt;/p&gt;</description></item><item><title>Flock</title><link>https://perrotta.dev/2025/11/flock/</link><pubDate>Thu, 20 Nov 2025 12:53:06 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/flock/</guid><description>&lt;p&gt;Use &lt;a href="https://man.archlinux.org/man/flock.1"&gt;&lt;code&gt;flock&lt;/code&gt;&lt;/a&gt; to manage file/directory
locks from shell scripts.&lt;/p&gt;
&lt;h2 id="file"&gt;File&lt;/h2&gt;
&lt;p&gt;Shell #1:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;lockfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;lock
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;flock &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$lockfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; vim foo&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; will open.&lt;/p&gt;
&lt;p&gt;Shell #2:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nv"&gt;lockfile&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;lock
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;flock &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$lockfile&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt; vim foo&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; will block, waiting until the lock is released.&lt;/p&gt;
&lt;p&gt;Once we &lt;code&gt;:q&lt;/code&gt; (quit) &lt;code&gt;vim&lt;/code&gt; in the first shell, the second &lt;code&gt;vim&lt;/code&gt; will immediately
open.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lock&lt;/code&gt; is a file. It can be anything e.g. &lt;code&gt;lockfile=/tmp/lock&lt;/code&gt; or
&lt;code&gt;lockfile=$(mktemp)&lt;/code&gt; or &lt;code&gt;lockfile=my.lock&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lockfile&lt;/code&gt; is just an arbitrary name for the variable. We don&amp;rsquo;t even need to use
a variable, this is just for illustration purposes, and to make it easier to
reuse its value in the second shell. Passing the lockfile directly to &lt;code&gt;flock&lt;/code&gt; is
perfectly acceptable.&lt;/p&gt;
&lt;h2 id="directory"&gt;Directory&lt;/h2&gt;
&lt;p&gt;We can lock entire directories as well.&lt;/p&gt;
&lt;p&gt;Shell #1:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;flock . vim foo&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; will open.&lt;/p&gt;
&lt;p&gt;Shell #2:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;flock . vim bar&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; will block, waiting until the lock is released. Same as before.&lt;/p&gt;
&lt;p&gt;Once we &lt;code&gt;:q&lt;/code&gt; (quit) &lt;code&gt;vim&lt;/code&gt; in the first shell, the second &lt;code&gt;vim&lt;/code&gt; will immediately
open.&lt;/p&gt;
&lt;p&gt;When is this handy? For example, when multiple parties need to edit the same
file, and we need to ensure they do not overwrite each other&amp;rsquo;s changes.&lt;/p&gt;</description></item><item><title>Terraformer</title><link>https://perrotta.dev/2025/11/terraformer/</link><pubDate>Wed, 19 Nov 2025 10:22:18 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/terraformer/</guid><description>&lt;p&gt;&lt;a href="https://github.com/GoogleCloudPlatform/terraformer"&gt;terraformer&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;CLI tool to generate terraform files from existing infrastructure (reverse
Terraform). Infrastructure to Code&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;In other words: &amp;ldquo;reverse terraform&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;I was quite excited to add this project to my tool belt, as it can save a lot of
time with scaffolding and &lt;code&gt;terraform import&lt;/code&gt; commands.&lt;/p&gt;
&lt;p&gt;Then &lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt;, once again,
surprised me.&lt;/p&gt;
&lt;p&gt;It turns out there&amp;rsquo;s absolutely no need to adopt &lt;code&gt;terraformer&lt;/code&gt; if you have a
superb agent available and a few cents/dollars to spare.&lt;/p&gt;
&lt;p&gt;Claude can figure out which CLI arguments to pass to &lt;code&gt;aws&lt;/code&gt;, &lt;code&gt;az&lt;/code&gt;, etc. to list
all relevant cloud resources. Then it can generate / scaffold a basic set of
Terraform files to manage them&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. And then it can craft an one-off shell or
python script to import them all in terraform.&lt;/p&gt;
&lt;p&gt;Easy. Quick. Painless.&lt;/p&gt;
&lt;p&gt;The interesting part is that I had initially asked Claude to explicitly use
&lt;em&gt;terraformer&lt;/em&gt; to do so, but it turned out to be more complicated / less
efficient than having the agent perform the task &lt;em&gt;directly&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;I am sorry if you were expecting a &lt;code&gt;terraformer&lt;/code&gt; tutorial.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;You&amp;rsquo;ll need to refactor these later for maintainability.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Google Gemini: read CLAUDE.md or AGENTS.md</title><link>https://perrotta.dev/2025/11/google-gemini-read-claude.md-or-agents.md/</link><pubDate>Mon, 17 Nov 2025 12:36:41 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/google-gemini-read-claude.md-or-agents.md/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Make Google&amp;rsquo;s &lt;a href="https://gemini.google.com/"&gt;Gemini&lt;/a&gt; read
&lt;a href="https://www.anthropic.com/engineering/claude-code-best-practices"&gt;&lt;code&gt;CLAUDE.md&lt;/code&gt;&lt;/a&gt;
and/or &lt;a href="https://agents.md"&gt;&lt;code&gt;AGENTS.md&lt;/code&gt;&lt;/a&gt;. By default, it reads only
&lt;a href="https://geminicli.com/docs/cli/gemini-md/"&gt;&lt;code&gt;GEMINI.md&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Update &lt;code&gt;~/.gemini/settings.json&lt;/code&gt; to either:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;contextFileName&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;AGENTS.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;contextFileName&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;CLAUDE.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/c57b414d3daa1f8b931b3213f0d6c7904a31d93f"&gt;My config&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;contextFileName&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;CLAUDE.md&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;security&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;auth&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;selectedType&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;gemini-api-key&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;ui&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;theme&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;Default&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Why not use &lt;code&gt;GEMINI.md&lt;/code&gt;? Claude Code provides, by far, a superior experience&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.
Either way, &lt;a href="https://agents.md"&gt;&lt;code&gt;AGENTS.md&lt;/code&gt;&lt;/a&gt; is the closest to becoming a
standard.&lt;/p&gt;
&lt;p&gt;It is unfortunate&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; that &lt;code&gt;Claude Code&lt;/code&gt; does &lt;a href="https://github.com/anthropics/claude-code/issues/6235"&gt;not
yet&lt;/a&gt; support &lt;code&gt;AGENTS.md&lt;/code&gt;.
&lt;a href="https://xkcd.com/927/"&gt;One file&lt;/a&gt; to rule them all would have been the best.&lt;/p&gt;
&lt;p&gt;Alternatively, we could symlink &lt;code&gt;GEMINI.md&lt;/code&gt; to one of the aforementioned files:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ln -s AGENTS.md GEMINI.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;or&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ln -s CLAUDE.md GEMINI.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;but that needs to be repeated in each repository, whereas the &lt;code&gt;settings.json&lt;/code&gt;
change is global.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-11-17)&lt;/strong&gt;: Even better, as per
&lt;a href="https://geminicli.com/docs/cli/configuration/#available-settings-in-settingsjson"&gt;docs&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;contextFileName&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;AGENTS.md&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;CLAUDE.md&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;GEMINI.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;blockquote&gt;
&lt;p&gt;contextFileName (string or array of strings):&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;Corollary&lt;/strong&gt;: It still pays to &lt;a href="https://en.wikipedia.org/wiki/RTFM"&gt;RTFM&lt;/a&gt;
directly, even in the LLM era.&lt;/p&gt;
&lt;p&gt;Once you launch &lt;code&gt;gemini&lt;/code&gt; with this config, it gets automatically updated to:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;context&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nt"&gt;&amp;#34;fileName&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;AGENTS.md&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;CLAUDE.md&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;GEMINI.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;},&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="p"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;which suggests it to be the canonical form&lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;We know it works because, upon launching &lt;code&gt;gemini&lt;/code&gt; within a repository that
contains &lt;code&gt;CLAUDE.md&lt;/code&gt;, it displays &lt;code&gt;Using: 1 context file&lt;/code&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Citation needed? This statement comes from experience. Or &lt;em&gt;personal
vibes&lt;/em&gt;, if you will.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;And likely intentional, as it would be trivial to support it.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;They aren&amp;rsquo;t great at updating &lt;a href="https://geminicli.com/docs/cli/configuration/#available-settings-in-settingsjson"&gt;their own
docs&lt;/a&gt;,
eh? This is not yet documented there.&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>terraform: update outputs only</title><link>https://perrotta.dev/2025/11/terraform-update-outputs-only/</link><pubDate>Mon, 17 Nov 2025 12:04:26 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/terraform-update-outputs-only/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given a Terraform project full of pending changes
(&lt;code&gt;terraform plan&lt;/code&gt;), update its
&lt;a href="https://developer.hashicorp.com/terraform/cli/commands/output"&gt;outputs&lt;/a&gt; only.&lt;/p&gt;
&lt;p&gt;I would expect to be able to use &lt;code&gt;-target&lt;/code&gt; to do so, but that&amp;rsquo;s not possible.
This flag is intended for resources only.&lt;/p&gt;
&lt;p&gt;The &lt;a href="https://devops.stackexchange.com/questions/14286/terraform-apply-output-only"&gt;correct
approach&lt;/a&gt;
is &lt;code&gt;terraform apply -refresh-only&lt;/code&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Running terraform apply -refresh-only should take care of any new outputs. It
will read the latest data from each resource and then update all of the
outputs in terms of those updates, which includes re-evaluating your output
expressions to incorporate any changes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I tested this and it indeed works as expected.&lt;/p&gt;
&lt;p&gt;The next action from here would be to run &lt;code&gt;terraform apply&lt;/code&gt; for select &lt;code&gt;-target&lt;/code&gt;
resources, a few at a time, until drift is completely eliminated.&lt;/p&gt;</description></item><item><title>new pre-commit hook: check-bash-shebang</title><link>https://perrotta.dev/2025/11/new-pre-commit-hook-check-bash-shebang/</link><pubDate>Sun, 16 Nov 2025 20:48:17 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/new-pre-commit-hook-check-bash-shebang/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/bash-shebang-/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I couldn&amp;rsquo;t resist creating a &lt;a href="https://pre-commit.com/"&gt;pre-commit hook&lt;/a&gt; for
this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/thiagowfx/pre-commit-hooks/&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;v0.0.11&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;check-bash-shebang&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;types&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="l"&gt;shell&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;In action:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% &lt;span class="nb"&gt;cd&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;pancake&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pre-commit run -a check-bash-shebang
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Check bash scripts use portable shebang..................................Failed
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- hook id: check-bash-shebang
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;- &lt;span class="nb"&gt;exit&lt;/span&gt; code: &lt;span class="m"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;aws_china_mfa/aws_china_mfa.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;aws_login_headless/aws_login_headless.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;pritunl_login/pritunl_login.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;sd_world/sd_world.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;pdf_password_remove/pdf_password_remove.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;img_optimize/img_optimize.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;copy/copy.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;ssh_mux_restart/ssh_mux_restart.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;error: &lt;span class="s1"&gt;&amp;#39;op_login_all/op_login_all.sh&amp;#39;&lt;/span&gt; uses &lt;span class="s1"&gt;&amp;#39;#!/bin/bash&amp;#39;&lt;/span&gt; instead of &lt;span class="s1"&gt;&amp;#39;#!/usr/bin/env bash&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>new script: PDF remove password</title><link>https://perrotta.dev/2025/11/new-script-pdf-remove-password/</link><pubDate>Sun, 16 Nov 2025 20:19:18 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/new-script-pdf-remove-password/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/new-script-copy/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given a password-protected &lt;code&gt;.pdf&lt;/code&gt; file, remove its
password. It&amp;rsquo;s indifferent whether the file gets overwritten or whether a new
one is created.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/pstaender/7412245"&gt;&lt;code&gt;ghostscript&lt;/code&gt;&lt;/a&gt; can do it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;gs -q -dNOPAUSE -dBATCH -sDEVICE&lt;span class="o"&gt;=&lt;/span&gt;pdfwrite -sOutputFile&lt;span class="o"&gt;=&lt;/span&gt;output.pdf -c .setpdfwrite -f input.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://gist.github.com/raghur/f3eab7297691f2f411eec69b8032daf0"&gt;&lt;code&gt;qpdf&lt;/code&gt;&lt;/a&gt; can do it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;qpdf --decrypt --password&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;{my pass}&amp;#34;&lt;/span&gt; input.pdf output.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I am not expected to memorize these CLI flags.&lt;/p&gt;
&lt;p&gt;I do not want to look them up every time either.&lt;/p&gt;
&lt;p&gt;There are various approaches to tackle this:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;a shell alias (&lt;code&gt;alias foo=&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;a shell function &lt;code&gt;foo() {}&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;a shell script (&lt;code&gt;*.sh&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;a &lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;comma script&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;a copyable snippet (e.g. stored in Obsidian / LogSeq or some other digital
garden / personal wiki / second brain app)&lt;/li&gt;
&lt;li&gt;a snippet (e.g. in &lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;RayCast&lt;/a&gt; or
&lt;a href="https://perrotta.dev/2025/10/comma-scripts/"&gt;Espanso&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;ask the AI each time&lt;/li&gt;
&lt;li&gt;&lt;del&gt;google&lt;/del&gt; &lt;a href="https://perrotta.dev/2025/05/kagi/"&gt;search&lt;/a&gt; for it each time&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Lately I&amp;rsquo;ve been favouring the &lt;a href="https://perrotta.dev/2025/09/pancake-potpourri-scripts/"&gt;shell script&lt;/a&gt; approach, so &lt;a href="https://github.com/thiagowfx/pancake/tree/c7c3677119c567edc432fcc1f1c0f78c9a5b3c55/pdf_password_remove"&gt;here we go&lt;/a&gt; with &lt;code&gt;pdf_password_remove.sh&lt;/code&gt;:&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;
&lt;p&gt;Remove password protection from PDF files.&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Interactive password prompt (most secure)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove secret.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Process multiple files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove report.pdf invoice.pdf contract.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Provide password via command line&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove --password&lt;span class="o"&gt;=&lt;/span&gt;BANANA42SPLIT secret.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Custom output filename (single file only)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf_password_remove -o unlocked.pdf secret.pdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="example-output"&gt;Example Output&lt;/h2&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pdf_password_remove --password=PIZZA69SLICE financial-report.pdf tax-form.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Successfully processed: financial-report.pdf ‚Üí financial-report-unlocked.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Successfully processed: tax-form.pdf ‚Üí tax-form-unlocked.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Summary: Successfully processed 2/2 file(s)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="features"&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Process single or multiple PDF files in one command&lt;/li&gt;
&lt;li&gt;Secure interactive password prompt (hidden input)&lt;/li&gt;
&lt;li&gt;Command-line password option for automation/scripts&lt;/li&gt;
&lt;li&gt;Default output naming: adds &lt;code&gt;-unlocked&lt;/code&gt; suffix&lt;/li&gt;
&lt;li&gt;Custom output filename with &lt;code&gt;-o&lt;/code&gt; flag (single file only)&lt;/li&gt;
&lt;li&gt;Clear success/failure indicators for each file&lt;/li&gt;
&lt;li&gt;Validates PDF files before processing&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites&lt;/h2&gt;
&lt;p&gt;Requires either &lt;code&gt;ghostscript&lt;/code&gt; (preferred) or &lt;code&gt;qpdf&lt;/code&gt; to be installed:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# macOS&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install ghostscript &lt;span class="c1"&gt;# Preferred&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;brew install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Linux&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt install ghostscript &lt;span class="c1"&gt;# Preferred - Debian/Ubuntu&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo apt install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo dnf install ghostscript &lt;span class="c1"&gt;# Preferred - Fedora&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo dnf install qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo pacman -S ghostscript &lt;span class="c1"&gt;# Preferred - Arch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;sudo pacman -S qpdf &lt;span class="c1"&gt;# Alternative&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The script automatically detects and uses whichever tool is available,
preferring ghostscript if both are installed.&lt;/p&gt;
&lt;h2 id="security-note"&gt;Security Note&lt;/h2&gt;
&lt;p&gt;Using &lt;code&gt;--password&lt;/code&gt; on the command line will expose the password in shell history
and process lists. For sensitive documents, use the interactive prompt instead
(default behavior when password is not provided).&lt;/p&gt;</description></item><item><title>bash shebang #!</title><link>https://perrotta.dev/2025/11/bash-shebang-/</link><pubDate>Sun, 16 Nov 2025 20:01:04 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/bash-shebang-/</guid><description>&lt;p&gt;When writing portable shell scripts, should we prefer &lt;code&gt;#!/bin/bash&lt;/code&gt; or
&lt;code&gt;#!/usr/bin/env bash&lt;/code&gt;?&lt;/p&gt;
&lt;p&gt;I tend to write &lt;code&gt;#!/bin/bash&lt;/code&gt; by hand, but here is an argument to prefer the
&lt;code&gt;env&lt;/code&gt; version instead:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% /bin/bash --version
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;GNU bash, version 3.2.57(1)-release (arm64-apple-darwin24)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copyright (C) 2007 Free Software Foundation, Inc.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;thiago.perrotta@thiagoperrotta-MacBook-Pro ~
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% /usr/bin/env bash --version
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;GNU bash, version 5.3.3(1)-release (aarch64-apple-darwin24.4.0)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Copyright (C) 2025 Free Software Foundation, Inc.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;License GPLv3+: GNU GPL version 3 or later &amp;lt;http://gnu.org/licenses/gpl.html&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;This is free software; you are free to change and redistribute it.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;There is NO WARRANTY, to the extent permitted by law.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;&lt;code&gt;/bin/bash&lt;/code&gt; on macOS is forever stuck on &lt;code&gt;3.2.57&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Others &lt;a href="https://unix.stackexchange.com/a/792243/41858"&gt;appear&lt;/a&gt; to agree.&lt;/p&gt;</description></item><item><title>Shell memoization: lazy-load LLM API keys</title><link>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</link><pubDate>Mon, 10 Nov 2025 13:55:56 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/shell-memoization-lazy-load-llm-api-keys/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given LLM keys shell environment variables:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;GEMINI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;&lt;code&gt;OPENAI_API_KEY&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Export them only when they are needed.&lt;/p&gt;
&lt;p&gt;When are they needed? If I launch any one of these binaries:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;llm&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;aider&lt;/code&gt; (generic)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;gemini&lt;/code&gt; (provider-specific: Google)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;codex&lt;/code&gt; (provider-specific: OpenAI)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;claude&lt;/code&gt; (provider-specific: Anthropic)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I added the following snippet in my shell profile:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Lazy-load API keys only when needed to avoid shell startup delay&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v llm &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; _load_api_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;ANTHROPIC_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get anthropic&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;GEMINI_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get gemini&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;export&lt;/span&gt; &lt;span class="nv"&gt;OPENAI_API_KEY&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="k"&gt;$(&lt;/span&gt;&lt;span class="nb"&gt;command&lt;/span&gt; llm keys get openai&lt;span class="k"&gt;)&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Redefine itself to be a no-op after first call&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; _load_api_keys&lt;span class="o"&gt;()&lt;/span&gt; &lt;span class="o"&gt;{&lt;/span&gt; :&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Wrap all AI CLI commands to auto-load keys&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; cmd in claude llm aider codex gemini&lt;span class="p"&gt;;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;command&lt;/span&gt; -v &lt;span class="nv"&gt;$cmd&lt;/span&gt; &lt;span class="p"&gt;&amp;amp;&lt;/span&gt;&amp;gt;/dev/null &lt;span class="o"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="nb"&gt;eval&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;() { _load_api_keys; command &lt;/span&gt;&lt;span class="si"&gt;${&lt;/span&gt;&lt;span class="nv"&gt;cmd&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; \&amp;#34;\$@\&amp;#34;; }&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;done&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The keys are loaded via &lt;code&gt;llm keys get&lt;/code&gt;. This is not secure, but it is practical.
A more secure approach would be to read the credentials directly from a password
manager. This trade-off is acceptable in the environment I am currently
operating on, but I would not recommend it as an universal approach.&lt;/p&gt;
&lt;p&gt;A temporary &lt;code&gt;_load_api_keys&lt;/code&gt; shell function is defined. The first time it is
executed, it &lt;code&gt;export&lt;/code&gt;s each one of the LLM API keys. From the second time
onwards it will be a no-op, thanks to &lt;code&gt;:&lt;/code&gt;. In bash/zsh we can redefine a
function from within itself thanks to dynamic scoping. Wild.&lt;/p&gt;
&lt;p&gt;Last but not least: I wrapped up (&amp;ldquo;decorated&amp;rdquo; in function parlance) all
LLM-related commands with a shell function that runs &lt;code&gt;_load_api_keys&lt;/code&gt; before
invoking the original command.&lt;/p&gt;
&lt;p&gt;This approach is elegant and easy to maintain.&lt;/p&gt;
&lt;p&gt;My initial implementation had been more fine-grained: &lt;code&gt;ANTHROPIC_API_KEY&lt;/code&gt; would
drive &lt;code&gt;claude&lt;/code&gt;, &lt;code&gt;llm&lt;/code&gt; and &lt;code&gt;aider&lt;/code&gt;, but not &lt;code&gt;gemini&lt;/code&gt; and &lt;code&gt;codex&lt;/code&gt;, and so on.
Ultimately I decided that the additional complexity of mapping individual
providers optimally is not warranted.&lt;/p&gt;
&lt;p&gt;Why is this memoization necessary in the first place?&lt;/p&gt;
&lt;p&gt;My shell (&lt;code&gt;zsh&lt;/code&gt;) startup was significantly slow before this change,
&lt;code&gt;O(seconds)&lt;/code&gt;. Each call to &lt;code&gt;llm keys get&lt;/code&gt; takes about half a second in my
machine. I do not think it&amp;rsquo;s acceptable to wait for 2s before having your shell
readily available with a prompt.&lt;/p&gt;
&lt;p&gt;Before this approach, I had used
&lt;a href="https://github.com/romkatv/zsh-defer"&gt;&lt;code&gt;zsh-defer&lt;/code&gt;&lt;/a&gt; to delay populating the API
keys. However, this has only &lt;em&gt;deferred&lt;/em&gt; (&lt;em&gt;cof&lt;/em&gt;) my problems. The startup delay
was still noticeable.&lt;/p&gt;</description></item><item><title>You are absolutely right!</title><link>https://perrotta.dev/2025/11/you-are-absolutely-right/</link><pubDate>Wed, 05 Nov 2025 14:44:06 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/you-are-absolutely-right/</guid><description>&lt;p&gt;The title is &lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt;&amp;rsquo;s
favorite compliment to me.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been slowly incorporating Claude Code as part of my daily workflow, as you
can see below:&lt;/p&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;Date&lt;/th&gt;
 &lt;th&gt;Input&lt;/th&gt;
 &lt;th&gt;Output&lt;/th&gt;
 &lt;th&gt;Total Tokens&lt;/th&gt;
 &lt;th&gt;Cost (USD)&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-06&lt;/td&gt;
 &lt;td&gt;336&lt;/td&gt;
 &lt;td&gt;3,439&lt;/td&gt;
 &lt;td&gt;1,968,081&lt;/td&gt;
 &lt;td&gt;$1.33&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-07&lt;/td&gt;
 &lt;td&gt;18,391&lt;/td&gt;
 &lt;td&gt;28,591&lt;/td&gt;
 &lt;td&gt;7,748,856&lt;/td&gt;
 &lt;td&gt;$5.32&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-08&lt;/td&gt;
 &lt;td&gt;5,319&lt;/td&gt;
 &lt;td&gt;9,137&lt;/td&gt;
 &lt;td&gt;13,575,138&lt;/td&gt;
 &lt;td&gt;$9.74&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-09&lt;/td&gt;
 &lt;td&gt;5,207&lt;/td&gt;
 &lt;td&gt;1,512&lt;/td&gt;
 &lt;td&gt;5,522,025&lt;/td&gt;
 &lt;td&gt;$4.18&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-10&lt;/td&gt;
 &lt;td&gt;8,565&lt;/td&gt;
 &lt;td&gt;2,449&lt;/td&gt;
 &lt;td&gt;7,000,875&lt;/td&gt;
 &lt;td&gt;$5.52&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-12&lt;/td&gt;
 &lt;td&gt;2,390&lt;/td&gt;
 &lt;td&gt;175&lt;/td&gt;
 &lt;td&gt;1,450,539&lt;/td&gt;
 &lt;td&gt;$1.13&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-13&lt;/td&gt;
 &lt;td&gt;7,447&lt;/td&gt;
 &lt;td&gt;4,937&lt;/td&gt;
 &lt;td&gt;17,629,366&lt;/td&gt;
 &lt;td&gt;$9.99&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-14&lt;/td&gt;
 &lt;td&gt;2,115&lt;/td&gt;
 &lt;td&gt;1,018&lt;/td&gt;
 &lt;td&gt;4,170,741&lt;/td&gt;
 &lt;td&gt;$2.39&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-15&lt;/td&gt;
 &lt;td&gt;458&lt;/td&gt;
 &lt;td&gt;198&lt;/td&gt;
 &lt;td&gt;484,589&lt;/td&gt;
 &lt;td&gt;$0.58&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-16&lt;/td&gt;
 &lt;td&gt;4,570&lt;/td&gt;
 &lt;td&gt;3,211&lt;/td&gt;
 &lt;td&gt;1,322,015&lt;/td&gt;
 &lt;td&gt;$1.94&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-17&lt;/td&gt;
 &lt;td&gt;5,753&lt;/td&gt;
 &lt;td&gt;13,288&lt;/td&gt;
 &lt;td&gt;1,778,481&lt;/td&gt;
 &lt;td&gt;$2.30&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-19&lt;/td&gt;
 &lt;td&gt;45&lt;/td&gt;
 &lt;td&gt;5,600&lt;/td&gt;
 &lt;td&gt;1,036,115&lt;/td&gt;
 &lt;td&gt;$0.70&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-20&lt;/td&gt;
 &lt;td&gt;21,007&lt;/td&gt;
 &lt;td&gt;19,636&lt;/td&gt;
 &lt;td&gt;14,458,857&lt;/td&gt;
 &lt;td&gt;$9.37&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-21&lt;/td&gt;
 &lt;td&gt;3,239&lt;/td&gt;
 &lt;td&gt;2,722&lt;/td&gt;
 &lt;td&gt;1,133,067&lt;/td&gt;
 &lt;td&gt;$1.06&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-22&lt;/td&gt;
 &lt;td&gt;32,897&lt;/td&gt;
 &lt;td&gt;18,675&lt;/td&gt;
 &lt;td&gt;18,876,244&lt;/td&gt;
 &lt;td&gt;$10.99&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-23&lt;/td&gt;
 &lt;td&gt;25,091&lt;/td&gt;
 &lt;td&gt;7,231&lt;/td&gt;
 &lt;td&gt;16,357,484&lt;/td&gt;
 &lt;td&gt;$9.67&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-24&lt;/td&gt;
 &lt;td&gt;8,827&lt;/td&gt;
 &lt;td&gt;14,262&lt;/td&gt;
 &lt;td&gt;5,044,059&lt;/td&gt;
 &lt;td&gt;$3.46&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-25&lt;/td&gt;
 &lt;td&gt;4,763&lt;/td&gt;
 &lt;td&gt;3,051&lt;/td&gt;
 &lt;td&gt;3,353,850&lt;/td&gt;
 &lt;td&gt;$2.07&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-27&lt;/td&gt;
 &lt;td&gt;5,997&lt;/td&gt;
 &lt;td&gt;6,753&lt;/td&gt;
 &lt;td&gt;3,998,722&lt;/td&gt;
 &lt;td&gt;$2.88&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-28&lt;/td&gt;
 &lt;td&gt;9,406&lt;/td&gt;
 &lt;td&gt;9,996&lt;/td&gt;
 &lt;td&gt;9,769,754&lt;/td&gt;
 &lt;td&gt;$7.04&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-29&lt;/td&gt;
 &lt;td&gt;28,251&lt;/td&gt;
 &lt;td&gt;20,866&lt;/td&gt;
 &lt;td&gt;11,953,692&lt;/td&gt;
 &lt;td&gt;$8.90&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-10-30&lt;/td&gt;
 &lt;td&gt;69,758&lt;/td&gt;
 &lt;td&gt;27,302&lt;/td&gt;
 &lt;td&gt;16,342,978&lt;/td&gt;
 &lt;td&gt;$10.42&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-11-04&lt;/td&gt;
 &lt;td&gt;68,720&lt;/td&gt;
 &lt;td&gt;59,116&lt;/td&gt;
 &lt;td&gt;56,510,198&lt;/td&gt;
 &lt;td&gt;$31.01&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;2025-11-05&lt;/td&gt;
 &lt;td&gt;20,500&lt;/td&gt;
 &lt;td&gt;13,695&lt;/td&gt;
 &lt;td&gt;17,940,085&lt;/td&gt;
 &lt;td&gt;$10.87&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;Total&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;&lt;strong&gt;359,052&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;&lt;strong&gt;276,860&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;&lt;strong&gt;239,425,811&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;&lt;strong&gt;$152.84&lt;/strong&gt;&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2025/09/claude-ccusage/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Spending $10 USD a day is becoming commonplace.&lt;/p&gt;
&lt;p&gt;I could continue this post with generic AI advice&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;, but I am too tired of reading
about it myself.&lt;/p&gt;
&lt;p&gt;The hype is still overblown and exhausting, and it doesn&amp;rsquo;t seem like it will
fade out anytime soon (if ever). Nonetheless, opportunistic use of the
technology, whilst (still) staying reasonably distant&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; from it, does not
hurt&lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Do you know what would be &lt;em&gt;actually&lt;/em&gt; useful? Tax advice on how to deduct
software expenses related to AI. Why is no one talking about this?!&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;In other words: &lt;em&gt;without&lt;/em&gt; getting addicted to it / heavily dependent on
it.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;Technically and pedantically speaking it does hurt the planet though :/&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>md-toc: markdown table of contents</title><link>https://perrotta.dev/2025/11/md-toc-markdown-table-of-contents/</link><pubDate>Wed, 05 Nov 2025 13:32:21 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/md-toc-markdown-table-of-contents/</guid><description>&lt;p&gt;&lt;a href="https://github.com/frnmst/md-toc"&gt;https://github.com/frnmst/md-toc&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Automatically generate and add an accurate table of contents to markdown files.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Adopting it via &lt;a href="https://pre-commit.com"&gt;pre-commit&lt;/a&gt; in a git repository is very
straightforward:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;.pre-commit-config.yaml&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="yaml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;yaml&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nt"&gt;repos&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;repo&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;https://github.com/frnmst/md-toc&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;rev: 4a8b796dbde00f71eb1a51b075462f825f872c34 # frozen&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;9.0.0&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nt"&gt;hooks&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;- &lt;span class="nt"&gt;id&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="l"&gt;md-toc&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, update &lt;code&gt;README.md&lt;/code&gt; to include &lt;code&gt;&amp;lt;!--TOC--&amp;gt;&lt;/code&gt; where the table of contents
should be inserted.&lt;/p&gt;
&lt;p&gt;Run &lt;code&gt;pre-commit run -a md-toc&lt;/code&gt; once to generate and preview the results:&lt;/p&gt;

&lt;div class="codeblock" data-lang="markdown"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;markdown&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-markdown" data-lang="markdown"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;lt;!--TOC--&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;-&lt;/span&gt; [&lt;span class="nt"&gt;GitOps Pipeline for Terraform&lt;/span&gt;](&lt;span class="na"&gt;#gitops-pipeline-for-terraform&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;-&lt;/span&gt; [&lt;span class="nt"&gt;CI status&lt;/span&gt;](&lt;span class="na"&gt;#ci-status&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;-&lt;/span&gt; [&lt;span class="nt"&gt;Key Objectives&lt;/span&gt;](&lt;span class="na"&gt;#key-objectives&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;-&lt;/span&gt; [&lt;span class="nt"&gt;The Workflow&lt;/span&gt;](&lt;span class="na"&gt;#the-workflow&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;-&lt;/span&gt; [&lt;span class="nt"&gt;Core Features&lt;/span&gt;](&lt;span class="na"&gt;#core-features&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;lt;!--TOC--&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>new script: copy</title><link>https://perrotta.dev/2025/11/new-script-copy/</link><pubDate>Tue, 04 Nov 2025 14:05:47 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/new-script-copy/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/new-script-ssh-mux-restart/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I decided to add a new &lt;code&gt;copy&lt;/code&gt; script to
&lt;a href="https://github.com/thiagowfx/pancake"&gt;&lt;code&gt;pancake&lt;/code&gt;&lt;/a&gt; to standardize copying command
output and files to the system clipboard in both macOS and Linux.&lt;/p&gt;
&lt;p&gt;The idea was originally inspired by &lt;a href="https://evanhahn.com/scripts-i-wrote-that-i-use-all-the-time/"&gt;Evan
Hahn&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;copy&lt;/code&gt; and &lt;code&gt;pasta&lt;/code&gt; are simple wrappers around system clipboard managers, like
&lt;code&gt;pbcopy&lt;/code&gt; on macOS and &lt;code&gt;xclip&lt;/code&gt; on Linux. I use these all the time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;a href="https://codeberg.org/EvanHahn/dotfiles/src/commit/843b9ee13d949d346a4a73ccee2a99351aed285b/home/bin/bin/copy"&gt;Evan&amp;rsquo;s version&lt;/a&gt; is concise and elegant.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/pancake/blob/457441b3bc790068ff2618125da08de0effab016/copy/copy.sh"&gt;My version&lt;/a&gt; is more verbose, for the sake of consistency with the rest of my scripts in pancake.&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Copy from stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;echo&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;BANANA42SPLIT88SUNDAE99CHERRY&amp;#34;&lt;/span&gt; &lt;span class="p"&gt;|&lt;/span&gt; copy
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Copy a file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;copy notes.txt
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Copy multiple files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;copy *.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="platform-support"&gt;Platform Support&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;macOS&lt;/strong&gt;: Uses &lt;code&gt;pbcopy&lt;/code&gt; (built-in)&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Linux&lt;/strong&gt;: Auto-detects first available tool:
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;wl-copy&lt;/code&gt; (Wayland) - prioritized for modern desktops&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xclip&lt;/code&gt; (X11)&lt;/li&gt;
&lt;li&gt;&lt;code&gt;xsel&lt;/code&gt; (X11)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="features"&gt;Features&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Silent on success (Unix philosophy)&lt;/li&gt;
&lt;li&gt;Supports stdin input&lt;/li&gt;
&lt;li&gt;Supports single or multiple files&lt;/li&gt;
&lt;li&gt;Multiple files are concatenated with newline separators&lt;/li&gt;
&lt;li&gt;Clear error messages for missing files or dependencies&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>git diff interactively</title><link>https://perrotta.dev/2025/11/git-diff-interactively/</link><pubDate>Tue, 04 Nov 2025 11:21:24 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/git-diff-interactively/</guid><description>&lt;p&gt;It&amp;rsquo;s possible to do &lt;code&gt;git patch -p&lt;/code&gt; to review diff hunks interactively, one by
one.&lt;/p&gt;
&lt;p&gt;Can we accomplish something similar with &lt;code&gt;git diff&lt;/code&gt;? If not, is there a tool
that can accomplish that, in the same spirit of &lt;code&gt;git patch -p&lt;/code&gt;, but with a
read-only-centric workflow?&lt;/p&gt;
&lt;p&gt;The na√Øve approach is to simply run &lt;code&gt;git patch -p&lt;/code&gt; and then press &amp;rsquo;n&amp;rsquo; (no) for
each diff hunk. It does not feel particularly effective though.&lt;/p&gt;
&lt;p&gt;I found another way, which embodies the spirit of &lt;code&gt;git patch -p&lt;/code&gt; more
effectively: &lt;a href="https://jonas.github.io/tig/"&gt;&lt;code&gt;tig status&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I already use &lt;code&gt;tig&lt;/code&gt; every once in a while but wasn&amp;rsquo;t aware that it could do that.&lt;/p&gt;
&lt;p&gt;I won&amp;rsquo;t try to illustrate the command output here (it&amp;rsquo;s a TUI); simply give it a
try the next time you run &lt;code&gt;git diff&lt;/code&gt; or &lt;code&gt;git add&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;It&amp;rsquo;s also possible to stage per file and per hunk changes in the TUI. This
operation mode somewhats resemble
&lt;a href="https://github.com/andrewshadura/git-crecord"&gt;&lt;code&gt;git-crecord&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;git subcommand to interactively select changes to commit or stage&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;which I packaged to the &lt;a href="https://aur.archlinux.org/packages/git-crecord"&gt;Arch User
Repository&lt;/a&gt; a long time ago, but
ended up barely using it. Let&amp;rsquo;s see whether &lt;code&gt;tig status&lt;/code&gt; will stick.&lt;/p&gt;</description></item><item><title>Chrome: hide bookmarks bar</title><link>https://perrotta.dev/2025/11/chrome-hide-bookmarks-bar/</link><pubDate>Sun, 02 Nov 2025 11:46:39 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/chrome-hide-bookmarks-bar/</guid><description>&lt;p&gt;It is a good practice to &lt;a href="https://www.jakeworth.com/tils/hide-bookmarks-bar-in-chrome/"&gt;hide the bookmarks
bar&lt;/a&gt; in Chrome in
certain scenarios:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;when taking screenshots&lt;/li&gt;
&lt;li&gt;when sharing your screen during presentations or video calls&lt;/li&gt;
&lt;li&gt;when you need to focus and/or avoid distractions&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It can be done with &lt;code&gt;Cmd + Shift + b&lt;/code&gt;. I use this shortcut all the time.&lt;/p&gt;
&lt;p&gt;Alternatively: Menu &amp;gt; Bookmarks and Lists &amp;gt; Hide Bookmarks Bar.&lt;/p&gt;</description></item><item><title>vim: spellchecker suggestions</title><link>https://perrotta.dev/2025/11/vim-spellchecker-suggestions/</link><pubDate>Sun, 02 Nov 2025 11:37:57 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/11/vim-spellchecker-suggestions/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/07/vim-add-word-to-spellchecker/"&gt;Previously&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When you have the spellchecker from &lt;code&gt;vim&lt;/code&gt; turned on (&lt;code&gt;:set spell&lt;/code&gt;), it
highlights words that are not in the dictionary.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It turns out &lt;code&gt;vim&lt;/code&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; can also suggest corrections to these words.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;:h z=&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;z= For the word under/after the cursor suggest correctly
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; spelled words. This also works to find alternatives
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; for a word that is not highlighted as a bad word,
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; e.g., when the word after it is bad.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; In Visual mode the highlighted text is taken as the
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; word to be replaced.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; The results are sorted on similarity to the word being
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; replaced.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; This may take a long time. Hit CTRL-C when you get
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; bored.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;For example: take the word &lt;code&gt;exampl&lt;/code&gt;. When pressing &lt;code&gt;z=&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Change &amp;#34;exampl&amp;#34; to:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 1 &amp;#34;example&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 2 &amp;#34;example&amp;#34; &amp;lt; &amp;#34;exampl.&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 3 &amp;#34;exam pl&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 4 &amp;#34;exempt&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 5 &amp;#34;exam Pl&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 6 &amp;#34;exam&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Upon pressing &lt;code&gt;1&amp;lt;Enter&amp;gt;&lt;/code&gt; it is automatically replaced.&lt;/p&gt;
&lt;p&gt;Alternatively we can skip the suggestions and simply &lt;a href="https://www.jakeworth.com/tils/select-first-spell-suggestion/"&gt;pick the first
one&lt;/a&gt; right away
with &lt;code&gt;1z=&lt;/code&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;code&gt;vim&lt;/code&gt; never ceases to amaze me.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Oncall workflow with iOS shortcuts</title><link>https://perrotta.dev/2025/10/oncall-workflow-with-ios-shortcuts/</link><pubDate>Fri, 31 Oct 2025 09:38:12 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/oncall-workflow-with-ios-shortcuts/</guid><description>&lt;p&gt;&lt;em&gt;The title is foreshadowing.&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: when using an iPhone as a pager device for oncall duties,
disable airplane mode / &amp;ldquo;do not disturb&amp;rdquo; programmatically at the beginning of
your shift.&lt;/p&gt;
&lt;p&gt;I find it&amp;rsquo;s a good practice to disable smartphone notifications before going to
bed, whether by enabling airplane mode, activating &amp;ldquo;do not disturb&amp;rdquo;, or
activating a custom focus mode.&lt;/p&gt;
&lt;p&gt;However, say that your shift starts at 5am.&lt;/p&gt;
&lt;p&gt;How can you ensure your phone is readily available for paging from 5am, whilst
all other notifications are kept ignored?&lt;/p&gt;
&lt;p&gt;I found a sweet spot that works in all situations:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Enable &amp;ldquo;do not disturb&amp;rdquo; before going to bed (this can be done automatically).
This step is critical.&lt;/li&gt;
&lt;li&gt;Enable airplane mode before going to bed (this can be done automatically).
This step is optional.&lt;/li&gt;
&lt;li&gt;Create a shortcut within the Shortcuts app:
&lt;ul&gt;
&lt;li&gt;Name: &amp;ldquo;Turn Airplane Mode Off&amp;rdquo;&lt;/li&gt;
&lt;li&gt;Action: &lt;strong&gt;Turn&lt;/strong&gt; Airplane Mode &lt;strong&gt;Off&lt;/strong&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Create an automation within the Shortcuts app:
&lt;ul&gt;
&lt;li&gt;Automation: &lt;strong&gt;Run Immediately&lt;/strong&gt; (This is important!&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;)&lt;/li&gt;
&lt;li&gt;Notify When Run: on&lt;/li&gt;
&lt;li&gt;When: At 05:00, daily&lt;/li&gt;
&lt;li&gt;Do: Trigger the shortcut defined previously&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Why is this effective?&lt;/p&gt;
&lt;p&gt;There are virtually no notifications until 5am.&lt;/p&gt;
&lt;p&gt;From 5am, only &lt;em&gt;critical&lt;/em&gt; notifications (as defined by your pager app) will alert
you, thanks to airplane mode being off + &amp;ldquo;do not disturb&amp;rdquo; being on.&lt;/p&gt;
&lt;p&gt;In the past I would leave Wi-Fi on (=airplane mode off) + &amp;ldquo;do not disturb&amp;rdquo; on,
but every once in a while I would get paged, even before 5am. Why? Because our
oncall rotation is configured to eventually alert the entire team if the current
oncall person does not timely ACK the page, which happens seldomly. I&amp;rsquo;d rather
not take the risk and have my sleep interrupted.&lt;/p&gt;
&lt;p&gt;This scheme only works in practice for oncall rotations that do not have a
secondary responder. If you&amp;rsquo;re the secondary then you should let yourself be
reachable.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Otherwise you&amp;rsquo;ll need to confirm the automation before it runs, which
defeats the purpose of the automation in this case.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Clipboard as backup</title><link>https://perrotta.dev/2025/10/clipboard-as-backup/</link><pubDate>Thu, 30 Oct 2025 21:18:23 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/clipboard-as-backup/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2023/12/maccy-macos-clipboard-manager/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Whenever I am submitting forms in the Web, I have the habit (tendency?) to keep
hitting &lt;code&gt;Cmd-A Cmd-C&lt;/code&gt; every once in a while, with the goal of saving all the
text I&amp;rsquo;ve typed so far in a given text input field to the system clipboard.&lt;/p&gt;
&lt;p&gt;This practice, when paired with a clipboard manager, acts as a backup mechanism.&lt;/p&gt;
&lt;p&gt;This habit grew out of frustration: many times have I been frustrated because
web pages would suddenly crash or reload, and everything I had typed thus far
would have been lost.&lt;/p&gt;
&lt;p&gt;Not any longer.&lt;/p&gt;</description></item><item><title>New script: SSH mux restart</title><link>https://perrotta.dev/2025/10/new-script-ssh-mux-restart/</link><pubDate>Thu, 30 Oct 2025 12:59:53 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/new-script-ssh-mux-restart/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/"&gt;Previously&lt;/a&gt;,
&lt;a href="https://perrotta.dev/2025/05/1password-ssh-agent-error/"&gt;previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;After experiencing almost daily frustration because of this SSH auth issue, I
decided to script a solution out of it: and now
&lt;a href="https://github.com/thiagowfx/pancake/tree/8707d1792c0d1266180dfa3d49c7d144c71ef23d/ssh_mux_restart"&gt;&lt;code&gt;ssh_mux_restart&lt;/code&gt;&lt;/a&gt;
was born.&lt;/p&gt;
&lt;p&gt;A copy of the &lt;code&gt;README.md&lt;/code&gt; follows below for ease of reference.&lt;/p&gt;
&lt;p&gt;The use case is very simple: run the &lt;code&gt;ssh_mux_restart&lt;/code&gt; script whenever I run
into a git SSH authentication error, typically due to &lt;code&gt;git pull&lt;/code&gt;, &lt;code&gt;git fetch&lt;/code&gt; or
&lt;code&gt;git push&lt;/code&gt;.&lt;/p&gt;
&lt;h2 id="usage"&gt;Usage&lt;/h2&gt;
&lt;p&gt;Basic usage to kill SSH multiplexed connections:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./ssh_mux_restart.sh&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;To also restart the 1Password SSH agent:&lt;/p&gt;

&lt;div class="codeblock" data-lang="bash"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;bash&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;./ssh_mux_restart.sh --restart-1password&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="example-output"&gt;Example Output&lt;/h2&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ./ssh_mux_restart.sh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Finding SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found SSH multiplexed connections:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88002 ssh: /tmp/ssh-control-FLAPJACK42 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88123 ssh: /tmp/ssh-control-WAFFLE55 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killing SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88002
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88123
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killed 2/2 SSH multiplexed connections.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;All operations completed successfully!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;With the &lt;code&gt;--restart-1password&lt;/code&gt; flag:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ./ssh_mux_restart.sh --restart-1password
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Finding SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found SSH multiplexed connections:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; 88002 ssh: /tmp/ssh-control-PANCAKE99 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killing SSH multiplexed connections...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì Killed SSH mux process: 88002
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Killed 1/1 SSH multiplexed connections.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Restarting 1Password application...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Found 1Password process: 67690
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Quitting 1Password...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì 1Password quit successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Starting 1Password...
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚úì 1Password started successfully
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;1Password SSH agent is now ready for use.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;All operations completed successfully!&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="why-this-matters"&gt;Why This Matters&lt;/h2&gt;
&lt;p&gt;SSH multiplexed connections can cache stale authentication credentials, causing issues when:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;GitHub organizations enable or enforce SAML SSO&lt;/li&gt;
&lt;li&gt;1Password SSH agent credentials need refreshing&lt;/li&gt;
&lt;li&gt;SSH keys have been rotated or updated&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Restarting these connections forces SSH to re-authenticate with fresh credentials.&lt;/p&gt;
&lt;h2 id="prerequisites"&gt;Prerequisites&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;Standard Unix tools (&lt;code&gt;pgrep&lt;/code&gt;, &lt;code&gt;pkill&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;1Password app (macOS) if using the &lt;code&gt;--restart-1password&lt;/code&gt; flag&lt;/li&gt;
&lt;/ul&gt;</description></item><item><title>Claude Code: paste in images</title><link>https://perrotta.dev/2025/10/claude-code-paste-in-images/</link><pubDate>Wed, 29 Oct 2025 16:37:57 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/claude-code-paste-in-images/</guid><description>&lt;p&gt;&lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt; supports images as
input.&lt;/p&gt;
&lt;p&gt;Absolutely incredible; considering that it is a TUI, one would usually not
expect the ability to do so.&lt;/p&gt;
&lt;p&gt;Copy the image to your clipboard as usual, and then paste it in with &lt;code&gt;Ctrl + V&lt;/code&gt;,
as you would in any GUI app:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚ñê‚ñõ‚ñà‚ñà‚ñà‚ñú‚ñå Claude Code v2.0.28
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚ñù‚ñú‚ñà‚ñà‚ñà‚ñà‚ñà‚ñõ‚ñò Sonnet 4.5 ¬∑ API Usage Billing
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚ñò‚ñò ‚ñù‚ñù /Users/thiago.perrotta/corp/gitops
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; Document in the @README.md how to use the argocd CLI with our setup.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;[Image #1][Image #2]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚éø Read README.md (937 lines)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚è∫ I&amp;#39;ll add comprehensive ArgoCD CLI documentation to the README. Let me examine the current structure
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; and add a new section after the User Management section.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Grep in PDFs</title><link>https://perrotta.dev/2025/10/grep-in-pdfs/</link><pubDate>Wed, 29 Oct 2025 01:59:08 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/grep-in-pdfs/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: &lt;code&gt;grep&lt;/code&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt; for a given string in a multitude of
multi-page PDF files:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% du -sh very_large_file.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;513M very_large_file.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% unzip very_large_file.zip
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="o"&gt;[&lt;/span&gt;...&lt;span class="o"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ls -1 *.pdf &lt;span class="p"&gt;|&lt;/span&gt; wc -l
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="m"&gt;6816&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s a tool called &lt;a href="https://github.com/phiresky/ripgrep-all"&gt;&lt;code&gt;ripgrep-all&lt;/code&gt;&lt;/a&gt;
(short: &lt;code&gt;rga&lt;/code&gt;) that is perfect for that. And yes, it resembles our good ol'
&lt;code&gt;ripgrep&lt;/code&gt; (short: &lt;code&gt;rg&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;It is &lt;a href="https://repology.org/project/ripgrep-all/versions"&gt;widely available&lt;/a&gt; in
most package managers.&lt;/p&gt;
&lt;p&gt;I install it with &lt;code&gt;homebrew&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew install ripgrep-all &lt;span class="c1"&gt;# or rga&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Upon running it with:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% rga -i &lt;span class="s2"&gt;&amp;#34;perrotta&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;it did not initially work. &lt;code&gt;pdftotext&lt;/code&gt; is a required dependency that was
missing.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://superuser.com/questions/781693/how-to-determine-which-brew-package-provides-a-given-file"&gt;Where&lt;/a&gt; can we obtain &lt;code&gt;pdftotext&lt;/code&gt;?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew which-formula pdftotext
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;pdf2image
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;poppler
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;poppler-qt5
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;xpdf&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I installed &lt;code&gt;poppler&lt;/code&gt;, as it is quite well-known in the Linux world.&lt;/p&gt;
&lt;p&gt;The search works as expected afterwards:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% rga -i perrotta
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;my_cool_file_000.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Page 12: HELLO PERROTTA GOODBYE
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;my_cool_file_001.pdf
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Page 123: SERVUS PERROTTA CIAO&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;grep foo, grep &lt;em&gt;in&lt;/em&gt; foo, or grep &lt;em&gt;for&lt;/em&gt; foo? Ah, English prepositions.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>PostgreSQL: get database size</title><link>https://perrotta.dev/2025/10/postgresql-get-database-size/</link><pubDate>Mon, 27 Oct 2025 22:47:56 +0100</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/postgresql-get-database-size/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given a PostgreSQL DB, obtain its total size, preferably
in a human-readable format (pretty-printed).&lt;/p&gt;
&lt;h2 id="option-1-sql-query"&gt;Option 1: SQL query&lt;/h2&gt;

&lt;div class="codeblock" data-lang="sql"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;sql&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;SELECT&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pg_size_pretty&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pg_database_size&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;dbname&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;));&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GB&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;h2 id="option-2-psql-cli"&gt;Option 2: &lt;code&gt;psql&lt;/code&gt; CLI&lt;/h2&gt;

&lt;div class="codeblock" data-lang="sql"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;sql&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-sql" data-lang="sql"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="err"&gt;\&lt;/span&gt;&lt;span class="n"&gt;l&lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dbname&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;List&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;of&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;databases&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Name&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Owner&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Encoding&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Collate&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Ctype&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Access&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;privileges&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;Size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Tablespace&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Description&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="c1"&gt;--------------------+-------+----------+-------------+-------------+-------------------+-------+------------+-------------
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;dbname&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;me&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;UTF8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;en_US&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UTF&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;en_US&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;UTF&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;11&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;GB&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;pg_default&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&lt;/span&gt;&lt;span class="w"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="w"&gt;&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;row&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>.terraform-version</title><link>https://perrotta.dev/2025/10/.terraform-version/</link><pubDate>Fri, 24 Oct 2025 15:12:18 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/.terraform-version/</guid><description>&lt;p&gt;&lt;code&gt;.terraform-version&lt;/code&gt; at the root of a git repository is recognized by various
tools:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/tfutils/tfenv#terraform-version-file"&gt;tfenv&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://tfswitch.warrensbox.com/usage/config-files/#use-versiontf-file"&gt;tfswitch&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://docs.terrateam.io/integrations/iac-tools/terraform"&gt;terrateam&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You would expect the
&lt;a href="https://github.com/hashicorp/setup-terraform"&gt;&lt;code&gt;hashicorp/setup-terraform&lt;/code&gt;&lt;/a&gt;
github action would also recognize it out-of-the-box, but it does not. We can
address this gap by reading it manually:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;jobs:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; terraform:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; runs-on: ubuntu-latest
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; steps:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - uses: actions/checkout@08c6903cd8c0fde910a37f88322edcfb5dd907a8 # v5.0.0
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; with:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; persist-credentials: false
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - name: Read Terraform version
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; id: terraform-version
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; run: echo &amp;#34;version=$(cat .terraform-version)&amp;#34; &amp;gt;&amp;gt; &amp;#34;$GITHUB_OUTPUT&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; - uses: hashicorp/setup-terraform@b9cd54a3c349d3f38e8881555d616ced269862dd # v3.1.2
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; with:
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; terraform_version: ${{ steps.terraform-version.outputs.version }}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s a &lt;a href="https://github.com/hashicorp/setup-terraform/issues/298"&gt;feature
request&lt;/a&gt; for it.&lt;/p&gt;</description></item><item><title>brew: upgrade HEAD formulas</title><link>https://perrotta.dev/2025/10/brew-upgrade-head-formulas/</link><pubDate>Thu, 23 Oct 2025 12:53:11 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/brew-upgrade-head-formulas/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/distributing-my-own-scripts-via-homebrew/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;When a package is installed with &lt;code&gt;--HEAD&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew install --HEAD pancake&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;&lt;code&gt;brew upgrade&lt;/code&gt; won&amp;rsquo;t automatically fetch its latest version.&lt;/p&gt;
&lt;p&gt;In order to do so, run:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew upgrade --fetch-HEAD &lt;span class="o"&gt;[&lt;/span&gt;package...&lt;span class="o"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://apple.stackexchange.com/questions/439595/brew-head-update-behaviour"&gt;Source&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I answered it there, does that count as linking to the source?&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>GitHub: the organization has enabled or enforced SAML sso</title><link>https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/</link><pubDate>Tue, 21 Oct 2025 08:15:41 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/github-the-organization-has-enabled-or-enforced-saml-sso/</guid><description>&lt;p&gt;Error message when doing &lt;code&gt;git push&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% git push
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;ERROR: The &amp;#39;{corp}&amp;#39; organization has enabled or enforced SAML SSO.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;To access this repository, you must use the HTTPS remote with a personal access token or SSH with an SSH key and passphrase that has been authorized for this organization.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Visit https://docs.github.com/articles/authenticating-to-a-github-organization-with-saml-single-sign-on/ for more information.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;fatal: Could not read from remote repository.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Please make sure you have the correct access rights
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;and the repository exists.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Even after authenticating by logging in, the error persists.&lt;/p&gt;
&lt;p&gt;The solution is to &lt;strong&gt;restart the ssh agent&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;How to do so is out of scope of this post, because it depends on which one you
use.&lt;/p&gt;
&lt;p&gt;For the 1Password ssh agent, the following has worked for me:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;disable it by toggling the checkbox: Settings &amp;gt; Developer &amp;gt; SSH Agent &amp;gt; Use the SSH Agent&lt;/li&gt;
&lt;li&gt;kill the ssh agent (&lt;code&gt;pkill ssh-agent&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;kill open ssh multiplexing connections (e.g. with &lt;code&gt;pkill&lt;/code&gt;):&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pgrep -afl ssh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;48564 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;50845 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;quit 1Password, then reopen it&lt;/li&gt;
&lt;li&gt;re-enable the 1Password ssh agent&lt;/li&gt;
&lt;li&gt;&lt;code&gt;git push&lt;/code&gt; again&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Surely there is a way to script this?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-10-28)&lt;/strong&gt;: In a second try, killing the process below was enough to
address the issue.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% pgrep -afl ssh
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;7242 ssh: /tmp/ssh-control-bda8786786c69753cc9ddd9fb7c06aaff3768a70 [mux]
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% kill 7242&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Instagram: unfollow non-followers</title><link>https://perrotta.dev/2025/10/instagram-unfollow-non-followers/</link><pubDate>Tue, 21 Oct 2025 00:13:11 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/instagram-unfollow-non-followers/</guid><description>&lt;p&gt;Sometimes connections simply fade away. Life happens. Privacy prevails. Then why
don&amp;rsquo;t people remove them both ways (follower + following)? If you don&amp;rsquo;t want to
stay connected with someone any longer, it is good courtesy to do so
symmetrically. If you just unfollow someone, without removing them from your
follower list, then you tacitly demonstrate that you care to a great extent
about invisible internet karma points /shrug.&lt;/p&gt;
&lt;p&gt;Instagram doesn&amp;rsquo;t make it easy to find those who do not follow you back.
However, it is possible to obtain this information with a little bit of
scripting.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Go to &lt;a href="https://www.instagram.com/download/request/"&gt;Go to Instagram ‚Üí Settings ‚Üí Privacy and security ‚Üí Download your
information&lt;/a&gt;.&lt;/li&gt;
&lt;li&gt;Choose JSON (not HTML).&lt;/li&gt;
&lt;li&gt;Select &amp;ldquo;Connections&amp;rdquo; only and, for the period, choose from the beginning of time&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/li&gt;
&lt;li&gt;Confirm the prompt.&lt;/li&gt;
&lt;li&gt;Instagram will email you a ZIP file. That should take a couple of minutes.&lt;/li&gt;
&lt;li&gt;Download the ZIP (&lt;code&gt;instagram-{username}-YYYY-MM-DD-{id}.zip&lt;/code&gt;) and unpack it.
Structure:&lt;/li&gt;
&lt;/ul&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% tree connections
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;connections
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;‚îî‚îÄ‚îÄ followers_and_following
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îú‚îÄ‚îÄ blocked_profiles.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îú‚îÄ‚îÄ close_friends.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îú‚îÄ‚îÄ follow_requests_you&lt;span class="s1"&gt;&amp;#39;ve_received.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ‚îú‚îÄ‚îÄ followers_1.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ‚îú‚îÄ‚îÄ following.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ‚îú‚îÄ‚îÄ hide_story_from.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ‚îú‚îÄ‚îÄ pending_follow_requests.json
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="s1"&gt; ‚îú‚îÄ‚îÄ profiles_you&amp;#39;&lt;/span&gt;ve_favorited.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îú‚îÄ‚îÄ recent_follow_requests.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îú‚îÄ‚îÄ recently_unfollowed_profiles.json
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî‚îÄ‚îÄ removed_suggestions.json&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;(Yes, one of these files has a &lt;code&gt;'&lt;/code&gt; in the name. It was not a typo.)&lt;/p&gt;
&lt;p&gt;We&amp;rsquo;re interested in &lt;code&gt;followers_N.json&lt;/code&gt; and &lt;code&gt;following.json&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;From this point on, vibe code and chill. A single, well-crafted prompted is
enough. For example:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;You are a world-class software developer.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;I exported all my Instagram data.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Write a python script to parse all people I follow that do not follow me back.
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;Output username + profile URLs in each line.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;I am a fan of this one-shot prompt structure / style&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;you are a superb ${FOO}&lt;/li&gt;
&lt;li&gt;this is some context for you&lt;/li&gt;
&lt;li&gt;do this for me&lt;/li&gt;
&lt;li&gt;output in the desired format&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The resulting script:&lt;/p&gt;

&lt;div class="codeblock" data-lang="python"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;python&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-python" data-lang="python"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="ch"&gt;#!/usr/bin/env python3&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;json&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;csv&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;pathlib&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Base path where your JSON files are&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;Path&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;connections/followers_and_following&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;extract_usernames&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&amp;#34;Extract Instagram usernames from a followers/following JSON file.&amp;#34;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;json&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;load&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Handle both old and new formats&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;dict&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;values&lt;/span&gt;&lt;span class="p"&gt;():&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;v&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;v&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;break&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="nb"&gt;isinstance&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;list&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;ValueError&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;Unexpected format in &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;file_path&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;usernames&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;entry&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;item&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;string_list_data&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="p"&gt;[])[&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;username&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;value&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;href&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rstrip&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;/&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="ow"&gt;or&lt;/span&gt; &lt;span class="n"&gt;entry&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;get&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;username&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;usernames&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;add&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;username&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;continue&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;usernames&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# --- Load followers (handles multiple files) ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;followers&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;set&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;base&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;glob&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;followers_*.json&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;followers&lt;/span&gt; &lt;span class="o"&gt;|=&lt;/span&gt; &lt;span class="n"&gt;extract_usernames&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# --- Load following ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;extract_usernames&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;base&lt;/span&gt; &lt;span class="o"&gt;/&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;following.json&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# --- Compute differences ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;not_following_back&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;following&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;followers&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;you_dont_follow_back&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;followers&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;mutuals&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;sorted&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;followers&lt;/span&gt; &lt;span class="o"&gt;&amp;amp;&lt;/span&gt; &lt;span class="n"&gt;following&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;write_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="nb"&gt;open&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;w&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;newline&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;encoding&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;utf-8&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;writer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;csv&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writerow&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;username&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;profile_url&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;user&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;writer&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;writerow&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;https://www.instagram.com/&lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;/&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;])&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="sa"&gt;f&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;‚úÖ Saved &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;users&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt; entries to &lt;/span&gt;&lt;span class="si"&gt;{&lt;/span&gt;&lt;span class="n"&gt;filename&lt;/span&gt;&lt;span class="si"&gt;}&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# --- Write results ---&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;write_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;not_following_back.csv&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;not_following_back&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;write_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;you_dont_follow_back.csv&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;you_dont_follow_back&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="n"&gt;write_csv&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;mutuals.csv&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mutuals&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The script was tested in a real account, and I&amp;rsquo;m pleased to state that it works
as intended.&lt;/p&gt;
&lt;p&gt;If you use it for the sake of unfollowing people&lt;sup id="fnref:3"&gt;&lt;a href="#fn:3" class="footnote-ref" role="doc-noteref"&gt;3&lt;/a&gt;&lt;/sup&gt; then it&amp;rsquo;s advisable not to
automate the unfollowing process, as Instagram could potentially block you.
Instead, do it manually.&lt;/p&gt;
&lt;p&gt;May the reduced noise increase your serenity.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Or else it won&amp;rsquo;t work.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;I am not here to claim what prompt is the best. Just keep it simple and
carry on.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:3"&gt;
&lt;p&gt;Why would you run it otherwise?&amp;#160;&lt;a href="#fnref:3" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>The Apple Store</title><link>https://perrotta.dev/2025/10/the-apple-store/</link><pubDate>Sat, 18 Oct 2025 12:49:20 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/the-apple-store/</guid><description>&lt;p&gt;After owning an iPhone 14 Pro for more than two and a half years, its maximum
battery capacity degraded to &lt;strong&gt;~76%&lt;/strong&gt;. It is not a terrible number, but the
general recommendation is to take action whenever it goes below &lt;strong&gt;80%&lt;/strong&gt;, which
happened a couple of months ago.&lt;/p&gt;
&lt;p&gt;In this state I am forced to carry a portable charger wherever I go if I want
to keep my peace of mind and eliminate &amp;ldquo;battery anxiety&amp;rdquo;.&lt;/p&gt;
&lt;p&gt;The natural course of action for many at this point would be to simply buy the
newest and shiniest iPhone.&lt;/p&gt;
&lt;p&gt;Yet, I love to fight against &lt;a href="https://en.wikipedia.org/wiki/Planned_obsolescence"&gt;planned
obsolescence&lt;/a&gt;, and will
happily do what I can, even if it yields a bit of friction.&lt;/p&gt;
&lt;p&gt;One of my favorite aspects of being an iPhone user is the ability to get superb
support from Apple&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. In particular, they have a &lt;a href="https://support.apple.com/iphone/repair/battery-replacement"&gt;battery
replacement&lt;/a&gt;
program.&lt;/p&gt;
&lt;p&gt;All you have to do is:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://getsupport.apple.com/?caller=sfaq&amp;amp;SG=SG003&amp;amp;category_id=SC0999&amp;amp;symptom_id=99911"&gt;schedule an appointment&lt;/a&gt; in the Genius Bar,&lt;/li&gt;
&lt;li&gt;bring your iPhone there,&lt;/li&gt;
&lt;li&gt;and then retrieve it a couple of hours later&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; (&amp;ldquo;same day service&amp;rdquo;).&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Is it cost effective? Hell yes. I paid about 10% of the original purchase
price, and it&amp;rsquo;s like I just got a brand new iPhone.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;But only if I am &lt;del&gt;privileged&lt;/del&gt; lucky enough to live in a city that has
one.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;In my case, 3 hours.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Backlinks</title><link>https://perrotta.dev/2025/10/backlinks/</link><pubDate>Fri, 17 Oct 2025 16:58:16 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/backlinks/</guid><description>&lt;p&gt;I famously do not run any kind of analytics in this blog, neither server-side or
client-side.&lt;/p&gt;
&lt;p&gt;I genuinely have no idea how many people subscribe to it via RSS, and how many
&amp;ldquo;page hits&amp;rdquo; it has been accumulating over its lifetime.&lt;/p&gt;
&lt;p&gt;This is very clearly stated in the homepage.
I take it as a badge of honor.&lt;/p&gt;
&lt;p&gt;That said, I am not saying that running analytics is evil or unethical.
There are various ethical and privacy-friendly analytics tools out there.&lt;/p&gt;
&lt;p&gt;Without analytics, how am I able to keep myself motivated? How can I know
whether I am yelling at the clouds, screaming on to the void?&lt;/p&gt;
&lt;p&gt;The main trick is to write primarily for myself. Writing is a great way to
rearrange my thoughts and make them more coherent and livid.&lt;/p&gt;
&lt;p&gt;A second form of &amp;ldquo;not feeling lonely&amp;rdquo; in the interwebs is to talk to people (or
have people talk to you). Sometimes friends message me in chat apps. Sometimes
strangers email me&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;. Sometimes a long-time ex-coworker mentions a past post of
mine helped them. It is always cool to hear from people&lt;sup id="fnref:2"&gt;&lt;a href="#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt;. There is a gentle
&amp;ldquo;Reply via email&amp;rdquo; link below every blog post in this site.&lt;/p&gt;
&lt;p&gt;Last: &lt;strong&gt;Backlinks&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;Every few months I try to remember to check who is linking back to my blog.
There are various ways to get insights about this:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Public&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://marginalia-search.com/site/perrotta.dev?view=links"&gt;Marginalia&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;Private&lt;/strong&gt;:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://search.google.com/search-console/links/drilldown?resource_id=sc-domain%3Aperrotta.dev&amp;amp;type=DOMAIN&amp;amp;target=&amp;amp;domain="&gt;Google&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://www.bing.com/webmasters/backlinks?siteUrl=https://perrotta.dev/"&gt;Bing&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Observing slow organic growth, without the pressure to cross-post in social
media platforms or social link aggregators, makes life peaceful and serene.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Please do not be shy, say hello :-)&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;I should write more frequently to authors of blog posts I enjoy. We&amp;rsquo;re
(slowly) getting there.&amp;#160;&lt;a href="#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>Distributing my own scripts via homebrew</title><link>https://perrotta.dev/2025/10/distributing-my-own-scripts-via-homebrew/</link><pubDate>Fri, 17 Oct 2025 16:38:40 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/distributing-my-own-scripts-via-homebrew/</guid><description>&lt;p&gt;Thanks &lt;a href="https://justin.searls.co/posts/how-to-distribute-your-own-scripts-via-homebrew/"&gt;Justin
Searls&lt;/a&gt;
for the idea:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I use Homebrew all the time. Whenever I see a new CLI that offers an npm or uv
install path alongside a brew one, I choose brew every single time.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Me too.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;And yet, when it comes time to publish a CLI of my own, I usually just ship it
as a Ruby gem or an npm package, because I had (and have!) no fucking clue how
Homebrew works. I&amp;rsquo;m not enough of a neckbeard to peer behind the curtain as
soon as root directories like /usr and /opt are involved, so I never bothered
before today.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I understand how package managers work, and I&amp;rsquo;m even a package maintainer in
Alpine Linux and Arch Linux, but until now I never bothered to package my own
projects for others to consume.&lt;/p&gt;
&lt;p&gt;Previously I talked about my new &lt;a href="https://perrotta.dev/2025/09/pancake-potpourri-scripts/"&gt;pancake&lt;/a&gt; repository. It consists of miscellaneous self-contained executables. As such, it is a great candidate for packaging.&lt;/p&gt;
&lt;p&gt;I won&amp;rsquo;t submit it to upstream homebrew because it is overly specific, but that
doesn&amp;rsquo;t prevent me from packaging it in a &lt;a href="https://docs.brew.sh/Taps"&gt;standalone
repository&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;In order to do so, I simply created a &lt;code&gt;pancake.rb&lt;/code&gt; &lt;a href="https://github.com/thiagowfx/pancake/blob/1a58c53e3984b0a0b34b750a73dab793aff5ebe5/Formula/pancake.rb"&gt;Formula&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ruby"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ruby&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-ruby" data-lang="ruby"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Pancake&lt;/span&gt; &lt;span class="o"&gt;&amp;lt;&lt;/span&gt; &lt;span class="no"&gt;Formula&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;desc&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;A collection of useful shell scripts&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;homepage&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/pancake&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;head&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;https://github.com/thiagowfx/pancake.git&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;install&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;aws_china_mfa/aws_china_mfa.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;op_login_all/op_login_all.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pritunl_login/pritunl_login.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;install&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;sd_world/sd_world.sh&amp;#34;&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="nb"&gt;test&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# Basic test to ensure the scripts are installed and executable.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted start&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;aws_china_mfa&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;op_login_all&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;pritunl_login&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:executable?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="n"&gt;assert_predicate&lt;/span&gt; &lt;span class="n"&gt;bin&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;sd_world&amp;#34;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="ss"&gt;:exist?&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="c1"&gt;# keep-sorted end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; &lt;span class="k"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="k"&gt;end&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;To install it, first tap the repository&lt;sup id="fnref:1"&gt;&lt;a href="#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew tap thiagowfx/pancake https://github.com/thiagowfx/pancake.git&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then install it, from &lt;code&gt;HEAD&lt;/code&gt; because it is not currently versioned:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew install --HEAD pancake&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;List all package contents:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% brew ls pancake
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/op_login_all
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/pritunl_login
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/bin/sd_world
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/Cellar/pancake/HEAD-1a58c53/sbom.spdx.json&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s no need to fiddle with &lt;code&gt;$PATH&lt;/code&gt;, as this is already handled by homebrew:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% which aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;/opt/homebrew/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% ls -al /opt/homebrew/bin/aws_china_mfa
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;lrwxr-xr-x@ - thiago.perrotta &lt;span class="m"&gt;13&lt;/span&gt; Oct 14:43 /opt/homebrew/bin/aws_china_mfa -&amp;gt; ../Cellar/pancake/HEAD-1a58c53/bin/aws_china_mfa*&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;If this idea sticks, I intend to create a dedicated
&lt;code&gt;thiagowfx/homebrew-pancake&lt;/code&gt; repo, so that you can tap it with &lt;code&gt;brew tap thiagowfx/pancake&lt;/code&gt;, without the need of specifying the full repository URL
as per
&lt;a href="https://docs.brew.sh/Taps#repository-naming-conventions-and-assumptions"&gt;docs&lt;/a&gt;.
For now though, the formula is hosted in the same repository as the
executables.&amp;#160;&lt;a href="#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;</description></item><item><title>MCP: model context protocol considered harmful</title><link>https://perrotta.dev/2025/10/mcp-model-context-protocol-considered-harmful/</link><pubDate>Fri, 17 Oct 2025 13:07:03 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/mcp-model-context-protocol-considered-harmful/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/10/claude-code-adding-my-first-mcp-server/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I configured my &lt;a href="https://www.claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt;
instance at work to include exactly 3 MCP servers:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;github&lt;/li&gt;
&lt;li&gt;playwright (browser automation / testing)&lt;/li&gt;
&lt;li&gt;atlassian (JIRA, Confluence, etc)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Sensible, right? It&amp;rsquo;s not like I&amp;rsquo;m a heavy user of MCPs. I mostly care about:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PR introspection / creation&lt;/li&gt;
&lt;li&gt;occasional unit / integration testing in the browser&lt;/li&gt;
&lt;li&gt;JIRA (read access)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I didn&amp;rsquo;t even have the opportunity to add an MCP for Docker or Kubernetes yet.&lt;/p&gt;
&lt;p&gt;And yet:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% claude
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&amp;gt; /context
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚éø
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; Context Usage
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ claude-sonnet-4-5-20250929 ¬∑ 133k/200k tokens (67%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ System prompt: 2.5k tokens (1.2%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÅ System tools: 13.8k tokens (6.9%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õÅ ‚õÅ ‚õÅ ‚õÅ ‚õÄ ‚õÄ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õÅ MCP tools: 71.7k tokens (35.9%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õÅ Custom agents: 209 tokens (0.1%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õÅ Messages: 8 tokens (0.0%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õ∂ ‚õù ‚õù ‚õù ‚õ∂ Free space: 67k (33.4%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù Autocompact buffer: 45.0k tokens (22.5%)
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù ‚õù
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; MCP tools ¬∑ /mcp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_close (playwright): 573 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_resize (playwright): 622 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_console_messages (playwright): 595 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_handle_dialog (playwright): 626 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_evaluate (playwright): 671 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_file_upload (playwright): 626 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_fill_form (playwright): 776 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_install (playwright): 591 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_press_key (playwright): 620 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_type (playwright): 728 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_navigate (playwright): 598 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_navigate_back (playwright): 578 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_network_requests (playwright): 580 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_take_screenshot (playwright): 826 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_snapshot (playwright): 584 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_click (playwright): 753 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_drag (playwright): 709 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_hover (playwright): 636 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_select_option (playwright): 684 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_tabs (playwright): 652 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__playwright__browser_wait_for (playwright): 650 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__atlassianUserInfo (atlassian): 583 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getAccessibleAtlassianResources (atlassian): 592 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getConfluenceSpaces (atlassian): 1.1k tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getConfluencePage (atlassian): 830 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getPagesInConfluenceSpace (atlassian): 975 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getConfluencePageFooterComments (atlassian): 873 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getConfluencePageInlineComments (atlassian): 905 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getConfluencePageDescendants (atlassian): 799 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__createConfluencePage (atlassian): 895 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__updateConfluencePage (atlassian): 911 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__createConfluenceFooterComment (atlassian): 834 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__createConfluenceInlineComment (atlassian): 1.0k tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__searchConfluenceUsingCql (atlassian): 911 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getJiraIssue (atlassian): 869 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__editJiraIssue (atlassian): 803 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__createJiraIssue (atlassian): 1.2k tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getTransitionsForJiraIssue (atlassian): 857 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__transitionJiraIssue (atlassian): 1.3k tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__lookupJiraAccountId (atlassian): 708 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__searchJiraIssuesUsingJql (atlassian): 856 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__addCommentToJiraIssue (atlassian): 913 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getJiraIssueRemoteIssueLinks (atlassian): 919 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getVisibleJiraProjects (atlassian): 943 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getJiraProjectIssueTypesMetadata (atlassian): 794 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__getJiraIssueTypeMetaWithFields (atlassian): 777 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__search (atlassian): 640 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__atlassian__fetch (atlassian): 685 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__add_comment_to_pending_review (github): 914 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__add_issue_comment (github): 644 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__add_sub_issue (github): 701 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__assign_copilot_to_issue (github): 724 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_and_submit_pull_request_review (github): 708 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_branch (github): 638 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_issue (github): 732 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_or_update_file (github): 768 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_pending_pull_request_review (github): 698 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_pull_request (github): 719 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__create_repository (github): 661 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__delete_file (github): 664 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__delete_pending_pull_request_review (github): 650 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__fork_repository (github): 613 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_commit (github): 728 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_file_contents (github): 717 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_issue (github): 627 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_issue_comments (github): 690 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_label (github): 616 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_latest_release (github): 594 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_me (github): 576 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_release_by_tag (github): 634 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_tag (github): 615 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_team_members (github): 616 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__get_teams (github): 589 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_branches (github): 660 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_commits (github): 773 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_issue_types (github): 580 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_issues (github): 886 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_label (github): 637 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_pull_requests (github): 821 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_releases (github): 660 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_sub_issues (github): 677 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__list_tags (github): 661 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__merge_pull_request (github): 695 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__pull_request_read (github): 879 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__push_files (github): 739 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__remove_sub_issue (github): 671 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__reprioritize_sub_issue (github): 768 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__request_copilot_review (github): 640 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__search_code (github): 777 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__search_issues (github): 824 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__search_pull_requests (github): 830 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__search_repositories (github): 817 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__search_users (github): 760 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__submit_pending_pull_request_review (github): 719 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__update_issue (github): 852 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__update_pull_request (github): 786 tokens
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt; ‚îî mcp__github__update_pull_request_branch (github): 655 tokens&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The Sonnet 4 model has a context window of 200k tokens.&lt;/p&gt;
&lt;p&gt;These 3 MCP servers, alone, consume about one third of them. &lt;strong&gt;36%&lt;/strong&gt;!&lt;/p&gt;
&lt;p&gt;If you account for system tools + the system prompt in the mix, practically half
of the total available context window is already gone.&lt;/p&gt;
&lt;p&gt;MCP tool definitions are wasteful, taking valuable &lt;del&gt;real&lt;/del&gt; virtual estate,
distracting the model, increasing overall costs.&lt;/p&gt;
&lt;p&gt;&lt;img src="https://i.imgflip.com/a9djwa.jpg" alt="south park agent context window aaaand it&amp;rsquo;s gone"&gt;&lt;/p&gt;
&lt;p&gt;As &lt;a href="https://simonwillison.net/2025/Oct/14/agentic-engineering/"&gt;Simon Willison&lt;/a&gt;
already noted from &lt;a href="https://steipete.me/posts/just-talk-to-it"&gt;Peter Steinberger&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;He shares my preference for CLI utilities over MCPs:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I can just refer to a cli by name. I don&amp;rsquo;t need any explanation in my agents
file. The agent will try $randomcrap on the first call, the cli will present
the help menu, context now has full info how this works and from now on we
good. I don&amp;rsquo;t have to pay a price for any tools, unlike MCPs which are a
constant cost and garbage in my context. Use GitHub&amp;rsquo;s MCP and see 23k tokens
gone. Heck, they did make it better because it was almost 50.000 tokens when
it first launched. Or use the gh cli which has basically the same feature
set, models already know how to use it, and pay zero context tax.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;To me this feels comparable to using a full-blown desktop environment in Linux
Desktop versus rolling your tiling window manager and building from scratch
an environment tailored to your own needs.&lt;/p&gt;
&lt;p&gt;Stay safe from the bloat out there.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Update(2025-10-18)&lt;/strong&gt;: See also &lt;a href="https://simonwillison.net/2025/Oct/16/claude-skills/#skills-compared-to-mcp"&gt;Skills c:ompared to
MCP&lt;/a&gt;.&lt;/p&gt;</description></item><item><title>git: reset default branch</title><link>https://perrotta.dev/2025/10/git-reset-default-branch/</link><pubDate>Thu, 16 Oct 2025 17:20:45 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/git-reset-default-branch/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Given an existing repository whose default branch is
&lt;code&gt;master&lt;/code&gt;, make it become &amp;ldquo;fresh&amp;rdquo; (=fully reset it), as if it had just been
created.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# backup the current default branch, just in case&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git branch backup-old-master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git push origin backup-old-master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# create an orphan branch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git checkout --orphan temp
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# remove everything ‚Äì use one or some of the following, accordingly&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git reset --hard
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;rm &lt;span class="o"&gt;{&lt;/span&gt;all files&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git rm &lt;span class="o"&gt;{&lt;/span&gt;all files&lt;span class="o"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# create an initial commit ‚Äì c.f. https://perrotta.dev/2025/02/git-blank-commit/&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git blank
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# delete the old default branch&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git branch -D master
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# rename temp to master, pick one of the following&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git rb master &lt;span class="c1"&gt;# this is my alias for &amp;#34;rename branch&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git branch -m master &lt;span class="c1"&gt;# the native way&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# override the current master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;git push --force origin master&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>pipx run ‚Üí uvx</title><link>https://perrotta.dev/2025/10/pipx-run-uvx/</link><pubDate>Thu, 16 Oct 2025 15:41:58 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/pipx-run-uvx/</guid><description>&lt;p&gt;Replaced all occurrences of &lt;code&gt;pipx run&lt;/code&gt; in my projects with &lt;code&gt;uvx&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://docs.astral.sh/uv/guides/tools/"&gt;&lt;code&gt;uvx docs&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The uvx command invokes a tool without installing it.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Perfect for one-off tool executions (&amp;ldquo;one-shots&amp;rdquo;). For example:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% cat ~/.bin/az_switch
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;#!/bin/sh&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="c1"&gt;# Switch active account in Azure&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;&lt;span class="nb"&gt;exec&lt;/span&gt; uvx az-account-switcher &lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;span class="nv"&gt;$@&lt;/span&gt;&lt;span class="s2"&gt;&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;</description></item><item><title>Alpine Linux: usr-merge</title><link>https://perrotta.dev/2025/10/alpine-linux-usr-merge/</link><pubDate>Wed, 15 Oct 2025 11:16:36 +0200</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><guid>https://perrotta.dev/2025/10/alpine-linux-usr-merge/</guid><description>&lt;p&gt;&lt;a href="https://alpinelinux.org/posts/2025-10-01-usr-merge.html"&gt;Alpine Linux&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The Alpine Linux Technical Steering Committee (TSC) has decided to change the
base filesystem hierarchy. In the future, /lib, /bin, and /sbin will be
symbolic links to their /usr counterparts, and every package shall be
installed under the /usr paths. For now, /usr/bin and /usr/sbin will continue
to be independent paths, but that might change if the Filesystem Hierarchy
Standard (FHS) gets updated.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Just like Arch Linux has been doing &lt;a href="https://www.archlinux.org/news/binaries-move-to-usrbin-requiring-update-intervention/"&gt;for
ages&lt;/a&gt;
(2013).&lt;/p&gt;
&lt;p&gt;Fedora also did &lt;a href="https://fedoraproject.org/wiki/Changes/Unify_bin_and_sbin"&gt;a similar
move&lt;/a&gt; this year.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been running Alpine Linux since 3.15 (2021), its current version is 3.22.
The migration process has been quite straightforward.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas apk upgrade -aU &lt;span class="c1"&gt;# perform a full system upgrade&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas apk add merge-usr &lt;span class="c1"&gt;# install the migration script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas merge-usr --dryrun &lt;span class="c1"&gt;# exec the migration script in dry-run mode&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If the dry-run succeeds:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;button class="codeblock-copy" type="button" data-copy-code&gt;Copy&lt;/button&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" class="chroma"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;% doas merge-usr &lt;span class="c1"&gt;# exec the migration script&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span class="line"&gt;&lt;span class="cl"&gt;$ doas apk del merge-usr &lt;span class="c1"&gt;# clean up&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Fin.&lt;/p&gt;</description></item></channel></rss>