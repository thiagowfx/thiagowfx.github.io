<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>macOS: sudo with touch ID: survive upgrades | Not Just Serendipity</title>
<meta name=keywords content="macos"><meta name=description content="Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.
It is also possible to use it for sudo authentication via PAM.
This was previously covered here.
Now, with macOS Sonoma, it&rsquo;s also possible to make this setting survive OS upgrades."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://thiagowfx.github.io/2023/12/macos-sudo-with-touch-id-survive-upgrades/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://thiagowfx.github.io/favicon.ico><link rel=apple-touch-icon href=https://thiagowfx.github.io/apple-touch-icon.png><link rel=mask-icon href=https://thiagowfx.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="macOS: sudo with touch ID: survive upgrades"><meta property="og:description" content="Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.
It is also possible to use it for sudo authentication via PAM.
This was previously covered here.
Now, with macOS Sonoma, it&rsquo;s also possible to make this setting survive OS upgrades."><meta property="og:type" content="article"><meta property="og:url" content="https://thiagowfx.github.io/2023/12/macos-sudo-with-touch-id-survive-upgrades/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-12-04T22:40:21+01:00"><meta property="article:modified_time" content="2023-12-04T22:40:21+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="macOS: sudo with touch ID: survive upgrades"><meta name=twitter:description content="Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.
It is also possible to use it for sudo authentication via PAM.
This was previously covered here.
Now, with macOS Sonoma, it&rsquo;s also possible to make this setting survive OS upgrades."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://thiagowfx.github.io/posts/"},{"@type":"ListItem","position":2,"name":"macOS: sudo with touch ID: survive upgrades","item":"https://thiagowfx.github.io/2023/12/macos-sudo-with-touch-id-survive-upgrades/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"macOS: sudo with touch ID: survive upgrades","name":"macOS: sudo with touch ID: survive upgrades","description":"Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.\nIt is also possible to use it for sudo authentication via PAM.\nThis was previously covered here.\nNow, with macOS Sonoma, it\u0026rsquo;s also possible to make this setting survive OS upgrades.\n","keywords":["macos"],"articleBody":"Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.\nIt is also possible to use it for sudo authentication via PAM.\nThis was previously covered here.\nNow, with macOS Sonoma, it’s also possible to make this setting survive OS upgrades.\n% sudo cp /etc/pam.d/sudo_local{.template,} % sudo $EDITOR /etc/pam.d/sudo_local Then uncomment (or add, if not existing) the following line:\nauth sufficient pam_tid.so You can test it out by opening a new terminal and executing sudo echo.\nCredits: https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/\n","wordCount":"85","inLanguage":"en","datePublished":"2023-12-04T22:40:21+01:00","dateModified":"2023-12-04T22:40:21+01:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://thiagowfx.github.io/2023/12/macos-sudo-with-touch-id-survive-upgrades/"},"publisher":{"@type":"Person","name":"Not Just Serendipity","logo":{"@type":"ImageObject","url":"https://thiagowfx.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thiagowfx.github.io/ accesskey=h title="Not Just Serendipity (Alt + H)"><img src=https://thiagowfx.github.io/apple-touch-icon.png alt aria-label=logo height=32>Not Just Serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://thiagowfx.github.io/posts/ title=posts><span>posts</span></a></li><li><a href=https://thiagowfx.github.io/archives/ title=archives><span>archives</span></a></li><li><a href=https://thiagowfx.github.io/tags/star/ title=bestof><span>bestof</span></a></li><li><a href=https://thiagowfx.github.io/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://thiagowfx.github.io/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>macOS: sudo with touch ID: survive upgrades</h1><div class=post-meta><span title='2023-12-04 22:40:21 +0100 +0100'>December 4, 2023</span>&nbsp;·&nbsp;85 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Recent macbooks have a fingerprint reader, which is typically used to unlock the computer and log in.</p><p>It is also possible to use it for <code>sudo</code> authentication via <a href=https://en.wikipedia.org/wiki/Pluggable_authentication_module>PAM</a>.</p><p>This was previously covered <a href=https://thiagowfx.github.io/2022/03/macos-sudo-with-touch-id/>here</a>.</p><p>Now, with macOS Sonoma, it&rsquo;s also possible to make this setting survive OS upgrades.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% sudo cp /etc/pam.d/sudo_local<span style=color:#f92672>{</span>.template,<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>% sudo $EDITOR /etc/pam.d/sudo_local
</span></span></code></pre></div><p>Then uncomment (or add, if not existing) the following line:</p><pre tabindex=0><code>auth       sufficient     pam_tid.so
</code></pre><p>You can test it out by opening a new terminal and executing <code>sudo echo</code>.</p><p>Credits: <a href=https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/>https://sixcolors.com/post/2023/08/in-macos-sonoma-touch-id-for-sudo-can-survive-updates/</a></p></div><footer class=post-footer><ul class=post-tags><li><a href=https://thiagowfx.github.io/tags/macos/>macos</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: Not%20Just%20Serendipity comment for 'macOS%3a%20sudo%20with%20touch%20ID%3a%20survive%20upgrades'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2023 Thiago Perrotta • <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a> •</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>