<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>kubectl: get all logs from all pods | not just serendipity</title>
<meta name=keywords content="dev,devops"><meta name=description content="Frequently:
kubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7
But how do you know what hash to use after server-?"><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2024/07/kubectl-get-all-logs-from-all-pods/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2024/07/kubectl-get-all-logs-from-all-pods/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="kubectl: get all logs from all pods"><meta property="og:description" content="Frequently:
kubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7
But how do you know what hash to use after server-?"><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2024/07/kubectl-get-all-logs-from-all-pods/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-07-15T13:23:35+02:00"><meta property="article:modified_time" content="2024-07-15T13:23:35+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="kubectl: get all logs from all pods"><meta name=twitter:description content="Frequently:
kubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7
But how do you know what hash to use after server-?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"kubectl: get all logs from all pods","item":"https://www.perrotta.dev/2024/07/kubectl-get-all-logs-from-all-pods/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"kubectl: get all logs from all pods","name":"kubectl: get all logs from all pods","description":"Frequently:\nkubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7 But how do you know what hash to use after server-?\n","keywords":["dev","devops"],"articleBody":"Frequently:\nkubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7 But how do you know what hash to use after server-?\nOption 1): TAB auto-completion:\nkubectl logs -n argocd argocd-repo-server- Caveats:\ntab completion for kubectl isn’t always properly set up if there is more than one pod, you would have to type in the first few letters of the hash before hitting TAB again, that’s annoying and non-ergonomic Option 2): subshell\nkubectl logs -n argocd $(kubectl get pod -n argocd | grep argocd-repo-server | cut -f1 -d' ' | head -1) Caveats:\na lot of typing head -1 is necessary in case there are multiple pods1 Option 3): get all logs from all pods that match a given label\nkubectl logs -n argocd -l app=app.kubernetes.io/instance=argocd [--all-containers] [--ignore-errors] This is much more ergonomic.\nYou still need to figure out what label to use though:\n$ kubectl describe pod -n argocd argocd-repo-server-5d59975687-dxnh7 | grep -A7 -i labels: Labels: app.kubernetes.io/component=repo-server app.kubernetes.io/instance=argocd app.kubernetes.io/managed-by=Helm app.kubernetes.io/name=argocd-repo-server app.kubernetes.io/part-of=argocd app.kubernetes.io/version=v2.11.4 helm.sh/chart=argo-cd-7.3.4 pod-template-hash=5d59975687 Source: https://stackoverflow.com/questions/33069736/how-do-i-get-logs-from-all-pods-of-a-kubernetes-replication-controller\nHappy logging!\nOr tail -1, for that matter. ↩︎\n","wordCount":"170","inLanguage":"en","datePublished":"2024-07-15T13:23:35+02:00","dateModified":"2024-07-15T13:23:35+02:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2024/07/kubectl-get-all-logs-from-all-pods/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">kubectl: get all logs from all pods</h1><div class=post-meta><span title='2024-07-15 13:23:35 +0200 +0200'>July 15, 2024</span>&nbsp;·&nbsp;170 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Frequently:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs -n argocd argocd-repo-server-5d59975687-dxnh7
</span></span></code></pre></div><p>But how do you know what hash to use after <code>server-</code>?</p><p><strong>Option 1)</strong>: TAB auto-completion:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs -n argocd argocd-repo-server-&lt;TAB&gt;
</span></span></code></pre></div><p><strong>Caveats</strong>:</p><ul><li>tab completion for <code>kubectl</code> isn&rsquo;t always properly set up</li><li>if there is more than one pod, you would have to type in the first few letters
of the hash before hitting TAB again, that&rsquo;s annoying and non-ergonomic</li></ul><p><strong>Option 2)</strong>: subshell</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs -n argocd <span style=color:#66d9ef>$(</span>kubectl get pod -n argocd | grep argocd-repo-server | cut -f1 -d<span style=color:#e6db74>&#39; &#39;</span> | head -1<span style=color:#66d9ef>)</span>
</span></span></code></pre></div><p><strong>Caveats</strong>:</p><ul><li>a lot of typing</li><li><code>head -1</code> is necessary in case there are multiple pods<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup></li></ul><p><strong>Option 3)</strong>: get all logs from all pods that match a given label</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>kubectl logs -n argocd -l app<span style=color:#f92672>=</span>app.kubernetes.io/instance<span style=color:#f92672>=</span>argocd
</span></span><span style=display:flex><span><span style=color:#f92672>[</span>--all-containers<span style=color:#f92672>]</span> <span style=color:#f92672>[</span>--ignore-errors<span style=color:#f92672>]</span>
</span></span></code></pre></div><p>This is much more ergonomic.</p><p>You still need to figure out what label to use though:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ kubectl describe pod -n argocd argocd-repo-server-5d59975687-dxnh7 | grep -A7 -i labels:
</span></span><span style=display:flex><span>Labels:           app.kubernetes.io/component<span style=color:#f92672>=</span>repo-server
</span></span><span style=display:flex><span>                  app.kubernetes.io/instance<span style=color:#f92672>=</span>argocd
</span></span><span style=display:flex><span>                  app.kubernetes.io/managed-by<span style=color:#f92672>=</span>Helm
</span></span><span style=display:flex><span>                  app.kubernetes.io/name<span style=color:#f92672>=</span>argocd-repo-server
</span></span><span style=display:flex><span>                  app.kubernetes.io/part-of<span style=color:#f92672>=</span>argocd
</span></span><span style=display:flex><span>                  app.kubernetes.io/version<span style=color:#f92672>=</span>v2.11.4
</span></span><span style=display:flex><span>                  helm.sh/chart<span style=color:#f92672>=</span>argo-cd-7.3.4
</span></span><span style=display:flex><span>                  pod-template-hash<span style=color:#f92672>=</span>5d59975687
</span></span></code></pre></div><p><strong>Source</strong>: <a href=https://stackoverflow.com/questions/33069736/how-do-i-get-logs-from-all-pods-of-a-kubernetes-replication-controller>https://stackoverflow.com/questions/33069736/how-do-i-get-logs-from-all-pods-of-a-kubernetes-replication-controller</a></p><p>Happy logging!</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Or <code>tail -1</code>, for that matter.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/dev/>Dev</a></li><li><a href=https://www.perrotta.dev/tags/devops/>Devops</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: not%20just%20serendipity comment for 'kubectl%3a%20get%20all%20logs%20from%20all%20pods'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>