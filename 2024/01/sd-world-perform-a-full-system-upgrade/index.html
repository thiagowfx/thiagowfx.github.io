<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>sd-world: perform a full system upgrade | not just serendipity</title>
<meta name=keywords content="dev"><meta name=description content="Whenever I want to upgrade any one of my systems, I run sd-world."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:url" content="https://www.perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="sd-world: perform a full system upgrade"><meta property="og:description" content="Whenever I want to upgrade any one of my systems, I run sd-world."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-28T01:42:04-03:00"><meta property="article:modified_time" content="2024-01-28T01:42:04-03:00"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="sd-world: perform a full system upgrade"><meta name=twitter:description content="Whenever I want to upgrade any one of my systems, I run sd-world."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"sd-world: perform a full system upgrade","item":"https://www.perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"sd-world: perform a full system upgrade","name":"sd-world: perform a full system upgrade","description":"Whenever I want to upgrade any one of my systems, I run sd-world.\n","keywords":["dev"],"articleBody":"Whenever I want to upgrade any one of my systems, I run sd-world.\nYou can find the current version of sd-world here in my dotfiles.\nHere’s a snapshot1:\n#!/usr/bin/env bash # perform a full system upgrade set -euo pipefail log() { local bold=$(tput bold) normal=$(tput sgr0) echo \"${bold}$*${normal}\" } run_if_exists() { if command -v \"$1\" \u003e/dev/null 2\u003e\u00261; then if [[ $# -eq 1 ]]; then log \"Running $1...\" \"$1\" else shift log \"Running $*...\" \"$@\" fi elif [[ -d \"$1\" ]]; then shift log \"Running $*...\" \"$@\" fi } # usage: do_git do_git() { if [[ -d \"$1\" ]]; then run_if_exists \"$1\" git -C \"$1\" pull origin master fi } case \"$(uname)\" in # linux Linux) # alpine linux run_if_exists \"apk\" doas apk upgrade # arch linux run_if_exists \"pacman\" sudo pacman -Syu # debian linux # warning: macos has /usr/bin/apt which is a Java thing run_if_exists \"apt-get\" sudo apt-get upgrade -y run_if_exists \"apt-get\" sudo apt-get autoremove ;; # macOS Darwin) # homebrew run_if_exists \"brew\" brew upgrade run_if_exists \"brew\" brew cleanup # system update and app store # run_if_exists \"softwareupdate\" softwareupdate --install --all run_if_exists \"mas\" mas upgrade ;; # windows MINGW*) # third-party package manager run_if_exists \"scoop\" scoop update ;; esac # flatpaks run_if_exists \"flatpak\" flatpak update # nix run_if_exists \"nix-channel\" nix-channel --update run_if_exists \"nix-env\" nix-env -u # pihole # update pihole itself and gravity lists run_if_exists \"pihole\" pihole -up # dotfiles do_git \"$HOME/.dotfiles\" do_git \"$HOME/.dotfiles_corp\" There’s a lot to unpack here.\nWhy is it called sd-world? world is an inspiration taken from Gentoo Linux. To upgrade a typical gentoo system, you usually run:\nemerge --ask --quiet --update --changed-use --deep @world There’s something deeply inspiring about saying it out loud: “emerge the world”. As if the whole world is at your fingertips.\nsd stands for “script directory”, it’s an inspiration taken from Ian Henry.\nRationale: I tend to put scripts I run semi-frequently in a .bin directory that is in my system $PATH. However, there’s always a chance their name could clash with a built-in one (e.g. in /usr/bin/). In order to prevent (or mitigate) it from happening, a prefix is added. For a long time in my life I used the t- prefix, merely because of my first name initial. At some point I migrated to sd-. That’s all, nothing fancy about it.\nWhy bash? bash is the de-facto standard shell in most Linux distributions I care about. And it’s also easily available in macOS and BSDs. And it’s POSIX compliant.\nTherefore: availability, portability and compatibility.\nWhy /usr/bin/env bash instead of /bin/bash? Because the env shebang is more portable. This is more relevant when working with BSDs. On Linux /bin/bash should be mostly fine.\nWhy set -euo pipefail? A well-established good practice.\nWhy use a separare log function? Old habits die hard. Consistent formatting. Why run_if_exists? Since the script attempts to upgrade (potentially) many package managers, at the very least we try to skip the ones that aren’t installed. For example, there’s no need to attempt to run pacman in a macOS system.\nWhat else? The rest should be quite straightforward to understand. Some design decisions:\nsudo permissions are not asked upfront, because not every system uses sudo. Notably, Alpine Linux and OpenBSD use doas by default. Also, laziness is OK as the script is intended for interactive use. git is there merely for convenience. Updating my dotfiles could be done from a separate script, but that would be overkill for my simple use case. There’s no concurrency / parallelism, and that’s intentional. I prefer output readability and system stability in this case. The world is yours.\nPrefer to refer to the up-to-date version in my dotfiles repository though. I included a snapshot merely because there’s a non-zero chance the git version could be moved elsewhere someday. ↩︎\n","wordCount":"628","inLanguage":"en","datePublished":"2024-01-28T01:42:04-03:00","dateModified":"2024-01-28T01:42:04-03:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2024/01/sd-world-perform-a-full-system-upgrade/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">sd-world: perform a full system upgrade</h1><div class=post-meta><span title='2024-01-28 01:42:04 -0300 -0300'>January 28, 2024</span>&nbsp;·&nbsp;628 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Whenever I want to upgrade any one of my systems, I run <code>sd-world</code>.</p><p>You can find the current version of <code>sd-world</code>
<a href=https://github.com/thiagowfx/.dotfiles/blob/master/scripts/.bin/sd-world>here</a>
in my dotfiles.</p><p>Here&rsquo;s a snapshot<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#75715e># perform a full system upgrade</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>set -euo pipefail
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>log<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	local bold<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>tput bold<span style=color:#66d9ef>)</span> normal<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>tput sgr0<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>	echo <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>bold<span style=color:#e6db74>}</span>$*<span style=color:#e6db74>${</span>normal<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>run_if_exists<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> command -v <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> &gt;/dev/null 2&gt;&amp;1; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> $# -eq <span style=color:#ae81ff>1</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>			log <span style=color:#e6db74>&#34;Running </span>$1<span style=color:#e6db74>...&#34;</span>
</span></span><span style=display:flex><span>			<span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>else</span>
</span></span><span style=display:flex><span>			shift
</span></span><span style=display:flex><span>			log <span style=color:#e6db74>&#34;Running </span>$*<span style=color:#e6db74>...&#34;</span>
</span></span><span style=display:flex><span>			<span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>elif</span> <span style=color:#f92672>[[</span> -d <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		shift
</span></span><span style=display:flex><span>		log <span style=color:#e6db74>&#34;Running </span>$*<span style=color:#e6db74>...&#34;</span>
</span></span><span style=display:flex><span>		<span style=color:#e6db74>&#34;</span>$@<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># usage: do_git &lt;path/to/git/repo&gt;</span>
</span></span><span style=display:flex><span>do_git<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> -d <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> git -C <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span> pull origin master
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>case</span> <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>uname<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> in
</span></span><span style=display:flex><span>	<span style=color:#75715e># linux</span>
</span></span><span style=display:flex><span>	Linux<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># alpine linux</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;apk&#34;</span> doas apk upgrade
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># arch linux</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;pacman&#34;</span> sudo pacman -Syu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># debian linux</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># warning: macos has /usr/bin/apt which is a Java thing</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;apt-get&#34;</span> sudo apt-get upgrade -y
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;apt-get&#34;</span> sudo apt-get autoremove
</span></span><span style=display:flex><span>		;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># macOS</span>
</span></span><span style=display:flex><span>	Darwin<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># homebrew</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;brew&#34;</span> brew upgrade
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;brew&#34;</span> brew cleanup
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># system update and app store</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># run_if_exists &#34;softwareupdate&#34; softwareupdate --install --all</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;mas&#34;</span> mas upgrade
</span></span><span style=display:flex><span>		;;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># windows</span>
</span></span><span style=display:flex><span>	MINGW*<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>		<span style=color:#75715e># third-party package manager</span>
</span></span><span style=display:flex><span>		run_if_exists <span style=color:#e6db74>&#34;scoop&#34;</span> scoop update
</span></span><span style=display:flex><span>		;;
</span></span><span style=display:flex><span><span style=color:#66d9ef>esac</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># flatpaks</span>
</span></span><span style=display:flex><span>run_if_exists <span style=color:#e6db74>&#34;flatpak&#34;</span> flatpak update
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># nix</span>
</span></span><span style=display:flex><span>run_if_exists <span style=color:#e6db74>&#34;nix-channel&#34;</span> nix-channel --update
</span></span><span style=display:flex><span>run_if_exists <span style=color:#e6db74>&#34;nix-env&#34;</span> nix-env -u
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># pihole</span>
</span></span><span style=display:flex><span><span style=color:#75715e># update pihole itself and gravity lists</span>
</span></span><span style=display:flex><span>run_if_exists <span style=color:#e6db74>&#34;pihole&#34;</span> pihole -up
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># dotfiles</span>
</span></span><span style=display:flex><span>do_git <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.dotfiles&#34;</span>
</span></span><span style=display:flex><span>do_git <span style=color:#e6db74>&#34;</span>$HOME<span style=color:#e6db74>/.dotfiles_corp&#34;</span>
</span></span></code></pre></div><p>There&rsquo;s a lot to unpack here.</p><h2 id=why-is-it-called-sd-world>Why is it called <code>sd-world</code>?<a hidden class=anchor aria-hidden=true href=#why-is-it-called-sd-world>#</a></h2><p><code>world</code> is an inspiration taken from <a href=https://www.gentoo.org/>Gentoo Linux</a>.
To upgrade a typical gentoo system, you usually run:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>emerge --ask --quiet --update --changed-use --deep @world
</span></span></code></pre></div><p>There&rsquo;s something deeply inspiring about saying it out loud: &ldquo;emerge the
world&rdquo;. As if the whole world is at your fingertips.</p><p><code>sd</code> stands for &ldquo;script directory&rdquo;, it&rsquo;s an inspiration taken from <a href=https://ianthehenry.com/posts/sd-my-script-directory/>Ian
Henry</a>.</p><p><strong>Rationale</strong>: I tend to put scripts I run semi-frequently in a <code>.bin</code>
directory that is in my system <code>$PATH</code>. However, there&rsquo;s always a chance their
name could clash with a built-in one (e.g. in <code>/usr/bin/</code>). In order to prevent
(or mitigate) it from happening, a prefix is added. For a long time in my life
I used the <code>t-</code> prefix, merely because of my first name initial. At some point
I migrated to <code>sd-</code>. That&rsquo;s all, nothing fancy about it.</p><h2 id=why-bash>Why <code>bash</code>?<a hidden class=anchor aria-hidden=true href=#why-bash>#</a></h2><p><code>bash</code> is the de-facto standard shell in most Linux distributions I care about.
And it&rsquo;s also easily available in macOS and BSDs. And it&rsquo;s POSIX compliant.</p><p><strong>Therefore</strong>: availability, portability and compatibility.</p><h2 id=why-usrbinenv-bash-instead-of-binbash>Why <code>/usr/bin/env bash</code> instead of <code>/bin/bash</code>?<a hidden class=anchor aria-hidden=true href=#why-usrbinenv-bash-instead-of-binbash>#</a></h2><p>Because the <code>env</code> shebang is more portable. This is more relevant when working
with BSDs. On Linux <code>/bin/bash</code> should be mostly fine.</p><h2 id=why-set--euo-pipefail>Why <code>set -euo pipefail</code>?<a hidden class=anchor aria-hidden=true href=#why-set--euo-pipefail>#</a></h2><p>A well-established <a href=https://gist.github.com/mohanpedala/1e2ff5661761d3abd0385e8223e16425>good
practice</a>.</p><h2 id=why-use-a-separare-log-function>Why use a separare <code>log</code> function?<a hidden class=anchor aria-hidden=true href=#why-use-a-separare-log-function>#</a></h2><ol><li>Old habits die hard.</li><li>Consistent formatting.</li></ol><h2 id=why-run_if_exists>Why <code>run_if_exists</code>?<a hidden class=anchor aria-hidden=true href=#why-run_if_exists>#</a></h2><p>Since the script attempts to upgrade (potentially) many package managers, at
the very least we try to skip the ones that aren&rsquo;t installed. For example,
there&rsquo;s no need to attempt to run <code>pacman</code> in a macOS system.</p><h2 id=what-else>What else?<a hidden class=anchor aria-hidden=true href=#what-else>#</a></h2><p>The rest should be quite straightforward to understand. Some design decisions:</p><ul><li><code>sudo</code> permissions are not asked upfront, because not every system uses
<code>sudo</code>. Notably, Alpine Linux and OpenBSD use <code>doas</code> by default. Also,
laziness is OK as the script is intended for interactive use.</li><li><code>git</code> is there merely for convenience. Updating my dotfiles could be done
from a separate script, but that would be overkill for my simple use case.</li><li>There&rsquo;s no concurrency / parallelism, and that&rsquo;s intentional. I prefer output
readability and system stability in this case.</li></ul><p><a href=https://en.wikipedia.org/wiki/Scarface:_The_World_Is_Yours>The world is yours</a>.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Prefer to refer to the up-to-date version in my
<a href=https://github.com/thiagowfx/.dotfiles>dotfiles</a> repository though. I
included a snapshot merely because there&rsquo;s a non-zero chance the git
version could be moved elsewhere someday.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/dev/>Dev</a></li></ul></footer></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a> · Made with ♥ in 🇨🇦</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>