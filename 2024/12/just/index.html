<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Just | not just serendipity üçÄ</title><meta name=title content="Just">
<meta name=description content="Just is a command runner, a modern replacement
for GNU Make.
It is written in Rust, has sensible defaults, and lots of syntactic sugar.
A good analogy is fish versus bash when comparing just to make.
It&rsquo;s very easy to learn from its
README.md alone as it&rsquo;s
quite comprehensive. There&rsquo;s also a gitbook.
Simon Willison prompted
me to try it out.
As an exercise I decided to convert the Makefile used to manage this blog into
a Justfile."><meta name=keywords content="bestof,dev,"><meta property="og:url" content="https://perrotta.dev/2024/12/just/"><meta property="og:site_name" content="not just serendipity üçÄ"><meta property="og:title" content="Just"><meta property="og:description" content="Just is a command runner, a modern replacement for GNU Make.
It is written in Rust, has sensible defaults, and lots of syntactic sugar. A good analogy is fish versus bash when comparing just to make.
It‚Äôs very easy to learn from its README.md alone as it‚Äôs quite comprehensive. There‚Äôs also a gitbook.
Simon Willison prompted me to try it out.
As an exercise I decided to convert the Makefile used to manage this blog into a Justfile."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-13T01:16:41-03:00"><meta property="article:modified_time" content="2024-12-13T01:16:41-03:00"><meta property="article:tag" content="Bestof"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Just"><meta name=twitter:description content="Just is a command runner, a modern replacement for GNU Make.
It is written in Rust, has sensible defaults, and lots of syntactic sugar. A good analogy is fish versus bash when comparing just to make.
It‚Äôs very easy to learn from its README.md alone as it‚Äôs quite comprehensive. There‚Äôs also a gitbook.
Simon Willison prompted me to try it out.
As an exercise I decided to convert the Makefile used to manage this blog into a Justfile."><meta itemprop=name content="Just"><meta itemprop=description content="Just is a command runner, a modern replacement for GNU Make.
It is written in Rust, has sensible defaults, and lots of syntactic sugar. A good analogy is fish versus bash when comparing just to make.
It‚Äôs very easy to learn from its README.md alone as it‚Äôs quite comprehensive. There‚Äôs also a gitbook.
Simon Willison prompted me to try it out.
As an exercise I decided to convert the Makefile used to manage this blog into a Justfile."><meta itemprop=datePublished content="2024-12-13T01:16:41-03:00"><meta itemprop=dateModified content="2024-12-13T01:16:41-03:00"><meta itemprop=wordCount content="423"><meta itemprop=keywords content="Bestof,Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2024/12/just/><style>:root{--color-gray:#888;--color-grayer:#666;--font-title:'Inter', 'Fira Sans', 'Lato', system-ui, -apple-system, BlinkMacSystemFont, 'Avenir Next', 'Avenir', 'Segoe UI', 'Helvetica Neue', Helvetica, Ubuntu, Roboto, Noto, Cantarell, Arial, sans-serif;--font-body:'Crimson Pro', 'Vollkorn', 'Alegreya', 'Iowan Old Style', 'Apple Garamond', 'Baskerville', 'Times New Roman', 'Noto Serif', 'Droid Serif', 'Times', 'Source Serif Pro', serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';--font-code:'Fira Code', 'PT Mono', 'IBM Plex Mono', Menlo, Consolas, Monaco, 'Liberation Mono', 'Ubuntu Mono', 'Lucida Console', monospace}body{font-family:var(--font-body);margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fffcf0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444;-webkit-text-size-adjust:100%}h1,h2,h3,h4,h5,h6,strong,b{color:#222}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;padding:8px;text-align:center}a{color:#3273dc}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}li code,p code{font-size:small}pre code{color:#222;display:block;padding:20px;white-space:pre;font-size:14px;overflow-x:auto}code,pre{font-family:var(--font-code)}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 110px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic}.pubdate-single{color:var(--color-grayer);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:8px}.social-link{text-decoration:none;font-size:1.25em}sup.gray{color:var(--color-grayer)}@media(prefers-color-scheme:dark){body{background-color:#01242e;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#444}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.png alt="thiagowfx's avatar" width=32 height=32><h2>not just serendipity üçÄ</h2></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/bestof/>‚òÖ</a></nav></header><main><h1><span>‚òÖ</span>
Just</h1><p><span class=pubdate-single><time datetime=2024-12-13 pubdate>13 Dec, 2024
</time>‚Ä¢ 423 words
‚Ä¢ 2 min</span></p><content><p><a href=https://github.com/casey/just>Just</a> is a command runner, a modern replacement
for GNU Make.</p><p>It is written in Rust, has sensible defaults, and lots of syntactic sugar.
A good analogy is <code>fish</code> versus <code>bash</code> when comparing <code>just</code> to <code>make</code>.</p><p>It&rsquo;s very easy to learn from its
<a href="https://github.com/casey/just?tab=readme-ov-file">README.md</a> alone as it&rsquo;s
quite comprehensive. There&rsquo;s also a <a href=https://just.systems/man/en/>gitbook</a>.</p><p><a href=https://til.simonwillison.net/django/just-with-django>Simon Willison</a> prompted
me to try it out.</p><p>As an exercise I decided to convert the <code>Makefile</code> used to manage this blog into
a <code>Justfile</code>.</p><p>The original <code>Makefile</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#75715e># Sitemap URL
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>SITEMAP <span style=color:#f92672>=</span> https://perrotta.dev/sitemap.xml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Hugo port
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>PORT <span style=color:#f92672>:=</span> <span style=color:#ae81ff>1313</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Abort if hugo is not installed.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#960050;background-color:#1e0010>ifeq</span> <span style=color:#960050;background-color:#1e0010>(,</span> <span style=color:#66d9ef>$(</span>shell which hugo<span style=color:#66d9ef>)</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>$(</span>error &#34;No hugo in <span style=color:#66d9ef>$$</span>PATH, install it first&#34;<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>endif</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>all</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo server --bind<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;0.0.0.0&#34;</span> --buildDrafts --port <span style=color:#66d9ef>$(</span>PORT<span style=color:#66d9ef>)</span> --watch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>build</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo --environment production --gc --minify
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>$(</span>RM<span style=color:#66d9ef>)</span> -r public/ resources/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>ping</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Ping Google about changes in the sitemap</span>
</span></span><span style=display:flex><span>	curl -sS -o /dev/null <span style=color:#e6db74>&#34;https://www.google.com/ping?sitemap=</span><span style=color:#66d9ef>$(</span>SITEMAP<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>	<span style=color:#75715e># Ping Bing (DuckDuckGo, etc) about changes in the sitemap</span>
</span></span><span style=display:flex><span>	curl -sS -o /dev/null <span style=color:#e6db74>&#34;https://www.bing.com/ping?sitemap=</span><span style=color:#66d9ef>$(</span>SITEMAP<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> all build clean ping
</span></span></code></pre></div><p>Initially I asked ChatGPT to convert it to a <code>Justfile</code> but it was a disaster,
even after a couple of iterations. Then I did it myself<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>. The <code>Justfile</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-justfile data-lang=justfile><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>set</span> <span style=color:#960050;background-color:#1e0010>dotenv-load</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>watch</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo server --buildDrafts --port <span style=color:#e6db74>${</span>PORT<span style=color:#66d9ef>:-</span>1313<span style=color:#e6db74>}</span> --watch
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>build</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo --environment production --gc --minify
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a new post. Usage: `just new &#34;advent of code day 8&#34;`
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>new post</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	hugo new content/posts/<span style=color:#e6db74>`</span>date <span style=color:#e6db74>&#34;+%Y-%m-%d&#34;</span><span style=color:#e6db74>`</span>-<span style=color:#f92672>{{</span> kebabcase<span style=color:#f92672>(</span>post<span style=color:#f92672>)</span> <span style=color:#f92672>}}</span>.md
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>clean</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>	rm -rf public/ resources/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Ping Google and Bing about changes in the sitemap
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#a6e22e>ping sitemap=&#34;https</span><span style=color:#f92672>:</span>//perrotta.dev/sitemap.xml&#34;:
</span></span><span style=display:flex><span>	curl -sS -o /dev/null <span style=color:#e6db74>&#34;https://www.google.com/ping?sitemap={{ sitemap }}&#34;</span>
</span></span><span style=display:flex><span>	curl -sS -o /dev/null <span style=color:#e6db74>&#34;https://www.bing.com/ping?sitemap={{ sitemap }}&#34;</span>
</span></span></code></pre></div><p>The main differences:</p><ul><li>Environment variables: use <code>{{ foo }}</code> instead of <code>$(FOO)</code></li><li>Exception: environment variables loaded from <code>.env</code> (via <code>set dotenv-load</code>)
use <code>$FOO</code> or <code>${FOO}</code> instead, like POSIX shell variables</li><li>Use <code>rm -rf</code> instead of <code>$(RM) -r</code></li><li>Rules accept parameters. Look at <code>new post</code> as an example. Example usage:
<code>just new "advent of code day 8"</code></li><li>Run shell commands within rules with backticks. <code>$(cmd)</code> does not work.</li><li>Some handy out-of-the-box functions such as <code>kebabcase()</code>. No need to
implement this kind of string manipulation in plain shell script!</li><li>Documentation comments above rules are recognized. They are displayed as help
/ usage text when running <code>just -l</code>. No need for hacky <a href=https://perrotta.dev/2024/08/self-documented-makefiles/>self-documented
<code>Makefile</code></a> setups!</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% just -l
</span></span><span style=display:flex><span>Available recipes:
</span></span><span style=display:flex><span>    build
</span></span><span style=display:flex><span>    clean
</span></span><span style=display:flex><span>    new post <span style=color:#75715e># Create a new post. Usage: `just new &#34;advent of code day 8&#34;`</span>
</span></span><span style=display:flex><span>    ping sitemap<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;https://perrotta.dev/sitemap.xml&#34;</span> <span style=color:#75715e># Ping Google and Bing about changes in the sitemap</span>
</span></span><span style=display:flex><span>    watch
</span></span></code></pre></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>With a bit of LLM prompting in lieu of Google or Stack Overflow searches.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p><a href=https://perrotta.dev/tags/bestof/>#bestof</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a></p></main><hr><footer><span>¬© 2021 - 2025 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=mailto:notjustserendipity@perrotta.dev title="Email address"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1.3em" width="1.3em"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)"><path d="M26 191c-4-5 16-23 44-40l50-31 50 31c28 17 48 35 44 40-7 12-181 12-188 0z"/><path d="M22 103l3-58 93-3c104-3 105-3 1e2 71l-3 46-48-29-47-30-38 23c-20 13-43 27-50 31-10 6-12-5-10-51z"/></g></svg></a></div></footer></body></html>