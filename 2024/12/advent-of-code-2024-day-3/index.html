<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Advent of Code 2024: Day 3 | not just serendipity</title><meta name=title content="Advent of Code 2024: Day 3">
<meta name=description content="Link to Day #3 puzzle.
It&rsquo;s a pretty typical regex problem.
To choose not to use regex is to endeavour in pain.
The regex for part one to extract all occurrences of mul:
r'mul\(\d+,\d+\)'
Note that with r there is no need to escape the backslashes in Python.
Later on I extract the numbers with r'\d+'.
If we really wanted we could do everything with a single regex by using
capturing groups, however it would become less readable."><meta name=keywords content="aoc,dev,"><meta property="og:url" content="https://perrotta.dev/2024/12/advent-of-code-2024-day-3/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="Advent of Code 2024: Day 3"><meta property="og:description" content="Link to Day #3 puzzle.
It’s a pretty typical regex problem. To choose not to use regex is to endeavour in pain.
The regex for part one to extract all occurrences of mul:
r'mul\(\d+,\d+\)' Note that with r there is no need to escape the backslashes in Python.
Later on I extract the numbers with r'\d+'.
If we really wanted we could do everything with a single regex by using capturing groups, however it would become less readable."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-03T16:41:23+01:00"><meta property="article:modified_time" content="2024-12-03T16:41:23+01:00"><meta property="article:tag" content="Aoc"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2024: Day 3"><meta name=twitter:description content="Link to Day #3 puzzle.
It’s a pretty typical regex problem. To choose not to use regex is to endeavour in pain.
The regex for part one to extract all occurrences of mul:
r'mul\(\d+,\d+\)' Note that with r there is no need to escape the backslashes in Python.
Later on I extract the numbers with r'\d+'.
If we really wanted we could do everything with a single regex by using capturing groups, however it would become less readable."><meta itemprop=name content="Advent of Code 2024: Day 3"><meta itemprop=description content="Link to Day #3 puzzle.
It’s a pretty typical regex problem. To choose not to use regex is to endeavour in pain.
The regex for part one to extract all occurrences of mul:
r'mul\(\d+,\d+\)' Note that with r there is no need to escape the backslashes in Python.
Later on I extract the numbers with r'\d+'.
If we really wanted we could do everything with a single regex by using capturing groups, however it would become less readable."><meta itemprop=datePublished content="2024-12-03T16:41:23+01:00"><meta itemprop=dateModified content="2024-12-03T16:41:23+01:00"><meta itemprop=wordCount content="258"><meta itemprop=keywords content="Aoc,Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/><style>:root{--color-gray:#888;--color-grayer:#666;--font-title:'Inter', 'Fira Sans', 'Lato', system-ui, -apple-system, BlinkMacSystemFont, 'Avenir Next', 'Avenir', 'Segoe UI', 'Helvetica Neue', Helvetica, Ubuntu, Roboto, Noto, Cantarell, Arial, sans-serif;--font-body:'Crimson Pro', 'Vollkorn', 'Alegreya', 'Iowan Old Style', 'Apple Garamond', 'Baskerville', 'Times New Roman', 'Noto Serif', 'Droid Serif', 'Times', 'Source Serif Pro', serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';--font-code:'Fira Code', 'PT Mono', 'IBM Plex Mono', Menlo, Consolas, Monaco, 'Liberation Mono', 'Ubuntu Mono', 'Lucida Console', monospace}body{font-family:var(--font-body);margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fffcf0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444;-webkit-text-size-adjust:100%}h1,h2,h3,h4,h5,h6,strong,b{color:#222}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:small;padding:8px;text-align:center}a{color:#3273dc}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}li code,p code{font-size:small}pre code{color:#222;display:block;padding:20px;white-space:pre;font-size:14px;overflow-x:auto}code,pre{font-family:var(--font-code)}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 110px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic}.pubdate-single{color:var(--color-grayer);font-style:italic}sup.gray{color:var(--color-grayer)}@media(prefers-color-scheme:dark){body{background-color:#01242e;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#444}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.png alt="thiagowfx's avatar" width=32 height=32><h2>not just serendipity</h2></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/bestof/>★</a></nav></header><main><h1>Advent of Code 2024: Day 3</h1><p><span class=pubdate-single><time datetime=2024-12-03 pubdate>03 Dec, 2024
</time>• 258 words
• 2 min</span></p><content><p>Link to <a href=https://adventofcode.com/2024/day/3>Day #3</a> puzzle.</p><p>It&rsquo;s a pretty typical regex problem.
To choose not to use regex is to endeavour in pain.</p><p>The regex for part one to extract all occurrences of <code>mul</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3><span style=display:flex><span><span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;mul\(\d+,\d+\)&#39;</span>
</span></span></code></pre></div><p>Note that with <code>r</code> there is no need to escape the backslashes in Python.</p><p>Later on I extract the numbers with <code>r'\d+'</code>.</p><p>If we really wanted we could do everything with a single regex by using
capturing groups, however it would become less readable.</p><p>Once the numbers are captured, it&rsquo;s just a matter of accumulating their product.</p><p>I craft and test my regex with the support of <a href=https://regex101.com/>https://regex101.com/</a> and then
follow up with the Python interpreter in my laptop.</p><p>Part two adds two more operators, which we can easily account for with an or
(<code>|</code>).</p><p>The full solution:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> re
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>]) <span style=color:#66d9ef>as</span> input:
</span></span><span style=display:flex><span>        lines <span style=color:#f92672>=</span> input<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>splitlines()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    prod <span style=color:#f92672>=</span> prod_two <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> memory <span style=color:#f92672>in</span> lines:
</span></span><span style=display:flex><span>        ops <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;mul\(\d+,\d+\)&#39;</span>, memory)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> op <span style=color:#f92672>in</span> ops:
</span></span><span style=display:flex><span>            (f1, f2) <span style=color:#f92672>=</span> map(int, re<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;\d+&#39;</span>, op))
</span></span><span style=display:flex><span>            prod <span style=color:#f92672>+=</span> f1 <span style=color:#f92672>*</span> f2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># part one</span>
</span></span><span style=display:flex><span>    print(prod)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    enabled <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> memory <span style=color:#f92672>in</span> lines:
</span></span><span style=display:flex><span>        ops <span style=color:#f92672>=</span> re<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#34;mul\(\d+,\d+\)|do\(\)|don&#39;t\(\)&#34;</span>, memory)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> op <span style=color:#f92672>in</span> ops:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#e6db74>&#34;don&#39;t&#34;</span> <span style=color:#f92672>in</span> op:
</span></span><span style=display:flex><span>                enabled <span style=color:#f92672>=</span> <span style=color:#66d9ef>False</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> <span style=color:#e6db74>&#34;do&#34;</span> <span style=color:#f92672>in</span> op:
</span></span><span style=display:flex><span>                enabled <span style=color:#f92672>=</span> <span style=color:#66d9ef>True</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> <span style=color:#e6db74>&#39;mul&#39;</span> <span style=color:#f92672>in</span> op:
</span></span><span style=display:flex><span>                (f1, f2) <span style=color:#f92672>=</span> map(int, re<span style=color:#f92672>.</span>findall(<span style=color:#e6db74>r</span><span style=color:#e6db74>&#39;\d+&#39;</span>, op))
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> enabled:
</span></span><span style=display:flex><span>                    prod_two <span style=color:#f92672>+=</span> f1 <span style=color:#f92672>*</span> f2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># part two</span>
</span></span><span style=display:flex><span>    print(prod_two)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p>I intended to use <a href=https://docs.python.org/3/whatsnew/3.10.html><code>match</code></a> merely
for style points however it&rsquo;s only available from Python 3.10+, thus I sticked
with a mere <code>if-elif</code> construct.</p></content><p><a href=https://perrotta.dev/tags/aoc/>#aoc</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a></p></main><hr><footer><span>© 2021 - 2025
<a href=mailto:notjustserendipity@perrotta.dev>Thiago Perrotta
</a>·
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ·
<a href=/index.xml>RSS</a> ·
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo ʕ•ᴥ•ʔ bear</a></span></footer></body></html>