<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Cookiecutter | not just serendipity</title><meta name=title content="Cookiecutter">
<meta name=description content="Recently I found out about cookiecutter.
It&rsquo;s basically a scaffolding (code generation) tool.
Previously I was using kickstart.
I got annoyed that kickstart made a new release that was backwards-incompatible:

Force output-dir to be selected in the CLI to avoid surprises

That&rsquo;s how I found out about cookiecutter.
It turns out it&rsquo;s much more established and quite popular in the Python ecosystem.
Example usage:
% tree
.
├── Makefile
├── README.md
└── cookiecutter
    ├── base
    │   ├── cookiecutter.json
    │   ├── hooks
    │   │   └── post_gen_project.py
    │   └── {{ cookiecutter.app_name }}
    │       ├── kustomization.yaml
    │       └── {{ cookiecutter.app_name }}.yaml
The Makefile:"><meta name=keywords content="bestof,dev,"><meta property="og:url" content="https://perrotta.dev/2024/12/cookiecutter/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="Cookiecutter"><meta property="og:description" content="Recently I found out about cookiecutter.
It’s basically a scaffolding (code generation) tool.
Previously I was using kickstart. I got annoyed that kickstart made a new release that was backwards-incompatible:
Force output-dir to be selected in the CLI to avoid surprises
That’s how I found out about cookiecutter.
It turns out it’s much more established and quite popular in the Python ecosystem.
Example usage:
% tree . ├── Makefile ├── README.md └── cookiecutter ├── base │ ├── cookiecutter.json │ ├── hooks │ │ └── post_gen_project.py │ └── {{ cookiecutter.app_name }} │ ├── kustomization.yaml │ └── {{ cookiecutter.app_name }}.yaml The Makefile:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-30T00:45:20-03:00"><meta property="article:modified_time" content="2024-12-30T00:45:20-03:00"><meta property="article:tag" content="Bestof"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Cookiecutter"><meta name=twitter:description content="Recently I found out about cookiecutter.
It’s basically a scaffolding (code generation) tool.
Previously I was using kickstart. I got annoyed that kickstart made a new release that was backwards-incompatible:
Force output-dir to be selected in the CLI to avoid surprises
That’s how I found out about cookiecutter.
It turns out it’s much more established and quite popular in the Python ecosystem.
Example usage:
% tree . ├── Makefile ├── README.md └── cookiecutter ├── base │ ├── cookiecutter.json │ ├── hooks │ │ └── post_gen_project.py │ └── {{ cookiecutter.app_name }} │ ├── kustomization.yaml │ └── {{ cookiecutter.app_name }}.yaml The Makefile:"><meta itemprop=name content="Cookiecutter"><meta itemprop=description content="Recently I found out about cookiecutter.
It’s basically a scaffolding (code generation) tool.
Previously I was using kickstart. I got annoyed that kickstart made a new release that was backwards-incompatible:
Force output-dir to be selected in the CLI to avoid surprises
That’s how I found out about cookiecutter.
It turns out it’s much more established and quite popular in the Python ecosystem.
Example usage:
% tree . ├── Makefile ├── README.md └── cookiecutter ├── base │ ├── cookiecutter.json │ ├── hooks │ │ └── post_gen_project.py │ └── {{ cookiecutter.app_name }} │ ├── kustomization.yaml │ └── {{ cookiecutter.app_name }}.yaml The Makefile:"><meta itemprop=datePublished content="2024-12-30T00:45:20-03:00"><meta itemprop=dateModified content="2024-12-30T00:45:20-03:00"><meta itemprop=wordCount content="327"><meta itemprop=keywords content="Bestof,Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2024/12/cookiecutter/><style>:root{--color-gray:#888;--color-grayer:#666;--font-title:'Inter', 'Fira Sans', 'Lato', system-ui, -apple-system, BlinkMacSystemFont, 'Avenir Next', 'Avenir', 'Segoe UI', 'Helvetica Neue', Helvetica, Ubuntu, Roboto, Noto, Cantarell, Arial, sans-serif;--font-body:'Crimson Pro', 'Vollkorn', 'Alegreya', 'Iowan Old Style', 'Apple Garamond', 'Baskerville', 'Times New Roman', 'Noto Serif', 'Droid Serif', 'Times', 'Source Serif Pro', serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';--font-code:'Fira Code', 'PT Mono', 'IBM Plex Mono', Menlo, Consolas, Monaco, 'Liberation Mono', 'Ubuntu Mono', 'Lucida Console', monospace}body{font-family:var(--font-body);margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fffcf0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444;-webkit-text-size-adjust:100%}h1,h2,h3,h4,h5,h6,strong,b{color:#222}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:small;padding:8px;text-align:center}a{color:#3273dc}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}li code,p code{font-size:small}pre code{color:#222;display:block;padding:20px;white-space:pre;font-size:14px;overflow-x:auto}code,pre{font-family:var(--font-code)}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 110px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic}.pubdate-single{color:var(--color-grayer);font-style:italic}sup.gray{color:var(--color-grayer)}@media(prefers-color-scheme:dark){body{background-color:#01242e;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#444}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.png alt="thiagowfx's avatar" width=32 height=32><h2>not just serendipity</h2></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/bestof/>★</a></nav></header><main><h1><span>★</span>
Cookiecutter</h1><p><span class=pubdate-single><time datetime=2024-12-30 pubdate>30 Dec, 2024
</time>• 327 words
• 2 min</span></p><content><p>Recently I found out about <a href=https://github.com/cookiecutter/cookiecutter><code>cookiecutter</code></a>.</p><p>It&rsquo;s basically a <strong>scaffolding (code generation) tool</strong>.</p><p>Previously I was using <a href=https://crates.io/crates/kickstart><code>kickstart</code></a>.
I got annoyed that <code>kickstart</code> made <a href="https://github.com/Keats/kickstart?tab=readme-ov-file#050-2024-12-13">a new release</a> that was backwards-incompatible:</p><blockquote><p>Force output-dir to be selected in the CLI to avoid surprises</p></blockquote><p>That&rsquo;s how I found out about <code>cookiecutter</code>.</p><p>It turns out it&rsquo;s much more established and quite popular in the Python ecosystem.</p><p>Example usage:</p><pre tabindex=0><code>% tree
.
├── Makefile
├── README.md
└── cookiecutter
    ├── base
    │   ├── cookiecutter.json
    │   ├── hooks
    │   │   └── post_gen_project.py
    │   └── {{ cookiecutter.app_name }}
    │       ├── kustomization.yaml
    │       └── {{ cookiecutter.app_name }}.yaml
</code></pre><p>The <code>Makefile</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-makefile data-lang=makefile><span style=display:flex><span><span style=color:#75715e># The directory wherein the Makefile resides.
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>ROOT_DIR <span style=color:#f92672>:=</span> <span style=color:#66d9ef>$(</span>patsubst %/,%,<span style=color:#66d9ef>$(</span>dir <span style=color:#66d9ef>$(</span>realpath <span style=color:#66d9ef>$(</span>lastword <span style=color:#66d9ef>$(</span>MAKEFILE_LIST<span style=color:#66d9ef>)))))</span>
</span></span><span style=display:flex><span>GIT_DIR <span style=color:#f92672>:=</span> <span style=color:#66d9ef>$(</span>shell git rev-parse --show-toplevel<span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>base</span><span style=color:#f92672>:</span>
</span></span><span style=display:flex><span>        @<span style=color:#f92672>(</span>cd <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>GIT_DIR<span style=color:#66d9ef>)</span><span style=color:#e6db74>&#34;</span> <span style=color:#f92672>&amp;&amp;</span> cookiecutter <span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>$(</span>ROOT_DIR<span style=color:#66d9ef>)</span><span style=color:#e6db74>/cookiecutter/base&#34;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>.PHONY</span><span style=color:#f92672>:</span> base
</span></span></code></pre></div><p>The <code>Makefile</code> is just for ergonomics. Invocation is like: <code>make base</code>.
Use <code>-C</code> when running it from another directory.</p><p>The secret sauce, <code>cookiecutter.json</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;app_name&#34;</span>: <span style=color:#e6db74>&#34;app-name&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;~1.0.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;namespace&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;argocd&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;monitoring&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;tools&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>This file defines 3 parameters. They are all strings.
The first two have defaults, the third has a pre-defined list for user choice.</p><p>These parameters are instantiated / rendered in the templates whenever cookiecutter finds <code>{{ cookiecutter.app_name }}</code> (and so on) in code, and also in filenames.</p><p>For example, <code>kustomization.yaml</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># yaml-language-server: $schema=https://json.schemastore.org/kustomization</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kustomize.config.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Kustomization</span>
</span></span><span style=display:flex><span><span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>  - {{ <span style=color:#ae81ff>cookiecutter.app_name }}.yaml</span>
</span></span></code></pre></div><p>Would be replaced with (assuming the default choice):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span><span style=color:#75715e># yaml-language-server: $schema=https://json.schemastore.org/kustomization</span>
</span></span><span style=display:flex><span><span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>kustomize.config.k8s.io/v1beta1</span>
</span></span><span style=display:flex><span><span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Kustomization</span>
</span></span><span style=display:flex><span><span style=color:#f92672>resources</span>:
</span></span><span style=display:flex><span>  - <span style=color:#ae81ff>app-name.yaml</span>
</span></span></code></pre></div><p>It&rsquo;s possible to move the files to another directory with the use of a post-gen hook, e.g. <code>hooks/post_gen_project.py</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> shutil
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> pathlib <span style=color:#f92672>import</span> Path
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>app_name <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;{{ cookiecutter.app_name }}&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>source_dir <span style=color:#f92672>=</span> Path<span style=color:#f92672>.</span>cwd()
</span></span><span style=display:flex><span>target_dir <span style=color:#f92672>=</span> source_dir<span style=color:#f92672>.</span>parent <span style=color:#f92672>/</span> <span style=color:#e6db74>&#34;apps&#34;</span> <span style=color:#f92672>/</span> <span style=color:#e6db74>&#34;base&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>shutil<span style=color:#f92672>.</span>move(source_dir, target_dir)
</span></span></code></pre></div><p>&mldr;moves the top-level directory to <code>apps/base</code>. Here, it is assumed that the <code>cookiecutter</code> project lives in a <code>scaffolding/</code> directory.</p><p>It&rsquo;s also possible to invoke <code>cookiecutter</code> with an URL.
Think <code>cookiecutter https://github/com/thiagowfx/my-cool-django-template --directory lite</code>.</p><p>I intend to adopt it in more of my projects.</p></content><p><a href=https://perrotta.dev/tags/bestof/>#bestof</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a></p></main><hr><footer><span>© 2021 - 2025
<a href=mailto:notjustserendipity@perrotta.dev>Thiago Perrotta
</a>·
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ·
<a href=/index.xml>RSS</a> ·
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo ʕ•ᴥ•ʔ bear</a></span></footer></body></html>