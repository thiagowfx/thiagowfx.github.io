<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Advent of Code 2024: Day 2 | not just serendipity</title>
<meta name=keywords content="dev,devops"><meta name=description content="Link to Day #2 puzzle."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2024/12/advent-of-code-2024-day-2/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2024/12/advent-of-code-2024-day-2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Advent of Code 2024: Day 2"><meta property="og:description" content="Link to Day #2 puzzle."><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2024/12/advent-of-code-2024-day-2/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-03T01:15:00+01:00"><meta property="article:modified_time" content="2024-12-03T01:15:00+01:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2024: Day 2"><meta name=twitter:description content="Link to Day #2 puzzle."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"Advent of Code 2024: Day 2","item":"https://www.perrotta.dev/2024/12/advent-of-code-2024-day-2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Advent of Code 2024: Day 2","name":"Advent of Code 2024: Day 2","description":"Link to Day #2 puzzle.\n","keywords":["dev","devops"],"articleBody":"Link to Day #2 puzzle.\nThe first part is straightforward. It felt right to use pairwise to compute the differences between each adjacent pair:\ndiffs = [(b - a) for (a,b) in pairwise(map(int, line.split(' ')))] Then we combine it with all:\ndef is_safe(diffs): return all(1 \u003c= n \u003c= 3 for n in diffs) or all(-3 \u003c= n \u003c= -1 for n in diffs) Note that it is necessary to use two all expressions. It feels tempting to do:\nall(1 \u003c= n \u003c= 3 or -3 \u003c= n \u003c= -1 for n in diffs) …however that’s incorrect. For example: diffs = [1, -1, 1, -1] with an input such as [1, 2, 1, 2] would pass the test even though it shouldn’t.\nIt also feels tempting to use abs() but then an additional check would be necessary to ensure the diffs are either all positive or all negative.\nThe second part was trickier.\nInitially I was doing:\nlist(1 \u003c= n \u003c= 3 for n in diffs).count(False) \u003c= 1 or list(-3 \u003c= n \u003c= -1 for n in diffs).count(False) \u003c= 1 …but then I realized I misunderstood the problem.\nThe 1 2 7 8 9 line, whose diff is [1, 5, 1, 1], illustrates it well: in principle it would pass the test by dropping “5” from the diff. However, that cannot be correct, because 2 -\u003e 8 is too big of a jump.\nThe brute force way is to drop elements one by one, splitting the original list into two, and then checking is_safe in the merged sublists. That would require computing diffs every time, which would yield an O(n^2) solution.\nWe can do better by pre-computing diffs only once, and then adding a bit of manipulation to reconstruct what the merged diffs would be. The end goal is to compute this:\nis_safe(diffs[:i-1] + [l[i+1] - l[i-1]] + diffs[i+1:]): …i.e. the left part of diffs, the right part of diffs, and a rolling diff element in the middle.\nThe full solution:\n#!/usr/bin/env python3 import sys from itertools import pairwise def main(): with open(sys.argv[1]) as input: lines = input.read().splitlines() safe = 0 safe_damp = 0 def is_safe(diffs): return all(1 \u003c= n \u003c= 3 for n in diffs) or all(-3 \u003c= n \u003c= -1 for n in diffs) for line in lines: l = list(map(int, line.split(' '))) diffs = [(b - a) for (a,b) in pairwise(l)] is_this_safe = is_safe(diffs) if is_this_safe: safe += 1 safe_damp += 1 continue for i in range(len(l)): if i == 0: if is_safe(diffs[1:]): safe_damp += 1 break elif i == len(l) - 1: if is_safe(diffs[:-1]): safe_damp += 1 break else: if is_safe(diffs[:i-1] + [l[i+1] - l[i-1]] + diffs[i+1:]): safe_damp += 1 break # part one print(safe) # part two print(safe_damp) if __name__ == '__main__': main() A few notes:\nthere’s no need for pairwise; a plain for-range loop would have done the job just fine; pairwise is stylish though 1 \u003c= n \u003c= 3 is syntactic sugar for 1 \u003c= n and n \u003c= 3. Python is sweet. part two could become a bit more elegant by introducing another helper function naming is hard ","wordCount":"515","inLanguage":"en","datePublished":"2024-12-03T01:15:00+01:00","dateModified":"2024-12-03T01:15:00+01:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2024/12/advent-of-code-2024-day-2/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Advent of Code 2024: Day 2</h1><div class=post-meta><span title='2024-12-03 01:15:00 +0100 +0100'>December 3, 2024</span>&nbsp;·&nbsp;515 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Link to <a href=https://adventofcode.com/2024/day/2>Day #2</a> puzzle.</p><p>The first part is straightforward. It felt right to use <a href=https://docs.python.org/3/library/itertools.html#itertools.pairwise><code>pairwise</code></a> to compute the differences between each adjacent pair:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>diffs <span style=color:#f92672>=</span> [(b <span style=color:#f92672>-</span> a) <span style=color:#66d9ef>for</span> (a,b) <span style=color:#f92672>in</span> pairwise(map(int, line<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39; &#39;</span>)))]
</span></span></code></pre></div><p>Then we combine it with <code>all</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_safe</span>(diffs):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> all(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs) <span style=color:#f92672>or</span> all(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs)
</span></span></code></pre></div><p>Note that it is necessary to use two <code>all</code> expressions. It feels tempting to do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>all(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#f92672>or</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>3</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs)
</span></span></code></pre></div><p>&mldr;however that&rsquo;s incorrect. For example: <code>diffs = [1, -1, 1, -1]</code> with an input
such as <code>[1, 2, 1, 2]</code> would pass the test even though it shouldn&rsquo;t.</p><p>It also feels tempting to use <code>abs()</code> but then an additional check would be
necessary to ensure the diffs are either all positive or all negative.</p><p>The second part was trickier.</p><p>Initially I was doing:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>list(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs)<span style=color:#f92672>.</span>count(<span style=color:#66d9ef>False</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span> <span style=color:#f92672>or</span> list(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs)<span style=color:#f92672>.</span>count(<span style=color:#66d9ef>False</span>) <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>&mldr;but then I realized I misunderstood the problem.</p><p>The <code>1 2 7 8 9</code> line, whose diff is <code>[1, 5, 1, 1]</code>, illustrates it well: in
principle it would pass the test by dropping &ldquo;5&rdquo; from the diff. However, that
cannot be correct, because <code>2 -> 8</code> is too big of a jump.</p><p>The brute force way is to drop elements one by one, splitting the original list
into two, and then checking <code>is_safe</code> in the merged sublists. That would
require computing <code>diffs</code> every time, which would yield an <code>O(n^2)</code> solution.</p><p>We can do better by pre-computing <code>diffs</code> only once, and then adding a bit of
manipulation to reconstruct what the merged diffs would be. The end goal is to
compute this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python3 data-lang=python3><span style=display:flex><span>is_safe(diffs[:i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> [l[i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> l[i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]] <span style=color:#f92672>+</span> diffs[i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>:]):
</span></span></code></pre></div><p>&mldr;i.e. the left part of <code>diffs</code>, the right part of <code>diffs</code>, and a rolling diff
element in the middle.</p><p>The full solution:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env python3</span>
</span></span><span style=display:flex><span><span style=color:#f92672>import</span> sys
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> itertools <span style=color:#f92672>import</span> pairwise
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>main</span>():
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>with</span> open(sys<span style=color:#f92672>.</span>argv[<span style=color:#ae81ff>1</span>]) <span style=color:#66d9ef>as</span> input:
</span></span><span style=display:flex><span>        lines <span style=color:#f92672>=</span> input<span style=color:#f92672>.</span>read()<span style=color:#f92672>.</span>splitlines()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    safe <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    safe_damp <span style=color:#f92672>=</span> <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>is_safe</span>(diffs):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> all(<span style=color:#ae81ff>1</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>3</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs) <span style=color:#f92672>or</span> all(<span style=color:#f92672>-</span><span style=color:#ae81ff>3</span> <span style=color:#f92672>&lt;=</span> n <span style=color:#f92672>&lt;=</span> <span style=color:#f92672>-</span><span style=color:#ae81ff>1</span> <span style=color:#66d9ef>for</span> n <span style=color:#f92672>in</span> diffs)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> line <span style=color:#f92672>in</span> lines:
</span></span><span style=display:flex><span>        l <span style=color:#f92672>=</span> list(map(int, line<span style=color:#f92672>.</span>split(<span style=color:#e6db74>&#39; &#39;</span>)))
</span></span><span style=display:flex><span>        diffs <span style=color:#f92672>=</span> [(b <span style=color:#f92672>-</span> a) <span style=color:#66d9ef>for</span> (a,b) <span style=color:#f92672>in</span> pairwise(l)]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        is_this_safe <span style=color:#f92672>=</span> is_safe(diffs)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> is_this_safe:
</span></span><span style=display:flex><span>            safe <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            safe_damp <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>continue</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> i <span style=color:#f92672>in</span> range(len(l)):
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> i <span style=color:#f92672>==</span> <span style=color:#ae81ff>0</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> is_safe(diffs[<span style=color:#ae81ff>1</span>:]):
</span></span><span style=display:flex><span>                    safe_damp <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>elif</span> i <span style=color:#f92672>==</span> len(l) <span style=color:#f92672>-</span> <span style=color:#ae81ff>1</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> is_safe(diffs[:<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]):
</span></span><span style=display:flex><span>                    safe_damp <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>if</span> is_safe(diffs[:i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>+</span> [l[i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>] <span style=color:#f92672>-</span> l[i<span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>]] <span style=color:#f92672>+</span> diffs[i<span style=color:#f92672>+</span><span style=color:#ae81ff>1</span>:]):
</span></span><span style=display:flex><span>                    safe_damp <span style=color:#f92672>+=</span> <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>                    <span style=color:#66d9ef>break</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># part one</span>
</span></span><span style=display:flex><span>    print(safe)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e># part two</span>
</span></span><span style=display:flex><span>    print(safe_damp)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> __name__ <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;__main__&#39;</span>:
</span></span><span style=display:flex><span>    main()
</span></span></code></pre></div><p>A few notes:</p><ul><li>there&rsquo;s no need for <code>pairwise</code>; a plain <code>for-range</code> loop would have done the
job just fine; <code>pairwise</code> is stylish though</li><li><code>1 &lt;= n &lt;= 3</code> is syntactic sugar for <code>1 &lt;= n and n &lt;= 3</code>. Python is sweet.</li><li>part two could become a bit more elegant by introducing another helper
function</li><li>naming is hard</li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/dev/>Dev</a></li><li><a href=https://www.perrotta.dev/tags/devops/>Devops</a></li></ul></footer></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a> · Made with ♥ in 🇨🇦</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>