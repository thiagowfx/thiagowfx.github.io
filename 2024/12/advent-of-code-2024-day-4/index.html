<!doctype html><html lang=en-us style="width:100%;height:100%;background-color:#fff;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#ffe6e6 0%,transparent 8%,transparent 92%,#ffe6e6 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title class=title>Advent of Code 2024: Day 4 | ¬¨ just serendipity üçÄ</title><meta name=title content="Advent of Code 2024: Day 4"><meta name=description content="Link to Day #4 puzzle.
It&rsquo;s a pretty typical 2D matrix search problem, or a graph search problem, if
you will.
The problem is naturally unraveled into the following searches:

horizontally
horizontally, reversed
vertically
vertically, reversed
diagonally, all 4 directions (NW, NE, SW, SE)

It&rsquo;s possible to write a single pair of for loops that addresses the general
case. The (classic) idea is to think of all 8 compass directions to move along
the matrix:"><meta name=keywords content="aoc,dev,"><meta property="og:url" content="https://perrotta.dev/2024/12/advent-of-code-2024-day-4/"><meta property="og:site_name" content="¬¨ just serendipity üçÄ"><meta property="og:title" content="Advent of Code 2024: Day 4"><meta property="og:description" content="Link to Day #4 puzzle.
It‚Äôs a pretty typical 2D matrix search problem, or a graph search problem, if you will.
The problem is naturally unraveled into the following searches:
horizontally horizontally, reversed vertically vertically, reversed diagonally, all 4 directions (NW, NE, SW, SE) It‚Äôs possible to write a single pair of for loops that addresses the general case. The (classic) idea is to think of all 8 compass directions to move along the matrix:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-12-06T11:44:39+01:00"><meta property="article:modified_time" content="2025-09-05T18:20:12+02:00"><meta property="article:tag" content="Aoc"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Advent of Code 2024: Day 4"><meta name=twitter:description content="Link to Day #4 puzzle.
It‚Äôs a pretty typical 2D matrix search problem, or a graph search problem, if you will.
The problem is naturally unraveled into the following searches:
horizontally horizontally, reversed vertically vertically, reversed diagonally, all 4 directions (NW, NE, SW, SE) It‚Äôs possible to write a single pair of for loops that addresses the general case. The (classic) idea is to think of all 8 compass directions to move along the matrix:"><meta itemprop=name content="Advent of Code 2024: Day 4"><meta itemprop=description content="Link to Day #4 puzzle.
It‚Äôs a pretty typical 2D matrix search problem, or a graph search problem, if you will.
The problem is naturally unraveled into the following searches:
horizontally horizontally, reversed vertically vertically, reversed diagonally, all 4 directions (NW, NE, SW, SE) It‚Äôs possible to write a single pair of for loops that addresses the general case. The (classic) idea is to think of all 8 compass directions to move along the matrix:"><meta itemprop=datePublished content="2024-12-06T11:44:39+01:00"><meta itemprop=dateModified content="2025-09-05T18:20:12+02:00"><meta itemprop=wordCount content="892"><meta itemprop=keywords content="Aoc,Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2024/12/advent-of-code-2024-day-4/><link rel=stylesheet href=https://perrotta.dev/theme.css><style>@keyframes snowfall{0%{background-position:0 0,100px 150px,200px 300px,0 0}100%{background-position:0 100vh,100px calc(150px + 100vh),200px calc(300px + 100vh),0 0}}html{animation:snowfall 20s linear infinite}body{text-align:left;margin:auto}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;text-align:center;display:flex;flex-direction:column;gap:6px}footer>a{text-decoration:none}a{color:var(--link-color)}.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:12px;display:inline-block}hr{border:none;border-top:1px dashed var(--border-color)}nav a.has-emoji .nav-emoji{display:none}nav a.has-emoji:hover .nav-emoji,nav a.active-star .nav-emoji{display:inline}nav a.has-emoji:hover .nav-text,nav a.active-star .nav-text{display:none}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.4}table{width:100%}img{max-width:100%}code{background-color:var(--code-bg)}li code,p code{font-size:.9em}pre{margin:1.5rem 0;border-radius:10px;background-color:var(--code-bg);overflow-x:auto}pre code{display:block;padding:18px 22px;white-space:pre;font-size:17px;overflow-x:auto;background:0 0;color:inherit}code,pre{font-family:var(--font-code)}.highlight{margin:1.5rem 0}.highlight pre{margin:0;border-radius:10px;background:0 0}.highlight pre code{padding:0}.codeblock{margin:1.5rem 0;border-radius:12px;border:1px solid var(--border-color);background:var(--code-bg);overflow:hidden}.codeblock-header{display:flex;justify-content:space-between;align-items:center;font-size:.85em;padding:10px 16px;background:rgba(0,0,0,2%);border-bottom:1px solid var(--border-color);color:var(--color-gray)}.codeblock-language{font-weight:600}.codeblock-copy{background:0 0;border:none;color:inherit;padding:2px 6px;font-size:.9em;cursor:pointer}.codeblock .highlight{margin:0;border:none}.codeblock .highlight pre{padding:18px 22px}.chroma{color:var(--chroma-text)!important;background-color:var(--chroma-bg)!important}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cs,.chroma .cp,.chroma .cpf{color:var(--chroma-comment)!important}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr,.chroma .kt{color:var(--chroma-keyword)!important}.chroma .s,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .dl,.chroma .sd,.chroma .s2,.chroma .se,.chroma .sh,.chroma .si,.chroma .sx,.chroma .sr,.chroma .s1,.chroma .ss{color:var(--chroma-string)!important}.chroma .nf,.chroma .fm{color:var(--chroma-function)!important}.chroma .n,.chroma .na,.chroma .nc,.chroma .no,.chroma .ni,.chroma .ne,.chroma .nl,.chroma .nn,.chroma .nx,.chroma .py,.chroma .nt,.chroma .nb,.chroma .bp,.chroma .nv,.chroma .vc,.chroma .vg,.chroma .vi,.chroma .vm{color:var(--chroma-name)!important}.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .il,.chroma .mo{color:var(--chroma-number)!important}.chroma .o,.chroma .ow{color:var(--chroma-operator)!important}.chroma .nd{color:var(--chroma-function)!important}.chroma .lnt,.chroma .ln{color:var(--chroma-comment)!important}.chroma .gi{color:var(--chroma-string)!important}.chroma .gd{color:var(--chroma-name)!important}blockquote{border-left:2px solid #999;color:var(--heading-color);padding-left:25px;padding-right:15px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex;gap:8px;margin-bottom:8px}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic;font-size:.85em}.pubdate-single{color:var(--color-gray);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.social-link{text-decoration:none;font-size:1.4em;display:inline-flex;align-items:center;justify-content:center;padding:.3em;border-radius:50%;background-color:var(--code-bg);color:var(--text-color);transition:all .3s ease;position:relative}.social-link:hover{transform:translateY(-4px);background-color:var(--link-color);color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.15)}.social-link:active{transform:translateY(-2px)}#theme-toggle{background:0 0;border:none;padding:0;cursor:pointer;font-size:1.2em;display:inline-block;vertical-align:middle;transition:transform .2s ease}#theme-toggle:hover{transform:scale(1.15)}#theme-toggle:active{transform:scale(.95)}.badge-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.badge-wrapper a{display:inline-block;text-decoration:none;transition:transform .2s ease}.badge-wrapper a:hover{transform:translateY(-2px)}.badge-wrapper img{display:block;height:auto}.footer-statement{font-size:.75em;margin:0}sup.gray{color:var(--color-gray)}.tag-cloud{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}.tag-pill{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:var(--code-bg);border-radius:6px;text-decoration:none;transition:all .2s ease}.tag-pill:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.tag-count{color:var(--color-gray);font-size:.9em}.rss-link{display:inline-block;margin-left:12px;padding:4px 10px;background:var(--link-color);color:#fff;text-decoration:none;border-radius:4px;font-size:.5em;font-weight:500;text-transform:uppercase;letter-spacing:.5px;transition:all .2s ease;vertical-align:middle}.rss-link:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2);opacity:.9}.year-group{margin:20px 0;padding:16px 0;transition:all .2s ease}.year-group summary{cursor:pointer;user-select:none;padding:8px 0;font-size:1.5rem;transition:color .2s ease;list-style:none;position:relative;padding-left:32px}.year-group summary::-webkit-details-marker{display:none}.year-group summary::before{content:'‚ñ∂';position:absolute;left:0;transition:transform .3s ease;color:var(--link-color);font-size:.8em}.year-group[open] summary::before{transform:rotate(90deg)}.year-group summary:hover{color:var(--link-color)}.year-group summary strong{font-weight:600}.year-group ul.blog-posts{margin-top:16px;padding-left:32px}.year-group ul.blog-posts li{margin-bottom:12px;transition:transform .15s ease}.year-group ul.blog-posts li:hover{transform:translateX(4px)}.year-group ul.blog-posts li a{text-decoration:none;border-bottom:1px solid transparent;transition:all .2s ease}.year-group ul.blog-posts li a:hover{border-bottom-color:var(--link-color)}@media(min-width:601px){.title{font-size:38px}}@media(max-width:600px){body{font-size:18px}.title{font-size:1.5rem}h1{font-size:1.65rem}h2{font-size:1.4rem}h3{font-size:1.2rem}h4{font-size:1.1rem}h5,h6{font-size:1rem}nav a{margin-right:8px;font-size:.9em}pre code{font-size:15px;padding:14px 18px}.year-group{margin:16px 0;padding:12px 0}.year-group summary{font-size:1.15rem;padding-left:28px}.year-group summary::before{font-size:.75em}.year-group ul.blog-posts{padding-left:0;margin-top:12px}.year-group ul.blog-posts li{flex-direction:column;gap:4px;margin-bottom:12px}.year-group ul.blog-posts li span,ul.blog-posts li span{flex:unset}}html[data-theme=dark] blockquote{color:#ccc}html[data-theme=dark] textarea,html[data-theme=dark] input{background-color:#252525;color:var(--text-color)}@media(prefers-color-scheme:dark){html:not([data-theme]) blockquote{color:#ccc}html:not([data-theme]) textarea,html:not([data-theme]) input{background-color:#252525;color:var(--text-color)}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.webp></head><body><header><div class=header-top><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.webp alt="thiagowfx's avatar" width=32 height=32><h1 class=title>¬¨ just serendipity üçÄ</h1></a><button id=theme-toggle aria-label="Toggle dark mode" title="Toggle dark mode">
<span id=theme-toggle-icon>‚òÄÔ∏è</span></button></div><nav><a href=/tags/bestof/ class=has-emoji><span class=nav-emoji>‚≠ê</span>
<span class=nav-text>‚òÖ</span>
</a><a href=/posts/><span class=nav-text>Blog</span>
</a><a href=/blogroll/><span class=nav-text>Blogroll</span>
</a><a href=/tags/coding/><span class=nav-text>Coding</span></a></nav></header><main><script>document.addEventListener("keydown",function(e){if(e.key==="j"||e.key==="ArrowLeft"){const e=document.querySelector('[data-nav="prev"]');e&&e.href&&(window.location.href=e.href)}else if(e.key==="k"||e.key==="ArrowRight"){const e=document.querySelector('[data-nav="next"]');e&&e.href&&(window.location.href=e.href)}})</script><a href=https://perrotta.dev/2024/12/docker-image-size/ data-nav=prev style=display:none></a><a href=https://perrotta.dev/2024/12/advent-of-code-2024-day-5/ data-nav=next style=display:none></a><h2>Advent of Code 2024: Day 4</h2><p><span class=pubdate-single><time datetime=2024-12-06 pubdate>06 Dec, 2024
</time>‚Ä¢ 892 words ‚Ä¢ 5 min
‚Ä¢ updated <time datetime=2025-09-05>05 Sep, 2025</time></span></p><div class=old-entry-warning role=note>‚ö†Ô∏è This post is over one year old. It may no longer be up to date. Opinions may have changed.</div><content><p>Link to <a href=https://adventofcode.com/2024/day/4>Day #4</a> puzzle.</p><p>It&rsquo;s a pretty typical 2D matrix search problem, or a graph search problem, if
you will.</p><p>The problem is naturally unraveled into the following searches:</p><ul><li>horizontally</li><li>horizontally, reversed</li><li>vertically</li><li>vertically, reversed</li><li>diagonally, all 4 directions (NW, NE, SW, SE)</li></ul><p>It&rsquo;s possible to write a single pair of for loops that addresses the general
case. The (classic) idea is to think of all 8 compass directions to move along
the matrix:</p><ul><li>(1, 0)</li><li>(-1, 0)</li><li>(0, 1)</li><li>(0, -1)</li><li>(1, 1)</li><li>(-1, -1)</li><li>(-1, 1)</li><li>(1, -1)</li></ul><p>Within the inner iteration, change <code>x += dx</code> and <code>y += dy</code> (or <code>i += di</code>, <code>j += dj</code>, naming is hard). I did this many times in C++ though, and I want to write
elegant Python code.</p><p>Therefore I came up with the following solution instead, with nested list
comprehensions:</p><div class=codeblock data-lang=python><div class=codeblock-header><span class=codeblock-language>python</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_horizontal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>((</span><span class=kc>True</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>matrix</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>row</span><span class=p>)</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)])</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]))</span></span></span></code></pre></div></div><p>It follows the same principle as the original intent, however it leverages
list slices so that we can omit the <code>dx/dy</code> step.</p><p>The vertical search is pretty straightforward: it is just a matter of running
the horizontal search in the transposed matrix (<code>zip(*matrix)</code>).</p><p>I must confess that using <code>zip</code> to transpose matrices always felt magical and a
mere coincidence that it just works‚Ñ¢. Ruby has a <code>.transpose</code> method, which is
more readable.</p><p>For the diagonal search, I couldn&rsquo;t think of an elegant list comprehension
manner to address it. Is it even possible to &ldquo;2D slice&rdquo; in Python?</p><p>After-the-fact I decided to ask ChatGPT, and it is indeed possible, but it
requires NumPy:</p><blockquote><p>If a is 2-D, returns the diagonal of a with the given offset, i.e., the
collection of elements of the form a[i, i+offset]. If a has more than two
dimensions, then the axes specified by axis1 and axis2 are used to determine
the 2-D sub-array whose diagonal is returned. The shape of the resulting array
can be determined by removing axis1 and axis2 and appending an index to the
right equal to the size of the resulting diagonals.</p></blockquote><p>The method call resembles <code>numpy.array([[1, 2], [3, 4]]).diagonal(offset=1)</code>,
perhaps with the aid of <code>.flip()</code> to account for the other direction.</p><p>Anyway, my plain diagonal search is:</p><div class=codeblock data-lang=python><div class=codeblock-header><span class=codeblock-language>python</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_diagonal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rows</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cols</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>cols</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>rows</span> <span class=ow>and</span> <span class=n>j</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>cols</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>k</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=n>k</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)))</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>rows</span> <span class=ow>and</span> <span class=n>j</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>k</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>k</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)))</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>count</span></span></span></code></pre></div></div><p>Part two is fundamentally a different problem.</p><p>One way to address it is to search for all <code>'A'</code> characters, and then look
around its &ldquo;edges&rdquo; to see if they contain exactly two <code>'M'</code> and two <code>'S'</code>, and
that they are properly arranged:</p><div class=codeblock data-lang=python><div class=codeblock-header><span class=codeblock-language>python</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_double_mas</span><span class=p>(</span><span class=n>matrix</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rows</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cols</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>rows</span> <span class=o>-</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>cols</span> <span class=o>-</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=s1>&#39;A&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># look at a QWERTY keyboard to make sense of these variable names</span>
</span></span><span class=line><span class=cl>            <span class=n>q</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>e</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>z</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>c</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>edges</span> <span class=o>=</span> <span class=p>[</span><span class=n>q</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>z</span><span class=p>,</span> <span class=n>c</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>edges</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;M&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span> <span class=ow>or</span> <span class=n>edges</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;S&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>q</span> <span class=o>==</span> <span class=n>e</span> <span class=ow>or</span> <span class=n>q</span> <span class=o>==</span> <span class=n>z</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>count</span></span></span></code></pre></div></div><p>I couldn&rsquo;t find an opportunity for reuse of the solution from part one.</p><p>The full solution:</p><div class=codeblock data-lang=python><div class=codeblock-header><span class=codeblock-language>python</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-python data-lang=python><span class=line><span class=cl><span class=ch>#!/usr/bin/env python3</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>sys</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_horizontal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=nb>sum</span><span class=p>((</span><span class=kc>True</span> <span class=k>for</span> <span class=n>row</span> <span class=ow>in</span> <span class=n>matrix</span> <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>row</span><span class=p>)</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>+</span> <span class=mi>1</span><span class=p>)</span> <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>row</span><span class=p>[</span><span class=n>i</span><span class=p>:</span><span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)])</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_vertical</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>search_horizontal</span><span class=p>(</span><span class=nb>zip</span><span class=p>(</span><span class=o>*</span><span class=n>matrix</span><span class=p>),</span> <span class=n>keyword</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_diagonal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rows</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cols</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>rows</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=n>cols</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>rows</span> <span class=ow>and</span> <span class=n>j</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>cols</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>k</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=n>k</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)))</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>i</span> <span class=o>+</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&lt;=</span> <span class=n>rows</span> <span class=ow>and</span> <span class=n>j</span> <span class=o>-</span> <span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)</span> <span class=o>&gt;=</span> <span class=o>-</span><span class=mi>1</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span> <span class=s2>&#34;&#34;</span><span class=o>.</span><span class=n>join</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=n>k</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=n>k</span><span class=p>]</span> <span class=k>for</span> <span class=n>k</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=nb>len</span><span class=p>(</span><span class=n>keyword</span><span class=p>)))</span> <span class=ow>in</span> <span class=p>[</span><span class=n>keyword</span><span class=p>,</span> <span class=n>keyword</span><span class=p>[::</span><span class=o>-</span><span class=mi>1</span><span class=p>]]:</span>
</span></span><span class=line><span class=cl>                    <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>search_double_mas</span><span class=p>(</span><span class=n>matrix</span><span class=p>):</span>
</span></span><span class=line><span class=cl>    <span class=n>rows</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>)</span>
</span></span><span class=line><span class=cl>    <span class=n>cols</span> <span class=o>=</span> <span class=nb>len</span><span class=p>(</span><span class=n>matrix</span><span class=p>[</span><span class=mi>0</span><span class=p>])</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>count</span> <span class=o>=</span> <span class=mi>0</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=n>i</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>rows</span> <span class=o>-</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>        <span class=k>for</span> <span class=n>j</span> <span class=ow>in</span> <span class=nb>range</span><span class=p>(</span><span class=mi>1</span><span class=p>,</span> <span class=n>cols</span> <span class=o>-</span> <span class=mi>1</span><span class=p>):</span>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>!=</span> <span class=s1>&#39;A&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=c1># look at a QWERTY keyboard to make sense of these variable names</span>
</span></span><span class=line><span class=cl>            <span class=n>q</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>e</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>-</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>z</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>-</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>c</span> <span class=o>=</span> <span class=n>matrix</span><span class=p>[</span><span class=n>i</span> <span class=o>+</span> <span class=mi>1</span><span class=p>][</span><span class=n>j</span> <span class=o>+</span> <span class=mi>1</span><span class=p>]</span>
</span></span><span class=line><span class=cl>            <span class=n>edges</span> <span class=o>=</span> <span class=p>[</span><span class=n>q</span><span class=p>,</span> <span class=n>e</span><span class=p>,</span> <span class=n>z</span><span class=p>,</span> <span class=n>c</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>edges</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;M&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span> <span class=ow>or</span> <span class=n>edges</span><span class=o>.</span><span class=n>count</span><span class=p>(</span><span class=s1>&#39;S&#39;</span><span class=p>)</span> <span class=o>!=</span> <span class=mi>2</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=k>continue</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            <span class=k>if</span> <span class=n>q</span> <span class=o>==</span> <span class=n>e</span> <span class=ow>or</span> <span class=n>q</span> <span class=o>==</span> <span class=n>z</span><span class=p>:</span>
</span></span><span class=line><span class=cl>                <span class=n>count</span> <span class=o>+=</span> <span class=mi>1</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=n>count</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>def</span> <span class=nf>main</span><span class=p>():</span>
</span></span><span class=line><span class=cl>    <span class=k>with</span> <span class=nb>open</span><span class=p>(</span><span class=n>sys</span><span class=o>.</span><span class=n>argv</span><span class=p>[</span><span class=mi>1</span><span class=p>])</span> <span class=k>as</span> <span class=nb>input</span><span class=p>:</span>
</span></span><span class=line><span class=cl>        <span class=n>lines</span> <span class=o>=</span> <span class=nb>input</span><span class=o>.</span><span class=n>read</span><span class=p>()</span><span class=o>.</span><span class=n>splitlines</span><span class=p>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=n>keyword</span> <span class=o>=</span> <span class=s2>&#34;XMAS&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># [&#39;abcd&#39;, &#39;efgh&#39;, &#39;ijkl&#39;] -&gt; [[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, &#39;d&#39;], [&#39;e&#39;, &#39;f&#39;, &#39;g&#39;, &#39;h&#39;], [&#39;i&#39;, &#39;j&#39;, &#39;k&#39;, &#39;l&#39;]]</span>
</span></span><span class=line><span class=cl>    <span class=n>matrix</span> <span class=o>=</span> <span class=p>[</span><span class=nb>list</span><span class=p>(</span><span class=n>line</span><span class=p>)</span> <span class=k>for</span> <span class=n>line</span> <span class=ow>in</span> <span class=n>lines</span><span class=p>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># part one</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>search_horizontal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>)</span> <span class=o>+</span> <span class=n>search_vertical</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>)</span> <span class=o>+</span> <span class=n>search_diagonal</span><span class=p>(</span><span class=n>matrix</span><span class=p>,</span> <span class=n>keyword</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=c1># part two</span>
</span></span><span class=line><span class=cl>    <span class=nb>print</span><span class=p>(</span><span class=n>search_double_mas</span><span class=p>(</span><span class=n>matrix</span><span class=p>))</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>if</span> <span class=vm>__name__</span> <span class=o>==</span> <span class=s1>&#39;__main__&#39;</span><span class=p>:</span>
</span></span><span class=line><span class=cl>    <span class=n>main</span><span class=p>()</span></span></span></code></pre></div></div></content><p style=text-align:center;margin-top:2em>‚Äî ¬ß ‚Äî</p><div style=display:flex;justify-content:space-between><p>Reply via
<a href="mailto:serendipity@perrotta.dev?subject=Reply to: Advent%20of%20Code%202024%3a%20Day%204">email</a></p><p><a href=https://perrotta.dev/tags/aoc/>#aoc</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a></p></div></main><hr><footer><span>¬© 2021 - 2025 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a> ¬∑ <a href=/canary>üê¶</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=mailto:serendipity@perrotta.dev title="Email address"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.3em" width="1.3em"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)"><path d="M26 191c-4-5 16-23 44-40l50-31 50 31c28 17 48 35 44 40-7 12-181 12-188 0z"/><path d="M22 103l3-58 93-3c104-3 105-3 1e2 71l-3 46-48-29-47-30-38 23c-20 13-43 27-50 31-10 6-12-5-10-51z"/></g></svg>
</a><a target=_blank rel=noopener class=social-link href=https://perrotta.dev/index.xml title="RSS feed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 56.693 56.693" height="1em" width="1em"><path d="M3.428 31.085c6.19.0 12.009 2.418 16.382 6.816 4.381 4.398 6.793 10.256 6.793 16.492h9.539c0-18.113-14.676-32.848-32.714-32.848v9.54zM3.443 14.174c22.061.0 40.01 18.047 40.01 40.231h9.539c0-27.445-22.229-49.77-49.549-49.77v9.539zM16.634 47.741c0 3.648-2.959 6.607-6.607 6.607S3.42 51.39 3.42 47.741c0-3.65 2.958-6.607 6.606-6.607s6.608 2.957 6.608 6.607z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg></a></div><div class=badge-wrapper><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/ title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License"><img src=https://licensebuttons.net/l/by-nc-sa/4.0/88x31.png width=88 height=31 alt="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License">
</a><a target=_blank href=https://512kb.club title="512kb.club badge"><img src=https://perrotta.dev/green-team.webp alt="a proud member of the green team of 512KB club">
</a><a target=_blank href=https://powrss.com/ title=powRSS><img src=https://perrotta.dev/powrss-88-31.webp alt=powRSS>
</a><a target=_blank href=https://www.vim.org/ title="Vim text editor"><img src=https://perrotta.dev/vim.webp alt="Vim text editor">
</a><a target=_blank href=https://edleeman.co.uk/cookie-zero/ title="Cookie Zero"><img src=https://perrotta.dev/cookiezero.webp alt="Cookie Zero">
</a><a target=_blank href="https://validator.w3.org/feed/check.cgi?url=https://perrotta.dev/index.xml" title="Valid RSS feed"><img src=https://perrotta.dev/valid-rss-rogers.webp alt="Valid RSS feed"></a></div><p class=footer-statement>This site respects your privacy by not containing <a href=https://www.nevermonetize.com/>ads</a>,
not using tracking cookies,
and not collecting any personally identifiable information.
<a href=/ai>Gen AI policy</a>.</p></footer><script>(function(){const e=document.createElement("canvas");e.id="snowflake-canvas",e.style.position="fixed",e.style.top="0",e.style.left="0",e.style.pointerEvents="none",e.style.zIndex="-1",document.body.insertBefore(e,document.body.firstChild);const t=e.getContext("2d");let s=[];function o(){e.width=window.innerWidth,e.height=window.innerHeight}o(),window.addEventListener("resize",o);const n=["‚ùÑÔ∏è","üéÑ","üéÖ","üéÅ","‚õÑ","üîî"];class a{constructor(){this.x=Math.random()*e.width,this.y=-20,this.size=Math.random()*20+10,this.speedY=Math.random()*2+1,this.speedX=(Math.random()-.5)*2,this.opacity=Math.random()*.5+.5,this.emoji=n[Math.floor(Math.random()*n.length)]}update(){this.y+=this.speedY,this.x+=this.speedX,this.y>e.height&&(this.y=-20,this.x=Math.random()*e.width,this.emoji=n[Math.floor(Math.random()*n.length)])}draw(){t.globalAlpha=this.opacity,t.font=`${this.size}px Arial`,t.fillText(this.emoji,this.x,this.y),t.globalAlpha=1}}function r(){for(let e=0;e<30;e++)s.push(new a)}function i(){t.clearRect(0,0,e.width,e.height),s.forEach(e=>{e.update(),e.draw()}),requestAnimationFrame(i)}r(),i()})();function setTheme(e){e==="auto"?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("theme")):(document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)),updateThemeIcon()}function getCurrentThemeState(){return localStorage.getItem("theme")||"auto"}function updateThemeIcon(){const e=getCurrentThemeState(),t={auto:"üåì",dark:"üåô",light:"‚òÄÔ∏è"};document.getElementById("theme-toggle-icon").textContent=t[e]}const saved=localStorage.getItem("theme");saved&&document.documentElement.setAttribute("data-theme",saved),updateThemeIcon(),document.getElementById("theme-toggle").addEventListener("click",function(){const e=getCurrentThemeState(),t={auto:"light",light:"dark",dark:"auto"},n=t[e];setTheme(n)}),document.addEventListener("click",function(e){if(!e.target.matches("[data-copy-code]"))return;const t=e.target,n=t.closest(".codeblock");if(!n)return;const s=n.querySelector("pre code");if(!s)return;const o=s.innerText;if(!navigator.clipboard||!navigator.clipboard.writeText)return;navigator.clipboard.writeText(o).then(function(){t.dataset.originalLabel=t.textContent,t.textContent="Copied!",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)}).catch(function(){t.textContent="Failed",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)})})</script></body></html>