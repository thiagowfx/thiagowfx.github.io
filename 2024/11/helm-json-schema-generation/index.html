<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Helm: JSON schema generation | not just serendipity</title><meta name=title content="Helm: JSON schema generation">
<meta name=description content="Helm charts support the inclusion of a values.schema.json file to validate
values.yaml. Documentation: https://helm.sh/docs/topics/charts/#schema-files
A JSON schema is akin to defining the structure of and type-annotating a JSON
file. It helps to &ldquo;shift left&rdquo; the lifecycle of your helm releases.
For a pre-existing values.yaml file, it may be quite tedious to generate the
schema from scratch, by hand.
Can we automate this process?
Of course we can.
One possibility is to use GenAI / LLMs. This is out of scope of this post."><meta name=keywords content="dev,"><meta property="og:url" content="https://perrotta.dev/2024/11/helm-json-schema-generation/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="Helm: JSON schema generation"><meta property="og:description" content="Helm charts support the inclusion of a values.schema.json file to validate values.yaml. Documentation: https://helm.sh/docs/topics/charts/#schema-files
A JSON schema is akin to defining the structure of and type-annotating a JSON file. It helps to “shift left” the lifecycle of your helm releases.
For a pre-existing values.yaml file, it may be quite tedious to generate the schema from scratch, by hand.
Can we automate this process?
Of course we can.
One possibility is to use GenAI / LLMs. This is out of scope of this post."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-11-14T15:05:49+01:00"><meta property="article:modified_time" content="2024-11-14T15:05:49+01:00"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="Helm: JSON schema generation"><meta name=twitter:description content="Helm charts support the inclusion of a values.schema.json file to validate values.yaml. Documentation: https://helm.sh/docs/topics/charts/#schema-files
A JSON schema is akin to defining the structure of and type-annotating a JSON file. It helps to “shift left” the lifecycle of your helm releases.
For a pre-existing values.yaml file, it may be quite tedious to generate the schema from scratch, by hand.
Can we automate this process?
Of course we can.
One possibility is to use GenAI / LLMs. This is out of scope of this post."><meta itemprop=name content="Helm: JSON schema generation"><meta itemprop=description content="Helm charts support the inclusion of a values.schema.json file to validate values.yaml. Documentation: https://helm.sh/docs/topics/charts/#schema-files
A JSON schema is akin to defining the structure of and type-annotating a JSON file. It helps to “shift left” the lifecycle of your helm releases.
For a pre-existing values.yaml file, it may be quite tedious to generate the schema from scratch, by hand.
Can we automate this process?
Of course we can.
One possibility is to use GenAI / LLMs. This is out of scope of this post."><meta itemprop=datePublished content="2024-11-14T15:05:49+01:00"><meta itemprop=dateModified content="2024-11-14T15:05:49+01:00"><meta itemprop=wordCount content="213"><meta itemprop=keywords content="Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/><style>body{font-family:crimson pro,vollkorn,alegreya,iowan old style,apple garamond,baskerville,times new roman,noto serif,droid serif,times,source serif pro,serif,apple color emoji,segoe ui emoji,segoe ui symbol,noto color emoji;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fffcf0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}h1,h2,h3,h4,h5,h6,footer,nav{font-family:inter,fira sans,lato,system-ui,-apple-system,BlinkMacSystemFont,avenir next,avenir,segoe ui,helvetica neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}footer{font-size:small;padding:25px;text-align:center}a{color:#3273dc}.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}li code,p code{font-size:small}pre code{color:#222;display:block;padding:20px;white-space:pre;font-size:14px;overflow-x:auto}code,pre{font-family:fira code,pt mono,ibm plex mono,Menlo,Consolas,Monaco,liberation mono,ubuntu mono,lucida console,monospace}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 110px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#01242e;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#444}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.png alt="thiagowfx's avatar" width=32 height=32><h2>not just serendipity</h2></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/bestof/>★</a></nav></header><main><h1>Helm: JSON schema generation</h1><p><i><time datetime=2024-11-14 pubdate>14 Nov, 2024
</time>• 213 words
• 1 minutes</i></p><content><p>Helm charts support the inclusion of a <code>values.schema.json</code> file to validate
<code>values.yaml</code>. Documentation: <a href=https://helm.sh/docs/topics/charts/#schema-files>https://helm.sh/docs/topics/charts/#schema-files</a></p><p>A JSON schema is akin to defining the structure of and type-annotating a JSON
file. It helps to &ldquo;shift left&rdquo; the lifecycle of your helm releases.</p><p>For a pre-existing <code>values.yaml</code> file, it may be quite tedious to generate the
schema from scratch, by hand.</p><p><strong>Can we automate this process?</strong></p><p>Of course we can.</p><p>One possibility is to use GenAI / LLMs. This is out of scope of this post.</p><p>Another possibility is to leverage a helm plug-in to do so.</p><p>I had a good experience with <a href=https://github.com/karuppiah7890/helm-schema-gen>https://github.com/karuppiah7890/helm-schema-gen</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>helm plugin install https://github.com/karuppiah7890/helm-schema-gen.git
</span></span><span style=display:flex><span>cd path/to/helm/chart
</span></span><span style=display:flex><span>helm schema-gen values.yaml | tee values.schema.json
</span></span></code></pre></div><p>Afterwards, test the generated schema with:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>helm lint path/to/helm/chart
</span></span></code></pre></div><p>Usually I need to do some follow-up edits to the generated file, including:</p><ul><li>add string enum types for a tighter validation of strings</li><li>mark certain fields as required</li><li>mark certain fields with <code>additionalProperties: "false"</code></li><li>augment <code>["null"]</code> to <code>["null", "string"]</code> for keys that do not have a
default value</li></ul><p>It&rsquo;s worth to observe that, at the time of this publication, the following
notice is present in the repository of the plug-in:</p><blockquote><p>This repository has been archived by the owner on Aug 31, 2021. It is now
read-only.</p></blockquote><p>Nonetheless, it still works well.</p></content><p><a href=https://perrotta.dev/tags/dev/>#dev</a></p></main><footer><span>© 2021 - 2025
<a href=mailto:tbperrotta@gmail.com>Thiago Perrotta
</a>·
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ·
<a href=/index.xml>RSS</a> ·
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo ʕ•ᴥ•ʔ bear</a></span></footer></body></html>