{{- define "main" }} {{- if not .Params.menu }}
<h2>
  {{- if in .Params.tags "bestof" }}
  <span>★</span>
  {{- end }} {{ .Title }}
</h2>
<p>
  {{ if not .Date.IsZero }}
  <span class="pubdate-single">
    <time datetime='{{ .Date.Format "2006-01-02" }}' pubdate>
      {{ .Date.Format (default "02 Jan, 2006" .Site.Params.dateFormat) }}
    </time>
    {{ with .WordCount }} • {{ . }} words {{ end }} {{ with .ReadingTime }} • {{
    . }} min {{ end }}
    {{ if and .GitInfo (ne (.Date.Format "2006-01-02") (.Lastmod.Format "2006-01-02")) }}
    • updated <time datetime='{{ .Lastmod.Format "2006-01-02" }}'>{{ .Lastmod.Format (default "02 Jan, 2006" .Site.Params.dateFormat) }}</time>
    {{ end }}
  </span>
  {{ end }}
</p>
{{- end }}
{{- $warningYears := int (default 0 .Site.Params.oldEntryWarningYears) }}
{{- $isPost := or (eq .Section "posts") (eq .Type "posts") }}
{{- if and $isPost (gt $warningYears 0) (not .Date.IsZero) }}
  {{- $yearsOffset := int (mul -1 $warningYears) }}
  {{- $thresholdDate := now.AddDate $yearsOffset 0 0 }}
  {{- if lt .Date $thresholdDate }}
    {{- $thresholdText := printf "%d years" $warningYears }}
    {{- if eq $warningYears 1 }}
      {{- $thresholdText = "one year" }}
    {{- end }}
    <div class="old-entry-warning" role="note">
      ⚠️ This post is over {{ $thresholdText }} old. It may no longer be up to date. Opinions may have changed.
    </div>
  {{- end }}
{{- end }}
<content> {{ .Content }} </content>
<div style="display: flex; justify-content: space-between">
  {{ if .Params.email | default true }}
  <p>
    Reply via
    <a
      href="mailto:{{ .Site.Params.Author.email }}?subject=Reply to: {{ .Title }}"
      >email</a
    >
  </p>
  {{ end }}
  <p>
    {{- range (.GetTerms "tags") }}
    <a href="{{ .Permalink }}">#{{ .Name }}</a>
    {{- end }}
  </p>
</div>
{{- end }}
