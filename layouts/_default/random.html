{{- define "main" }}
<div class="content">
  <h2>{{ .Title }}</h2>
  <p>Redirecting to a random post...</p>
</div>
<script>
  const posts = [
    {{- $index := 0 }}
    {{- range $page := where .Site.RegularPages "Section" "posts" }}
    {{- $isCoding := in $page.Params.categories "coding" }}
    {{- if not $isCoding }}
    {{- if $index }},{{ end }}
    "{{ $page.RelPermalink }}"
    {{- $index = add $index 1 }}
    {{- end }}
    {{- end }}
  ];
  if (posts.length > 0) {
    const randomPost = posts[Math.floor(Math.random() * posts.length)];
    window.location.replace(randomPost);
  }
</script>
{{- end }}
