{{- define "main" }}
<content>
  <h2>{{ .Title }}</h2>
  <p>Redirecting to a random post...</p>
</content>
<script>
  const posts = [
    {{- range $index, $page := where .Site.RegularPages "Section" "posts" }}
    {{- if $index }},{{ end }}
    "{{ $page.RelPermalink }}"
    {{- end }}
  ];
  if (posts.length > 0) {
    const randomPost = posts[Math.floor(Math.random() * posts.length)];
    window.location.replace(randomPost);
  }
</script>
{{- end }}
