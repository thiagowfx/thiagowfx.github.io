<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Posts | not just serendipity</title>
<meta name=keywords content><meta name=description content="Posts - not just serendipity"><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/posts/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://www.perrotta.dev/posts/index.xml><link rel=alternate hreflang=en href=https://www.perrotta.dev/posts/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Posts"><meta property="og:description" content="not just serendipity"><meta property="og:type" content="website"><meta property="og:url" content="https://www.perrotta.dev/posts/"><meta name=twitter:card content="summary"><meta name=twitter:title content="Posts"><meta name=twitter:description content="not just serendipity"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"}]}</script></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span class=active>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><header class=page-header><h1>Posts</h1></header><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Helm: JSON schema generation</h2></header><div class=entry-content><p>Helm charts support the inclusion of a values.schema.json file to validate values.yaml. Documentation: https://helm.sh/docs/topics/charts/#schema-files
A JSON schema is akin to defining the structure of and type-annotating a JSON file. It helps to “shift left” the lifecycle of your helm releases.
For a pre-existing values.yaml file, it may be quite tedious to generate the schema from scratch, by hand.
Can we automate this process?
...</p></div><footer class=entry-footer><span title='2024-11-14 15:05:49 +0100 +0100'>November 14, 2024</span>&nbsp;·&nbsp;213 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Helm: JSON schema generation" href=https://www.perrotta.dev/2024/11/helm-json-schema-generation/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>sort deterministically</h2></header><div class=entry-content><p>We had the following code in a CI pipeline:
find apps/base/ -type d -exec basename {} \; | sort | sed -e 's/^/- / It lists all directories in apps/base. We add sort to make the output canonical. The sed part is just to make an unordered list out of it.
There was an issue though.
...</p></div><footer class=entry-footer><span title='2024-11-12 11:25:12 +0100 +0100'>November 12, 2024</span>&nbsp;·&nbsp;262 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to sort deterministically" href=https://www.perrotta.dev/2024/11/sort-deterministically/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Helm: enforce the directory name matches the chart name</h2></header><div class=entry-content><p>Problem statement: Given a helm chart called foo, enforce that its Chart.yaml file lives in a directory called foo1.
...</p></div><footer class=entry-footer><span title='2024-11-12 11:13:06 +0100 +0100'>November 12, 2024</span>&nbsp;·&nbsp;215 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Helm: enforce the directory name matches the chart name" href=https://www.perrotta.dev/2024/11/helm-enforce-the-directory-name-matches-the-chart-name/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>jq: remove quotes from output</h2></header><div class=entry-content><p>Given:
% aws eks --profile global --region us-east-1 list-clusters { "clusters": [ "aws-us-east-1-global-0" ] } Query:
% aws eks --profile global --region us-east-1 list-clusters | jq '.clusters' [ "aws-us-east-1-global-0" ] Further:
% aws eks --profile global --region us-east-1 list-clusters | jq '.clusters[0]' "aws-us-east-1-global-0" What if we wanted to remove the quotes? Add -r (--raw-output):
% aws eks --profile global --region us-east-1 list-clusters | jq -r '.clusters[0]' aws-us-east-1-global-0</p></div><footer class=entry-footer><span title='2024-11-07 14:13:17 +0100 +0100'>November 7, 2024</span>&nbsp;·&nbsp;67 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to jq: remove quotes from output" href=https://www.perrotta.dev/2024/11/jq-remove-quotes-from-output/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Ruby: update Gemfile dependencies</h2></header><div class=entry-content><p>Oneshot:
% gem update rubocop That won’t update the .gemspec file though. To do so:
bundler update rubocop Tip: Omitting the gem name has the effect of updating all gems.</p></div><footer class=entry-footer><span title='2024-11-06 13:16:21 +0100 +0100'>November 6, 2024</span>&nbsp;·&nbsp;30 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Ruby: update Gemfile dependencies" href=https://www.perrotta.dev/2024/11/ruby-update-gemfile-dependencies/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Github Actions: multiple docker images</h2></header><div class=entry-content><p>Problem statement: Given a monorepo on Github with multiple docker images in it, write a github workflow to build and push all of them.
...</p></div><footer class=entry-footer><span title='2024-11-05 17:05:22 +0100 +0100'>November 5, 2024</span>&nbsp;·&nbsp;185 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Github Actions: multiple docker images" href=https://www.perrotta.dev/2024/11/github-actions-multiple-docker-images/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>VSCode: auto restart extensions</h2></header><div class=entry-content><p>Whenever I open VSCode, there are some extension updates. Every time, I need to manually click “Extensions” in the left-side navigation bar and then “Restart” so that the upgrades take effect.
This should be automated.
...</p></div><footer class=entry-footer><span title='2024-11-04 11:34:36 +0100 +0100'>November 4, 2024</span>&nbsp;·&nbsp;70 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to VSCode: auto restart extensions" href=https://www.perrotta.dev/2024/11/vscode-auto-restart-extensions/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Jellyfin Trakt plug-in</h2></header><div class=entry-content><p>Trakt for Jellyfin Plugin:
Available for install through the plugin catalog, Trakt for Jellyfin allows you to synchronize your watch states with ease.
...</p></div><footer class=entry-footer><span title='2024-11-01 20:38:19 +0100 +0100'>November 1, 2024</span>&nbsp;·&nbsp;64 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Jellyfin Trakt plug-in" href=https://www.perrotta.dev/2024/11/jellyfin-trakt-plug-in/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Mermaid: rich diagrams in markdown</h2></header><div class=entry-content><p>When writing documentation in markdown e.g. for projects stored in git, adding a system architecture or design diagram is a great way to boost its readability, especially to unfamiliar readers.
My favorite way to generate diagrams is with GraphViz. It is widely available and easy to use.
That said, MermaidJS has native integration with GitHub and GitLab circa 2 years ago, and that’s hard to beat. Graphviz, sadly, does not.
...</p></div><footer class=entry-footer><span title='2024-10-28 15:58:39 +0100 +0100'>October 28, 2024</span>&nbsp;·&nbsp;175 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Mermaid: rich diagrams in markdown" href=https://www.perrotta.dev/2024/10/mermaid-rich-diagrams-in-markdown/></a></article><article class=post-entry><header class=entry-header><h2 class=entry-hint-parent>Board games</h2></header><div class=entry-content><p>Me: Would you like to play board games next week?
Acquaintance 1: What kind of board games?
Acquaintance 2: Which board games?
Acquaintance 3: What games are you playing?
People, have some room for serendipity and spontaneity, come on. Just say yes!</p></div><footer class=entry-footer><span title='2024-10-25 15:02:46 +0200 +0200'>October 25, 2024</span>&nbsp;·&nbsp;42 words&nbsp;·&nbsp;Thiago Perrotta</footer><a class=entry-link aria-label="post link to Board games" href=https://www.perrotta.dev/2024/10/board-games/></a></article><footer class=page-footer><nav class=pagination><a class=next href=https://www.perrotta.dev/posts/page/2/>Next&nbsp;&nbsp;»</a></nav></footer></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a> · Made with ♥ in 🇨🇦</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>