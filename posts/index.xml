<?xml version="1.0" encoding="utf-8" standalone="yes"?><?xml-stylesheet type="text/xsl" href="https://perrotta.dev//rss.xsl"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>¬¨ just serendipity üçÄ</title><link>https://perrotta.dev/</link><description>Recent content on ¬¨ just serendipity üçÄ</description><generator>Hugo</generator><language>en</language><managingEditor>serendipity@perrotta.dev (Thiago Perrotta)</managingEditor><webMaster>serendipity@perrotta.dev (Thiago Perrotta)</webMaster><copyright>¬© 2021 - 2026 Thiago Perrotta ¬∑
[some rights reserved](https://creativecommons.org/licenses/by-nc-sa/4.0/) ¬∑
a fork of [hugo  ï‚Ä¢·¥•‚Ä¢ î bear](https://github.com/janraasch/hugo-bearblog/)</copyright><atom:link href="https://perrotta.dev/posts/index.xml" rel="self" type="application/rss+xml"/><item><title>claude --teleport</title><link>https://perrotta.dev/2026/01/claude--teleport/</link><pubDate>Sat, 10 Jan 2026 22:26:21 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2026/01/claude--teleport/</guid><description>&lt;p&gt;After starting a coding start on the web with &lt;a href="https://code.claude.com/docs/en/claude-code-on-the-web"&gt;Claude Code on
Web&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/01/claude--teleport/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;, you can &lt;a href="https://code.claude.com/docs/en/claude-code-on-the-web#from-web-to-terminal"&gt;resume it
in the
terminal&lt;/a&gt;
with the traditional Claude Code CLI app by running &lt;code&gt;claude --teleport&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Without arguments, it prompts you to interactively choose an existing session to
resume.&lt;/p&gt;
&lt;p&gt;With a provided session ID argument, the session is immediately resumed.&lt;/p&gt;
&lt;p&gt;The docs mention the existence of the &lt;code&gt;/teleport&lt;/code&gt; command within Claude Code but I
could not find it in my instance (version v2.1.4).&lt;/p&gt;
&lt;p&gt;This &lt;a href="https://xcancel.com/bcherny/status/2007179832300581177"&gt;workflow&lt;/a&gt; (&amp;ldquo;start
on your phone, resume later on your computer afterwards&amp;rdquo;) is starting to become
popularized.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;a href="https://claude.ai/code"&gt;https://claude.ai/code&lt;/a&gt;&amp;#160;&lt;a href="https://perrotta.dev/2026/01/claude--teleport/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: claude --teleport"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>git: shell prompt: worktrees</title><link>https://perrotta.dev/2026/01/git-shell-prompt-worktrees/</link><pubDate>Sat, 10 Jan 2026 15:15:21 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><category>git</category><guid>https://perrotta.dev/2026/01/git-shell-prompt-worktrees/</guid><description>&lt;p&gt;My shell prompt displays the git branch my repository has
currently checked out:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;thiago.perrotta perrotta.dev git:master?
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚ùØ&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: augment that prompt to signal whether we&amp;rsquo;re inside a
checked out &lt;a href="https://git-scm.com/docs/git-worktree"&gt;git worktree&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This is helpful because lately multiple repository worktrees have been
popularized thanks to LLM coding agents.&lt;/p&gt;
&lt;p&gt;The following change to &lt;a href="%28https://perrotta.dev/2025/12/starship/%29"&gt;starship&lt;/a&gt; does the
trick:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit b7de6881c0fb57c840def52189502985442842e1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Date: Fri Jan 9 21:18:09 2026 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; starship: add worktree symbol
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git starship/.config/starship.toml starship/.config/starship.toml
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 87df9ff..ea7acc8 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- starship/.config/starship.toml
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ starship/.config/starship.toml
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -1,5 +1,5 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; # Minimal starship config matching grml prompt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-format = &amp;#34;$status$sudo$username$hostname$directory$git_branch$git_state$git_status$line_break$character&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+format = &amp;#34;$status$sudo$username$hostname$directory$git_branch$git_state$git_status${custom.git_worktree}$line_break$character&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; right_format = &amp;#34;$cmd_duration$jobs&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; add_newline = true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;@@ -24,13 +24,13 @@ format = &amp;#34; [$path](bold) &amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [git_branch]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; symbol = &amp;#34;git:&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-format = &amp;#34;[$symbol$branch](bold cyan) &amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+format = &amp;#34;[$symbol$branch](bold cyan)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [git_state]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; format = &amp;#34;|[$state]()&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [git_status]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;-format = &amp;#34;[$conflicted$deleted$renamed$modified$staged$untracked$ahead_behind](red) &amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+format = &amp;#34;[$conflicted$deleted$renamed$modified$staged$untracked$ahead_behind](red)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; [cmd_duration]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; min_time = 2000
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;@@ -46,3 +46,9 @@ format = &amp;#34;[üßô](red) &amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; [character]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; success_symbol = &amp;#34;[‚ùØ](green)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; error_symbol = &amp;#34;[x](red)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+[custom.git_worktree]
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+command = &amp;#34;printf &amp;#39;‚éá&amp;#39;&amp;#34; # or üå≤, but I find the emoji too distracting in this context
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+when = &amp;#34;git rev-parse --is-inside-work-tree 2&amp;gt;/dev/null &amp;amp;&amp;amp; [ -f $(git rev-parse --git-dir)/commondir ]&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+format = &amp;#34; [$output]($style)&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+style = &amp;#34;bold yellow&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You don&amp;rsquo;t need to use starship to adopt it. The core logic is:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;git rev-parse --is-inside-work-tree &amp;amp;&amp;gt;/dev/null &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; -f &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;git rev-parse --git-dir&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;/commondir&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;amp;&amp;amp;&lt;/span&gt; printf &lt;span style="color:#e6db74"&gt;&amp;#39;‚éá&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The result:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;thiago.perrotta perrotta.dev git:thiagowfx/my-custom-branch ‚éá
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚ùØ&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It is subtle yet informative.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: git: shell prompt: worktrees"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>ghostty: splits</title><link>https://perrotta.dev/2026/01/ghostty-splits/</link><pubDate>Thu, 08 Jan 2026 12:28:27 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2026/01/ghostty-splits/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/07/ghostty-migrating-config-to-dotfiles/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;The best quality-of-life improvement for Ghostty I added in 2025&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/01/ghostty-splits/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;: add the
following keybindings to your Ghostty config:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# native: Cmd + Shift + d
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;keybind = cmd+shift+-=new_split:down
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# native: Cmd + d
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;keybind = cmd+shift+|=new_split:right&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now you can split your terminal to the right and to the bottom with keyboard
shortcuts.&lt;/p&gt;
&lt;p&gt;Previously I was using the mouse to do so (right click + split).&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Unless you count &lt;a href="https://perrotta.dev/2025/11/ghostty-shaders/"&gt;eye-candy&lt;/a&gt; as
a QoL improvement :)&amp;#160;&lt;a href="https://perrotta.dev/2026/01/ghostty-splits/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: ghostty: splits"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Claude Code: release notes RSS feed</title><link>https://perrotta.dev/2026/01/claude-code-release-notes-rss-feed/</link><pubDate>Mon, 05 Jan 2026 15:31:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2026/01/claude-code-release-notes-rss-feed/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2026/01/claude-code-tips/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Stay up-to-date with the &lt;a href="https://claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt;
&lt;a href="https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md"&gt;CHANGELOG&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Did you know &lt;a href="https://stackoverflow.com/questions/21986561/rss-to-a-github-file"&gt;it&amp;rsquo;s
possible&lt;/a&gt; to
obtain a RSS feed straight from a github repo?&lt;/p&gt;
&lt;p&gt;The Claude Code github repository: &lt;a href="https://github.com/anthropics/claude-code/releases"&gt;https://github.com/anthropics/claude-code/releases&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Its feed: &lt;a href="https://github.com/anthropics/claude-code/releases.atom"&gt;https://github.com/anthropics/claude-code/releases.atom&lt;/a&gt; ‚Äì just append
&lt;code&gt;.atom&lt;/code&gt; to the repo releases URL.&lt;/p&gt;
&lt;p&gt;If you don&amp;rsquo;t have a favorite RSS reader yet, I recommendd &lt;a href="https://perrotta.dev/2022/01/miniflux-rolling-my-own-rss-reader/"&gt;Miniflux&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: release notes RSS feed"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Claude Code tips</title><link>https://perrotta.dev/2026/01/claude-code-tips/</link><pubDate>Mon, 05 Jan 2026 15:18:13 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2026/01/claude-code-tips/</guid><description>&lt;p&gt;These are great collections:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="https://github.com/ykdojo/claude-code-tips"&gt;https://github.com/ykdojo/claude-code-tips&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://adocomplete.com/advent-of-claude-2025/"&gt;https://adocomplete.com/advent-of-claude-2025/&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;New tips to me:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;/rename&lt;/code&gt; to set a session name, like you would with a tmux window. Later
on, resume the session with &lt;code&gt;/resume {name}&lt;/code&gt; or &lt;code&gt;claude --resume {name}&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Since
&lt;a href="https://github.com/anthropics/claude-code/blob/main/CHANGELOG.md#2074"&gt;v2.0.74&lt;/a&gt;
LSP became a first-class citizen, comparable to OpenCode:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Added LSP (Language Server Protocol) tool for code intelligence features like
go-to-definition, find references, and hover documentation&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code tips"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>git: diff untracked</title><link>https://perrotta.dev/2026/01/git-diff-untracked/</link><pubDate>Sun, 04 Jan 2026 04:29:01 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>git</category><guid>https://perrotta.dev/2026/01/git-diff-untracked/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/12/git-stash-untracked-files/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;If we can stash untracked files (&lt;code&gt;git stash -u&lt;/code&gt;), should we be able to &lt;code&gt;git diff&lt;/code&gt; untracked files?&lt;/p&gt;
&lt;p&gt;Naturally, diffing an untracked file would output the entire file contents.
Still, this can be desirable sometimes.&lt;/p&gt;
&lt;p&gt;When reviewing multiple files, some of which are modified, and some of which
are brand new, you may want to review the entire list at once.&lt;/p&gt;
&lt;p&gt;Let&amp;rsquo;s try it out:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cdtmp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/var/folders/yr/6sw3yylx6gjcy5jr38d6j6000000gn/T/thiago.perrotta-2026-01-04-l8Co7f
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git init
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Initialized empty Git repository in /private/var/folders/yr/6sw3yylx6gjcy5jr38d6j6000000gn/T/thiago.perrotta-2026-01-04-l8Co7f/.git/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% echo world &amp;gt; hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git status
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## No commits yet on master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;?? hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git diff
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git diff -u&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Err, no luck. In fact, from &lt;a href="https://man.archlinux.org/man/git-diff.1"&gt;&lt;code&gt;git-diff(1)&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;-p, -u, &amp;ndash;patch&lt;/p&gt;
&lt;p&gt;Generate patch (see the section called &amp;ldquo;GENERATING PATCH TEXT WITH -P&amp;rdquo;).
This is the default.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Ouch. That&amp;rsquo;s not the &lt;code&gt;-u&lt;/code&gt; we&amp;rsquo;re looking for!&lt;/p&gt;
&lt;p&gt;We can attempt a similar test with &lt;code&gt;git add -p&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cdtmp
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/var/folders/yr/6sw3yylx6gjcy5jr38d6j6000000gn/T/thiago.perrotta-2026-01-04-l8Co7f
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git init
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Initialized empty Git repository in /private/var/folders/yr/6sw3yylx6gjcy5jr38d6j6000000gn/T/thiago.perrotta-2026-01-04-l8Co7f/.git/
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% echo world &amp;gt; hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git status
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## No commits yet on master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;?? hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;No changes.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;No luck either.&lt;/p&gt;
&lt;p&gt;Not all hope is lost though.&lt;/p&gt;
&lt;p&gt;Enter &lt;a href="https://man.archlinux.org/man/git-add.1#:~:text=ignored%20removed%20files.-,%2DN%2C%20%2D%2Dintent%2Dto%2Dadd,-Record%20only%20the"&gt;&lt;code&gt;git add -N&lt;/code&gt; (&lt;code&gt;--intent-to-add&lt;/code&gt;)&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; -N, --intent-to-add
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; Record only the fact that the path will be added later. An entry for the
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; path is placed in the index with no content. This is useful for, among other
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; things, showing the unstaged content of such files with git diff and
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; committing them with git commit -a.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;If we do &lt;code&gt;git add -N hello.md&lt;/code&gt;, the following happens:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -N hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git --no-pager diff
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git hello.md hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;new file mode &lt;span style="color:#ae81ff"&gt;100644&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 0000000..cc628cc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- /dev/null
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -0,0 +1 @@
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+world&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Yes! There&amp;rsquo;s our diff. Now &lt;code&gt;git add -p&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -N hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git a/hello.md b/hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;new file mode &lt;span style="color:#ae81ff"&gt;100644&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 0000000..cc628cc
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- /dev/null
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ b/hello.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -0,0 +1 @@
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+world
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;1/1&lt;span style="color:#f92672"&gt;)&lt;/span&gt; Stage addition &lt;span style="color:#f92672"&gt;[&lt;/span&gt;y,n,q,a,d,e,p,P,?&lt;span style="color:#f92672"&gt;]&lt;/span&gt;?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It works too!&lt;/p&gt;
&lt;p&gt;&lt;code&gt;git reset --hard&lt;/code&gt; picks it up as well.&lt;/p&gt;
&lt;p&gt;In order to make this workflow ergonomic, run &lt;code&gt;git add -AN&lt;/code&gt; (&lt;code&gt;-A&lt;/code&gt; = &lt;code&gt;--all&lt;/code&gt;)
prior to &lt;code&gt;git diff&lt;/code&gt; or &lt;code&gt;git add -p&lt;/code&gt;, so that all new files are accounted for.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://stackoverflow.com/questions/855767/can-i-use-git-diff-on-untracked-files"&gt;See also&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: git: diff untracked"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>LogSeq: slowness on macOS</title><link>https://perrotta.dev/2026/01/logseq-slowness-on-macos/</link><pubDate>Sat, 03 Jan 2026 23:53:13 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><category>pkm</category><guid>https://perrotta.dev/2026/01/logseq-slowness-on-macos/</guid><description>&lt;p&gt;Last week LogSeq was super slow on my Mac, it was pretty much unusable. I had to
manually kill its process multiple times as it kept freezing.&lt;/p&gt;
&lt;p&gt;Eventually I figured out &lt;a href="https://discuss.logseq.com/t/my-logseq-become-too-slow-recently/31985/4"&gt;the issue&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Then iCloud is the cause for the slowness. This is a known issue and is the
reason why the developers have built Logseq Sync. Other options for syncing
that don&amp;rsquo;t impact performance are Git and SyncThing.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I would like to keep using iCloud at this time as it&amp;rsquo;s (i) free and (ii)
convenient to access from iOS.&lt;/p&gt;
&lt;p&gt;The following mitigation seemed to work:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Locate the LogSeq directory in iCloud (&lt;code&gt;~/Library/Mobile Documents/iCloud~com~logseq~logseq/Documents&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;Right click the directory in Finder&lt;/li&gt;
&lt;li&gt;Click &lt;a href="https://discussions.apple.com/thread/256113094?sortBy=rank"&gt;&amp;lsquo;Keep Downloaded&amp;rsquo;&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;Keep Downloaded means the file stays on the device, and even if space is
needed the file will not be removed [&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: LogSeq: slowness on macOS"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pkm/"&gt;#pkm&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Anything else you may have missed?</title><link>https://perrotta.dev/2026/01/anything-else-you-may-have-missed/</link><pubDate>Sat, 03 Jan 2026 19:30:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2026/01/anything-else-you-may-have-missed/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/09/hello/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Whenever the LLM is too confident after performing some work:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Prompt&lt;/strong&gt;: &lt;em&gt;Anything else you may have missed?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;Repeat a few times in a row.&lt;/p&gt;
&lt;p&gt;It is non-deterministic, it&amp;rsquo;s not idempotent.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Anything else you may have missed?"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Oneshot prompting</title><link>https://perrotta.dev/2026/01/oneshot-prompting/</link><pubDate>Sat, 03 Jan 2026 16:35:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2026/01/oneshot-prompting/</guid><description>&lt;p&gt;I just wrote &lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/"&gt;this post&lt;/a&gt; about &lt;code&gt;neovim&lt;/code&gt; and &lt;code&gt;git&lt;/code&gt; hunks.&lt;/p&gt;
&lt;p&gt;In it I mentioned various git repositories, but did not link to them whilst
writing the post. Ah, these lazy engineers.&lt;/p&gt;
&lt;p&gt;Why not ask the LLM to link to them for me, especially because they are popular
projects? Then I had the idea to try to do it without opening an interactive
coding agent as I&amp;rsquo;m used to (think of Claude Code, OpenAI Codex, Amp Code, Open
Code).&lt;/p&gt;
&lt;p&gt;&lt;a href="https://ampcode.com/"&gt;Amp Code&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% amp -x &lt;span style="color:#e6db74"&gt;&amp;#34;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Error: Insufficient credit balance.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% amp --mode free -x &lt;span style="color:#e6db74"&gt;&amp;#34;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Error: Execute mode is not permitted with --mode &lt;span style="color:#e6db74"&gt;&amp;#39;free&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Oh. Okay.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/badlogic/pi-mono"&gt;Pi&lt;/a&gt; + Gemini 3 Pro Preview:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% pi -p &lt;span style="color:#e6db74"&gt;&amp;#34;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;I have added the requested GitHub repository links &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; the Git TUIs &lt;span style="color:#f92672"&gt;(&lt;/span&gt;gitui, tig, lazygit&lt;span style="color:#f92672"&gt;)&lt;/span&gt; in the blog post &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;content/posts/2026-01-03-neovim--inline-git-hunk-control.md&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Here are the changes made:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;gitui&lt;span style="color:#e6db74"&gt;`&lt;/span&gt; -&amp;gt; &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;gitui&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/extrawurst/gitui&lt;span style="color:#f92672"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;tig&lt;span style="color:#e6db74"&gt;`&lt;/span&gt; -&amp;gt; &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;tig&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jonas/tig&lt;span style="color:#f92672"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;lazygit&lt;span style="color:#e6db74"&gt;`&lt;/span&gt; -&amp;gt; &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;lazygit&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jesseduffield/lazygit&lt;span style="color:#f92672"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Great job! Let&amp;rsquo;s &lt;code&gt;git stash&lt;/code&gt; it and try again with other agents I use, for the
sake of completeness. I&amp;rsquo;ll use the same prompt.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://claude.com/product/claude-code"&gt;Claude Code&lt;/a&gt; + Sonnet 4.5:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% claude -p &lt;span style="color:#e6db74"&gt;&amp;#39;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;I need your permission to edit the file &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;content/posts/2026-01-03-neovim--inline-git-hunk-control.md&lt;span style="color:#e6db74"&gt;`&lt;/span&gt; to add GitHub repository links to the git TUIs &lt;span style="color:#f92672"&gt;(&lt;/span&gt;gitui, tig, and lazygit&lt;span style="color:#f92672"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;claude --dangerously-skip-permissions -p &lt;span style="color:#e6db74"&gt;&amp;#39;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Perfect! I&lt;span style="color:#960050;background-color:#1e0010"&gt;&amp;#39;&lt;/span&gt;ve added GitHub repository links to all three git TUIs mentioned in the post:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;1. **gitui** ‚Üí https://github.com/extrawurst/gitui
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2. **tig** ‚Üí https://github.com/jonas/tig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;3. **lazygit** ‚Üí https://github.com/jesseduffield/lazygit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;The links are now properly formatted as Markdown links in the post at &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;content/posts/2026-01-03-neovim--inline-git-hunk-control.md:52-54&lt;span style="color:#e6db74"&gt;`&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://openai.com/codex/"&gt;OpenAI Codex&lt;/a&gt; + GPT 5.1 Codex Max:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% codex exec &lt;span style="color:#e6db74"&gt;&amp;#34;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;...lots of output...&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- **gitui**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- tig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- lazygit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- **&lt;span style="color:#f92672"&gt;[&lt;/span&gt;gitui&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/extrawurst/gitui&lt;span style="color:#f92672"&gt;)&lt;/span&gt;**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- &lt;span style="color:#f92672"&gt;[&lt;/span&gt;tig&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jonas/tig&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- &lt;span style="color:#f92672"&gt;[&lt;/span&gt;lazygit&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jesseduffield/lazygit&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ...or graphically with IDEs with as VSCode.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tokens used
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;7,432
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- Added GitHub repository links &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; gitui, tig, and lazygit in &lt;span style="color:#e6db74"&gt;`&lt;/span&gt;content/posts/2026-01-03-neovim--inline-git-hunk-control.md&lt;span style="color:#e6db74"&gt;`&lt;/span&gt; so readers can jump to each TUI.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;- No tests run &lt;span style="color:#f92672"&gt;(&lt;/span&gt;doc-only change&lt;span style="color:#f92672"&gt;)&lt;/span&gt;.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://opencode.ai/"&gt;Open Code&lt;/a&gt; + GLM 4.7 Free:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% opencode --model opencode/glm-4.7-free run &lt;span style="color:#e6db74"&gt;&amp;#34;add github repository links to git tuis in this post: @content/posts/2026-01-03-neovim--inline-git-hunk-control.md&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;| Read content/posts/2026-01-03-neovim--inline-git-hunk-control.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;| Search Web search: tig git tui github repository
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;| Search Web search: gitui github repository
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;| Search Web search: lazygit github repository
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;| Edit content/posts/2026-01-03-neovim--inline-git-hunk-control.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Done. Added GitHub links &lt;span style="color:#66d9ef"&gt;for&lt;/span&gt; gitui, tig, and lazygit to the post.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git --no-pager diff
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git content/posts/2026-01-03-neovim--inline-git-hunk-control.md content/posts/2026-01-03-neovim--inline-git-hunk-control.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 1a6465f3b..3324a71c7 &lt;span style="color:#ae81ff"&gt;100644&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- content/posts/2026-01-03-neovim--inline-git-hunk-control.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ content/posts/2026-01-03-neovim--inline-git-hunk-control.md
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -49,9 +49,9 @@ What now&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; It&lt;span style="color:#960050;background-color:#1e0010"&gt;&amp;#39;&lt;/span&gt;s also possible to manage hunks via git TUIs &lt;span style="color:#f92672"&gt;(=&lt;/span&gt;from the terminal&lt;span style="color:#f92672"&gt;)&lt;/span&gt; such as:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- **gitui**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- tig
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-- lazygit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- **&lt;span style="color:#f92672"&gt;[&lt;/span&gt;gitui&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/gitui-org/gitui&lt;span style="color:#f92672"&gt;)&lt;/span&gt;**
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- &lt;span style="color:#f92672"&gt;[&lt;/span&gt;tig&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jonas/tig&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+- &lt;span style="color:#f92672"&gt;[&lt;/span&gt;lazygit&lt;span style="color:#f92672"&gt;](&lt;/span&gt;https://github.com/jesseduffield/lazygit&lt;span style="color:#f92672"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ...or graphically with IDEs with as VSCode.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Guess which one is my favorite for simple tasks?&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Oneshot prompting"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ neovim: inline git hunk control</title><link>https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/</link><pubDate>Sat, 03 Jan 2026 15:41:21 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>git</category><category>vim</category><guid>https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/</guid><description>&lt;p&gt;What is a
&lt;a href="https://stackoverflow.com/questions/37620729/in-the-context-of-git-and-diff-what-is-a-hunk"&gt;hunk&lt;/a&gt;?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;When comparing two files, diff finds sequences of lines common to both files,
interspersed with groups of differing lines called hunks&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;There are various ways to treat git hunks as first-class citizens, manipulating
them one at a time ‚Äì staging, unstaging, or reverting them.&lt;/p&gt;
&lt;p&gt;The classic one is &lt;a href="https://millerb.co.uk/2021/11/16/git-add-patch.html"&gt;&lt;code&gt;git add [-p | --patch]&lt;/code&gt;&lt;/a&gt;. Hit yes or no
for each hunk, one by one:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -p
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git a/Justfile b/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index bbb3779a9..70840a008 &lt;span style="color:#ae81ff"&gt;100755&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- a/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ b/Justfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -175,3 +175,6 @@ update-pre-commit:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Update JSON schemas&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; update-json-schemas:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; pre-commit run -a update-json-schemas --hook-stage manual
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+hello:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+ echo world
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;1/1&lt;span style="color:#f92672"&gt;)&lt;/span&gt; Stage this hunk &lt;span style="color:#f92672"&gt;[&lt;/span&gt;y,n,q,a,d,e,p,P,?&lt;span style="color:#f92672"&gt;]&lt;/span&gt;?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There&amp;rsquo;s also &lt;a href="https://nuclearsquid.com/writings/git-add/"&gt;&lt;code&gt;git add [-i | --interactive]&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git add -i
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;*** Commands ***
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1: status 2: update 3: revert 4: add untracked
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 5: patch 6: diff 7: quit 8: help
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;What now&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It&amp;rsquo;s also possible to manage hunks via git TUIs (=from the terminal) such as:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;a href="https://github.com/gitui-org/gitui"&gt;gitui&lt;/a&gt;&lt;/strong&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/jonas/tig"&gt;tig&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://github.com/jesseduffield/lazygit"&gt;lazygit&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;hellip;or graphically with IDEs with as VSCode.&lt;/p&gt;
&lt;p&gt;An honorable mention also goes to
&lt;a href="https://github.com/andrewshadura/git-crecord"&gt;&lt;code&gt;git-crecord&lt;/code&gt;&lt;/a&gt;, which I
originally discovered by looking for an open source alternative to Google&amp;rsquo;s
Fig&lt;sup id="fnref:2"&gt;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fn:2" class="footnote-ref" role="doc-noteref"&gt;2&lt;/a&gt;&lt;/sup&gt; interactive commit and split commands.&lt;/p&gt;
&lt;p&gt;Now that you see how my mind is overloaded with many possibilities to manipulate
git hunks, the natural follow-up question is: how to do so right from within our
favorite text editor (&lt;code&gt;vim&lt;/code&gt;)?&lt;/p&gt;
&lt;p&gt;With classic &lt;code&gt;vim&lt;/code&gt;, Tim Pope&amp;rsquo;s
&lt;a href="https://github.com/tpope/vim-fugitive"&gt;&lt;code&gt;vim-fugitive&lt;/code&gt;&lt;/a&gt; is often touted as
best-in-class (paired with
&lt;a href="https://github.com/airblade/vim-gitgutter"&gt;&lt;code&gt;vim-gitgutter&lt;/code&gt;&lt;/a&gt;). I use it
occasionally. The workflow is as follows:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;From an open file with modifications, run &lt;code&gt;:GDiff&lt;/code&gt; (&lt;code&gt;:GDiffsplit&lt;/code&gt;).&lt;/li&gt;
&lt;li&gt;Proceed as you normally would in &lt;code&gt;vimdiff&lt;/code&gt;. Use &lt;code&gt;:diffget&lt;/code&gt; (&lt;code&gt;do&lt;/code&gt;) and
&lt;code&gt;:diffput&lt;/code&gt; (&lt;code&gt;dp&lt;/code&gt;) for each hunk. Use &lt;code&gt;[c&lt;/code&gt; and &lt;code&gt;]c&lt;/code&gt; to navigate to the previous
/ next hunk.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Finally, we get to the meat of the post. Is there any workflow
improvement in &lt;code&gt;neovim&lt;/code&gt;, which I have recently &lt;a href="https://perrotta.dev/2025/12/vim-nvim/"&gt;switched to&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;First of all, the familiar vim-fugitive workflow still works there.&lt;/p&gt;
&lt;p&gt;Its evolution is &lt;a href="https://github.com/lewis6991/gitsigns.nvim"&gt;gitsigns.nvim&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Git integration for buffers&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Given the config below, the following becomes possible:&lt;/p&gt;

&lt;div class="codeblock" data-lang="lua"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;lua&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-lua" data-lang="lua"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;-- Git integration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;lewis6991/gitsigns.nvim&amp;#39;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;config &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; require(&lt;span style="color:#e6db74"&gt;&amp;#39;gitsigns&amp;#39;&lt;/span&gt;).setup({
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; on_attach &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;(bufnr)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;local&lt;/span&gt; gs &lt;span style="color:#f92672"&gt;=&lt;/span&gt; require(&lt;span style="color:#e6db74"&gt;&amp;#39;gitsigns&amp;#39;&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;-- ]c / [c: next/prev hunk (falls back to default in diff mode)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;-- like git-gutter in vim&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;]c&amp;#39;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; vim.wo.diff &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;]c&amp;#39;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.schedule(&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;() gs.nav_hunk(&lt;span style="color:#e6db74"&gt;&amp;#39;next&amp;#39;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;Ignore&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;, { expr &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;, buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Next hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;[c&amp;#39;&lt;/span&gt;, &lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; vim.wo.diff &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;[c&amp;#39;&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.schedule(&lt;span style="color:#66d9ef"&gt;function&lt;/span&gt;() gs.nav_hunk(&lt;span style="color:#e6db74"&gt;&amp;#39;prev&amp;#39;&lt;/span&gt;) &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;return&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;Ignore&amp;gt;&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;, { expr &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;, buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Prev hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;leader&amp;gt;s&amp;#39;&lt;/span&gt;, gs.stage_hunk, { buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Stage hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; vim.keymap.set(&lt;span style="color:#e6db74"&gt;&amp;#39;n&amp;#39;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#39;&amp;lt;leader&amp;gt;u&amp;#39;&lt;/span&gt;, gs.reset_hunk, { buffer &lt;span style="color:#f92672"&gt;=&lt;/span&gt; bufnr, desc &lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#39;Reset hunk&amp;#39;&lt;/span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; })
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;end&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;},
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;&amp;#39;tpope/vim-fugitive&amp;#39;&lt;/span&gt;,&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;ul&gt;
&lt;li&gt;Use &lt;code&gt;]c&lt;/code&gt; and &lt;code&gt;[c&lt;/code&gt; to navigate hunks (compatible with vim-gitgutter)&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;&amp;lt;leader&amp;gt;s&lt;/code&gt; (comma + s in my setup) to toggle staging/unstaging hunks.&lt;/li&gt;
&lt;li&gt;Use &lt;code&gt;&amp;lt;leader&amp;gt;u&lt;/code&gt; to do the equivalent of &lt;code&gt;git checkout -- file&lt;/code&gt; for a single
hunk.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The last two shortcuts are wherein the magic lives.&lt;/p&gt;
&lt;p&gt;It is VERY convenient to choose what to stage/unstage/revert right from the
&lt;code&gt;nvim&lt;/code&gt; buffer I am currently editing. For fine-grained control, I can always use
&lt;code&gt;:Gdiff&lt;/code&gt; to perform hunk microsurgery.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;Not to confound with &lt;em&gt;hook&lt;/em&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;li id="fn:2"&gt;
&lt;p&gt;Internal mercurial VCS porcelain on top of Piper / google3.&amp;#160;&lt;a href="https://perrotta.dev/2026/01/neovim-inline-git-hunk-control/#fnref:2" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: neovim: inline git hunk control"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Amp Code: queue/unqueue messages</title><link>https://perrotta.dev/2026/01/amp-code-queue/unqueue-messages/</link><pubDate>Thu, 01 Jan 2026 17:03:12 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2026/01/amp-code-queue/unqueue-messages/</guid><description>&lt;p&gt;When using &lt;a href="https://ampcode.com/"&gt;Amp Code&lt;/a&gt; (a CLI coding agent), sending two
messages in a row results in the second message interrupting the first.&lt;/p&gt;
&lt;p&gt;Most other agents (e.g. Claude Code, OpenAI Codex, Google Gemini) support
message queueing by default, wherein the second message &amp;ldquo;waits&amp;rdquo; until the first
prompt is complete.&lt;/p&gt;
&lt;p&gt;To achieve the same behavior in &lt;code&gt;amp&lt;/code&gt;, use &lt;code&gt;/queue&lt;/code&gt;. There&amp;rsquo;s also &lt;code&gt;/dequeue&lt;/code&gt; to
undo it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Amp Code: queue/unqueue messages"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>.txt posts</title><link>https://perrotta.dev/2026/01/.txt-posts/</link><pubDate>Thu, 01 Jan 2026 01:23:50 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><guid>https://perrotta.dev/2026/01/.txt-posts/</guid><description>&lt;p&gt;&lt;a href="https://shkspr.mobi/blog/2025/12/a-small-collection-of-text-only-websites/"&gt;Terence Eden&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A couple of years ago, I started serving my blog posts as plain text. Add .txt
to the end of any URl and get a deliciously lo-fi, UTF-8, mono[chrome|space]
alternative.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I like the idea! Using &lt;a href="https://gohugo.io/"&gt;Hugo&lt;/a&gt; it&amp;rsquo;s quite
straightforward to do so&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2026/01/.txt-posts/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git --no-pager show 590bb2751
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[...]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git config/_default/config.yml config/_default/config.yml
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index c0ab59364..9b9e61d0e 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- config/_default/config.yml
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ config/_default/config.yml
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -65,15 +65,19 @@ disableKinds:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; # llms.txt BEGIN
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # layouts/_default/home.llms.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; mediaTypes:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; application/opml:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; suffixes:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - opml
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ text/plain:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ suffixes:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ - txt
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; outputFormats:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ PlainText:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ mediaType: text/plain
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ baseName: index
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ isPlainText: true
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; OPML:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;@@ -92,4 +96,5 @@ outputs:
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; - OPML
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; page:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - HTML
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ - PlainText
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; # llms.txt END
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git layouts/_default/baseof.html layouts/_default/baseof.html
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index b164a9921..e806f53fa 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- layouts/_default/baseof.html
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ layouts/_default/baseof.html
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -20,6 +20,10 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &amp;lt;link rel=&amp;#34;canonical&amp;#34; href=&amp;#34;{{ .Permalink }}&amp;#34; /&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ {{- with .OutputFormats.Get &amp;#34;PlainText&amp;#34; -}}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ &amp;lt;link rel=&amp;#34;alternate&amp;#34; type=&amp;#34;text/plain&amp;#34; href=&amp;#34;{{ .Permalink }}&amp;#34; title=&amp;#34;{{ $.Title }}&amp;#34;&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+ {{- end -}}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; {{- partial &amp;#34;style.html&amp;#34; . -}}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {{- with .Site.Params.appleTouchIcon }}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git layouts/_default/single.plaintext.txt layouts/_default/single.plaintext.txt
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;new file mode 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 000000000..3b2f6453c
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- /dev/null
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ layouts/_default/single.plaintext.txt
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -0,0 +1 @@
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+{{ .RawContent }}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://perrotta.dev/2024/12/sourcegraph/index.txt"&gt;Example post&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Append &lt;code&gt;/index.txt&lt;/code&gt; to any existing post to fetch its plain-text version.&lt;/p&gt;
&lt;p&gt;While we&amp;rsquo;re here, &lt;a href="https://perrotta.dev/2024/12/sourcegraph/index.md"&gt;&lt;code&gt;/index.md&lt;/code&gt;&lt;/a&gt; also works.&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;Update(2026-01-03)&lt;/strong&gt;: I removed .txt support. Only .md is left. Which is the
most logical course of action, if you think about it. The Markdown format is
more useful since it preserves the post structure.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;The original diff was slightly tweaked for readability.&amp;#160;&lt;a href="https://perrotta.dev/2026/01/.txt-posts/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: .txt posts"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Blog discovery</title><link>https://perrotta.dev/2025/12/blog-discovery/</link><pubDate>Wed, 31 Dec 2025 17:27:05 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>serenity</category><guid>https://perrotta.dev/2025/12/blog-discovery/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/05/blog-directories/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: I ran out of blog posts to read! Now what?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Option #1&lt;/strong&gt;: Take a deep breath, leave the computer, put your phone away.&lt;/p&gt;
&lt;p&gt;You&amp;rsquo;re not here for that though, are you?&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Option #2&lt;/strong&gt;: &lt;a href="https://en.wikipedia.org/wiki/StumbleUpon"&gt;Stumble upon&lt;/a&gt;‚Ñ¢
delightful blog networks. I like:&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;&lt;a href="https://bearblog.dev/discover/"&gt;Bear Blog Discover&lt;/a&gt; (see also: &lt;a href="https://bearblog.dev/discover/?newest=true"&gt;most recent&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://powrss.com/"&gt;PowRSS&lt;/a&gt; (see also: &lt;a href="https://powrss.com/shuffle"&gt;shuffle&lt;/a&gt;, &lt;a href="https://powrss.com/random"&gt;random&lt;/a&gt;)&lt;/li&gt;
&lt;li&gt;&lt;a href="https://kagi.com/smallweb"&gt;Kagi Small Web&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="https://diff.blog/"&gt;Diff Blog&lt;/a&gt;&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;It&amp;rsquo;s better than social media and short videos, I think.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Blog discovery"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Who watches the watchmen?</title><link>https://perrotta.dev/2025/12/who-watches-the-watchmen/</link><pubDate>Tue, 30 Dec 2025 11:02:51 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/who-watches-the-watchmen/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2022/01/watch-files-and-react-to-changes-during-development/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I&amp;rsquo;ve been in love with &lt;a href="https://github.com/watchexec/watchexec"&gt;&lt;code&gt;watchexec&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Recursively monitors the current directory for changes, executing the command
when a filesystem change is detected (among other event sources). By default,
watchexec uses efficient kernel-level mechanisms to watch for changes.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s a modern version of &lt;a href="https://jvns.ca/blog/2020/06/28/entr/"&gt;&lt;code&gt;entr&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Its usage is very simple and easy to remember:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watchexec &lt;span style="color:#f92672"&gt;[&lt;/span&gt;--clear&lt;span style="color:#f92672"&gt;]&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt;--&lt;span style="color:#f92672"&gt;]&lt;/span&gt; python main.py&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;will re-run &lt;code&gt;python main.py&lt;/code&gt; whenever it changes on disk.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;--clear&lt;/code&gt; will &lt;code&gt;clear&lt;/code&gt; the screen between successive runs.&lt;/p&gt;
&lt;p&gt;Other useful invocations:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watchexec make
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watchexec just
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watchexec -e html,css,js make &lt;span style="color:#75715e"&gt;# watch the given extensions for changes&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;watchexec -w src make &lt;span style="color:#75715e"&gt;# watch the given directory&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There are various other useful command-line switches, its &lt;a href="https://man.archlinux.org/man/watchexec.1"&gt;man
page&lt;/a&gt; is very descriptive.&lt;/p&gt;
&lt;p&gt;Here is a practical example when iterating on &lt;a href="https://perrotta.dev/2025/12/stack/"&gt;&lt;code&gt;stack.py&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% watchexec --clear -- python stack.py
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;Running: python stack.py&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;Command was successful&lt;span style="color:#f92672"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% watchexec --clear -- ty check
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;Running: ty check&lt;span style="color:#f92672"&gt;]&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;[&lt;/span&gt;Command was successful&lt;span style="color:#f92672"&gt;]&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Alternative: &lt;a href="https://github.com/emcrisostomo/fswatch"&gt;fswatch&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Who watches the watchmen?"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Kagi: Add LeetCode !bang</title><link>https://perrotta.dev/2025/12/kagi-add-leetcode-bang/</link><pubDate>Tue, 30 Dec 2025 10:56:00 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>leetcode</category><guid>https://perrotta.dev/2025/12/kagi-add-leetcode-bang/</guid><description>&lt;p&gt;&lt;a href="https://kagi.com/"&gt;Kagi&lt;/a&gt;, a paid search engine, allows adding &lt;a href="https://duckduckgo.com/bangs"&gt;custom&lt;/a&gt; &lt;a href="https://help.kagi.com/kagi/features/bangs.html"&gt;bangs&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Today we&amp;rsquo;ll add a custom bang for &lt;a href="https://leetcode.com/"&gt;LeetCode&lt;/a&gt;.&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;Navigate to &lt;a href="https://kagi.com/settings/custom_bangs"&gt;https://kagi.com/settings/custom_bangs&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;Click &amp;lsquo;Add Bang&amp;rsquo;&lt;/li&gt;
&lt;li&gt;Input:
&lt;ul&gt;
&lt;li&gt;Bang name: LeetCode&lt;/li&gt;
&lt;li&gt;Bang shortcut: leetcode&lt;/li&gt;
&lt;li&gt;URL template: &lt;a href="https://leetcode.com/search/?q=%25s"&gt;https://leetcode.com/search/?q=%s&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;input checked="" disabled="" type="checkbox"&gt; Shortcut Menu (&amp;ldquo;Show this custom bang in the More search menu&amp;rdquo;)&lt;/li&gt;
&lt;li&gt;&lt;input checked="" disabled="" type="checkbox"&gt; Open Base Path (&amp;ldquo;When using this bang without a query, navigate to the
base path of the URL instead&amp;rdquo;)&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Save&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;To trigger the bang, search for e.g. &lt;code&gt;!leetcode Remove Duplicates from Sorted Array&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;You could also add this URL to your &lt;a href="https://support.google.com/chrome/answer/95426?hl=en&amp;amp;co=GENIE.Platform%3DDesktop"&gt;browser search engine
settings&lt;/a&gt;, just set the shortcut starting with an exclamation mark / bang (&lt;code&gt;!&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;When to choose which?
Kagi settings will work seamlessly on mobile.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Kagi: Add LeetCode !bang"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/leetcode/"&gt;#leetcode&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Finicky</title><link>https://perrotta.dev/2025/12/finicky/</link><pubDate>Sun, 28 Dec 2025 02:14:14 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/finicky/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: I have one web browser for work, and another web browser
for personal use. These are two distinct web browsers, not two distinct profiles
in the same browser. Route work-related links to the work web browser, and
vice-versa. This is on macOS.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/johnste/finicky"&gt;Finicky&lt;/a&gt; addresses it very well:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;A macOS app for customizing which browser to start&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It is an app. Install it via homebrew: &lt;code&gt;brew install finicky&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Create a config file (&lt;code&gt;~/.config/finicky/finicky.js&lt;/code&gt;) for it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="js"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;js&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-js" data-lang="js"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// Finicky configuration
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;// https://github.com/johnste/finicky
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;module&lt;/span&gt;.&lt;span style="color:#a6e22e"&gt;exports&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;defaultBrowser&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Brave Browser&amp;#34;&lt;/span&gt;, &lt;span style="color:#75715e"&gt;// pick your poison
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;handlers&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;// Open Azure, GitHub, Atlassian and company-related domains in Chrome
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;match&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.atlassian.net/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.{company_intranet}/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*.{company}.com/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;*{company}*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;github.com/{company_org}*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;portal.azure.com/*&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#a6e22e"&gt;browser&lt;/span&gt;&lt;span style="color:#f92672"&gt;:&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Google Chrome&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; },
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ],
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;};&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now make Finicky your default system browser.&lt;/p&gt;
&lt;p&gt;That&amp;rsquo;s it. Now links will open be properly routed, automagically, upon clicking.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Finicky"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Flameshot</title><link>https://perrotta.dev/2025/12/flameshot/</link><pubDate>Sat, 27 Dec 2025 17:42:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/flameshot/</guid><description>&lt;p&gt;Install Flameshot.app on macOS:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install flameshot
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sudo xattr -rd com.apple.quarantine /Applications/flameshot.app
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;open -a Flameshot&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The &lt;code&gt;xattr&lt;/code&gt; is &lt;a href="https://github.com/flameshot-org/flameshot/issues/3572"&gt;necessary&lt;/a&gt; or else:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;flameshot&amp;rdquo; cannot be opened because the developer cannot be verified&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Flameshot"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Starship</title><link>https://perrotta.dev/2025/12/starship/</link><pubDate>Sat, 27 Dec 2025 02:34:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/starship/</guid><description>&lt;p&gt;After years using the default prompt from
&lt;a href="https://grml.org/zsh/"&gt;&lt;code&gt;grml-zsh-config&lt;/code&gt;&lt;/a&gt; (with minor modifications), I adopted
&lt;a href="https://starship.rs/"&gt;starship&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;The minimal, blazing-fast, and infinitely customizable prompt for any shell!&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;My &lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/starship/.config/starship.toml"&gt;&lt;code&gt;~/.config/starship.toml&lt;/code&gt;&lt;/a&gt; is meant to resemble the zsh prompt I&amp;rsquo;ve been using,
with minor tweaks and improvements:&lt;/p&gt;

&lt;div class="codeblock" data-lang="toml"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;toml&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-toml" data-lang="toml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Minimal starship config matching grml prompt&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;$status$sudo$username$hostname$directory$git_branch$git_state$git_status$line_break$character&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;right_format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;$cmd_duration$jobs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;add_newline&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;status&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;disabled&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$status ]($style)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;style&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;bold red&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;username&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;show_always&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$user](bold green)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;hostname&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;ssh_only&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;trim_at&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;.&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;@$hostname&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;directory&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;truncation_length&lt;/span&gt; = &lt;span style="color:#ae81ff"&gt;40&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;truncate_to_repo&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34; [$path](bold) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;git_branch&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;symbol&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$symbol$branch]() &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;git_state&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;|[$state]()&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;git_status&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$conflicted$deleted$renamed$modified$staged$untracked$ahead_behind](red) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;cmd_duration&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;min_time&lt;/span&gt; = &lt;span style="color:#ae81ff"&gt;2000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$duration](yellow) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;jobs&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[$number](cyan) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;sudo&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;disabled&lt;/span&gt; = &lt;span style="color:#66d9ef"&gt;false&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;format&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[üîì](red) &amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[&lt;span style="color:#a6e22e"&gt;character&lt;/span&gt;]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;success_symbol&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[‚ùØ](green)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;error_symbol&lt;/span&gt; = &lt;span style="color:#e6db74"&gt;&amp;#34;[‚ùØ](red)&amp;#34;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My prompt:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;thiago.perrotta .dotfiles master
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚ùØ&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Details you cannot easily tell from above:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;display the exit code if it is non-zero, and make the ‚ùØ symbol red&lt;/li&gt;
&lt;li&gt;omit the hostname when not in SSH (no need to see &lt;code&gt;thiagoperrotta-MacBook-Pro&lt;/code&gt; all the time)&lt;/li&gt;
&lt;li&gt;display the command duration when a command took too long (&amp;gt;2s) to complete
(right side)&lt;/li&gt;
&lt;li&gt;display the number of background jobs if any (right side)&lt;/li&gt;
&lt;li&gt;display a couple of git markers (e.g. pending pull, pending push, pending changes)&lt;/li&gt;
&lt;li&gt;display an icon when &lt;code&gt;sudo&lt;/code&gt; / &lt;code&gt;doas&lt;/code&gt; is cached&lt;/li&gt;
&lt;li&gt;separate prompts with a blank line (breathe!)&lt;/li&gt;
&lt;li&gt;colors!&lt;/li&gt;
&lt;li&gt;truncate the full directory path when inside a VCS repo&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My &lt;code&gt;.zshrc&lt;/code&gt; looks like this:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Use starship prompt if available, otherwise customize grml prompt.&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; command -v starship &amp;amp;&amp;gt; /dev/null; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; prompt off
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; eval &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;starship init zsh&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;else&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#75715e"&gt;# Customize grml prompt: two lines, user in bold green&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; zstyle &lt;span style="color:#e6db74"&gt;&amp;#39;:prompt:grml:left:items:user&amp;#39;&lt;/span&gt; pre &lt;span style="color:#e6db74"&gt;&amp;#39;%B%F{green}&amp;#39;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; zstyle &lt;span style="color:#e6db74"&gt;&amp;#39;:prompt:grml:left:setup&amp;#39;&lt;/span&gt; items rc change-root user at host path vcs newline percent
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;gracefully degrade when &lt;code&gt;starship&lt;/code&gt; is not installed, using my original
grml-derived zsh prompt.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Side effect&lt;/strong&gt;: now &lt;code&gt;bash&lt;/code&gt; has a similar prompt to &lt;code&gt;zsh&lt;/code&gt;!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Starship"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ UptimeKuma</title><link>https://perrotta.dev/2025/12/uptimekuma/</link><pubDate>Sat, 27 Dec 2025 01:53:05 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>meta</category><guid>https://perrotta.dev/2025/12/uptimekuma/</guid><description>&lt;p&gt;This site is now monitored via self-hosted &lt;a href="https://uptime.perrotta.dev/status/serendipity"&gt;uptime infrastructure&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;How did I do it?&lt;/p&gt;
&lt;p&gt;Software: &lt;a href="https://github.com/louislam/uptime-kuma"&gt;UptimeKuma&lt;/a&gt;. Open-source,
self-hosted, simple &amp;amp; easy, has a docker image for deployment, sensible
defaults, lots of customization possibilities. Modern, solid, well-maintained,
popular (80k+ stars on GitHub). A no-brainer choice, really.&lt;/p&gt;
&lt;p&gt;I deployed it via Docker on Alpine Linux.&lt;/p&gt;
&lt;p&gt;Install docker and docker-compose:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas apk add docker docker-compose&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Update the docker storage driver from the &lt;code&gt;overlay2&lt;/code&gt; default as it was failing
for some reason:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doasedit /etc/docker/daemon.json
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;{&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	 &lt;span style="color:#e6db74"&gt;&amp;#34;storage-driver&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;vfs&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Start docker, now and on startup:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service docker start
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas rc-update add docker&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;equivalently to &lt;code&gt;systemctl enable --now docker&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Create a &lt;code&gt;docker-compose.yml&lt;/code&gt; file for the service:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cat docker/docker-compose.yml
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;services:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; uptime-kuma:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; image: louislam/uptime-kuma:latest
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; container_name: uptime-kuma
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; restart: unless-stopped
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ports:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#e6db74"&gt;&amp;#34;127.0.0.1:3001:3001&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; volumes:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - /opt/uptime-kuma:/app/data&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;ensure to bind it to localhost only (&lt;code&gt;127.0.0.1&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;Start it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% docker-compose up -d&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;code&gt;-d&lt;/code&gt; to start it in the background.&lt;/p&gt;
&lt;p&gt;From here we access the service and configure it (out of scope of this post):&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;create an admin user, set a secure password&lt;/li&gt;
&lt;li&gt;enable 2FA (TOTP)&lt;/li&gt;
&lt;li&gt;add the first monitor (&lt;code&gt;https://perrotta.dev&lt;/code&gt;)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;To access the service securely for the first time, there are various
possibilities:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;expose it under a reverse proxy with HTTP basic auth&lt;/li&gt;
&lt;li&gt;employ a VPN (e.g. Tailscale, Wireguard)&lt;/li&gt;
&lt;li&gt;use SSH port forwarding from your VPS to your laptop&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&amp;hellip;just &lt;em&gt;do not&lt;/em&gt; expose the service to &lt;code&gt;0.0.0.0&lt;/code&gt; without credentials.&lt;/p&gt;
&lt;p&gt;Next, expose the service via a user-friendly URL, with the creation of a DNS
record. As you can see, I chose uptime.perrotta.dev.&lt;/p&gt;
&lt;p&gt;Configure your reverse proxy (&lt;a href="https://perrotta.dev/2025/12/nginx-caddy/"&gt;Caddy&lt;/a&gt; in
this case):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;uptime.perrotta.dev {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	log {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		output file /var/log/caddy/uptime.log
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	reverse_proxy * {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		to 127.0.0.1:3001
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;		header_up Host {host}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;	}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy reload&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And now sit back and enjoy free uptime monitoring!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: UptimeKuma"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>ctop</title><link>https://perrotta.dev/2025/12/ctop/</link><pubDate>Fri, 26 Dec 2025 18:08:52 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/ctop/</guid><description>&lt;p&gt;Too many tops:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;top&lt;/code&gt;: vanilla, classic&lt;/li&gt;
&lt;li&gt;&lt;code&gt;htop&lt;/code&gt;: alternative&lt;/li&gt;
&lt;li&gt;&lt;code&gt;btop&lt;/code&gt;: modern&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now I found out: &lt;a href="https://github.com/bcicen/ctop"&gt;&lt;code&gt;ctop&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Top-like interface for container metrics&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;it&amp;rsquo;s &lt;code&gt;top&lt;/code&gt; for (Docker) containers!&lt;/p&gt;
&lt;p&gt;&lt;img src="https://github.com/bcicen/ctop/raw/master/_docs/img/grid.gif" alt="ctop demo"&gt;&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: ctop"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Openring</title><link>https://perrotta.dev/2025/12/openring/</link><pubDate>Fri, 26 Dec 2025 00:00:00 +0000</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>meta</category><category>serenity</category><guid>https://perrotta.dev/2025/12/openring/</guid><description>&lt;p&gt;I just added &lt;a href="https://git.sr.ht/~sircmpwn/openring"&gt;Openring&lt;/a&gt; to my
&lt;a href="https://perrotta.dev/blogroll/"&gt;blogroll&lt;/a&gt; page:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This is a tool for generating a webring from RSS feeds, so you can link to
other blogs you like on your own blog. It&amp;rsquo;s designed to be fairly simple and
integrate with any static site generator. [&amp;hellip;]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Granted, this is a static website.&lt;/p&gt;
&lt;p&gt;As such, &lt;code&gt;openring&lt;/code&gt; displays 3 random recent articles from blogs in my blogroll
each time the site is deployed.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Openring"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>ranger ‚Üí lf</title><link>https://perrotta.dev/2025/12/ranger-lf/</link><pubDate>Thu, 25 Dec 2025 15:37:03 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/ranger-lf/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: replace &lt;code&gt;ranger&lt;/code&gt; with &lt;code&gt;lf&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/ranger/ranger"&gt;Ranger&lt;/a&gt; config (&lt;code&gt;~/.config/ranger/rc.conf&lt;/code&gt;):&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# List all keybindings: &amp;#39;? k&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# Generate config: &amp;#39;ranger --copy-config=rc&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# Delete selection / files.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;alias remove delete
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# Draw borders around columns? (separators, outline, both, or none)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set draw_borders separators
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# Show hidden files. Shortcut: &amp;#39;zh&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set show_hidden true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# Edit file: Set &amp;#39;e&amp;#39; in addition to &amp;#39;E&amp;#39;.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;map e edit_file&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;a href="https://github.com/gokcehan/lf"&gt;Lf&lt;/a&gt; config (&lt;code&gt;~/.config/lf/lfrc&lt;/code&gt;):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# lf configuration&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# See `lf -doc` for documentation&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Delete selection / files&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;cmd remove delete
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Show hidden files by default&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;set hidden true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Edit file: &amp;#39;e&amp;#39; (mapped out-of-the-box)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Toggle hidden files: &amp;#39;zh&amp;#39;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Their feature sets are very similar.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lf&lt;/code&gt; is a single binary written in go. &lt;code&gt;ranger&lt;/code&gt; is written in Python.&lt;/p&gt;
&lt;p&gt;The motivation to do this, other than performance, was quite silly:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas ranger
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ranger version: ranger 1.9.4
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Python version: 3.12.12 (main, Oct 11 2025, 01:16:26) [GCC 15.2.0]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Locale: C.UTF-8
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Traceback (most recent call last):
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/core/main.py&amp;#34;, line 171, in main
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; fm.initialize()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/core/fm.py&amp;#34;, line 132, in initialize
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self.ui.initialize()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/gui/ui.py&amp;#34;, line 127, in initialize
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self.handle_multiplexer()
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/gui/ui.py&amp;#34;, line 503, in handle_multiplexer
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self._screen_title = check_output(
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ^^^^^^^^^^^^^
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/site-packages/ranger/ext/spawn.py&amp;#34;, line 35, in check_output
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; process = Popen(popenargs, stderr=fd_devnull, **kwargs)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/subprocess.py&amp;#34;, line 1026, in __init__
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; self._execute_child(args, executable, preexec_fn, close_fds,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; File &amp;#34;/usr/lib/python3.12/subprocess.py&amp;#34;, line 1955, in _execute_child
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; raise child_exception_type(errno_num, err_msg, err_filename)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;FileNotFoundError: [Errno 2] No such file or directory: &amp;#39;screen&amp;#39;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;ranger crashed. Please report this traceback at:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;https://github.com/ranger/ranger/issues&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;&lt;code&gt;ranger&lt;/code&gt; crashes on my Alpine Linux VPS when running as root because
&lt;code&gt;screen&lt;/code&gt; is not installed there. This is with the stock config. It&amp;rsquo;s not a
great experience.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;lf&lt;/code&gt; does not crash.&lt;/p&gt;
&lt;p&gt;Installing &lt;code&gt;screen&lt;/code&gt; addresses the error above but it is the wrong remedy.&lt;/p&gt;
&lt;p&gt;I could update the &lt;code&gt;ranger&lt;/code&gt; config for the root user but that is beside the
point. I do not want to customize the root user because I&amp;rsquo;m not supposed to
use the root user routinely in the first place.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: ranger ‚Üí lf"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ nginx ‚Üí caddy</title><link>https://perrotta.dev/2025/12/nginx-caddy/</link><pubDate>Wed, 24 Dec 2025 23:59:02 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/nginx-caddy/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Replace &lt;code&gt;nginx&lt;/code&gt; with &lt;code&gt;caddy&lt;/code&gt; for &lt;code&gt;miniflux&lt;/code&gt; on my Alpine
Linux VPS host.&lt;/p&gt;
&lt;p&gt;First, install &lt;code&gt;caddy&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;doas apk add caddy&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, migrate the existing nginx config to caddy.&lt;/p&gt;
&lt;p&gt;The stock config:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% cat /etc/caddy/Caddyfile
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Caddy&amp;#39;s configuration file&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# see: https://caddyserver.com/docs/caddyfile&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The new config:&lt;/p&gt;

&lt;div class="codeblock" data-lang="caddyfile"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;caddyfile&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-caddyfile" data-lang="caddyfile"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Caddy&amp;#39;s configuration file
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# see: https://caddyserver.com/docs/caddyfile
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#ae81ff"&gt;{miniflux_host}&lt;/span&gt;.perrotta.dev {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;reverse_proxy&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;*&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;to&lt;/span&gt; 127.0.0.1:&lt;span style="color:#ae81ff"&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;Host&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{host}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;X-Forwarded-For&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{remote}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{scheme}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Stop nginx:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;doas service nginx stop&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Start caddy:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy start
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy status
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * status: started&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now I tried to access my server via a web browser, and it worked out-of-the-box
:)&lt;/p&gt;
&lt;p&gt;I can see information about the SSL certificate in my web browser:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Issued On	Thursday, December 25, 2025 at 1:41:33‚ÄØAM
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Expires On	Wednesday, March 25, 2026 at 1:41:32‚ÄØAM&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;It was issued just a few seconds ago!&lt;/p&gt;
&lt;p&gt;How to view logs?&lt;/p&gt;
&lt;p&gt;I expect to find them at &lt;code&gt;/var/log/caddy&lt;/code&gt; but there&amp;rsquo;s nothing there.&lt;/p&gt;
&lt;p&gt;I need to add an explicit directive to enable logging:&lt;/p&gt;

&lt;div class="codeblock" data-lang="caddy"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;caddy&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-caddy" data-lang="caddy"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#ae81ff"&gt;{miniflux_host}&lt;/span&gt;.perrotta.dev {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;log&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;output&lt;/span&gt; &lt;span style="color:#e6db74"&gt;file&lt;/span&gt; &lt;span style="color:#e6db74"&gt;/var/log/caddy/miniflux.log&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;reverse_proxy&lt;/span&gt; &lt;span style="color:#a6e22e"&gt;*&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;to&lt;/span&gt; 127.0.0.1:&lt;span style="color:#ae81ff"&gt;8080&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;Host&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{host}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;X-Forwarded-For&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{remote}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;header_up&lt;/span&gt; &lt;span style="color:#e6db74"&gt;X-Forwarded-Proto&lt;/span&gt; &lt;span style="color:#ae81ff"&gt;{scheme}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Then reload caddy:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;~ &lt;span style="color:#75715e"&gt;# service caddy reload&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:49:04.531	INFO	using config from file	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:49:04.532	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span style="color:#e6db74"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;2025/12/25 05:49:04.532	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:49:04.532	INFO	adapted config to JSON	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:49:04.533	WARN	Caddyfile input is not formatted; run &lt;span style="color:#e6db74"&gt;&amp;#39;caddy fmt --overwrite&amp;#39;&lt;/span&gt; to fix inconsistencies	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;, &lt;span style="color:#e6db74"&gt;&amp;#34;line&amp;#34;&lt;/span&gt;: 4&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Error: sending configuration to instance: caddy responded with error: HTTP 400: &lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;loading config: loading new config: setting up custom log &amp;#39;log0&amp;#39;: opening log writer using \u0026logging.FileWriter{Filename:\&amp;#34;/var/log/caddy/miniflux.log\&amp;#34;, Mode:0x0, Roll:(*bool)(nil), RollSizeMB:0, RollCompress:(*bool)(nil), RollLocalTime:false, RollKeep:0, RollKeepDays:0}: open /var/log/caddy/miniflux.log: permission denied&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Let&amp;rsquo;s address these issues:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/caddy % doas caddy fmt --overwrite&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The formatting warning is gone:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:53:06.079	INFO	using config from file	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:53:06.079	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span style="color:#e6db74"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;2025/12/25 05:53:06.079	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:53:06.080	INFO	adapted config to JSON	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Error: sending configuration to instance: caddy responded with error: HTTP 400: &lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;error&amp;#34;&lt;/span&gt;:&lt;span style="color:#e6db74"&gt;&amp;#34;loading config: loading new config: setting up custom log &amp;#39;log0&amp;#39;: opening log writer using \u0026logging.FileWriter{Filename:\&amp;#34;/var/log/caddy/miniflux.log\&amp;#34;, Mode:0x0, Roll:(*bool)(nil), RollSizeMB:0, RollCompress:(*bool)(nil), RollLocalTime:false, RollKeep:0, RollKeepDays:0}: open /var/log/caddy/miniflux.log: permission denied&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Next, logging:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas mkdir /var/log/caddy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas touch /var/log/caddy/miniflux.log
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas chown -R caddy:caddy /var/log/caddy&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now it&amp;rsquo;s much better:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:56:11.041	INFO	using config from file	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:56:11.041	WARN	caddyfile	Unnecessary header_up X-Forwarded-For: the reverse proxy&lt;span style="color:#e6db74"&gt;&amp;#39;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;2025/12/25 05:56:11.041	WARN	caddyfile	Unnecessary header_up X-Forwarded-Proto: the reverse proxy&amp;#39;&lt;/span&gt;s default behavior is to pass headers to the upstream
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 05:56:11.042	INFO	adapted config to JSON	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Regarding the two &amp;ldquo;unnecessary&amp;rdquo; configs, just remove them from the &lt;code&gt;Caddyfile&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="diff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;diff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;- header_up X-Forwarded-For {remote}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;- header_up X-Forwarded-Proto {scheme}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;And here&amp;rsquo;s the cleanest possible startup:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas service caddy reload
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; * Reloading Caddy web server ...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 06:22:17.476	INFO	using config from file	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;file&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;/etc/caddy/Caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;2025/12/25 06:22:17.478	INFO	adapted config to JSON	&lt;span style="color:#f92672"&gt;{&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;adapter&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;caddyfile&amp;#34;&lt;/span&gt;&lt;span style="color:#f92672"&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How did I know which user to &lt;code&gt;chown&lt;/code&gt; to? &lt;code&gt;/etc/init.d/caddy&lt;/code&gt; has the following
line:&lt;/p&gt;

&lt;div class="codeblock" data-lang="ini"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;ini&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-ini" data-lang="ini"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;command_user&lt;/span&gt;&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;caddy:caddy&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;though it wouldn&amp;rsquo;t have been difficult to guess it anyways.&lt;/p&gt;
&lt;p&gt;I can see some logs at &lt;code&gt;/var/log/caddy/miniflux.log&lt;/code&gt; already.&lt;/p&gt;
&lt;p&gt;Use &lt;code&gt;tail -f&lt;/code&gt; or &lt;code&gt;tspin -f&lt;/code&gt; (from tailspin) for live log tailing.&lt;/p&gt;
&lt;p&gt;LLM security analysis, for completeness:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;I reviewed /etc/caddy/Caddyfile. Overall, it&amp;#39;s a straightforward reverse proxy for {miniflux_host}.perrotta.dev to 127.0.0.1:8080 with logging to
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /var/log/caddy/miniflux.log. Caddy will automatically manage HTTPS and pass the appropriate headers upstream, and Caddy&amp;#39;s defaults already
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; set the Host and X-Forwarded-* headers‚Äîso explicitly setting them is optional but not harmful.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Security considerations:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - Ensure the local Miniflux instance is bound to loopback only (127.0.0.1) so it&amp;#39;s not exposed directly.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - Confirm /var/log/caddy/ and the log file are readable by the Caddy user but not world-readable if the logs might contain sensitive data.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - If you ever place Caddy behind another proxy (e.g., Cloudflare), configure trusted_proxies in Caddy to ensure X-Forwarded-* is accurate.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Beyond that, the config is minimal and doesn&amp;#39;t expose extra surfaces.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Last step: let&amp;rsquo;s make caddy auto start, and disable nginx startup + uninstall
it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;doas rc-update del nginx
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;doas rc-update add caddy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;doas apk del nginx&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Out of curiosity: the certificates live here:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/var/lib/caddy/.local/share/caddy/certificates/acme-v02.api.letsencrypt.org-directory/&lt;span style="color:#f92672"&gt;{&lt;/span&gt;miniflux_host&lt;span style="color:#f92672"&gt;}&lt;/span&gt;.perrotta.dev/&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;There are three files:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;crt and key: SSL / TLS&lt;/li&gt;
&lt;li&gt;json: configuration / metadata for let&amp;rsquo;s encrypt&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;And we&amp;rsquo;re done!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: nginx ‚Üí caddy"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ vim ‚Üí nvim</title><link>https://perrotta.dev/2025/12/vim-nvim/</link><pubDate>Tue, 23 Dec 2025 12:14:33 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>vim</category><guid>https://perrotta.dev/2025/12/vim-nvim/</guid><description>&lt;p&gt;I am piloting a transition from &lt;code&gt;vim&lt;/code&gt; to &lt;code&gt;nvim&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Here is the least disruptive way I found to accomplish that.&lt;/p&gt;
&lt;p&gt;First, install &lt;code&gt;neovim&lt;/code&gt;.&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;brew install neovim&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now, create &lt;code&gt;~/.config/nvim/init.lua&lt;/code&gt;. I decided to populate it based on my
original
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/vim/.vim/vimrc"&gt;&lt;code&gt;~/.vimrc&lt;/code&gt;&lt;/a&gt;,
without attempting to share configuration settings between the two.&lt;/p&gt;
&lt;p&gt;Multiple iterations with a LLM agent helped it achieve a decent shape, removing
redundant settings and replacing some native VimL plugins with Lua ones.&lt;/p&gt;
&lt;p&gt;The result:
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/nvim/.config/nvim/init.lua"&gt;&lt;code&gt;init.lua&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Some notable changes:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;switch the package manager from vim-plug to lazy.nvim&lt;/li&gt;
&lt;li&gt;remove vim-sensible&lt;/li&gt;
&lt;li&gt;rewrite &lt;code&gt;just_one_space&lt;/code&gt; in Lua&lt;/li&gt;
&lt;li&gt;use nvim native OSC52 for yanking text&lt;/li&gt;
&lt;li&gt;vim-signify -&amp;gt; gitsigns&lt;/li&gt;
&lt;li&gt;add autopairs&lt;/li&gt;
&lt;li&gt;add telescope (fuzzy finder), replace fzf&lt;/li&gt;
&lt;li&gt;add oil (file manager), incorporates some functionality of &lt;code&gt;vidir&lt;/code&gt; from
&lt;code&gt;moreutils&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;remove vim-commentary, given native support for &lt;code&gt;gc&lt;/code&gt; in neovim&lt;/li&gt;
&lt;li&gt;lightline -&amp;gt; lualine&lt;/li&gt;
&lt;li&gt;highlight yanked text natively, replace vim-highlightedyank&lt;/li&gt;
&lt;li&gt;automkdir upon saving a file whose parent directory does not exist, replace
vim-mkdir&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Now make it frictionless to use &lt;code&gt;nvim&lt;/code&gt; instead of &lt;code&gt;vim&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="gitdiff"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;gitdiff&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-diff" data-lang="diff"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;commit 058433b9503477c8c162cac5eba191c704cb9361
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Author: Thiago Perrotta &amp;lt;{redacted}&amp;gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Date: Tue Dec 23 12:13:54 2025 -0300
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; nvim
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;diff --git profile/.profile.d/env.sh profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;index 1c6507e..c6117a9 100644
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;--- profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#f92672"&gt;&lt;/span&gt;&lt;span style="color:#a6e22e"&gt;+++ profile/.profile.d/env.sh
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;@@ -10,4 +10,6 @@ path_munge &amp;#34;$HOME/.bin&amp;#34; &amp;#34;$HOME/bin&amp;#34; &amp;#34;$HOME/.local/bin&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt; export CLICOLOR=1
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # Set preferred text editor.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+# nvim should be preferred to vim if it is installed.
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;&lt;/span&gt; hash vim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;vim&amp;#34; VISUAL=&amp;#34;vim&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#a6e22e"&gt;+hash nvim &amp;gt;/dev/null 2&amp;gt;&amp;amp;1 &amp;amp;&amp;amp; export EDITOR=&amp;#34;nvim&amp;#34; VISUAL=&amp;#34;nvim&amp;#34; &amp;amp;&amp;amp; alias vim=nvim
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;We can still access &lt;code&gt;vim&lt;/code&gt; with &lt;code&gt;\vim&lt;/code&gt; (or &lt;code&gt;unalias vim&lt;/code&gt; if needed).&lt;/p&gt;
&lt;p&gt;Now let&amp;rsquo;s evaluate whether the &lt;code&gt;nvim&lt;/code&gt; switch is worth it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: vim ‚Üí nvim"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>atuin: limit scope to current directory</title><link>https://perrotta.dev/2025/12/atuin-limit-scope-to-current-directory/</link><pubDate>Tue, 23 Dec 2025 12:08:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/atuin-limit-scope-to-current-directory/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/12/atuin-delete-history-entries/"&gt;Previously&lt;/a&gt;,
&lt;a href="https://perrotta.dev/2025/11/atuin/"&gt;previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Pressing &lt;code&gt;C-r&lt;/code&gt; opens the global history search by default.&lt;/p&gt;
&lt;p&gt;To limit the history lookup to the current directory only, keep pressing &lt;code&gt;C-r&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The scope will cycle through:&lt;/p&gt;
&lt;p&gt;Global &amp;gt; Host &amp;gt; Session &amp;gt; Workspace &amp;gt; Directory&lt;/p&gt;
&lt;p&gt;This makes it easier to find commands previously executed in a given directory.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: atuin: limit scope to current directory"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>macOS: keyboard repeat</title><link>https://perrotta.dev/2025/12/macos-keyboard-repeat/</link><pubDate>Tue, 23 Dec 2025 11:54:44 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>macos</category><guid>https://perrotta.dev/2025/12/macos-keyboard-repeat/</guid><description>&lt;p&gt;Run:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;defaults write NSGlobalDomain InitialKeyRepeat -int &lt;span style="color:#ae81ff"&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;defaults write NSGlobalDomain KeyRepeat -int &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&amp;hellip;to configure the macOS keyboard repeat behavior for significantly faster
responsiveness.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;InitialKeyRepeat -int 10 ‚Äî Sets the delay before a held key starts repeating
(lower -&amp;gt; faster). Default is 15.&lt;/li&gt;
&lt;li&gt;KeyRepeat -int 1 ‚Äî Sets the repeat rate once a key is held (lower -&amp;gt; faster).
Default is 2.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Together, they make the keyboard feel snappier with minimal delay before repeat
and faster repetition speed.&lt;/p&gt;
&lt;p&gt;Should have done that ages ago!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: macOS: keyboard repeat"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/macos/"&gt;#macos&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ Pi</title><link>https://perrotta.dev/2025/12/pi/</link><pubDate>Tue, 23 Dec 2025 11:45:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/pi/</guid><description>&lt;p&gt;Mario Zechner&amp;rsquo;s pi (&lt;a href="https://steipete.me/posts/2025/signature-flicker"&gt;via Peter Steinberger&lt;/a&gt;):&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Mario Zechner&amp;rsquo;s pi is currently the gold-standard for differential rendering,
while also using all tricks of modern terminals ‚Äî including showing inline
images:&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This paragraph was enough to entice my curiosity to try it out.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://shittycodingagent.ai/"&gt;https://shittycodingagent.ai/&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;There are many shitty coding agents, but this one is mine.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Features&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Minimal. Opinionated. Extensible.&lt;/p&gt;
&lt;p&gt;Lean core keeps your context clean. Use only what you need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This was love at first sight.&lt;/p&gt;
&lt;p&gt;Sounds &lt;a href="https://miniflux.app/"&gt;familiar&lt;/a&gt;?&lt;/p&gt;
&lt;p&gt;I love its philosophy:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;What we didn&amp;rsquo;t build&lt;/p&gt;
&lt;p&gt;pi is opinionated about what it won&amp;rsquo;t do. These are intentional design
decisions to minimize context bloat and avoid anti-patterns.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;No MCP. Build CLI tools with READMEs (see Skills). The agent reads them on demand. Would you like to know more? If you must, use mcporter.&lt;/li&gt;
&lt;li&gt;No sub-agents. Spawn pi instances via tmux, or build your own sub-agent tool. Observability and steerability for you and the agent.&lt;/li&gt;
&lt;li&gt;No permission popups. Security theater. Run in a container or build your own with Hooks.&lt;/li&gt;
&lt;li&gt;No plan mode. Gather context in one session, write plans to file, start fresh for implementation.&lt;/li&gt;
&lt;li&gt;No built-in to-dos. They confuse models. Use a TODO.md file, or build your own with custom tools.&lt;/li&gt;
&lt;li&gt;No background bash. Use tmux. Full observability, direct interaction.&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;The full rationale is in the &lt;a href="https://mariozechner.at/posts/2025-11-30-pi-coding-agent/"&gt;blog
post&lt;/a&gt;, which is a
very recommended read.&lt;/p&gt;
&lt;p&gt;We need more of this. It is currently one of my favorite CLI agents, alongside
Claude Code (the golden standard) and Amp Code.&lt;/p&gt;
&lt;p&gt;Note that &lt;code&gt;pi&lt;/code&gt; is model agnostic, comparable to
&lt;a href="https://opencode.ai/"&gt;OpenCode&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Pi"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Kindle: KOReader dictionaries</title><link>https://perrotta.dev/2025/12/kindle-koreader-dictionaries/</link><pubDate>Tue, 23 Dec 2025 03:55:11 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>serenity</category><guid>https://perrotta.dev/2025/12/kindle-koreader-dictionaries/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/06/kindle-paperwhite-koreader-calibre-sync/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;KOReader does not come with many installed dictionaries out-of-the-box, but it&amp;rsquo;s
possible to download a few extras. The default ones leave a lot to be desired.&lt;/p&gt;
&lt;p&gt;Follow these steps:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Connect your Kindle to Wi-Fi&lt;/li&gt;
&lt;li&gt;Open KOReader in your Kindle&lt;/li&gt;
&lt;li&gt;Click the magnifying glass at the top menu&lt;/li&gt;
&lt;li&gt;Settings &amp;gt; Dictionary settings &amp;gt; Download dictionaries&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;There is a vast selection (to the point of being overwhelming!) of dictionaries
available for download, including translations (e.g. English-Portuguese). When
in doubt, choose Wiktionary files.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://adolfoparra.com"&gt;Reference&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Kindle: KOReader dictionaries"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>myrepos: chain configs</title><link>https://perrotta.dev/2025/12/myrepos-chain-configs/</link><pubDate>Mon, 22 Dec 2025 14:45:45 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>git</category><guid>https://perrotta.dev/2025/12/myrepos-chain-configs/</guid><description>&lt;p&gt;&lt;a href="https://myrepos.branchable.com/"&gt;myrepos&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;You have a lot of version control repositories. Sometimes you want to update
them all at once. Or push out all your local changes. You use special command
lines in some repositories to implement specific workflows. Myrepos provides a
mr command, which is a tool to manage all your version control repositories.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;I use &lt;code&gt;mr&lt;/code&gt; to manage my local git checkouts, see my
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/master/git/.mrconfig"&gt;&lt;code&gt;~/.mrconfig&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From &lt;code&gt;$HOME&lt;/code&gt;, running &lt;code&gt;mr update&lt;/code&gt; keeps all managed repositories up-to-date
(&lt;code&gt;git fetch&lt;/code&gt; / &lt;code&gt;git pull&lt;/code&gt;).&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: Extend (chain) my mrconfig with git repositories from
work.&lt;/p&gt;
&lt;p&gt;I keep my git repos from work in &lt;code&gt;~/Corp&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Changing directory to it and running &lt;code&gt;mr update&lt;/code&gt; updates work repos only.&lt;/p&gt;
&lt;p&gt;The goal is to have &lt;code&gt;mr update&lt;/code&gt; in &lt;code&gt;~&lt;/code&gt; perform updates for personal AND work
repos. We can achieve this with configuration chaining.&lt;/p&gt;
&lt;p&gt;This
&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/3f5c5e02dd7cc29bbc30d74f8329ce7bf654bd5e"&gt;commit&lt;/a&gt;
addresses it:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;# chain corp repositories
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;include = test -f $HOME/Corp/.mrconfig &amp;amp;&amp;amp; sed &amp;#39;s|^\[\([^/DEFAULT]\)|[Corp/\1|&amp;#39; $HOME/Corp/.mrconfig || true&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Rationale&lt;/strong&gt;: If &lt;code&gt;~/Corp/.mrconfig&lt;/code&gt; exists, include it in the original
&lt;code&gt;~/.mrconfig&lt;/code&gt;. The &lt;code&gt;sed&lt;/code&gt; expression is necessary to adjust relative paths when
operating on work repos, so that they all stay within &lt;code&gt;~/Corp&lt;/code&gt;, otherwise they
would be cloned in &lt;code&gt;~&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;test&lt;/code&gt; and &lt;code&gt;|| true&lt;/code&gt; is to make this inclusion optional, with graceful
degradation in case the work &lt;code&gt;.mrconfig&lt;/code&gt; does not exist, thereby simply skipping
it.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: myrepos: chain configs"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ git: stash untracked files</title><link>https://perrotta.dev/2025/12/git-stash-untracked-files/</link><pubDate>Mon, 22 Dec 2025 02:30:06 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>bestof</category><category>dev</category><category>git</category><guid>https://perrotta.dev/2025/12/git-stash-untracked-files/</guid><description>&lt;p&gt;As I write this very post, this is what my git repository status looks like:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## master...origin/master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;?? content/posts/2025-12-22-git-stash-untracked.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;What if I wanted to stash it?&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git stash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;No local changes to save
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## master...origin/master&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;?? content/posts/2025-12-22-git-stash-untracked.md&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Nothing happens, because this post is a new file, not yet tracked by git.&lt;/p&gt;
&lt;p&gt;The classic way to address this is to switch to another branch, commit
everything (e.g. with &lt;a href="https://perrotta.dev/2025/03/git-freeze-git-thaw/"&gt;&lt;code&gt;git-freeze&lt;/code&gt;&lt;/a&gt;), and then switch back. But this is slow.&lt;/p&gt;
&lt;p&gt;Today I learned about &lt;code&gt;git stash -u&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-u, --include-untracked, --no-include-untracked
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; When used with the push and save commands, all untracked files are also stashed and then cleaned up with git clean.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; When used with the show command, show the untracked files in the
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; stash entry as part of the diff.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Let&amp;rsquo;s try it:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git stash -u
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Saved working directory and index state WIP on master: 58cde6e88 hide codeblock header in RSS feeds
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% git st
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;## master...origin/master&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The new post gets stashed indeed!&lt;/p&gt;
&lt;p&gt;I don&amp;rsquo;t know how I missed this feature ‚Äì I&amp;rsquo;ve wanted this functionality for
&lt;code&gt;stash&lt;/code&gt; since forever!&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: git: stash untracked files"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/git/"&gt;#git&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>‚òÖ .apk-new</title><link>https://perrotta.dev/2025/12/.apk-new/</link><pubDate>Mon, 22 Dec 2025 01:00:02 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>alpine-linux</category><category>bestof</category><category>dev</category><guid>https://perrotta.dev/2025/12/.apk-new/</guid><description>&lt;p&gt;After running an Alpine Linux server for a couple of months (or years), you&amp;rsquo;ll
inevitably find a couple of &lt;code&gt;.apk-new&lt;/code&gt; files scattered in your filesystem within
&lt;code&gt;/etc&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% doas find / -name &lt;span style="color:#e6db74"&gt;&amp;#34;*.apk-new&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/rc.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/inittab.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/fstab.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/ssh/sshd_config.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/passwd.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/crontabs/root.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/group.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/ufw/ufw.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/ufw/user6.rules.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/ufw/user.rules.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/abuild.conf.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/default/grub.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/shadow.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/network/interfaces.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/profile.d/locale.sh.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;/etc/doas.conf.apk-new&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;As per the &lt;a href="https://docs.alpinelinux.org/user-handbook/0.1a/Working/apk.html#_installing_packages"&gt;alpine user
handbook&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Installing a package means that the package itself will be downloaded from a
repository (specified in /etc/apk/repositories) and unpacked to the system.
Existing files will be overwritten. An exception are configuration files in
/etc, which will be preserved. The configuration files (which comes from the
package) will be renamed to *.apk-new.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;It&amp;rsquo;s very similar to what happens in Arch Linux with
&lt;a href="https://wiki.archlinux.org/title/Pacman/Pacnew_and_Pacsave"&gt;&lt;code&gt;.pacnew&lt;/code&gt;&lt;/a&gt; files.
Arch Linux has an utility called
&lt;a href="https://wiki.archlinux.org/title/Pacman/Pacnew_and_Pacsave#pacdiff"&gt;&lt;code&gt;pacdiff&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;It will search for .pacnew, .pacsave and .pacorig files, and will then prompt
to take action upon them.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&amp;hellip;and also in Gentoo Linux with
&lt;a href="https://wiki.gentoo.org/wiki/Etc-update"&gt;&lt;code&gt;etc-update&lt;/code&gt;&lt;/a&gt; or
&lt;a href="https://wiki.gentoo.org/wiki/Dispatch-conf"&gt;&lt;code&gt;dispatch-conf&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Alpine Linux lacks such an utility, to the best of my knowledge.&lt;/p&gt;
&lt;p&gt;As such, I vibe coded one in &lt;a href="https://github.com/thiagowfx/pancake"&gt;&lt;code&gt;pancake&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I hereby introduce &lt;a href="https://github.com/thiagowfx/pancake/tree/master/apknew"&gt;&lt;code&gt;apknew&lt;/code&gt;&lt;/a&gt;:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Reconcile .apk-new configuration files on Alpine Linux, similar to pacdiff on
Arch Linux.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;By default, it operates on &lt;code&gt;/etc&lt;/code&gt; only.&lt;/p&gt;
&lt;p&gt;A sample run looks like the following, prompting a pair of files at a time:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;File: /etc/crontabs/root.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Original: /etc/crontabs/root
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Action:&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;You&amp;rsquo;ll want to hit &lt;code&gt;v&lt;/code&gt; first to inspect the diff, and then decide whether to:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;keep the original file&lt;/li&gt;
&lt;li&gt;replace it with the newer package file&lt;/li&gt;
&lt;li&gt;interactively merge them (e.g. with &lt;code&gt;vimdiff&lt;/code&gt;)&lt;/li&gt;
&lt;li&gt;do nothing (skip)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;It&amp;rsquo;s much easier than diffing each file manually.&lt;/p&gt;
&lt;p&gt;Another example:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;% apknew/apknew.sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Searching for .apk-new files in /etc...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Found 14 file(s) to process.
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;File: /etc/passwd.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Original: /etc/passwd
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Action: s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Skipping /etc/passwd.apk-new...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;File: /etc/shells.apk-new
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Original: /etc/shells
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;==============================================
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Action: v
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;--- /etc/shells	2025-12-21 11:07:42.531531775 -0500
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;+++ /etc/shells.apk-new	2025-12-15 09:00:47.000000000 -0500
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;@@ -1,5 +1,3 @@
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; # valid login shells
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /bin/sh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; /bin/ash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-/bin/zsh
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;-/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;[v]iew diff [k]eep original [r]eplace with new [m]erge [s]kip
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Action: k
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Removing /etc/shells.apk-new...
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;Done. Kept original file.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: .apk-new"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/alpine-linux/"&gt;#alpine-linux&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/bestof/"&gt;#bestof&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>MIUI debloater</title><link>https://perrotta.dev/2025/12/miui-debloater/</link><pubDate>Sun, 21 Dec 2025 19:28:50 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><guid>https://perrotta.dev/2025/12/miui-debloater/</guid><description>&lt;p&gt;&lt;a href="https://perrotta.dev/2025/11/coreldraw-disable-ads-on-windows/"&gt;Previously&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;From &amp;lsquo;Technical Support&amp;rsquo; tales of the trenches.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: My parents have a Xiaomi Android phone. The amount of
bloat in it is horrifying, incredibly disgusting.&lt;/p&gt;
&lt;p&gt;It is not possible to &lt;em&gt;uninstall&lt;/em&gt; system apps ‚Äì including Xiaomi&amp;rsquo;s and Google&amp;rsquo;s
‚Äì by normal means. Once upon a time it used to be possible to, at the very
least, &lt;em&gt;disable&lt;/em&gt; them. But now there are many apps that can&amp;rsquo;t even be disabled!&lt;/p&gt;
&lt;p&gt;One example: YouTube Music. It&amp;rsquo;s such a shame that vendors, even supposedly
reputable ones, need to employ such consumer-hostile dark patterns in order to
artificially inflate their engagement metrics.
Shove it in our face, but we&amp;rsquo;re not using YouTube Music, full stop.&lt;/p&gt;
&lt;p&gt;The goal is to remove as many of these apps as possible, using whichever means
to be necessary.&lt;/p&gt;
&lt;p&gt;I found &lt;a href="https://github.com/kirthandev/MIUI-Debloater-official"&gt;MIUI debloater&lt;/a&gt;
to work well. Instructions, executed preferably from a Windows machine:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;install a modern Java SDK (e.g. 21 or 25)&lt;/li&gt;
&lt;li&gt;install ADB&lt;/li&gt;
&lt;li&gt;open the &lt;code&gt;.jar&lt;/code&gt; provided by the project&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;From the &lt;del&gt;ill patient&lt;/del&gt; affected phone:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;enable USB debugging via system settings ‚Äì multiple confirmation prompts are
needed to do so&lt;/li&gt;
&lt;li&gt;connect the device with a USB cable to the computer&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;From this point on it is quite straightforward to remove undesired / unwanted
apps.&lt;/p&gt;
&lt;p&gt;The project is a GUI Java app with options to install and uninstall
applications, among other functionalities (e.g. download and install custom
ROMs).&lt;/p&gt;
&lt;p&gt;Just be careful not to remove important Android system apps ‚Äì triple-check that
you&amp;rsquo;re only removing non-essentials.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: MIUI debloater"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Toggle light / dark mode</title><link>https://perrotta.dev/2025/12/toggle-light-/-dark-mode/</link><pubDate>Sun, 21 Dec 2025 18:24:28 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><guid>https://perrotta.dev/2025/12/toggle-light-/-dark-mode/</guid><description>&lt;p&gt;After dabbling about this for a while, I decided to add a non-intrusive icon to
the footer of this site, wherein you can manually toggle between the light and
dark theme. Your choice is persistent locally indefinitely, courtesy of
&lt;a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage"&gt;&lt;code&gt;localStorage&lt;/code&gt;&lt;/a&gt;&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/toggle-light-/-dark-mode/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;Previously, the theme used to be set automatically depending upon your system /
browser preferences
(&lt;a href="https://developer.mozilla.org/en-US/docs/Web/CSS/Reference/At-rules/@media/prefers-color-scheme"&gt;&lt;code&gt;prefers-color-scheme&lt;/code&gt;&lt;/a&gt;).&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;&lt;code&gt;localStorage.getItem('theme')&lt;/code&gt;.&amp;#160;&lt;a href="https://perrotta.dev/2025/12/toggle-light-/-dark-mode/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Toggle light / dark mode"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Claude Code: block dangerous commands</title><link>https://perrotta.dev/2025/12/claude-code-block-dangerous-commands/</link><pubDate>Sun, 21 Dec 2025 18:16:12 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-block-dangerous-commands/</guid><description>&lt;p&gt;The outcome:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; Run rm -rf /tmp/test
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚è∫ Bash(rm -rf /tmp/test)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ‚éø PreToolUse:Bash hook returned blocking error
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ‚éø Error: rm -rf is blocked for safety
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚è∫ The rm -rf command was blocked by a safety hook in your configuration (~/.claude/hooks/block-dangerous-commands.sh).
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; If you want to remove /tmp/test, you have a few options:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 1. Run the command directly in your terminal (outside of Claude Code)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 2. Modify your hooks configuration to allow this specific command
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 3. Use a safer alternative like rm -r /tmp/test (without force flag) which may prompt for confirmation
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; Would you like me to try one of the alternatives, or would you prefer to run this directly in your terminal?&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;How to achieve this?&lt;/p&gt;
&lt;p&gt;So far I had a &lt;a href="https://github.com/thiagowfx/.dotfiles/blob/8a61441dbe1adf5760544e0db6b4c64a145bb6e7/claude/.claude/settings.json#L63"&gt;deny
list&lt;/a&gt;
in &lt;code&gt;~/.claude/settings.json&lt;/code&gt;:&lt;/p&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;permissions&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;deny&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bash(rm -rf:*)&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bash(terraform apply:*)&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bash(terraform destroy:*)&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;This is enough&lt;/strong&gt;.&lt;/p&gt;
&lt;p&gt;For extra safety though, I added a &lt;a href="https://code.claude.com/docs/en/hooks#pretooluse"&gt;pre-tool use
hook&lt;/a&gt; for redundancy:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Runs after Claude creates tool parameters and before processing the
tool call.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class="codeblock" data-lang="json"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;json&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-json" data-lang="json"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;hooks&amp;#34;&lt;/span&gt;: {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;PreToolUse&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;matcher&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;Bash&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;hooks&amp;#34;&lt;/span&gt;: [
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;type&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;command&amp;#34;&lt;/span&gt;: &lt;span style="color:#e6db74"&gt;&amp;#34;~/.claude/hooks/block-dangerous-commands.sh&amp;#34;&lt;/span&gt;,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#f92672"&gt;&amp;#34;timeout&amp;#34;&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;10&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;The hook file (generated by Claude itself, needless to say):&lt;/p&gt;

&lt;div class="codeblock" data-lang="shell"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;shell&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-bash" data-lang="bash"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;#!/bin/bash
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;&lt;/span&gt;&lt;span style="color:#75715e"&gt;# PreToolUse hook to block dangerous commands like &amp;#34;rm -rf&amp;#34; and &amp;#34;terraform apply&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Read hook input from stdin&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;input&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;cat&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Extract tool name and command&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;tool_name&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$input&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; | jq -r &lt;span style="color:#e6db74"&gt;&amp;#39;.tool_name // &amp;#34;&amp;#34;&amp;#39;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;command&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;$(&lt;/span&gt;echo &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$input&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; | jq -r &lt;span style="color:#e6db74"&gt;&amp;#39;.tool_input.command // &amp;#34;&amp;#34;&amp;#39;&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Exit early if not a Bash tool&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$tool_name&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; !&lt;span style="color:#f92672"&gt;=&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;Bash&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;]&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; exit &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Check for dangerous patterns&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;blocked&lt;span style="color:#f92672"&gt;=&lt;/span&gt;false
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;reason&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Check for rm -rf (with various flag orderings)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; echo &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$command&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; | grep -qE &lt;span style="color:#e6db74"&gt;&amp;#39;rm\s+(-[a-zA-Z]*r[a-zA-Z]*f|(-[a-zA-Z]*f[a-zA-Z]*\s+)?-[a-zA-Z]*r|-rf|-fr)\b&amp;#39;&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blocked&lt;span style="color:#f92672"&gt;=&lt;/span&gt;true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; reason&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;rm -rf is blocked for safety&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Check for terraform apply (without -auto-approve is still dangerous)&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; echo &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$command&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; | grep -qE &lt;span style="color:#e6db74"&gt;&amp;#39;terraform\s+apply&amp;#39;&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blocked&lt;span style="color:#f92672"&gt;=&lt;/span&gt;true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; reason&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;terraform apply is blocked - use terraform plan first&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Check for terraform destroy&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; echo &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$command&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; | grep -qE &lt;span style="color:#e6db74"&gt;&amp;#39;terraform\s+destroy&amp;#39;&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; blocked&lt;span style="color:#f92672"&gt;=&lt;/span&gt;true
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; reason&lt;span style="color:#f92672"&gt;=&lt;/span&gt;&lt;span style="color:#e6db74"&gt;&amp;#34;terraform destroy is blocked for safety&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# If blocked, return denial via JSON&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;if&lt;/span&gt; &lt;span style="color:#f92672"&gt;[&lt;/span&gt; &lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt;$blocked&lt;span style="color:#e6db74"&gt;&amp;#34;&lt;/span&gt; &lt;span style="color:#f92672"&gt;=&lt;/span&gt; true &lt;span style="color:#f92672"&gt;]&lt;/span&gt;; &lt;span style="color:#66d9ef"&gt;then&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; cat &lt;span style="color:#e6db74"&gt;&amp;lt;&amp;lt;EOF
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;{
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;hookSpecificOutput&amp;#34;: {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;hookEventName&amp;#34;: &amp;#34;PreToolUse&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;permissionDecision&amp;#34;: &amp;#34;deny&amp;#34;,
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; &amp;#34;permissionDecisionReason&amp;#34;: &amp;#34;$reason&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt; }
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#e6db74"&gt;EOF&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; exit &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#66d9ef"&gt;fi&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;# Allow command to proceed&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;exit &lt;span style="color:#ae81ff"&gt;0&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: block dangerous commands"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Claude Code: stash</title><link>https://perrotta.dev/2025/12/claude-code-stash/</link><pubDate>Sun, 21 Dec 2025 16:48:26 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-stash/</guid><description>&lt;p&gt;&lt;strong&gt;Problem statement&lt;/strong&gt;: You&amp;rsquo;re midway in a long, multi-line prompt in Claude
Code.&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;voluptua. At vero eos et accusam et justo duo dolores et ea rebum. Stet
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;clita kasd gubergren, no sea takimata sanctus est Lorem ipsum dolor sit
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;amet. Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat,
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;sed diam voluptua. At vero eos et accusam et justo duo dolores et ea
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;rebum. Stet clita kasd gubergren, no sea takimata sanctus est Lorem ipsum
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;dolor sit amet.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;Now you would like to &amp;ldquo;stash&amp;rdquo; it away temporarily to run a more important,
one-off prompt, before resuming.&lt;/p&gt;
&lt;p&gt;If this were an one-line prompt, you could hit &lt;code&gt;C-u&lt;/code&gt;, run your one-off, and then
hit &lt;code&gt;C-y&lt;/code&gt;. This is pure &lt;code&gt;readline&lt;/code&gt; / &lt;code&gt;emacs&lt;/code&gt; wizardry, supported natively in the
TUI that Claude Code employs.&lt;/p&gt;
&lt;p&gt;For the multi-line situation, hit &lt;code&gt;C-s&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Claude will then show:&lt;/p&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚Ä∫ Stashed (auto-restores after submit)&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;From here, run your one-off. Your initial prompt will be automatically
restored upon completion.&lt;/p&gt;
&lt;p&gt;Alternatively, press &lt;code&gt;C-s&lt;/code&gt; again to restore the initial prompt.&lt;/p&gt;
&lt;p&gt;This is a simple quality-of-life improvement, but it&amp;rsquo;s specific to Claude Code.
&lt;code&gt;C-u&lt;/code&gt; + &lt;code&gt;C-y&lt;/code&gt; works almost everywhere though.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: stash"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>j,k for navigation</title><link>https://perrotta.dev/2025/12/jk-for-navigation/</link><pubDate>Sun, 21 Dec 2025 02:31:10 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>meta</category><category>vim</category><guid>https://perrotta.dev/2025/12/jk-for-navigation/</guid><description>&lt;p&gt;I just added vim-style keybindings to this site.&lt;/p&gt;
&lt;p&gt;Press &lt;strong&gt;j&lt;/strong&gt; to go to the previous post (chronologically, going down the list ‚¨áÔ∏è)
and &lt;strong&gt;k&lt;/strong&gt; to go to the next post (going up the list ‚¨ÜÔ∏è)&lt;sup id="fnref:1"&gt;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fn:1" class="footnote-ref" role="doc-noteref"&gt;1&lt;/a&gt;&lt;/sup&gt;.&lt;/p&gt;
&lt;p&gt;The boundary between &lt;em&gt;general&lt;/em&gt; vs &lt;em&gt;coding&lt;/em&gt; posts is respected.&lt;/p&gt;
&lt;div class="footnotes" role="doc-endnotes"&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id="fn:1"&gt;
&lt;p&gt;I also added arrow keys (‚¨ÖÔ∏è for the previous post and ‚û°Ô∏è right for the next
one).&amp;#160;&lt;a href="https://perrotta.dev/2025/12/jk-for-navigation/#fnref:1" class="footnote-backref" role="doc-backlink"&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/div&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: j,k for navigation"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/meta/"&gt;#meta&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/vim/"&gt;#vim&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Claude Code: add context window % to status line</title><link>https://perrotta.dev/2025/12/claude-code-add-context-window-to-status-line/</link><pubDate>Sat, 20 Dec 2025 15:42:11 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>ai</category><category>dev</category><guid>https://perrotta.dev/2025/12/claude-code-add-context-window-to-status-line/</guid><description>&lt;blockquote&gt;
&lt;p&gt;Claude code now officially supports showing context window information like
percentage of usage in status line (&lt;a href="https://aiengineerguide.com/blog/show-context-window-information-in-claude-code-statusline/"&gt;via Ashik Nesin&lt;/a&gt;):&lt;/p&gt;
&lt;/blockquote&gt;

&lt;div class="codeblock"&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-plaintext" data-lang="plaintext"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&amp;gt; /statusline Add a progress bar showing the percentage of context currently used
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚è∫ statusline-setup(Configure statusline progress bar)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; ‚éø Done (3 tool uses ¬∑ 7.4k tokens ¬∑ 44s)
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;‚è∫ I&amp;#39;ve configured your statusline to include a context usage progress bar. Your status line will now show something like:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; .claude (git:main) [Claude 3.5 Sonnet] [‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 60%]
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; The progress bar displays:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - Filled blocks (‚ñà) for used context
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - Empty blocks (‚ñë) for remaining context
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - Percentage showing exact usage
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; The context calculation includes input tokens, cache creation tokens, and cache read tokens relative to the total context window size.&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;My updated
&lt;a href="https://github.com/thiagowfx/.dotfiles/blob/8ab831db16c8e042f024081744e723c5abf790c7/claude/.claude/statusline.sh"&gt;&lt;code&gt;.claude/statusline.sh&lt;/code&gt;&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;&lt;a href="https://github.com/thiagowfx/.dotfiles/commit/8ab831db16c8e042f024081744e723c5abf790c7"&gt;The
diff&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Claude Code: add context window % to status line"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/ai/"&gt;#ai&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Miniflux: NetNewsWire integration</title><link>https://perrotta.dev/2025/12/miniflux-netnewswire-integration/</link><pubDate>Sat, 20 Dec 2025 14:39:24 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><guid>https://perrotta.dev/2025/12/miniflux-netnewswire-integration/</guid><description>&lt;p&gt;&lt;a href="https://netnewswire.com/"&gt;NetNewsWire&lt;/a&gt; is a great RSS &lt;strong&gt;client&lt;/strong&gt; reader for
macOS and iOS.&lt;/p&gt;
&lt;p&gt;I already use &lt;a href="https://miniflux.app/"&gt;miniflux&lt;/a&gt; though. It&amp;rsquo;s too bad NetNewsWire
does not support miniflux as a server back-end:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Syncing via iCloud, Feedbin, Feedly, BazQux, Inoreader, NewsBlur, The Old
Reader, and FreshRSS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;Or does it?&lt;/p&gt;
&lt;p&gt;Thanks to &lt;a href="https://www.lkhrs.com/blog/app-defaults-2025/"&gt;Luke Harris&lt;/a&gt;, I just
realized it does &lt;em&gt;in fact&lt;/em&gt; support Miniflux, albeit indirectly!&lt;/p&gt;
&lt;p&gt;When adding your self-hosted miniflux server, select the &amp;ldquo;FreshRSS&amp;rdquo; option,
which is also compatible with the Google Reader API.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Note&lt;/strong&gt;: Add the URL without a trailing slash.&lt;/p&gt;
&lt;p&gt;Why use NetNewsWire instead of accessing Miniflux directly on iOS as a web app?&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;It works off-line (e.g. read your feeds while flying) ‚Äì in the meantime,
there&amp;rsquo;s a &lt;a href="https://github.com/miniflux/v2/issues/1395"&gt;Feature Request&lt;/a&gt; for
Miniflux to support an off-line mode&lt;/li&gt;
&lt;li&gt;It caches articles and posts locally: a) saving mobile data when syncing
upfront via Wi-Fi and b) yielding faster transitions between feed entries&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Miniflux: NetNewsWire integration"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Offloading iOS apps</title><link>https://perrotta.dev/2025/12/offloading-ios-apps/</link><pubDate>Sat, 06 Dec 2025 00:51:48 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>privacy</category><category>serenity</category><guid>https://perrotta.dev/2025/12/offloading-ios-apps/</guid><description>&lt;p&gt;Going on vacation?&lt;/p&gt;
&lt;p&gt;Have an iPhone?&lt;/p&gt;
&lt;p&gt;There&amp;rsquo;s no need to delete Slack, or your &lt;del&gt;favorite&lt;/del&gt; on-call app.&lt;/p&gt;
&lt;p&gt;Simply &lt;a href="https://support.apple.com/en-al/guide/iphone/iph47c931112/ios"&gt;offload&lt;/a&gt;
noisy apps.&lt;/p&gt;
&lt;p&gt;Why is this better than uninstalling them?&lt;/p&gt;
&lt;p&gt;Because it&amp;rsquo;s much easier to restore them once you are back. You do so with a
single tap in each app.&lt;/p&gt;
&lt;p&gt;Of course, this method is only effective if you don&amp;rsquo;t have the urge to tap your
offloaded apps. Some people have more self-control than others.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Offloading iOS apps"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/privacy/"&gt;#privacy&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item><item><title>Reordering mobile editing icons in logseq</title><link>https://perrotta.dev/2025/12/reordering-mobile-editing-icons-in-logseq/</link><pubDate>Sat, 06 Dec 2025 00:42:32 -0300</pubDate><author>serendipity@perrotta.dev (Thiago Perrotta)</author><category>dev</category><category>pkm</category><category>serenity</category><guid>https://perrotta.dev/2025/12/reordering-mobile-editing-icons-in-logseq/</guid><description>&lt;p&gt;&lt;a href="https://bate.dev/posts/logseq-mobile/"&gt;Reordering mobile editing icons in
logseq&lt;/a&gt; by Colin Bate:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;I found a way to avoid needing to constantly scroll sideways to access the
icons I need.&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;This is why I love the indie web.&lt;/p&gt;
&lt;p&gt;I was looking for how to do exactly the same operation, for exactly the same
icon.&lt;/p&gt;
&lt;p&gt;Isn&amp;rsquo;t it so amazing when a person documents their solutions publicly online, in
the open? Colin, you are my hero.&lt;/p&gt;
&lt;p&gt;Update &lt;code&gt;custom.css&lt;/code&gt; in LogSeq settings:&lt;/p&gt;

&lt;div class="codeblock" data-lang="css"&gt;
 &lt;div class="codeblock-header"&gt;
 &lt;span class="codeblock-language"&gt;css&lt;/span&gt;
 &lt;/div&gt;
 &lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-css" data-lang="css"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/* Move icons 3+ to order 2 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;#mobile-editor-toolbar .&lt;span style="color:#a6e22e"&gt;toolbar-commands&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;div&lt;/span&gt;:&lt;span style="color:#a6e22e"&gt;nth-child&lt;/span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;&lt;span style="color:#f92672"&gt;n&lt;/span&gt;&lt;span style="color:#f92672"&gt;+&lt;/span&gt;&lt;span style="color:#f92672"&gt;3&lt;/span&gt;&lt;span style="color:#f92672"&gt;)&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;order&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;2&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;color&lt;/span&gt;: &lt;span style="color:#a6e22e"&gt;var&lt;/span&gt;(&lt;span style="color:#f92672"&gt;--&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;cyan&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#75715e"&gt;/* Insert icon 11 (brackets) at order 1 */&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;#mobile-editor-toolbar .&lt;span style="color:#a6e22e"&gt;toolbar-commands&lt;/span&gt; &lt;span style="color:#f92672"&gt;&amp;gt;&lt;/span&gt; &lt;span style="color:#f92672"&gt;div&lt;/span&gt;:&lt;span style="color:#a6e22e"&gt;nth-child&lt;/span&gt;&lt;span style="color:#f92672"&gt;(&lt;/span&gt;&lt;span style="color:#f92672"&gt;11&lt;/span&gt;&lt;span style="color:#f92672"&gt;)&lt;/span&gt; {
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;order&lt;/span&gt;: &lt;span style="color:#ae81ff"&gt;1&lt;/span&gt;;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#66d9ef"&gt;color&lt;/span&gt;: &lt;span style="color:#a6e22e"&gt;var&lt;/span&gt;(&lt;span style="color:#f92672"&gt;--&lt;/span&gt;&lt;span style="color:#66d9ef"&gt;orange&lt;/span&gt;);
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;}&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;p&gt;&lt;strong&gt;Side effect&lt;/strong&gt;: The &lt;code&gt;[]&lt;/code&gt; wikilink button will be moved to be the third one in
the editor toolbar.&lt;/p&gt;
&lt;p&gt;‚Äî ¬ß ‚Äî&lt;/p&gt;&lt;p&gt;Reply via &lt;a href="mailto:serendipity@perrotta.dev?subject=Reply to: Reordering mobile editing icons in logseq"&gt;email&lt;/a&gt;&lt;/p&gt;&lt;p&gt;&lt;a href="https://perrotta.dev/tags/dev/"&gt;#dev&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/pkm/"&gt;#pkm&lt;/a&gt; &lt;a href="https://perrotta.dev/tags/serenity/"&gt;#serenity&lt;/a&gt;&lt;/p&gt;&lt;/div&gt;</description></item></channel></rss>