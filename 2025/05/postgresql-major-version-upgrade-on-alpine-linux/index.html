<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title class=title>PostgreSQL major version upgrade on Alpine Linux | ¬¨ just serendipity üçÄ</title><meta name=title content="PostgreSQL major version upgrade on Alpine Linux">
<meta name=description content="Problem statement
Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For
this specific example, consider a miniflux database.
Procedure
Install PostgreSQL 17:
% doas apk add postgres
It can coexist with postgres16.
Stop the PostgreSQL daemon:
% doas service postgresql stop
If you navigate to the Miniflux server with your browser, it will fail, as
expected:
store: unable to create app session: dial tcp [::1]:5432: connect: connection refused
Change the PostgreSQL system version to the desired one:"><meta name=keywords content="bestof,dev,selfhosted,"><meta property="og:url" content="https://perrotta.dev/2025/05/postgresql-major-version-upgrade-on-alpine-linux/"><meta property="og:site_name" content="¬¨ just serendipity üçÄ"><meta property="og:title" content="PostgreSQL major version upgrade on Alpine Linux"><meta property="og:description" content="Problem statement Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For this specific example, consider a miniflux database.
Procedure Install PostgreSQL 17:
% doas apk add postgres It can coexist with postgres16.
Stop the PostgreSQL daemon:
% doas service postgresql stop If you navigate to the Miniflux server with your browser, it will fail, as expected:
store: unable to create app session: dial tcp [::1]:5432: connect: connection refused Change the PostgreSQL system version to the desired one:"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-05-24T16:00:23+02:00"><meta property="article:modified_time" content="2025-05-24T16:00:23+02:00"><meta property="article:tag" content="Bestof"><meta property="article:tag" content="Dev"><meta property="article:tag" content="Selfhosted"><meta name=twitter:card content="summary"><meta name=twitter:title content="PostgreSQL major version upgrade on Alpine Linux"><meta name=twitter:description content="Problem statement Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For this specific example, consider a miniflux database.
Procedure Install PostgreSQL 17:
% doas apk add postgres It can coexist with postgres16.
Stop the PostgreSQL daemon:
% doas service postgresql stop If you navigate to the Miniflux server with your browser, it will fail, as expected:
store: unable to create app session: dial tcp [::1]:5432: connect: connection refused Change the PostgreSQL system version to the desired one:"><meta itemprop=name content="PostgreSQL major version upgrade on Alpine Linux"><meta itemprop=description content="Problem statement Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For this specific example, consider a miniflux database.
Procedure Install PostgreSQL 17:
% doas apk add postgres It can coexist with postgres16.
Stop the PostgreSQL daemon:
% doas service postgresql stop If you navigate to the Miniflux server with your browser, it will fail, as expected:
store: unable to create app session: dial tcp [::1]:5432: connect: connection refused Change the PostgreSQL system version to the desired one:"><meta itemprop=datePublished content="2025-05-24T16:00:23+02:00"><meta itemprop=dateModified content="2025-05-24T16:00:23+02:00"><meta itemprop=wordCount content="862"><meta itemprop=keywords content="Bestof,Dev,Selfhosted"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2025/05/postgresql-major-version-upgrade-on-alpine-linux/><link rel=stylesheet href=https://perrotta.dev/theme.css><style>body{text-align:left;margin:auto}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;padding:8px;text-align:center}a{color:var(--link-color)}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.4}table{width:100%}img{max-width:100%}code{background-color:var(--code-bg)}li code,p code{font-size:.9em}pre code{color:var(--heading-color);display:block;padding:25px;white-space:pre;font-size:17px;overflow-x:auto}code,pre{font-family:var(--font-code)}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:2px solid #999;color:var(--heading-color);padding-left:25px;padding-right:15px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex;gap:8px;margin-bottom:8px}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic}.pubdate-single{color:var(--color-gray);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:8px;margin-top:8px}.social-link{text-decoration:none;font-size:1.4em}sup.gray{color:var(--color-gray)}.title{font-size:38px}@media(prefers-color-scheme:dark){blockquote{color:#ccc}textarea,input{background-color:#252525;color:var(--text-color)}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.png alt="thiagowfx's avatar" width=32 height=32><h1 class=title>¬¨ just serendipity üçÄ</h1></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/coding/>Coding (new!)</a>
<a href=/tags/bestof/>‚òÖ</a></nav></header><main><h2><span>‚òÖ</span> PostgreSQL major version upgrade on Alpine Linux</h2><p><span class=pubdate-single><time datetime=2025-05-24 pubdate>24 May, 2025
</time>‚Ä¢ 862 words ‚Ä¢ 5 min</span></p><content><h2 id=problem-statement>Problem statement</h2><p>Given Alpine Linux 3.22 running PostgreSQL 16, upgrade to PostgreSQL 17. For
this specific example, consider a <a href=https://miniflux.app/><code>miniflux</code></a> database.</p><h2 id=procedure>Procedure</h2><p>Install PostgreSQL 17:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% doas apk add postgres
</span></span></code></pre></div><p>It can coexist with <code>postgres16</code>.</p><p>Stop the PostgreSQL daemon:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% doas service postgresql stop
</span></span></code></pre></div><p>If you navigate to the Miniflux server with your browser, it will fail, as
expected:</p><pre tabindex=0><code>store: unable to create app session: dial tcp [::1]:5432: connect: connection refused
</code></pre><p>Change the PostgreSQL system version to the desired one:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% doas pg_versions set-default <span style=color:#d19a66>17</span>
</span></span></code></pre></div><p>Change to the root user, for convenience, then change to the existing postgresql
directory:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% doas su
</span></span><span style=display:flex><span>% <span style=color:#e5c07b>cd</span> /var/lib/postgresql/
</span></span></code></pre></div><p>Prepare files and directories for the upgrade:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% <span style=color:#e5c07b>cd</span> 16/
</span></span><span style=display:flex><span>% mv data olddata
</span></span><span style=display:flex><span>% <span style=color:#e5c07b>cd</span> ../
</span></span><span style=display:flex><span>% mkdir 17/
</span></span><span style=display:flex><span>% <span style=color:#e5c07b>cd</span> 17/
</span></span><span style=display:flex><span>% mkdir data tmp
</span></span><span style=display:flex><span>% chown postgres:postgres data tmp
</span></span></code></pre></div><p>Change to the <code>postgres</code> user:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% su postgres
</span></span><span style=display:flex><span>% <span style=color:#e5c07b>cd</span> tmp/
</span></span></code></pre></div><p>Initialize the new cluster:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% initdb -D /var/lib/postgresql/17/data --locale<span style=color:#56b6c2>=</span>en_US.UTF-8 --encoding<span style=color:#56b6c2>=</span>UTF8 <span style=color:#56b6c2>[</span>--data-checksums<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>The files belonging to this database system will be owned by user <span style=color:#98c379>&#34;postgres&#34;</span>.
</span></span><span style=display:flex><span>This user must also own the server process.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The database cluster will be initialized with locale <span style=color:#98c379>&#34;en_US.UTF-8&#34;</span>.
</span></span><span style=display:flex><span>The default text search configuration will be <span style=color:#e5c07b>set</span> to <span style=color:#98c379>&#34;english&#34;</span>.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Data page checksums are disabled.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>fixing permissions on existing directory /var/lib/postgresql/17/data ... ok
</span></span><span style=display:flex><span>creating subdirectories ... ok
</span></span><span style=display:flex><span>selecting dynamic shared memory implementation ... posix
</span></span><span style=display:flex><span>selecting default <span style=color:#98c379>&#34;max_connections&#34;</span> ... <span style=color:#d19a66>100</span>
</span></span><span style=display:flex><span>selecting default <span style=color:#98c379>&#34;shared_buffers&#34;</span> ... 128MB
</span></span><span style=display:flex><span>selecting default <span style=color:#e5c07b>time</span> zone ... America/Toronto
</span></span><span style=display:flex><span>creating configuration files ... ok
</span></span><span style=display:flex><span>running bootstrap script ... ok
</span></span><span style=display:flex><span>performing post-bootstrap initialization ... ok
</span></span><span style=display:flex><span>syncing data to disk ... ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>initdb: warning: enabling <span style=color:#98c379>&#34;trust&#34;</span> authentication <span style=color:#c678dd>for</span> <span style=color:#e5c07b>local</span> connections
</span></span><span style=display:flex><span>initdb: hint: You can change this by editing pg_hba.conf or using the option -A, or --auth-local and --auth-host, the next <span style=color:#e5c07b>time</span> you run initdb.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Success.
</span></span></code></pre></div><p>In the previous command I chose to omit <code>--data-checksums</code>, otherwise I get the
following error:</p><pre tabindex=0><code>old cluster does not use data checksums but the new one does
Failure, exiting
</code></pre><p>Upgrade the new cluster:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% pg_upgrade -b /usr/libexec/postgresql16/ -B /usr/libexec/postgresql17/ -d /var/lib/postgresql/16/olddata/ -D /var/lib/postgresql/17/data/
</span></span><span style=display:flex><span>Performing Consistency Checks
</span></span><span style=display:flex><span>-----------------------------
</span></span><span style=display:flex><span>Checking cluster versions                                     ok
</span></span><span style=display:flex><span>Checking database user is the install user                    ok
</span></span><span style=display:flex><span>Checking database connection settings                         ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> prepared transactions                            ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> contrib/isn with bigint-passing mismatch         ok
</span></span><span style=display:flex><span>Checking data <span style=color:#e5c07b>type</span> usage                                      ok
</span></span><span style=display:flex><span>Creating dump of global objects                               ok
</span></span><span style=display:flex><span>Creating dump of database schemas
</span></span><span style=display:flex><span>                                                              ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> presence of required libraries                   ok
</span></span><span style=display:flex><span>Checking database user is the install user                    ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> prepared transactions                            ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> new cluster tablespace directories               ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>If pg_upgrade fails after this point, you must re-initdb the
</span></span><span style=display:flex><span>new cluster before continuing.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Performing Upgrade
</span></span><span style=display:flex><span>------------------
</span></span><span style=display:flex><span>Setting locale and encoding <span style=color:#c678dd>for</span> new cluster                   ok
</span></span><span style=display:flex><span>Analyzing all rows in the new cluster                         ok
</span></span><span style=display:flex><span>Freezing all rows in the new cluster                          ok
</span></span><span style=display:flex><span>Deleting files from new pg_xact                               ok
</span></span><span style=display:flex><span>Copying old pg_xact to new server                             ok
</span></span><span style=display:flex><span>Setting oldest XID <span style=color:#c678dd>for</span> new cluster                            ok
</span></span><span style=display:flex><span>Setting next transaction ID and epoch <span style=color:#c678dd>for</span> new cluster         ok
</span></span><span style=display:flex><span>Deleting files from new pg_multixact/offsets                  ok
</span></span><span style=display:flex><span>Copying old pg_multixact/offsets to new server                ok
</span></span><span style=display:flex><span>Deleting files from new pg_multixact/members                  ok
</span></span><span style=display:flex><span>Copying old pg_multixact/members to new server                ok
</span></span><span style=display:flex><span>Setting next multixact ID and offset <span style=color:#c678dd>for</span> new cluster          ok
</span></span><span style=display:flex><span>Resetting WAL archives                                        ok
</span></span><span style=display:flex><span>Setting frozenxid and minmxid counters in new cluster         ok
</span></span><span style=display:flex><span>Restoring global objects in the new cluster                   ok
</span></span><span style=display:flex><span>Restoring database schemas in the new cluster
</span></span><span style=display:flex><span>                                                              ok
</span></span><span style=display:flex><span>Copying user relation files
</span></span><span style=display:flex><span>                                                              ok
</span></span><span style=display:flex><span>Setting next OID <span style=color:#c678dd>for</span> new cluster                              ok
</span></span><span style=display:flex><span>Sync data directory to disk                                   ok
</span></span><span style=display:flex><span>Creating script to delete old cluster                         ok
</span></span><span style=display:flex><span>Checking <span style=color:#c678dd>for</span> extension updates                                ok
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Upgrade Complete
</span></span><span style=display:flex><span>----------------
</span></span><span style=display:flex><span>Optimizer statistics are not transferred by pg_upgrade.
</span></span><span style=display:flex><span>Once you start the new server, consider running:
</span></span><span style=display:flex><span>    /usr/libexec/postgresql17/vacuumdb --all --analyze-in-stages
</span></span><span style=display:flex><span>Running this script will delete the old cluster&#39;s data files:
</span></span><span style=display:flex><span>    ./delete_old_cluster.sh
</span></span></code></pre></div><p>Now clean up:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% ^D  <span style=color:#7f848e># go back to the root user</span>
</span></span><span style=display:flex><span>% /var/lib/postgresql/17/tmp/delete_old_cluster.sh
</span></span><span style=display:flex><span>% rmdir /var/lib/postgresql/16/  <span style=color:#7f848e># it should be empty by now</span>
</span></span></code></pre></div><p>If you&rsquo;re curious about this script, it&rsquo;s a simple one-liner:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#7f848e>#!/bin/sh
</span></span></span><span style=display:flex><span><span style=color:#7f848e></span>
</span></span><span style=display:flex><span>rm -rf <span style=color:#98c379>&#39;/var/lib/postgresql/16/olddata&#39;</span>
</span></span></code></pre></div><p>Finally, let&rsquo;s get the cluster back up and vacuum it:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% ^D  <span style=color:#7f848e># go back to your main user</span>
</span></span><span style=display:flex><span>% doas service postgresql start
</span></span><span style=display:flex><span>% doas su - postgres -c <span style=color:#98c379>&#39;/usr/libexec/postgresql17/vacuumdb --all --analyze-in-stages&#39;</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;miniflux&#34;</span>: Generating minimal optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>1</span> target<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;postgres&#34;</span>: Generating minimal optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>1</span> target<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;template1&#34;</span>: Generating minimal optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>1</span> target<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;miniflux&#34;</span>: Generating medium optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>10</span> targets<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;postgres&#34;</span>: Generating medium optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>10</span> targets<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;template1&#34;</span>: Generating medium optimizer statistics <span style=color:#56b6c2>(</span><span style=color:#d19a66>10</span> targets<span style=color:#56b6c2>)</span>
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;miniflux&#34;</span>: Generating default <span style=color:#56b6c2>(</span>full<span style=color:#56b6c2>)</span> optimizer statistics
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;postgres&#34;</span>: Generating default <span style=color:#56b6c2>(</span>full<span style=color:#56b6c2>)</span> optimizer statistics
</span></span><span style=display:flex><span>vacuumdb: processing database <span style=color:#98c379>&#34;template1&#34;</span>: Generating default <span style=color:#56b6c2>(</span>full<span style=color:#56b6c2>)</span> optimizer statistics
</span></span></code></pre></div><p>At this point, Miniflux should be working again.
Navigate to <code>/about</code> and verify its database version: <code>Postgres version: 17.5</code>.</p><p>Last step, delete the previous package:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% doas apk del postgresql16 postgres16-contrib
</span></span></code></pre></div><p>Double-check the newer version is still installed:</p><div class=highlight><pre tabindex=0 style=color:#abb2bf;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% apk list -I | grep postgres
</span></span><span style=display:flex><span>libpq-17.5-r0 x86_64 <span style=color:#56b6c2>{</span>postgresql17<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>PostgreSQL<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql-common-1.2-r1 x86_64 <span style=color:#56b6c2>{</span>postgresql-common<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>MIT<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql-common-openrc-1.2-r1 x86_64 <span style=color:#56b6c2>{</span>postgresql-common<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>MIT<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql-zsh-completion-5.9-r5 x86_64 <span style=color:#56b6c2>{</span>zsh<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>MIT-Modern-Variant AND GPL-2.0-only<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql17-17.5-r0 x86_64 <span style=color:#56b6c2>{</span>postgresql17<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>PostgreSQL<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql17-client-17.5-r0 x86_64 <span style=color:#56b6c2>{</span>postgresql17<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>PostgreSQL<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql17-contrib-17.5-r0 x86_64 <span style=color:#56b6c2>{</span>postgresql17<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>PostgreSQL<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span><span style=display:flex><span>postgresql17-openrc-17.5-r0 x86_64 <span style=color:#56b6c2>{</span>postgresql17<span style=color:#56b6c2>}</span> <span style=color:#56b6c2>(</span>PostgreSQL<span style=color:#56b6c2>)</span> <span style=color:#56b6c2>[</span>installed<span style=color:#56b6c2>]</span>
</span></span></code></pre></div><p>And we&rsquo;re done!</p><h2 id=references>References</h2><ul><li><a href=https://wiki.alpinelinux.org/wiki/Postgresql>https://wiki.alpinelinux.org/wiki/Postgresql</a></li><li><a href=https://beune.dev/posts/upgrade-alpine-postgresql/>https://beune.dev/posts/upgrade-alpine-postgresql/</a></li></ul></content><div style=display:flex;justify-content:space-between><p>Reply via
<a href="mailto:serendipity@perrotta.dev?subject=Reply to: PostgreSQL%20major%20version%20upgrade%20on%20Alpine%20Linux">email</a></p><p><a href=https://perrotta.dev/tags/bestof/>#bestof</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a>
<a href=https://perrotta.dev/tags/selfhosted/>#selfhosted</a></p></div></main><hr><footer><span>¬© 2021 - 2025 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=mailto:serendipity@perrotta.dev title="Email address"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 24 24" height="1.3em" width="1.3em"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)"><path d="M26 191c-4-5 16-23 44-40l50-31 50 31c28 17 48 35 44 40-7 12-181 12-188 0z"/><path d="M22 103l3-58 93-3c104-3 105-3 1e2 71l-3 46-48-29-47-30-38 23c-20 13-43 27-50 31-10 6-12-5-10-51z"/></g></svg>
</a><a target=_blank rel=noopener class=social-link href=https://perrotta.dev/index.xml title="RSS feed"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 56.693 56.693" height="1em" width="1em"><path d="M3.428 31.085c6.19.0 12.009 2.418 16.382 6.816 4.381 4.398 6.793 10.256 6.793 16.492h9.539c0-18.113-14.676-32.848-32.714-32.848v9.54zM3.443 14.174c22.061.0 40.01 18.047 40.01 40.231h9.539c0-27.445-22.229-49.77-49.549-49.77v9.539zM16.634 47.741c0 3.648-2.959 6.607-6.607 6.607S3.42 51.39 3.42 47.741c0-3.65 2.958-6.607 6.606-6.607s6.608 2.957 6.608 6.607z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://instagram.com/thiagowfx title="Instagram profile"><svg stroke="currentcolor" fill="currentcolor" stroke-width="0" viewBox="0 -50 448 512" height="1em" width="1em"><path d="M224.1 141c-63.6.0-114.9 51.3-114.9 114.9s51.3 114.9 114.9 114.9S339 319.5 339 256s-51.3-114.9-114.9-114.9zm0 189.6c-41.2.0-74.7-33.5-74.7-74.7s33.5-74.7 74.7-74.7 74.7 33.5 74.7 74.7-33.5 74.7-74.7 74.7zm146.4-194.3c0 14.3-11.6 25.9-25.9 25.9s-25.9-11.6-25.9-25.9 11.6-25.9 25.9-25.9 25.9 11.6 25.9 25.9zM446.6 144.1c-1.5-31.7-8.4-59.8-30.5-81.9S338.2 32 306.5 30.5c-31.6-1.5-128.4-1.5-160 0C114.8 32 86.7 38.9 64.6 61s-29 50.2-30.5 81.9C32 175.7 32 272.5 33.5 304.1 35 335.8 41.9 363.9 64 386s50.2 29 81.9 30.5c31.6 1.5 128.4 1.5 160 0 31.7-1.5 59.8-8.4 81.9-30.5s29-50.2 30.5-81.9c1.5-31.6 1.5-128.4.0-160zM224.1 338c-45.2.0-82-36.8-82-82s36.8-82 82-82 82 36.8 82 82-36.8 82-82 82zm148.6-198.4c-14.3.0-25.9-11.6-25.9-25.9s11.6-25.9 25.9-25.9 25.9 11.6 25.9 25.9-11.6 25.9-25.9 25.9z"/></svg></a></div><a target=_blank href=https://512kb.club title="512kb.club badge"><img src=https://perrotta.dev/green-team.gif alt="a proud member of the green team of 512KB club"></a></footer></body></html>