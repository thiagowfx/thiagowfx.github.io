function setTheme(e){e==="auto"?(document.documentElement.style.colorScheme="light dark",localStorage.removeItem("theme")):(document.documentElement.style.colorScheme=e,localStorage.setItem("theme",e)),updateThemeIcon()}function getCurrentThemeState(){return localStorage.getItem("theme")||"auto"}function updateThemeIcon(){const e=getCurrentThemeState(),t={auto:"ðŸŒ“",dark:"ðŸŒ™",light:"â˜€ï¸"};document.getElementById("theme-toggle-icon").textContent=t[e]}const saved=localStorage.getItem("theme");saved?document.documentElement.style.colorScheme=saved:document.documentElement.style.colorScheme="light dark",updateThemeIcon(),document.getElementById("theme-toggle").addEventListener("click",function(){const t=getCurrentThemeState(),n={auto:"light",light:"dark",dark:"auto"},s=n[t];setTheme(s);const e=this;e.classList.add("spinning"),setTimeout(()=>e.classList.remove("spinning"),600)});const dropdownTriggers=document.querySelectorAll(".nav-dropdown-trigger");dropdownTriggers.forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();const t=this.closest(".nav-dropdown"),n=t.classList.contains("open");document.querySelectorAll(".nav-dropdown.open").forEach(e=>{e.classList.remove("open")}),n||t.classList.add("open")})});const langToggle=document.getElementById("lang-toggle");langToggle&&langToggle.addEventListener("click",function(e){e.preventDefault();const t=this.closest(".lang-dropdown"),n=t.classList.contains("open");document.querySelectorAll(".lang-dropdown.open").forEach(e=>{e.classList.remove("open")}),n||t.classList.add("open")}),document.addEventListener("click",function(e){!e.target.closest(".nav-dropdown")&&!e.target.closest(".lang-dropdown")&&(document.querySelectorAll(".nav-dropdown.open").forEach(e=>{e.classList.remove("open")}),document.querySelectorAll(".lang-dropdown.open").forEach(e=>{e.classList.remove("open")}))}),document.addEventListener("click",function(e){const t=e.target.closest("[data-copy-code]");if(!t)return;const n=t.closest(".codeblock");if(!n)return;const s=n.querySelector("pre code");if(!s)return;const o=s.innerText;if(!navigator.clipboard||!navigator.clipboard.writeText)return;navigator.clipboard.writeText(o).then(function(){t.dataset.originalHtml=t.innerHTML,t.innerHTML='<svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em"><polyline points="20 6 9 17 4 12"></polyline></svg>',setTimeout(function(){t.innerHTML=t.dataset.originalHtml},1500)}).catch(function(){setTimeout(function(){t.innerHTML=t.dataset.originalHtml},1500)})});const readingProgress=document.getElementById("reading-progress");readingProgress&&window.addEventListener("scroll",function(){const t=document.documentElement.scrollTop,e=document.documentElement.scrollHeight-document.documentElement.clientHeight,n=e>0?t/e*100:0;readingProgress.style.width=n+"%"});const fullscreenBtn=document.getElementById("fullscreen-btn"),fullscreenIcon=document.getElementById("fullscreen-icon");if(fullscreenBtn){const n=new URLSearchParams(window.location.search),e=n.has("fullscreen"),t=localStorage.getItem("fullscreen-mode")==="true";if((e||t)&&(document.body.classList.add("fullscreen-mode"),fullscreenIcon.textContent="âœ•",e&&!t&&localStorage.setItem("fullscreen-mode",!0),t&&!e)){const e=new URL(window.location);e.searchParams.set("fullscreen","true"),window.history.replaceState({},"",e)}fullscreenBtn.addEventListener("click",function(){document.body.classList.toggle("fullscreen-mode");const e=document.body.classList.contains("fullscreen-mode");fullscreenIcon.textContent=e?"âœ•":"â›¶",localStorage.setItem("fullscreen-mode",e);const t=new URL(window.location);e?t.searchParams.set("fullscreen","true"):t.searchParams.delete("fullscreen"),window.history.replaceState({},"",t)}),document.addEventListener("keydown",function(e){e.key==="f"&&!e.ctrlKey&&!e.metaKey&&!e.altKey&&(e.target.closest('input:not([type="hidden"]), textarea')||(e.preventDefault(),fullscreenBtn.click()))})}