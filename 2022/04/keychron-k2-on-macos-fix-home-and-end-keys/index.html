<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>★ Keychron K2 on macOS: fix Home and End keys | not just serendipity</title>
<meta name=keywords content="macos,bestof★"><meta name=description content="Issue: For whatever reason, the Home and End keys on my Keychron K2 do not work as intended on macOS."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/><link crossorigin=anonymous href=/assets/css/stylesheet.d6fcd20a4fb86efa4dfac8ec95da60244cc8871042183da1ef28e3a762ad79c8.css integrity="sha256-1vzSCk+4bvpN+sjsldpgJEzIhxBCGD2h7yjjp2Ktecg=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:url" content="https://www.perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="★ Keychron K2 on macOS: fix Home and End keys"><meta property="og:description" content="Issue: For whatever reason, the Home and End keys on my Keychron K2 do not work as intended on macOS."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-04-22T19:04:17-04:00"><meta property="article:modified_time" content="2022-04-22T19:04:17-04:00"><meta property="article:tag" content="Macos"><meta property="article:tag" content="Bestof★"><meta name=twitter:card content="summary"><meta name=twitter:title content="★ Keychron K2 on macOS: fix Home and End keys"><meta name=twitter:description content="Issue: For whatever reason, the Home and End keys on my Keychron K2 do not work as intended on macOS."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"★ Keychron K2 on macOS: fix Home and End keys","item":"https://www.perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"★ Keychron K2 on macOS: fix Home and End keys","name":"★ Keychron K2 on macOS: fix Home and End keys","description":"Issue: For whatever reason, the Home and End keys on my Keychron K2 do not work as intended on macOS.\n","keywords":["macos","bestof★"],"articleBody":"Issue: For whatever reason, the Home and End keys on my Keychron K2 do not work as intended on macOS.\nExpectations vs Reality For example, when using a text editor such as TextMate or a web browser like Chrome, I’d expect:\nHome to position the text cursor in the beginning of the line (à la C-a in emacs) End to position the text cursor in the end of the line (à la C-e in emacs) The only way to provoke these effects out-of-the-box is by pressing, respectively, the Cmd + Left and Cmd + Right shortcuts, as you would normally do in a Macbook laptop native keyboard.\nThis is very annoying because it only happens in macOS1: the Home and End keys work just fine in both Linux and Windows. A reddit user reported the same issue in /r/keychron, but the existing thread has no proposed solutions.\nEnter Karabiner Elements I’ve always heard good things about Karabiner Elements as a praised one-size-fits-all application for keyboards and macros in macOS, thus decided to give it a try. Bonus points: it is open source, released into the public domain.\nUpon installing it with Homebrew Cask (brew install karabiner-elements), I executed it. Then I needed to give a bunch of permissions to the application via macOS Settings \u003e Security \u0026 Privacy \u003e Privacy \u003e Input Monitoring. The following apps were whitelisted accordingly:\nkarabiner_grabber karabiner_observer Karabiner-EventViewer.app: this one is optional, but useful for debugging The app is straightforward to use. It allows you to do all sorts of reactions to key codes input events.\nI had a simple idea: I wanted to map Home to Cmd + Left, and End to Cmd + Right.\nUnfortunately these are considered “Complex modifications” because they map one origin key to two destination keys. “Simple modifications” are one-to-one key mappings. Why is it unfortunate? Because it doesn’t seem to be possible to do such mappings via the app UI. Apparently one needs to express those mappings in a .json file instead.\nAh, communities Sure, no problem, I was about to do it but then I realized there’s an official website for community-maintained mappings. The website is well organized and curated. Why create something fully from scratch when I could just reuse an existing one?\nI found a “Keychron K2” category which made me instantly happy but it turned out not to be useful, as there were only two defined mappings therein:\nChange Keychron K2 keyboard layout to more closely resemble an Apple keyboard Remap some Keychrom K2(US) keys to make it less painful to switch from Macbook(RU) keyboard None of these mattered to me. Then I searched for home to cmd which led me to this entry, which had exactly the mappings I wanted:\nHome and End\nHome to Command Left End to Command Right Its resulting JSON looks roughly like this (irrelevant bits stripped for the sake of brevity):\n{ \"title\": \"Home and End\", \"rules\": [ { \"description\": \"Home to Command Left\", \"manipulators\": [ { \"type\": \"basic\", \"from\": { \"key_code\": \"home\" }, \"to\": [ { \"key_code\": \"left_arrow\", \"modifiers\": \"command\" } ] } ] }, { \"description\": \"End to Command Right\", \"manipulators\": [ { \"type\": \"basic\", \"from\": { \"key_code\": \"end\" }, \"to\": [ { \"key_code\": \"right_arrow\", \"modifiers\": \"command\" } ] } ] } ] } There’s conveniently an Import button in the website though, which automatically opens the mappings in Karabiner Elements, so I didn’t even need to copy and paste the JSON.\nVerdict End Result: It worked flawlessly! The only caveat is that from now on I need to keep the Karabiner Elements application running as a daemon, but it is well justified. Plus, if I ever need2 to map additional keys in the future, now I already have a workflow in place to do so.\nKarabiner is like having QMK purely at the software layer, which works for any keyboard whatsoever.\nAs of this writing: macOS Monterey: 12.3.1. ↩︎\nhttps://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it… ↩︎\n","wordCount":"653","inLanguage":"en","datePublished":"2022-04-22T19:04:17-04:00","dateModified":"2022-04-22T19:04:17-04:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2022/04/keychron-k2-on-macos-fix-home-and-end-keys/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="bestof ★"><span>bestof ★</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">★ Keychron K2 on macOS: fix Home and End keys</h1><div class=post-meta><span title='2022-04-22 19:04:17 -0400 -0400'>April 22, 2022</span>&nbsp;·&nbsp;653 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p><strong>Issue</strong>: For whatever reason, the <code>Home</code> and <code>End</code> keys on my <a href=https://www.perrotta.dev/2022/01/keychron-k2-review/>Keychron K2</a> do not work as intended on macOS.</p><h2 id=expectations-vs-reality>Expectations vs Reality<a hidden class=anchor aria-hidden=true href=#expectations-vs-reality>#</a></h2><p>For example, when using a text editor such as TextMate or a web browser like Chrome, I&rsquo;d expect:</p><ul><li><code>Home</code> to position the text cursor in the beginning of the line (à la <code>C-a</code> in emacs)</li><li><code>End</code> to position the text cursor in the end of the line (à la <code>C-e</code> in emacs)</li></ul><p>The only way to provoke these effects <em>out-of-the-box</em> is by pressing, respectively, the <code>Cmd + Left</code> and <code>Cmd + Right</code> shortcuts, as you would normally do in a Macbook laptop native keyboard.</p><p>This is very annoying because it only happens in macOS<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>: the <code>Home</code> and <code>End</code> keys work just fine in both Linux and Windows. <a href=https://www.reddit.com/r/Keychron/comments/ooice5/home_and_end_keys_not_working_on_monterrey/>A reddit user</a> reported the same issue in <code>/r/keychron</code>, but the existing thread has no proposed solutions.</p><h2 id=enter-karabiner-elements>Enter Karabiner Elements<a hidden class=anchor aria-hidden=true href=#enter-karabiner-elements>#</a></h2><p>I&rsquo;ve always heard good things about <a href=http://karabiner-elements.pqrs.org>Karabiner Elements</a> as a praised one-size-fits-all application for keyboards and macros in macOS, thus decided to give it a try. <strong>Bonus points</strong>: it is <a href=https://github.com/pqrs-org/Karabiner-Elements>open source</a>, released into the public domain.</p><p>Upon installing it with <a href=https://formulae.brew.sh/cask/karabiner-elements>Homebrew Cask</a> (<code>brew install karabiner-elements</code>), I executed it. Then I needed to give a bunch of permissions to the application via <code>macOS Settings > Security & Privacy > Privacy > Input Monitoring</code>. The following apps were whitelisted accordingly:</p><ul><li><code>karabiner_grabber</code></li><li><code>karabiner_observer</code></li><li><code>Karabiner-EventViewer.app</code>: this one is optional, but useful for debugging</li></ul><p>The app is straightforward to use. It allows you to do all sorts of reactions to key codes input events.</p><p>I had a simple idea: I wanted to map <code>Home</code> to <code>Cmd + Left</code>, and <code>End</code> to <code>Cmd + Right</code>.</p><p>Unfortunately these are considered &ldquo;Complex modifications&rdquo; because they map one origin key to two destination keys. &ldquo;Simple modifications&rdquo; are <em>one-to-one</em> key mappings. Why is it unfortunate? Because it doesn&rsquo;t seem to be possible to do such mappings via the app UI. Apparently one needs to express those mappings in a <code>.json</code> file instead.</p><h2 id=ah-communities>Ah, communities<a hidden class=anchor aria-hidden=true href=#ah-communities>#</a></h2><p>Sure, no problem, I was about to do it but then I realized there&rsquo;s an <a href=https://ke-complex-modifications.pqrs.org>official website</a> for community-maintained mappings. The website is well organized and curated. Why create something fully from scratch when I could just reuse an existing one?</p><p>I found a &ldquo;Keychron K2&rdquo; category which made me instantly happy but it turned out not to be useful, as there were only two defined mappings therein:</p><blockquote><ul><li>Change Keychron K2 keyboard layout to more closely resemble an Apple keyboard</li><li>Remap some Keychrom K2(US) keys to make it less painful to switch from Macbook(RU) keyboard</li></ul></blockquote><p>None of these mattered to me. Then I searched for <code>home to cmd</code> which led me to <a href=https://ke-complex-modifications.pqrs.org/#HomeEnd>this entry</a>, which had exactly the mappings I wanted:</p><blockquote><p>Home and End</p><ul><li>Home to Command Left</li><li>End to Command Right</li></ul></blockquote><p><a href=https://ke-complex-modifications.pqrs.org/json/HomeEnd.json>Its resulting JSON</a> looks roughly like this (irrelevant bits stripped for the sake of brevity):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Home and End&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;rules&#34;</span>: [
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;Home to Command Left&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;manipulators&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;basic&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;from&#34;</span>: {
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;key_code&#34;</span>: <span style=color:#e6db74>&#34;home&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;to&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;key_code&#34;</span>: <span style=color:#e6db74>&#34;left_arrow&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;modifiers&#34;</span>: <span style=color:#e6db74>&#34;command&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          ]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    {
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;description&#34;</span>: <span style=color:#e6db74>&#34;End to Command Right&#34;</span>,
</span></span><span style=display:flex><span>      <span style=color:#f92672>&#34;manipulators&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;type&#34;</span>: <span style=color:#e6db74>&#34;basic&#34;</span>,
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;from&#34;</span>: {
</span></span><span style=display:flex><span>              <span style=color:#f92672>&#34;key_code&#34;</span>: <span style=color:#e6db74>&#34;end&#34;</span>
</span></span><span style=display:flex><span>            },
</span></span><span style=display:flex><span>          <span style=color:#f92672>&#34;to&#34;</span>: [
</span></span><span style=display:flex><span>            {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;key_code&#34;</span>: <span style=color:#e6db74>&#34;right_arrow&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;modifiers&#34;</span>: <span style=color:#e6db74>&#34;command&#34;</span>
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>          ]
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>      ]
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>There&rsquo;s conveniently an <strong>Import</strong> button in the website though, which automatically opens the mappings in Karabiner Elements, so I didn&rsquo;t even need to copy and paste the JSON.</p><h2 id=verdict>Verdict<a hidden class=anchor aria-hidden=true href=#verdict>#</a></h2><p><strong>End Result</strong>: It worked flawlessly! The only caveat is that from now on I need to keep the Karabiner Elements application running as a daemon, but it is well justified. Plus, if I ever need<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> to map additional keys in the future, now I already have a workflow in place to do so.</p><p>Karabiner is like having <a href=https://qmk.fm>QMK</a> purely at the software layer, which works for any keyboard whatsoever.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>As of this writing: macOS Monterey: 12.3.1.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p><a href=https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it>https://en.wikipedia.org/wiki/You_aren%27t_gonna_need_it</a>&mldr;&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/macos/>Macos</a></li><li><a href=https://www.perrotta.dev/tags/bestof/>Bestof★</a></li></ul></footer></article></main><footer class=footer><span>Copyright © 2021 - 2025 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a> · Made with ♥ in 🇨🇦</span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>