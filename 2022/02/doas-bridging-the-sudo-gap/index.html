<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>Doas: bridging the sudo gap | not just serendipity</title>
<meta name=title content="Doas: bridging the sudo gap"><meta name=description content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo>
$ doas apt install <foo>
doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:

doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community."><meta name=keywords content="linux,"><meta property="og:url" content="https://perrotta.dev/2022/02/doas-bridging-the-sudo-gap/"><meta property="og:site_name" content="not just serendipity"><meta property="og:title" content="Doas: bridging the sudo gap"><meta property="og:description" content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo> $ doas apt install <foo> doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:
doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-07T14:49:03-05:00"><meta property="article:modified_time" content="2022-02-07T14:49:03-05:00"><meta property="article:tag" content="Linux"><meta name=twitter:card content="summary"><meta name=twitter:title content="Doas: bridging the sudo gap"><meta name=twitter:description content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo> $ doas apt install <foo> doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:
doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community."><meta itemprop=name content="Doas: bridging the sudo gap"><meta itemprop=description content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo> $ doas apt install <foo> doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:
doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community."><meta itemprop=datePublished content="2022-02-07T14:49:03-05:00"><meta itemprop=dateModified content="2022-02-07T14:49:03-05:00"><meta itemprop=wordCount content="412"><meta itemprop=keywords content="Linux"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;margin:auto;padding:20px;max-width:720px;text-align:left;background-color:#fffcf0;word-wrap:break-word;overflow-wrap:break-word;line-height:1.5;color:#444}h1,h2,h3,h4,h5,h6,strong,b{color:#222}h1,h2,h3,h4,h5,h6,footer,nav{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}footer{font-size:small}a{color:#3273dc}.title{text-decoration:none;border:0}.title span{font-weight:400}nav a{margin-right:10px}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.6}table{width:100%}img{max-width:100%}code{padding:2px 5px;background-color:#f2f2f2}li code,p code{font-size:small}pre code{color:#222;display:block;padding:20px;white-space:pre;font-size:14px;overflow-x:auto}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}div.highlight pre{background-color:initial;color:initial}div.highlight code{background-color:unset;color:unset}blockquote{border-left:1px solid #999;color:#222;padding-left:20px;font-style:italic}footer{padding:25px;text-align:center}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}@media(prefers-color-scheme:dark){body{background-color:#01242e;color:#ddd}h1,h2,h3,h4,h5,h6,strong,b{color:#eee}a{color:#8cc2dd}code{background-color:#444}pre code{color:#ddd}blockquote{color:#ccc}textarea,input{background-color:#252525;color:#ddd}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.png></head><body><header><a href=/ class=title><h2>not just serendipity</h2></a><nav><a href=/>Home</a>
<a href=/posts/>Blog</a>
<a href=/tags/bestof/>★</a></nav></header><main><h1>Doas: bridging the sudo gap</h1><p><i><time datetime=2022-02-07 pubdate>07 Feb, 2022
</time>• 412 words</i></p><content><p><a href=https://man.openbsd.org/doas><code>doas</code></a> is a lightweight and safer replacement for <code>sudo</code>. In most occasions you invoke it exactly like <code>sudo</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo apt install &lt;foo&gt;
</span></span><span style=display:flex><span>$ doas apt install &lt;foo&gt;
</span></span></code></pre></div><p><code>doas</code> has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also <a href=https://wiki.alpinelinux.org/wiki/Release_Notes_for_Alpine_3.15.0#Move_from_sudo_to_doas>switched to it</a>:</p><blockquote><p><code>doas</code> is the default temporary privilege escalation tool. You are advised to migrate from <code>sudo</code> to <code>doas</code> as 3.15 will be the last release to support <code>sudo</code> throughout its full lifecycle, in 3.16 <code>sudo</code> will be moved from main to community.</p></blockquote><p>It&rsquo;s not very difficult to get used to it, however you may still find yourself writing <code>sudo</code> occasionally. This post highlights a few ways to bridge that gap.</p><h2 id=use-a-shell-alias>Use a shell alias</h2><p>In your <code>~/.bashrc</code> or <code>~/.zshrc</code> or in your favorite shell, do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>alias sudo<span style=color:#f92672>=</span>doas
</span></span></code></pre></div><p>Caveat: Besides being an user-dependent workaround<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, <code>doas</code> isn&rsquo;t really a full drop-in replacement to <code>sudo</code>. This workaround will work in most day-to-day situations but it will obviously not support most <code>sudo</code> specific flags.</p><h2 id=use-a-shimwrapper-recommended>Use a shim/wrapper (recommended)</h2><p>Alpine Linux provides a <a href=https://pkgs.alpinelinux.org/package/edge/community/x86_64/doas-sudo-shim><code>doas-sudo-shim</code></a> package:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ doas apk add doas-sudo-shim
</span></span></code></pre></div><blockquote><p>This is a shim for the <code>sudo</code> command that utilizes <code>doas</code>. It supports only a subset of the <code>sudo</code> options (both short and long variants) that have an equivalent in <code>doas</code>, plus option <code>-i</code> (<code>--login</code>).</p></blockquote><p>This is a slightly better solution, as this thin wrapper is aware of some <code>sudo</code> flags, translating them to the equivalent <code>doas</code> ones; furthermore, it works out-of-the-box and it&rsquo;s system-wide. As an added bonus, it&rsquo;s implemented entirely in shell script, being as much portable as possible.</p><h2 id=final-remarks>Final remarks</h2><p>Last but not least, you could choose to install <code>sudo</code> and configure it, keeping both <code>doas</code> and <code>sudo</code>, but what&rsquo;s the point? If your system favours <code>doas</code>, stick to <code>doas</code>. There&rsquo;s no need to unnecessarily increase complexity by keeping around two programs that serve exactly the same purpose.</p><p>If you don&rsquo;t like or want <code>doas</code> for some reason, you could look into the other way around: find a <code>doas</code> shim that bridges to <code>sudo</code>, or define an alias: <code>$ alias doas=sudo</code>.</p><p>The best long-term solution though would be to just use <code>doas</code> without any alias or shim, but our muscle memory may have trouble adapting to that, especially when <code>sudo</code> is still the <em>de facto standard</em> in most Linux distributions out there these days.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>To make it system-wide, change the relevant file in <code>/etc</code>: for example, <code>/etc/bashrc</code> for <code>bash</code>. I would advise against it though.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p><a href=https://perrotta.dev/tags/linux/>#linux</a></p></main><footer><span>© 2021 - 2025 <a href=mailto:tbperrotta@gmail.com>Thiago Perrotta</a> <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>Some Rights Reserved</a> · <a href=/index.xml>RSS</a> · a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo ʕ•ᴥ•ʔ bear</a></span></footer></body></html>