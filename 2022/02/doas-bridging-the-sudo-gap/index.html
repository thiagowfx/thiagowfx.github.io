<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Doas: bridging the sudo gap | Not Just Serendipity</title>
<meta name=keywords content="linux"><meta name=description content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo>
$ doas apt install <foo>
doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:

doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community.

It&rsquo;s not very difficult to get used to it, however you may still find yourself writing sudo occasionally. This post highlights a few ways to bridge that gap."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2022/02/doas-bridging-the-sudo-gap/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2022/02/doas-bridging-the-sudo-gap/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Doas: bridging the sudo gap"><meta property="og:description" content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo>
$ doas apt install <foo>
doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:

doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community.

It&rsquo;s not very difficult to get used to it, however you may still find yourself writing sudo occasionally. This post highlights a few ways to bridge that gap."><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2022/02/doas-bridging-the-sudo-gap/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-07T14:49:03-05:00"><meta property="article:modified_time" content="2022-02-07T14:49:03-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Doas: bridging the sudo gap"><meta name=twitter:description content="doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:
$ sudo apt install <foo>
$ doas apt install <foo>
doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:

doas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community.

It&rsquo;s not very difficult to get used to it, however you may still find yourself writing sudo occasionally. This post highlights a few ways to bridge that gap."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"Doas: bridging the sudo gap","item":"https://www.perrotta.dev/2022/02/doas-bridging-the-sudo-gap/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Doas: bridging the sudo gap","name":"Doas: bridging the sudo gap","description":"doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:\n$ sudo apt install \u0026lt;foo\u0026gt; $ doas apt install \u0026lt;foo\u0026gt; doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:\ndoas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community.\nIt\u0026rsquo;s not very difficult to get used to it, however you may still find yourself writing sudo occasionally. This post highlights a few ways to bridge that gap.\n","keywords":["linux"],"articleBody":"doas is a lightweight and safer replacement for sudo. In most occasions you invoke it exactly like sudo:\n$ sudo apt install $ doas apt install doas has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also switched to it:\ndoas is the default temporary privilege escalation tool. You are advised to migrate from sudo to doas as 3.15 will be the last release to support sudo throughout its full lifecycle, in 3.16 sudo will be moved from main to community.\nIt’s not very difficult to get used to it, however you may still find yourself writing sudo occasionally. This post highlights a few ways to bridge that gap.\nUse a shell alias In your ~/.bashrc or ~/.zshrc or in your favorite shell, do:\nalias sudo=doas Caveat: Besides being an user-dependent workaround1, doas isn’t really a full drop-in replacement to sudo. This workaround will work in most day-to-day situations but it will obviously not support most sudo specific flags.\nUse a shim/wrapper (recommended) Alpine Linux provides a doas-sudo-shim package:\n$ doas apk add doas-sudo-shim This is a shim for the sudo command that utilizes doas. It supports only a subset of the sudo options (both short and long variants) that have an equivalent in doas, plus option -i (--login).\nThis is a slightly better solution, as this thin wrapper is aware of some sudo flags, translating them to the equivalent doas ones; furthermore, it works out-of-the-box and it’s system-wide. As an added bonus, it’s implemented entirely in shell script, being as much portable as possible.\nFinal remarks Last but not least, you could choose to install sudo and configure it, keeping both doas and sudo, but what’s the point? If your system favours doas, stick to doas. There’s no need to unnecessarily increase complexity by keeping around two programs that serve exactly the same purpose.\nIf you don’t like or want doas for some reason, you could look into the other way around: find a doas shim that bridges to sudo, or define an alias: $ alias doas=sudo.\nThe best long-term solution though would be to just use doas without any alias or shim, but our muscle memory may have trouble adapting to that, especially when sudo is still the de facto standard in most Linux distributions out there these days.\nTo make it system-wide, change the relevant file in /etc: for example, /etc/bashrc for bash. I would advise against it though. ↩︎\n","wordCount":"412","inLanguage":"en","datePublished":"2022-02-07T14:49:03-05:00","dateModified":"2022-02-07T14:49:03-05:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2022/02/doas-bridging-the-sudo-gap/"},"publisher":{"@type":"Person","name":"Not Just Serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="Not Just Serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>Not Just Serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title=bestof><span>bestof</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Doas: bridging the sudo gap</h1><div class=post-meta><span title='2022-02-07 14:49:03 -0500 -0500'>February 7, 2022</span>&nbsp;·&nbsp;412 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p><a href=https://man.openbsd.org/doas><code>doas</code></a> is a lightweight and safer replacement for <code>sudo</code>. In most occasions you invoke it exactly like <code>sudo</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo apt install &lt;foo&gt;
</span></span><span style=display:flex><span>$ doas apt install &lt;foo&gt;
</span></span></code></pre></div><p><code>doas</code> has gained popularity recently. Besides being the default in OpenBSD, Alpine Linux 3.15 (released last year) has also <a href=https://wiki.alpinelinux.org/wiki/Release_Notes_for_Alpine_3.15.0#Move_from_sudo_to_doas>switched to it</a>:</p><blockquote><p><code>doas</code> is the default temporary privilege escalation tool. You are advised to migrate from <code>sudo</code> to <code>doas</code> as 3.15 will be the last release to support <code>sudo</code> throughout its full lifecycle, in 3.16 <code>sudo</code> will be moved from main to community.</p></blockquote><p>It&rsquo;s not very difficult to get used to it, however you may still find yourself writing <code>sudo</code> occasionally. This post highlights a few ways to bridge that gap.</p><h2 id=use-a-shell-alias>Use a shell alias<a hidden class=anchor aria-hidden=true href=#use-a-shell-alias>#</a></h2><p>In your <code>~/.bashrc</code> or <code>~/.zshrc</code> or in your favorite shell, do:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>alias sudo<span style=color:#f92672>=</span>doas
</span></span></code></pre></div><p>Caveat: Besides being an user-dependent workaround<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, <code>doas</code> isn&rsquo;t really a full drop-in replacement to <code>sudo</code>. This workaround will work in most day-to-day situations but it will obviously not support most <code>sudo</code> specific flags.</p><h2 id=use-a-shimwrapper-recommended>Use a shim/wrapper (recommended)<a hidden class=anchor aria-hidden=true href=#use-a-shimwrapper-recommended>#</a></h2><p>Alpine Linux provides a <a href=https://pkgs.alpinelinux.org/package/edge/community/x86_64/doas-sudo-shim><code>doas-sudo-shim</code></a> package:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ doas apk add doas-sudo-shim
</span></span></code></pre></div><blockquote><p>This is a shim for the <code>sudo</code> command that utilizes <code>doas</code>. It supports only a subset of the <code>sudo</code> options (both short and long variants) that have an equivalent in <code>doas</code>, plus option <code>-i</code> (<code>--login</code>).</p></blockquote><p>This is a slightly better solution, as this thin wrapper is aware of some <code>sudo</code> flags, translating them to the equivalent <code>doas</code> ones; furthermore, it works out-of-the-box and it&rsquo;s system-wide. As an added bonus, it&rsquo;s implemented entirely in shell script, being as much portable as possible.</p><h2 id=final-remarks>Final remarks<a hidden class=anchor aria-hidden=true href=#final-remarks>#</a></h2><p>Last but not least, you could choose to install <code>sudo</code> and configure it, keeping both <code>doas</code> and <code>sudo</code>, but what&rsquo;s the point? If your system favours <code>doas</code>, stick to <code>doas</code>. There&rsquo;s no need to unnecessarily increase complexity by keeping around two programs that serve exactly the same purpose.</p><p>If you don&rsquo;t like or want <code>doas</code> for some reason, you could look into the other way around: find a <code>doas</code> shim that bridges to <code>sudo</code>, or define an alias: <code>$ alias doas=sudo</code>.</p><p>The best long-term solution though would be to just use <code>doas</code> without any alias or shim, but our muscle memory may have trouble adapting to that, especially when <code>sudo</code> is still the <em>de facto standard</em> in most Linux distributions out there these days.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>To make it system-wide, change the relevant file in <code>/etc</code>: for example, <code>/etc/bashrc</code> for <code>bash</code>. I would advise against it though.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/linux/>Linux</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: Not%20Just%20Serendipity comment for 'Doas%3a%20bridging%20the%20sudo%20gap'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta • <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a> •</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>