<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>★ Wayland: from i3 to sway | Not Just Serendipity</title>
<meta name=keywords content="linux,bestof"><meta name=description content="I&rsquo;ve been giving Wayland a try. My window manager of choice in X11/Xorg is i3, so the natural choice in Wayland is sway."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2022/02/wayland-from-i3-to-sway/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2022/02/wayland-from-i3-to-sway/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="★ Wayland: from i3 to sway"><meta property="og:description" content="I&rsquo;ve been giving Wayland a try. My window manager of choice in X11/Xorg is i3, so the natural choice in Wayland is sway."><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2022/02/wayland-from-i3-to-sway/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-02-19T19:18:25-05:00"><meta property="article:modified_time" content="2022-02-19T19:18:25-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="★ Wayland: from i3 to sway"><meta name=twitter:description content="I&rsquo;ve been giving Wayland a try. My window manager of choice in X11/Xorg is i3, so the natural choice in Wayland is sway."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"★ Wayland: from i3 to sway","item":"https://www.perrotta.dev/2022/02/wayland-from-i3-to-sway/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"★ Wayland: from i3 to sway","name":"★ Wayland: from i3 to sway","description":"I\u0026rsquo;ve been giving Wayland a try. My window manager of choice in X11/Xorg is i3, so the natural choice in Wayland is sway.\n","keywords":["linux","bestof"],"articleBody":"I’ve been giving Wayland a try. My window manager of choice in X11/Xorg is i3, so the natural choice in Wayland is sway.\nIntro sway works well with the i3 config out-of-the-box. A few adjustments were necessary for full compatibility. To maximize code reuse, I went with the following structure:\n$ tree ~/.config/{i3,sway} /home/typhoon/.config/i3 ├── conf.d │ └── i3.conf └── config /home/typhoon/.config/sway ├── conf.d │ └── sway.conf └── config -\u003e ../../../i3/.config/i3/config The master config is ~/.config/i3/config. It is pretty standard, generated by i3-config-wizard with a few tweaks on top for my own workflow. It works for both i3 and sway. The config contains this snippet: # Load user configs if existing. Order is important. include conf.d/*.conf The snippet allows drop-in customizations to live in conf.d. The include directive is a relatively new addition to the i3config syntax and it’s the main reason this setup is elegant and minimalist.\ni3-only config options live in ~/.config/i3/conf.d/i3.conf. To give you an idea of what it looks like and which options aren’t compatible with sway, here’s a snapshot of my config in early 2022: # i3(1) only config file # Commands herein are not compatible or interoperable with sway(1) # Reference: https://i3wm.org/docs/userguide.html # Autostart XDG applications (.desktop files). # https://wiki.archlinux.org/title/XDG_Autostart # # Troubleshooting: # dex -ade i3 exec dex --autostart --environment i3 # lock screen, Ctrl+Alt+l (systemd) exec --no-startup-id xss-lock -l -- i3lock -c 222222 bindsym Ctrl+Mod1+l exec loginctl lock-session # XF86AudioPlayPause is not recognized by sway, add it only to i3 # https://github.com/swaywm/sway/issues/4783 bindsym XF86AudioPlayPause exec playerctl play-pause # show window title icon for_window [all] title_window_icon on set $bgcolor #526532 set_from_resource $black i3.color0 set_from_resource $red i3.color1 set_from_resource $green i3.color2 set_from_resource $white i3.color7 set_from_resource $gray i3.color8 # Theme colors client.focused $bgcolor $bgcolor $white $green client.focused_inactive $gray $gray $black $gray client.unfocused $black $black $gray $black client.urgent $red $red $white $red # Start i3bar to display a workspace and status bar bar { status_command i3status position top workspace_min_width 25 colors { background $black statusline $white focused_workspace $bgcolor $bgcolor $white $black active_workspace $gray $gray $black $gray inactive_workspace $black $black $gray $gray urgent_workspace $red $red $white $green } } # restart i3 inplace (preserves layout/session, can be used to upgrade i3) bindsym $mod+Shift+r restart # vim: ft=i3config It’s possible some of these configs will become compatible with sway over time, but at the time of this writing they are not.\nsway-only config options live in ~/.config/sway/conf.d/sway.conf. To give you an idea of what it looks like and which options aren’t compatible with i3, here’s a snapshot of my config in early 2022: # sway(1) only config file # Commands herein are not compatible or interoperable with i3(1) # References: # sway(5) # https://github.com/swaywm/sway/wiki # https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway # HiDPI output \"*\" scale 1.5 # Wallpaper output \"*\" bg ~/.wallpaper fill # Gaps a la i3-gaps gaps inner 10 # XF86AudioPlayPause is not recognized by sway: xmodmap -pke | grep XF86AudioPlay # https://github.com/swaywm/sway/issues/4783 bindcode 172 exec playerctl play-pause # Start i3bar to display a workspace and status bar bar { status_command i3status position top workspace_min_width 25 } # restart i3 inplace (preserves layout/session, can be used to upgrade i3) bindsym $mod+Shift+r exec sway reload # vim: ft=i3config Most of those are wayland-specific options.\nQuirks gaps is available in i3 as well but only if you use i3-gaps, which generally I refuse to in order to stay closer to vanilla/upstream i3.\nThe play-pause multimedia key is a bug I found on sway. It’s quite annoying, the workaround as you can see above is to use bindcode instead of bindsym. For more details see the bug.\nIn general sway works very well out-of-the-box so long as you install XWayland (xorg-xwayland on Arch Linux). XWayland transparently proxies X11 apps to a X11 server that runs inside wayland.\nIt’s possible to detect those apps by running xprop and trying to click a window: If you cannot do it, then the window is not a X11 app. Alternatively xeyes is another way to detect them.\nTo achieve a 100% Xorg/X11-free experience with pure wayland, just add xwayland disable to the sway config. I wouldn’t recommend that though, most Linux GUI apps aren’t Wayland ready and will probably never be. To put it another way, X11/Xorg will take a long time (if ever) to disappear the same way that IPv4 will take a long time (if ever) to let IPv6 completely replace it. That’s life.\nX11 apps look a bit blurry in a 4K monitor with scaled DPI (\u003e96) when they run inside Wayland with XWayland. I am not particularly bothered by that, but it’s noticeable.\nThere’s no need to replace all of your small i3 Xorg utilities with wayland ones. For example, rofi (application launcher) works just fine (no need for wofi). The stock i3 bar (sway bar?) works just fine, there’s no need for polybar or waybar.\nSome utilities need to be replaced though. For example, dunst (notification daemon) does not seem to work with sway out-of-the-box, mako seems to be a recommended replacement. i3lock (lock screen) also does not work, sway comes with its own screen lock directives. Screenshotters (e.g. scrot) will also need to be replaced.\nThe system tray does not seem to work fine out-of-the-box. I haven’t investigated much to figure out what’s wrong with it.\nI was looking for a display manager that works well with both X11 and Xorg and ended up trying greetd, emptty and ly, in that order. ly is in my opinion the best one in terms of balancing simplicity and usefulness.\nsway / XWayland doesn’t source ~/.Xresources. This is an issue if you rely on customizations therein. It does source ~/.Xdefaults though! Leveraging this, I did the following changes:\n(i) ~/.Xresources sources ~/.Xdefaults: $ cat ~/.Xresources ! These settings apply to X11 only. ! Use ~/.Xdefaults for settings that apply to both X11 and Wayland (xorg-xwayland). #include \".Xdefaults\" ! Source: ! xrdb -merge ~/.Xresources ! ! Dump all properties: ! xrdb -q ! ! Check if DPI is set: ! xrdb -q | grep -i dpi ! HiDPI ! Common values: ! 96 (x1.0, baseline) ! 144 (x1.5) ! 192 (x2.0, HiDPI) *.dpi: 144 (ii) ~/.Xdefaults holds my customizations that originally lived in ~/.Xresources: $ cat ~/.Xdefaults ! These settings apply to both X11 and Wayland (xorg-xwayland). ! Use ~/.Xresources for X11-only settings. Xft.antialias: true Xft.hinting: true ... In principle I could just have symlinked them:\n$ ln -s ~/.Xresources ~/.Xdefaults The reason why I didn’t do it is to avoid double scaling (DPI). You see, my sway config already sets DPI / scaling to 1.5x. If we do that in ~/.Xdefaults as well then Xorg applications would have been scaled twice.\nClosing remarks In general Wayland / sway works reasonably well out-of-the-box in 2022, but tiny adjustments are still necessary, and it isn’t as polished as it could have been. Furthermore, my workflow is very simple. Try sharing your screen in a video call in Wayland and you’ll run into other quirks. I have mixed feelings and wouldn’t necessarily recommend it. I wouldn’t give an anti recommendation either. It’s complicated…even though Wayland is supposed to overcome some X11 / Xorg limitations, as a client and without knowing its internals I fail to see its advantages.\n","wordCount":"1200","inLanguage":"en","datePublished":"2022-02-19T19:18:25-05:00","dateModified":"2022-02-19T19:18:25-05:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2022/02/wayland-from-i3-to-sway/"},"publisher":{"@type":"Person","name":"Not Just Serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="Not Just Serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>Not Just Serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title=bestof><span>bestof</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>★ Wayland: from i3 to sway</h1><div class=post-meta><span title='2022-02-19 19:18:25 -0500 -0500'>February 19, 2022</span>&nbsp;·&nbsp;1200 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>I&rsquo;ve been giving Wayland a try. My window manager of choice in X11/Xorg is <a href=https://i3wm.org/><code>i3</code></a>, so the natural choice in Wayland is <a href=https://swaywm.org/><code>sway</code></a>.</p><h2 id=intro>Intro<a hidden class=anchor aria-hidden=true href=#intro>#</a></h2><p><code>sway</code> works well with the <code>i3</code> config out-of-the-box. A few adjustments were necessary for full compatibility. To maximize code reuse, I went with the following structure:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ tree ~/.config/<span style=color:#f92672>{</span>i3,sway<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>/home/typhoon/.config/i3
</span></span><span style=display:flex><span>├── conf.d
</span></span><span style=display:flex><span>│   └── i3.conf
</span></span><span style=display:flex><span>└── config
</span></span><span style=display:flex><span>/home/typhoon/.config/sway
</span></span><span style=display:flex><span>├── conf.d
</span></span><span style=display:flex><span>│   └── sway.conf
</span></span><span style=display:flex><span>└── config -&gt; ../../../i3/.config/i3/config
</span></span></code></pre></div><ul><li>The master config is
<a href=https://github.com/thiagowfx/.dotfiles/blob/master/i3/.config/i3/config><code>~/.config/i3/config</code></a>.
It is pretty standard, generated by
<a href=https://build.i3wm.org/docs/i3-config-wizard.html><code>i3-config-wizard</code></a> with
a few tweaks on top for my own workflow. It works for both <code>i3</code> and <code>sway</code>.
The config contains this snippet:</li></ul><pre tabindex=0><code># Load user configs if existing. Order is important.
include conf.d/*.conf
</code></pre><p>The snippet allows drop-in customizations to live in <code>conf.d</code>. The <code>include</code> directive is a relatively <a href=https://github.com/i3/i3/pull/4420>new</a> addition to the i3config syntax and it&rsquo;s the main reason this setup is elegant and minimalist.</p><ul><li>i3-only config options live in <a href=https://github.com/thiagowfx/.dotfiles/blob/master/i3/.config/i3/conf.d/i3.conf><code>~/.config/i3/conf.d/i3.conf</code></a>. To give you an idea of what it looks like and which options aren&rsquo;t compatible with <code>sway</code>, here&rsquo;s a snapshot of my config in early 2022:</li></ul><pre tabindex=0><code class=language-conf data-lang=conf># i3(1) only config file
# Commands herein are not compatible or interoperable with sway(1)
# Reference: https://i3wm.org/docs/userguide.html

# Autostart XDG applications (.desktop files).
# https://wiki.archlinux.org/title/XDG_Autostart
#
# Troubleshooting:
#   dex -ade i3
exec dex --autostart --environment i3

# lock screen, Ctrl+Alt+l (systemd)
exec --no-startup-id xss-lock -l -- i3lock -c 222222
bindsym Ctrl+Mod1+l exec loginctl lock-session

# XF86AudioPlayPause is not recognized by sway, add it only to i3
# https://github.com/swaywm/sway/issues/4783
bindsym XF86AudioPlayPause exec playerctl play-pause

# show window title icon
for_window [all] title_window_icon on

set $bgcolor #526532
set_from_resource $black i3.color0
set_from_resource $red i3.color1
set_from_resource $green i3.color2
set_from_resource $white i3.color7
set_from_resource $gray i3.color8

# Theme colors
client.focused $bgcolor $bgcolor $white $green
client.focused_inactive $gray $gray $black $gray
client.unfocused $black $black $gray $black
client.urgent $red $red $white $red

# Start i3bar to display a workspace and status bar
bar {
    status_command i3status
    position top
    workspace_min_width 25

    colors {
        background $black
        statusline $white

        focused_workspace $bgcolor $bgcolor $white $black
        active_workspace $gray $gray $black $gray
        inactive_workspace $black $black $gray $gray
        urgent_workspace $red $red $white $green
    }
}

# restart i3 inplace (preserves layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart

# vim: ft=i3config
</code></pre><p>It&rsquo;s possible some of these configs will become compatible with <code>sway</code> over time, but at the time of this writing they are not.</p><ul><li>sway-only config options live in <a href=https://github.com/thiagowfx/.dotfiles/blob/master/sway/.config/sway/conf.d/sway.conf><code>~/.config/sway/conf.d/sway.conf</code></a>. To give you an idea of what it looks like and which options aren&rsquo;t compatible with i3, here&rsquo;s a snapshot of my config in early 2022:</li></ul><pre tabindex=0><code class=language-conf data-lang=conf># sway(1) only config file
# Commands herein are not compatible or interoperable with i3(1)
# References:
#   sway(5)
#   https://github.com/swaywm/sway/wiki
#   https://github.com/swaywm/sway/wiki/Useful-add-ons-for-sway

# HiDPI
output &#34;*&#34; scale 1.5

# Wallpaper
output &#34;*&#34; bg ~/.wallpaper fill

# Gaps a la i3-gaps
gaps inner 10

# XF86AudioPlayPause is not recognized by sway: xmodmap -pke | grep XF86AudioPlay
# https://github.com/swaywm/sway/issues/4783
bindcode 172 exec playerctl play-pause

# Start i3bar to display a workspace and status bar
bar {
    status_command i3status
    position top
    workspace_min_width 25
}

# restart i3 inplace (preserves layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r exec sway reload

# vim: ft=i3config
</code></pre><p>Most of those are wayland-specific options.</p><h2 id=quirks>Quirks<a hidden class=anchor aria-hidden=true href=#quirks>#</a></h2><p><code>gaps</code> is available in <code>i3</code> as well but only if you use
<a href=https://github.com/Airblader/i3><code>i3-gaps</code></a>, which generally I refuse to in
order to stay closer to vanilla/upstream <code>i3</code>.</p><p>The <code>play-pause</code> multimedia key is
a <a href=https://github.com/swaywm/sway/issues/4783>bug</a> I found on <code>sway</code>. It&rsquo;s quite
annoying, the workaround as you can see above is to use <code>bindcode</code> instead of
<code>bindsym</code>. For more details see the bug.</p><p>In general <code>sway</code> works very well out-of-the-box so long as you install
<a href=https://wayland.freedesktop.org/xserver.html>XWayland</a> (<code>xorg-xwayland</code> on
Arch Linux). XWayland <strong>transparently</strong> proxies X11 apps to a X11 server that
runs inside wayland.</p><p>It&rsquo;s possible to detect those apps by running
<a href=https://www.x.org/releases/X11R7.5/doc/man/man1/xprop.1.html><code>xprop</code></a> and
trying to click a window: If you cannot do it, then the window is not a X11
app. Alternatively
<a href=https://unix.stackexchange.com/questions/162769/what-is-the-purpose-of-xeyes><code>xeyes</code></a>
is another way to detect them.</p><p>To achieve a 100% Xorg/X11-free experience with pure wayland, just add
<code>xwayland disable</code> to the <code>sway</code> config. I wouldn&rsquo;t recommend that though, most
Linux GUI apps aren&rsquo;t Wayland ready and will probably never be. To put it
another way, X11/Xorg will take a long time (if ever) to disappear the same way
that IPv4 will take a long time (if ever) to let IPv6 completely replace it.
That&rsquo;s life.</p><p>X11 apps look a bit blurry in a 4K monitor with scaled DPI (>96) when they run
inside Wayland with XWayland. I am not particularly bothered by that, but it&rsquo;s
noticeable.</p><p>There&rsquo;s no need to replace all of your small <code>i3</code> Xorg utilities with wayland
ones. For example, <a href=https://github.com/davatorium/rofi><code>rofi</code></a> (application
launcher) works just fine (no need for <code>wofi</code>). The stock <code>i3</code> bar (<code>sway</code> bar?)
works just fine, there&rsquo;s no need for <code>polybar</code> or <code>waybar</code>.</p><p>Some utilities need to be replaced though. For example, <code>dunst</code> (notification
daemon) does not seem to work with <code>sway</code> out-of-the-box, <code>mako</code> seems to be a
recommended replacement. <code>i3lock</code> (lock screen) also does not work, <code>sway</code>
comes with its own screen lock directives. Screenshotters (e.g. <code>scrot</code>) will
also need to be replaced.</p><p>The system tray does not seem to work fine out-of-the-box. I haven&rsquo;t
investigated much to figure out what&rsquo;s wrong with it.</p><p>I was looking for a display manager that works well with both X11 and Xorg and
ended up trying <a href=https://git.sr.ht/~kennylevinsen/greetd><code>greetd</code></a>,
<a href=https://github.com/tvrzna/emptty/><code>emptty</code></a> and
<a href=https://github.com/fairyglade/ly><code>ly</code></a>, in that order. <code>ly</code> is in my opinion
the best one in terms of balancing simplicity and usefulness.</p><p><code>sway</code> / <code>XWayland</code> doesn&rsquo;t source <code>~/.Xresources</code>. This is an issue if you
rely on customizations therein. It does source <code>~/.Xdefaults</code> though!
Leveraging this, I did the following changes:</p><ul><li>(i) <code>~/.Xresources</code> sources <code>~/.Xdefaults</code>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ cat ~/.Xresources
</span></span><span style=display:flex><span>! These settings apply to X11 only.
</span></span><span style=display:flex><span>! Use ~/.Xdefaults <span style=color:#66d9ef>for</span> settings that apply to both X11 and Wayland <span style=color:#f92672>(</span>xorg-xwayland<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span><span style=color:#75715e>#include &#34;.Xdefaults&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>! Source:
</span></span><span style=display:flex><span>!   xrdb -merge ~/.Xresources
</span></span><span style=display:flex><span>!
</span></span><span style=display:flex><span>! Dump all properties:
</span></span><span style=display:flex><span>!   xrdb -q
</span></span><span style=display:flex><span>!
</span></span><span style=display:flex><span>! Check <span style=color:#66d9ef>if</span> DPI is set:
</span></span><span style=display:flex><span>!   xrdb -q | grep -i dpi
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>! HiDPI
</span></span><span style=display:flex><span>! Common values:
</span></span><span style=display:flex><span>!   <span style=color:#ae81ff>96</span>  <span style=color:#f92672>(</span>x1.0, baseline<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>!   <span style=color:#ae81ff>144</span> <span style=color:#f92672>(</span>x1.5<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>!   <span style=color:#ae81ff>192</span> <span style=color:#f92672>(</span>x2.0, HiDPI<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>*.dpi: <span style=color:#ae81ff>144</span>
</span></span></code></pre></div><ul><li>(ii) <code>~/.Xdefaults</code> holds my customizations that originally lived in <code>~/.Xresources</code>:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ cat ~/.Xdefaults
</span></span><span style=display:flex><span>! These settings apply to both X11 and Wayland <span style=color:#f92672>(</span>xorg-xwayland<span style=color:#f92672>)</span>.
</span></span><span style=display:flex><span>! Use ~/.Xresources <span style=color:#66d9ef>for</span> X11-only settings.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Xft.antialias: true
</span></span><span style=display:flex><span>Xft.hinting: true
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>In principle I could just have symlinked them:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ ln -s ~/.Xresources ~/.Xdefaults
</span></span></code></pre></div><p>The reason why I didn&rsquo;t do it is to avoid double scaling (DPI). You see, my
<code>sway</code> config already sets DPI / scaling to 1.5x. If we do that in
<code>~/.Xdefaults</code> as well then Xorg applications would have been scaled twice.</p><h2 id=closing-remarks>Closing remarks<a hidden class=anchor aria-hidden=true href=#closing-remarks>#</a></h2><p>In general Wayland / <code>sway</code> works reasonably well out-of-the-box in 2022, but
tiny adjustments are still necessary, and it isn&rsquo;t as polished as it could have
been. Furthermore, my workflow is very simple. Try sharing your screen in a
video call in Wayland and you&rsquo;ll run into other quirks. I have mixed feelings
and wouldn&rsquo;t necessarily recommend it. I wouldn&rsquo;t give an anti recommendation
either. It&rsquo;s complicated&mldr;even though Wayland is supposed to overcome some X11
/ Xorg limitations, as a client and without knowing its internals I fail to see
its advantages.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/linux/>Linux</a></li><li><a href=https://www.perrotta.dev/tags/bestof/>Bestof</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: Not%20Just%20Serendipity comment for '%e2%98%85%20Wayland%3a%20from%20i3%20to%20sway'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta • <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a> •</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>