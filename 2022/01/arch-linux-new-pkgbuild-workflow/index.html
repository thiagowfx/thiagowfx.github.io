<!doctype html><html lang=en-us id=root-html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title class=title>Arch Linux: New PKGBUILD Workflow | ¬¨ just serendipity üçÄ</title><meta name=title content="Arch Linux: New PKGBUILD Workflow"><meta name=description content="This document describes my workflow to manage PKGBUILDs for the AUR (Arch User Repository) in Arch Linux.
Disclaimer
First of all, this post is not a substitute to the excellent ArchWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:

https://wiki.archlinux.org/title/Arch_User_Repository
https://wiki.archlinux.org/title/Arch_package_guidelines
https://wiki.archlinux.org/title/Creating_packages
https://wiki.archlinux.org/title/PKGBUILD

This article is not a tutorial, as such it assumes you already know what a PKGBUILD is and how to use makepkg. In particular, you should have the base-devel and devtools packages installed in your system."><meta name=keywords content="dev,bestof,"><meta property="og:url" content="https://perrotta.dev/2022/01/arch-linux-new-pkgbuild-workflow/"><meta property="og:site_name" content="¬¨ just serendipity üçÄ"><meta property="og:title" content="Arch Linux: New PKGBUILD Workflow"><meta property="og:description" content="This document describes my workflow to manage PKGBUILDs for the AUR (Arch User Repository) in Arch Linux.
Disclaimer First of all, this post is not a substitute to the excellent ArchWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.archlinux.org/title/Arch_User_Repository https://wiki.archlinux.org/title/Arch_package_guidelines https://wiki.archlinux.org/title/Creating_packages https://wiki.archlinux.org/title/PKGBUILD This article is not a tutorial, as such it assumes you already know what a PKGBUILD is and how to use makepkg. In particular, you should have the base-devel and devtools packages installed in your system."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-18T21:59:07-05:00"><meta property="article:modified_time" content="2025-12-31T02:31:25-03:00"><meta property="article:tag" content="Dev"><meta property="article:tag" content="Bestof"><meta name=twitter:card content="summary"><meta name=twitter:title content="Arch Linux: New PKGBUILD Workflow"><meta name=twitter:description content="This document describes my workflow to manage PKGBUILDs for the AUR (Arch User Repository) in Arch Linux.
Disclaimer First of all, this post is not a substitute to the excellent ArchWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.archlinux.org/title/Arch_User_Repository https://wiki.archlinux.org/title/Arch_package_guidelines https://wiki.archlinux.org/title/Creating_packages https://wiki.archlinux.org/title/PKGBUILD This article is not a tutorial, as such it assumes you already know what a PKGBUILD is and how to use makepkg. In particular, you should have the base-devel and devtools packages installed in your system."><meta itemprop=name content="Arch Linux: New PKGBUILD Workflow"><meta itemprop=description content="This document describes my workflow to manage PKGBUILDs for the AUR (Arch User Repository) in Arch Linux.
Disclaimer First of all, this post is not a substitute to the excellent ArchWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.archlinux.org/title/Arch_User_Repository https://wiki.archlinux.org/title/Arch_package_guidelines https://wiki.archlinux.org/title/Creating_packages https://wiki.archlinux.org/title/PKGBUILD This article is not a tutorial, as such it assumes you already know what a PKGBUILD is and how to use makepkg. In particular, you should have the base-devel and devtools packages installed in your system."><meta itemprop=datePublished content="2022-01-18T21:59:07-05:00"><meta itemprop=dateModified content="2025-12-31T02:31:25-03:00"><meta itemprop=wordCount content="1197"><meta itemprop=keywords content="Dev,Bestof"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2022/01/arch-linux-new-pkgbuild-workflow/><link rel=stylesheet href=https://perrotta.dev/theme.css><style>@keyframes snowfall{0%{background-position:0 0,100px 150px,200px 300px,0 0}100%{background-position:0 100vh,100px calc(150px + 100vh),200px calc(300px + 100vh),0 0}}html.snowflakes-enabled{width:100%;height:100%;background-color:#fff;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#ffe6e6 0%,transparent 8%,transparent 92%,#ffe6e6 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}html[data-theme=dark].snowflakes-enabled{background-color:#1a1a1a;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#2a2a2a 0%,transparent 8%,transparent 92%,#2a2a2a 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}@media(prefers-color-scheme:dark){html:not([data-theme]).snowflakes-enabled{background-color:#1a1a1a;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#2a2a2a 0%,transparent 8%,transparent 92%,#2a2a2a 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}}body{text-align:left;margin:auto}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;text-align:center;display:flex;flex-direction:column;gap:6px}footer>a{text-decoration:none}a{color:var(--link-color)}.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px}.header-buttons{display:flex;align-items:center;gap:8px}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:12px;display:inline-block}hr{border:none;border-top:1px dashed var(--border-color)}nav a.has-emoji .nav-emoji{display:none}nav a.has-emoji:hover .nav-emoji,nav a.active-star .nav-emoji{display:inline}nav a.has-emoji:hover .nav-text,nav a.active-star .nav-text{display:none}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.4}table{width:100%}img{max-width:100%}code{background-color:var(--code-bg)}li code,p code{font-size:.9em}pre{margin:1.5rem 0;border-radius:10px;background-color:var(--code-bg);overflow-x:auto}pre code{display:block;padding:18px 22px;white-space:pre;font-size:17px;overflow-x:auto;background:0 0;color:inherit}code,pre{font-family:var(--font-code)}.highlight{margin:1.5rem 0}.highlight pre{margin:0;border-radius:10px;background:0 0}.highlight pre code{padding:0}.codeblock{margin:1.5rem 0;border-radius:12px;border:1px solid var(--border-color);background:var(--code-bg);overflow:hidden}.codeblock-header{display:flex;justify-content:space-between;align-items:center;font-size:.85em;padding:10px 16px;background:rgba(0,0,0,2%);border-bottom:1px solid var(--border-color);color:var(--color-gray)}.codeblock-language{font-weight:600}.codeblock-copy{background:0 0;border:none;color:inherit;padding:2px 6px;font-size:.9em;cursor:pointer}.codeblock .highlight{margin:0;border:none}.codeblock .highlight pre{padding:18px 22px}.chroma{color:var(--chroma-text)!important;background-color:var(--chroma-bg)!important}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cs,.chroma .cp,.chroma .cpf{color:var(--chroma-comment)!important}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr,.chroma .kt{color:var(--chroma-keyword)!important}.chroma .s,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .dl,.chroma .sd,.chroma .s2,.chroma .se,.chroma .sh,.chroma .si,.chroma .sx,.chroma .sr,.chroma .s1,.chroma .ss{color:var(--chroma-string)!important}.chroma .nf,.chroma .fm{color:var(--chroma-function)!important}.chroma .n,.chroma .na,.chroma .nc,.chroma .no,.chroma .ni,.chroma .ne,.chroma .nl,.chroma .nn,.chroma .nx,.chroma .py,.chroma .nt,.chroma .nb,.chroma .bp,.chroma .nv,.chroma .vc,.chroma .vg,.chroma .vi,.chroma .vm{color:var(--chroma-name)!important}.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .il,.chroma .mo{color:var(--chroma-number)!important}.chroma .o,.chroma .ow{color:var(--chroma-operator)!important}.chroma .nd{color:var(--chroma-function)!important}.chroma .lnt,.chroma .ln{color:var(--chroma-comment)!important}.chroma .gi{color:var(--chroma-string)!important}.chroma .gd{color:var(--chroma-name)!important}blockquote{border-left:2px solid #999;color:var(--heading-color);padding-left:25px;padding-right:15px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex;gap:8px;margin-bottom:8px}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic;font-size:.85em}.pubdate-single{color:var(--color-gray);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.social-link{text-decoration:none;font-size:1.4em;display:inline-flex;align-items:center;justify-content:center;padding:.3em;border-radius:50%;background-color:var(--code-bg);color:var(--text-color);transition:all .3s ease;position:relative}.social-link:hover{transform:translateY(-4px);background-color:var(--link-color);color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.15)}.social-link:active{transform:translateY(-2px)}#theme-toggle,#snowflake-toggle{background:0 0;border:none;padding:0;cursor:pointer;font-size:1.2em;display:inline-block;vertical-align:middle;transition:transform .2s ease}#theme-toggle:hover,#snowflake-toggle:hover{transform:scale(1.15)}#theme-toggle:active,#snowflake-toggle:active{transform:scale(.95)}.badge-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.badge-wrapper a{display:inline-block;text-decoration:none;transition:transform .2s ease}.badge-wrapper a:hover{transform:translateY(-2px)}.badge-wrapper img{display:block;height:auto}.footer-statement{font-size:.75em;margin:0}sup.gray{color:var(--color-gray)}.tag-cloud{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}.tag-pill{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:var(--code-bg);border-radius:6px;text-decoration:none;transition:all .2s ease}.tag-pill:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.tag-count{color:var(--color-gray);font-size:.9em}.rss-link{display:inline-block;margin-left:12px;padding:4px 10px;background:var(--link-color);color:#fff;text-decoration:none;border-radius:4px;font-size:.5em;font-weight:500;text-transform:uppercase;letter-spacing:.5px;transition:all .2s ease;vertical-align:middle}.rss-link:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2);opacity:.9}.year-group{margin:20px 0;padding:16px 0;transition:all .2s ease}.year-group summary{cursor:pointer;user-select:none;padding:8px 0;font-size:1.5rem;transition:color .2s ease;list-style:none;position:relative;padding-left:32px}.year-group summary::-webkit-details-marker{display:none}.year-group summary::before{content:'‚ñ∂';position:absolute;left:0;transition:transform .3s ease;color:var(--link-color);font-size:.8em}.year-group[open] summary::before{transform:rotate(90deg)}.year-group summary:hover{color:var(--link-color)}.year-group summary strong{font-weight:600}.year-group ul.blog-posts{margin-top:16px;padding-left:32px}.year-group ul.blog-posts li{margin-bottom:12px;transition:transform .15s ease}.year-group ul.blog-posts li:hover{transform:translateX(4px)}.year-group ul.blog-posts li a{text-decoration:none;border-bottom:1px solid transparent;transition:all .2s ease}.year-group ul.blog-posts li a:hover{border-bottom-color:var(--link-color)}@media(min-width:601px){.title{font-size:38px}}@media(max-width:600px){body{font-size:18px}.title{font-size:1.5rem}h1{font-size:1.65rem}h2{font-size:1.4rem}h3{font-size:1.2rem}h4{font-size:1.1rem}h5,h6{font-size:1rem}nav a{margin-right:8px;font-size:.9em}pre code{font-size:15px;padding:14px 18px}.year-group{margin:16px 0;padding:12px 0}.year-group summary{font-size:1.15rem;padding-left:28px}.year-group summary::before{font-size:.75em}.year-group ul.blog-posts{padding-left:0;margin-top:12px}.year-group ul.blog-posts li{flex-direction:column;gap:4px;margin-bottom:12px}.year-group ul.blog-posts li span,ul.blog-posts li span{flex:unset}}html[data-theme=dark] blockquote{color:#ccc}html[data-theme=dark] textarea,html[data-theme=dark] input{background-color:#252525;color:var(--text-color)}@media(prefers-color-scheme:dark){html:not([data-theme]) blockquote{color:#ccc}html:not([data-theme]) textarea,html:not([data-theme]) input{background-color:#252525;color:var(--text-color)}}.search-container{margin-bottom:1.5rem}#search-input{width:100%;padding:12px 16px;font-size:1rem;border:1px solid var(--border-color);border-radius:8px;background-color:var(--bg-color);color:var(--text-color);transition:border-color .2s ease,box-shadow .2s ease}#search-input:focus{outline:none;border-color:var(--link-color);box-shadow:0 0 0 3px rgba(50,115,220,.15)}#search-input::placeholder{color:var(--color-gray)}.search-info{margin-top:8px;font-size:.85em;color:var(--color-gray)}.search-results{margin-top:1rem}.search-result{padding:16px 0;border-bottom:1px solid var(--border-color)}.search-result:last-child{border-bottom:none}.search-result-title{font-size:1.1em;font-weight:600;text-decoration:none;display:block;margin-bottom:6px}.search-result-title:hover{text-decoration:underline}.search-result-meta{font-size:.85em;color:var(--color-gray);margin-bottom:8px}.search-result-date{font-style:italic}.search-result-tags{margin-left:8px}.search-tag{color:var(--link-color);text-decoration:none;margin-right:6px}.search-tag:hover{text-decoration:underline}.search-result-summary{font-size:.9em;color:var(--text-color);margin:0;line-height:1.5}.search-result mark{background-color:rgba(255,220,0,.4);color:inherit;padding:1px 2px;border-radius:2px}html[data-theme=dark] .search-result mark{background-color:rgba(255,180,0,.35)}@media(prefers-color-scheme:dark){html:not([data-theme]) .search-result mark{background-color:rgba(255,180,0,.35)}}.no-results{color:var(--color-gray);font-style:italic}.toc{margin:1.5rem 0;padding:.75rem 1rem;background:var(--code-bg);border-radius:4px;border:1px solid var(--border-color)}.toc summary{cursor:pointer;user-select:none;font-weight:600;list-style:none;position:relative;padding-left:24px}.toc summary::-webkit-details-marker{display:none}.toc summary::before{content:'‚ñ∂';position:absolute;left:0;top:50%;transform:translateY(-50%);transition:transform .3s ease;color:var(--link-color);font-size:.7em}.toc[open] summary::before{transform:translateY(-50%)rotate(90deg)}.toc nav ul{list-style:none;padding-left:0;margin:.75rem 0 0}.toc nav ul ul{padding-left:1.25rem}.toc nav li{margin:.25rem 0}.toc nav a{text-decoration:none;color:var(--text-color)}.toc nav a:hover{color:var(--link-color)}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.webp></head><body><script>localStorage.getItem("snowflakes-enabled")===null&&localStorage.setItem("snowflakes-enabled","true"),localStorage.getItem("snowflakes-enabled")==="true"&&document.documentElement.classList.add("snowflakes-enabled")</script><header><div class=header-top><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.webp alt="thiagowfx's avatar" width=32 height=32><h1 class=title>¬¨ just serendipity üçÄ</h1></a><div class=header-buttons><button id=theme-toggle aria-label="Toggle dark mode" title="Toggle dark mode">
<span id=theme-toggle-icon>‚òÄÔ∏è</span>
</button>
<button id=snowflake-toggle aria-label="Toggle snowflake animation" title="Toggle snowflake animation">
<span id=snowflake-toggle-icon>‚ùÑÔ∏è</span></button></div></div><nav><a href=/tags/bestof/ class="has-emoji active-star"><span class=nav-emoji>‚≠ê</span>
<span class=nav-text>‚òÖ</span>
</a><a href=/search/><span class=nav-text>üîç</span>
</a><a href=/posts/><span class=nav-text>Blog</span>
</a><a href=/blogroll/><span class=nav-text>Blogroll</span>
</a><a href=/tags/coding/><span class=nav-text>Coding</span>
</a><a href=/projects/><span class=nav-text>Projects</span></a></nav></header><main><script>document.addEventListener("keydown",function(e){if(e.key==="j"||e.key==="ArrowLeft"){const e=document.querySelector('[data-nav="prev"]');e&&e.href&&(window.location.href=e.href)}else if(e.key==="k"||e.key==="ArrowRight"){const e=document.querySelector('[data-nav="next"]');e&&e.href&&(window.location.href=e.href)}})</script><a href=https://perrotta.dev/2022/01/alpine-/-arch-linux-.apk-new-and-.pacnew-files/ data-nav=prev style=display:none></a><a href=https://perrotta.dev/2022/01/git-oops-i-forgot-to-add-this-thingy/ data-nav=next style=display:none></a><h2><span>‚òÖ</span> Arch Linux: New PKGBUILD Workflow</h2><p><span class=pubdate-single><time datetime=2022-01-18 pubdate>18 Jan, 2022
</time>‚Ä¢ 1197 words ‚Ä¢ 6 min
‚Ä¢ updated <time datetime=2025-12-31>31 Dec, 2025</time></span></p><div class=old-entry-warning role=note>‚ö†Ô∏è This post is over one year old. It may no longer be up to date. Opinions may have changed.</div><details class=toc><summary>Table of Contents</summary><nav id=TableOfContents><ul><li><a href=#disclaimer>Disclaimer</a></li><li><a href=#structure>Structure</a></li><li><a href=#bootstrapping>Bootstrapping</a></li><li><a href=#adjustments>Adjustments</a></li><li><a href=#request-feedback-if-needed>Request feedback if needed</a></li><li><a href=#publish-your-package>Publish your package</a></li><li><a href=#bonus-track-upstream>Bonus: Track upstream</a></li></ul></nav></details><content><p>This document describes my workflow to manage <code>PKGBUILDs</code> for the <a href=https://aur.archlinux.org/>AUR</a> (Arch User Repository) in <a href=https://www.archlinux.org/>Arch Linux</a>.</p><h2 id=disclaimer>Disclaimer</h2><p>First of all, this post is not a substitute to the excellent <a href=https://wiki.archlinux.org/>ArchWiki</a> and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:</p><ul><li><a href=https://wiki.archlinux.org/title/Arch_User_Repository>https://wiki.archlinux.org/title/Arch_User_Repository</a></li><li><a href=https://wiki.archlinux.org/title/Arch_package_guidelines>https://wiki.archlinux.org/title/Arch_package_guidelines</a></li><li><a href=https://wiki.archlinux.org/title/Creating_packages>https://wiki.archlinux.org/title/Creating_packages</a></li><li><a href=https://wiki.archlinux.org/title/PKGBUILD>https://wiki.archlinux.org/title/PKGBUILD</a></li></ul><p>This article is not a tutorial, as such it assumes you already know what a <code>PKGBUILD</code> is and how to use <code>makepkg</code>. In particular, you should have the <code>base-devel</code> and <code>devtools</code> packages installed in your system.</p><h2 id=structure>Structure</h2><p>I manage my packages with <code>git</code> plus Eli Schwartz&rsquo;s excellent
<a href=https://github.com/eli-schwartz/aurpublish>aurpublish</a>. The tree structure is simple, with one <code>PKGBUILD</code> per directory:</p><div class=codeblock data-lang=shell><div class=codeblock-header><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git clone https://github.com/thiagowfx/PKGBUILDs <span class=o>&amp;&amp;</span> tree PKGBUILDs
</span></span><span class=line><span class=cl>PKGBUILDs
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ bkt
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ PKGBUILD
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ fpp-git
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ PKGBUILD
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ git-crecord
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ PKGBUILD
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ i3a
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ PKGBUILD
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ LICENSE
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ Makefile
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ README.md
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ ttf-camingocode
</span></span><span class=line><span class=cl>‚îÇ   ‚îî‚îÄ‚îÄ PKGBUILD
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ urlwatch.yml</span></span></code></pre></div></div><p><code>aurpublish</code> is used <em>solely</em> to automate certain interactions with the AUR, more about it later.</p><h2 id=bootstrapping>Bootstrapping</h2><p>I am going to illustrate with a package I added recently, <a href=https://github.com/dimo414/bkt><code>bkt</code></a>:</p><ul><li><p>Before you even begin, check if the package already exists, do a quick search in the <a href="https://aur.archlinux.org/packages/?O=0&amp;K=bkt">AUR</a> and also in the <a href="https://archlinux.org/packages/?sort=&amp;q=bkt&amp;maintainer=&amp;flagged=">official repos</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p></li><li><p>Start by copying over the standard <code>PKGBUILD</code> template:</p></li></ul><div class=codeblock data-lang=shell><div class=codeblock-header><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> PKGBUILDs
</span></span><span class=line><span class=cl>$ mkdir bkt <span class=o>&amp;&amp;</span> <span class=nb>cd</span> bkt
</span></span><span class=line><span class=cl>$ cp /usr/share/pacman/PKGBUILD.proto PKGBUILD
</span></span><span class=line><span class=cl>$ <span class=nv>$EDITOR</span> PKGBUILD</span></span></code></pre></div></div><ul><li><p>Fill in <code>PKGBUILD</code> metadata like <code>pkgname=</code>, <code>url=</code>, etc. Refer to the ArchWiki for up-to-date best practices.</p></li><li><p>The most important step is to refer to <a href=https://wiki.archlinux.org/title/Category:Arch_package_guidelines>https://wiki.archlinux.org/title/Category:Arch_package_guidelines</a> to figure out the package type.</p></li></ul><p><code>bkt</code> is a Rust package. This is my first time packaging for Rust, not a problem though, as I can just refer to <a href=https://wiki.archlinux.org/title/Rust_package_guidelines>https://wiki.archlinux.org/title/Rust_package_guidelines</a>.</p><p>The rust package guidelines page contains the blueprint for <code>prepare()</code>, <code>check()</code>, <code>build()</code> and <code>package()</code>. Packaging is mostly a matter of gluing everything together. Read the project <code>README.md</code> and the wiki, and then combine the needed steps in the <code>PKGBUILD</code>.</p><p>By doing so, I produced the following <code>PKGBUILD</code>:</p><div class=codeblock data-lang=bash><div class=codeblock-header><span class=codeblock-language>bash</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>pkgname</span><span class=o>=</span>bkt
</span></span><span class=line><span class=cl><span class=nv>pkgver</span><span class=o>=</span>0.5.0
</span></span><span class=line><span class=cl><span class=nv>pkgrel</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>pkgdesc</span><span class=o>=</span><span class=s2>&#34;A subprocess caching utility&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>arch</span><span class=o>=(</span><span class=s1>&#39;x86_64&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>url</span><span class=o>=</span><span class=s2>&#34;https://www.bkt.rs/&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>license</span><span class=o>=(</span><span class=s1>&#39;MIT&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>makedepends</span><span class=o>=(</span><span class=s1>&#39;cargo&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>source</span><span class=o>=(</span><span class=s2>&#34;</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>.tar.gz::https://github.com/dimo414/</span><span class=nv>$pkgname</span><span class=s2>/archive/refs/tags/</span><span class=nv>$pkgver</span><span class=s2>.tar.gz&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>sha256sums</span><span class=o>=()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>prepare<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	cargo fetch --locked --target <span class=s2>&#34;</span><span class=nv>$CARCH</span><span class=s2>-unknown-linux-gnu&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>build<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nb>export</span> <span class=nv>RUSTUP_TOOLCHAIN</span><span class=o>=</span>stable
</span></span><span class=line><span class=cl>	<span class=nb>export</span> <span class=nv>CARGO_TARGET_DIR</span><span class=o>=</span>target
</span></span><span class=line><span class=cl>	cargo build --frozen --release --all-features
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>check<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=nb>export</span> <span class=nv>RUSTUP_TOOLCHAIN</span><span class=o>=</span>stable
</span></span><span class=line><span class=cl>	cargo <span class=nb>test</span> --frozen --all-features
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>package<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	install -Dm0755 -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin/&#34;</span> <span class=s2>&#34;target/release/</span><span class=nv>$pkgname</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>	install -Dm644 LICENSE -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/licenses/</span><span class=nv>$pkgname</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div><p><strong>Note</strong>: <code>$srcdir</code> refers to the <code>src/</code> directory within <code>bkt</code>. <code>$pkgdir</code> refers to the <code>pkg/</code> directory within <code>bkt</code>.</p><h2 id=adjustments>Adjustments</h2><ul><li><p>Generate the checksums with <code>updpkgsums</code>. It will automatically update the <code>PKGBUILD</code> inplace.</p></li><li><p>Download and extract package files with <code>makepkg -o</code>.</p></li><li><p><code>ls src/</code> and check the directory structure. Update <code>cd</code> in your <code>PKGBUILD</code> to match it. Usually it will be <code>cd $srcdir/$pkgname-$pkgver</code>, but sometimes tiny adjustments are necessary.</p></li><li><p>Then run <code>makepkg -s</code>. If everything goes well, your package will be successfully built<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> (<code>bkt-0.5.0-1-x86_64.pkg.tar.zst</code>), however that doesn&rsquo;t mean it is a decent package yet.</p></li><li><p>Run <code>namcap PKGBUILD</code> and <code>namcap *.pkg.tar.zst</code> to lint your package and catch common errors. Fix the errors, if any.</p></li><li><p>To ensure all dependencies have been correctly declared and none of them are missing, run <code>makepkg</code> within a clean <a href=https://wiki.archlinux.org/title/Chroo><em>chroot</em></a>. I like to use Graysky&rsquo;s excellent <a href=https://github.com/graysky2/clean-chroot-manager><code>ccm</code></a> (Clean Chroot Manager) to do so. Run <code>ccm s</code> (=&ldquo;run makepkg in the clean chroot&rdquo;). If it produces any errors, it likely means you missed some dependencies. Adjust <code>depends=</code>, <code>checkdepends=</code> and <code>makedepends=</code> accordingly.</p></li></ul><h2 id=request-feedback-if-needed>Request feedback if needed</h2><p>If the package is only relevant to you, stop here. <code>git commit</code>, <code>git push</code>, and then you&rsquo;re done. Install the package with <code>makepkg -i</code>.</p><p>Otherwise, if the package might be potentially useful to other Arch users, you could consider uploading it to the AUR.</p><p>Before you do so, stop for a moment and make an honest judgment whether this is a high quality package and whether you&rsquo;re confident it is clean and polished enough, following the best practices documented in the Wiki. The answer doesn&rsquo;t need to be positive, it&rsquo;s perfectly OK to commit mistakes and everyone is a newbie at some point.</p><p>If the answer is negative, or if you&rsquo;re new to this process and would like some help, fear no more! There are at least two decent community resources wherein to ask for help:</p><ol><li><p><a href="https://bbs.archlinux.org/viewforum.php?id=38.">AUR Issues, Discussion & PKGBUILD Requests</a> BBS / Forums: Open a new thread, post your <code>PKGBUILD</code> (use <code>[code][/code]</code> tags if you paste it directly!) or a link to it<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>. Request folks to critique your work, mention that you&rsquo;re looking for feedback. This kind of thread is generally well received in the official forums if you demonstrate you did diligent research before asking for help.</p></li><li><p><a href=https://lists.archlinux.org/pipermail/aur-general/>AUR General Mailing List</a>: Send an email to the mailing list asking for help. In general, follow proper mailing list etiquette, good resources for that are <a href=https://useplaintext.email/>https://useplaintext.email/</a> and <a href=https://man.sr.ht/lists.sr.ht/etiquette.md>https://man.sr.ht/lists.sr.ht/etiquette.md</a>. TL;DR: Use plain-text instead of HTML in your email.</p></li></ol><p>If you&rsquo;re part of any other community (e.g. Reddit, Discord) feel free to ask therein as well. Avoid posting everywhere though, pick one community, draft your post and then patiently wait.</p><h2 id=publish-your-package>Publish your package</h2><p>If all is well, it&rsquo;s time to publish your <code>PKGBUILD</code> to the <a href=https://aur.archlinux.org/>AUR</a>. Follow the up-to-date steps at <a href=https://wiki.archlinux.org/title/Arch_User_Repository#Submitting_packages>https://wiki.archlinux.org/title/Arch_User_Repository#Submitting_packages</a>.</p><p>TL;DR: If you don&rsquo;t use <em>aurpublish</em>, do:</p><div class=codeblock data-lang=shell><div class=codeblock-header><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ makepkg --printsrcinfo &gt; .SRCINFO</span></span></code></pre></div></div><p>Then you&rsquo;ll need both the <code>PKGBUILD</code> and the <code>.SRCINFO</code> file, it&rsquo;s basically a matter of committing your changes and pushing them to the right repository.</p><p>If you do use <em>aurpublish</em> this process is much easier, it&rsquo;s mostly a matter of doing <code>git commit</code>, <code>git push</code> and <code>aurpublish bkt</code>. <em>Aurpublish</em> automatically generates the <code>.SRCINFO</code> and a commit message by the means of git hooks.</p><p>And that&rsquo;s all! Other useful tips:</p><ul><li>Use <a href=https://repology.org/>repology</a> to look for preexisting packages in other Linux (or even BSD) distributions, it&rsquo;s very handy as a starting point if you have no idea how to package a given package. In particular, Alpine Linux <code>APKBUILDs</code> are very similar to <code>PKGBUILDs</code>. Gentoo <code>EBUILDs</code> and FreeBSD <code>Makefiles</code> are also reasonable approximations.</li><li>Use <code>makepkg -src</code> to clean up after building a package.</li></ul><h2 id=bonus-track-upstream>Bonus: Track upstream</h2><p>Use a software like <a href=https://thp.io/2008/urlwatch/><code>urlwatch</code></a> or <a href=https://github.com/lilydjwg/nvchecker><code>nvchecker</code></a> to track
future upstream changes so that you can update your packages in a timely
fashion<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>. There&rsquo;s also a web service called <a href=https://release-monitoring.org/>Release
Monitoring</a>, part of Fedora Infra. And there&rsquo;s also
<a href=https://changedetection.io/>https://changedetection.io/</a>, but it&rsquo;s overkill for this task. I use <code>urlwatch</code>
the following way:</p><div class=codeblock><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>$ cat PKGBUILDs/urlwatch.yml
</span></span><span class=line><span class=cl># urls for urlwatch(1)
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>name: &#34;bkt&#34;
</span></span><span class=line><span class=cl>command: &#34;git ls-remote --tags https://github.com/dimo414/bkt&#34;
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>name: &#34;fpp&#34;
</span></span><span class=line><span class=cl>command: &#34;git ls-remote --tags https://github.com/facebook/PathPicker&#34;
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>name: &#34;git-crecord&#34;
</span></span><span class=line><span class=cl>command: &#34;git ls-remote --tags https://github.com/andrewshadura/git-crecord&#34;
</span></span><span class=line><span class=cl>---
</span></span><span class=line><span class=cl>name: &#34;i3a&#34;
</span></span><span class=line><span class=cl>command: &#34;git ls-remote --tags https://git.goral.net.pl/mgoral/i3a&#34;
</span></span><span class=line><span class=cl># ---
</span></span><span class=line><span class=cl># name: &#34;ttf-camingocode&#34;
</span></span><span class=line><span class=cl># N/A
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl># Run this command periodically via cron or systemd timer.
</span></span><span class=line><span class=cl># Set up notifications e.g. via sendmail.
</span></span><span class=line><span class=cl>$ urlwatch --urls urlwatch.yml</span></span></code></pre></div></div><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>If you use <a href=https://duckduckgo.com/>https://duckduckgo.com/</a>, query for <code>!aur bkt</code> and <code>!archpkg bkt</code>. Handy!&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Package debugging is out of scope of this post.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p>For example, use <a href=https://gist.github.com>https://gist.github.com</a> or <a href=http://paste.opensuse.org/>http://paste.opensuse.org/</a> or
<a href=http://ix.io/>http://ix.io/</a>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>In 99% of the cases this is just a matter of bumping the <code>pkgver=</code> and
updating the checksums. If <code>pkgver=</code> is the same but there&rsquo;s a fix to the
package itself, then bump <code>pkgrel=</code> instead.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p style="text-align:center;margin:2em 0 1em">‚Äî ¬ß ‚Äî</p><div style=display:flex;justify-content:space-between><p style=margin:0>Reply via
<a href="mailto:serendipity@perrotta.dev?subject=Reply to: Arch%20Linux%3a%20New%20PKGBUILD%20Workflow">email</a></p><p style=margin:0><a href=https://perrotta.dev/tags/dev/>#dev</a>
<a href=https://perrotta.dev/tags/bestof/>#bestof</a></p></div><div style="border:2px solid var(--border-color);border-radius:.5rem;padding:1.5rem;margin-top:1.5rem"><h4 style=margin-top:0>Related Posts</h4><section style="display:flex;flex-wrap:wrap;gap:1rem;margin:1rem 0"><article style="flex:1 1 250px;padding:1rem;background:var(--code-bg);border-radius:.25rem;color:var(--text-color)"><h5 style=margin-top:0;margin-bottom:.5rem;color:var(--heading-color)><a href=https://perrotta.dev/2025/04/alpine-linux-the-maintainer-workflow/>Alpine Linux: the maintainer workflow</a></h5><p style="margin:.5rem 0;font-size:.9rem">I maintain a couple of packages on Alpine Linux.
Every now and then, a new software version is released, and it&rsquo;s my duty1 as an active package ‚Ä¶</p><small style=color:var(--color-gray)>Apr 20, 2025</small></article><article style="flex:1 1 250px;padding:1rem;background:var(--code-bg);border-radius:.25rem;color:var(--text-color)"><h5 style=margin-top:0;margin-bottom:.5rem;color:var(--heading-color)><a href=https://perrotta.dev/2022/01/alpine-linux-new-apkbuild-workflow/>Alpine Linux: New APKBUILD Workflow</a></h5><p style="margin:.5rem 0;font-size:.9rem">This document describes my workflow to manage APKBUILDs for the aports repository in Alpine Linux.
Disclaimer First of all, this post is not a ‚Ä¶</p><small style=color:var(--color-gray)>Jan 23, 2022</small></article></section></div></main><hr><footer><span>¬© 2021 - 2026 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a> ¬∑ <a href=/canary>üê¶</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=mailto:serendipity@perrotta.dev title="Email address"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" height="1.2em" width="1.2em"><path d="M3 8l7.89 5.26a2 2 0 002.22.0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5A2 2 0 003 7v10a2 2 0 002 2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://perrotta.dev/index.xml title="RSS feed"><svg stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" height="1.2em" width="1.2em"><path d="M4 11a9 9 0 019 9M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em"><path d="M12 0C5.374.0.0 5.373.0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931.0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176.0.0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221.0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg></a></div><div class=badge-wrapper><a target=_blank href=https://indieweb.org/ title=IndieWebCamp><img src=https://perrotta.dev/indieweb88x31-flat.webp width=88 height=31 alt=IndieWebCamp>
</a><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/ title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License"><img src=https://perrotta.dev/cc-by-nc-sa-4.0-88x31.webp width=88 height=31 alt="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License">
</a><a target=_blank href=https://512kb.club title="512kb.club badge"><img src=https://perrotta.dev/green-team.webp alt="a proud member of the green team of 512KB club">
</a><a target=_blank href=https://powrss.com/ title=powRSS><img src=https://perrotta.dev/powrss-88-31.webp alt=powRSS>
</a><a target=_blank href=https://www.vim.org/ title="Vim text editor"><img src=https://perrotta.dev/vim.webp alt="Vim text editor">
</a><a target=_blank href=https://edleeman.co.uk/cookie-zero/ title="Cookie Zero"><img src=https://perrotta.dev/cookiezero.webp alt="Cookie Zero">
</a><a target=_blank href="https://validator.w3.org/feed/check.cgi?url=https://perrotta.dev/index.xml" title="Valid RSS feed"><img src=https://perrotta.dev/valid-rss-rogers.webp alt="Valid RSS feed"></a></div><p class=footer-statement>This site respects your privacy by not containing <a href=https://www.nevermonetize.com/>ads</a>,
not using tracking cookies,
and not collecting any personally identifiable information.
<a href=/ai>Gen AI policy</a>.</p></footer><script>window.snowflakeAnimation={canvas:null,ctx:null,particles:[],animationFrameId:null,isRunning:!1,christmasEmojis:["‚ùÑÔ∏è","üéÑ","üéÖ","üéÅ","‚õÑ","üîî"],init:function(){this.canvas=document.createElement("canvas"),this.canvas.id="snowflake-canvas",this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="-1",document.body.insertBefore(this.canvas,document.body.firstChild),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this))},resizeCanvas:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},createSnowflakes:function(){this.particles=[];for(let e=0;e<15;e++)this.particles.push(new this.Snowflake(this))},Snowflake:class{constructor(e){this.animation=e,this.x=Math.random()*e.canvas.width,this.y=-20,this.size=Math.random()*20+10,this.speedY=Math.random()*2+1,this.speedX=(Math.random()-.5)*2,this.opacity=Math.random()*.5+.5,this.emoji=e.christmasEmojis[Math.floor(Math.random()*e.christmasEmojis.length)]}update(){this.y+=this.speedY,this.x+=this.speedX,this.y>this.animation.canvas.height&&(this.y=-20,this.x=Math.random()*this.animation.canvas.width,this.emoji=this.animation.christmasEmojis[Math.floor(Math.random()*this.animation.christmasEmojis.length)])}draw(){this.animation.ctx.globalAlpha=this.opacity,this.animation.ctx.font=`${this.size}px Arial`,this.animation.ctx.fillText(this.emoji,this.x,this.y),this.animation.ctx.globalAlpha=1}},animate:function(){if(!this.isRunning)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.update(),e.draw()}),this.animationFrameId=requestAnimationFrame(this.animate.bind(this))},start:function(){if(this.isRunning)return;this.isRunning=!0,this.createSnowflakes(),this.animate()},stop:function(){this.isRunning=!1,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},window.snowflakeAnimation.init(),localStorage.getItem("snowflakes-enabled")==="true"&&window.snowflakeAnimation.start();function setTheme(e){e==="auto"?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("theme")):(document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)),updateThemeIcon()}function getCurrentThemeState(){return localStorage.getItem("theme")||"auto"}function updateThemeIcon(){const e=getCurrentThemeState(),t={auto:"üåì",dark:"üåô",light:"‚òÄÔ∏è"};document.getElementById("theme-toggle-icon").textContent=t[e]}function getSnowflakeState(){return localStorage.getItem("snowflakes-enabled")==="true"}function updateSnowflakeIcon(){const e=document.getElementById("snowflake-toggle-icon"),t=getSnowflakeState();e.textContent=t?"‚ùÑÔ∏è":"‚òÉÔ∏è"}function setSnowflakeState(e){e?(localStorage.setItem("snowflakes-enabled","true"),document.documentElement.classList.add("snowflakes-enabled"),window.snowflakeAnimation&&window.snowflakeAnimation.start()):(localStorage.setItem("snowflakes-enabled","false"),document.documentElement.classList.remove("snowflakes-enabled"),window.snowflakeAnimation&&window.snowflakeAnimation.stop()),updateSnowflakeIcon()}const saved=localStorage.getItem("theme");saved&&document.documentElement.setAttribute("data-theme",saved),updateThemeIcon(),updateSnowflakeIcon(),document.getElementById("theme-toggle").addEventListener("click",function(){const e=getCurrentThemeState(),t={auto:"light",light:"dark",dark:"auto"},n=t[e];setTheme(n)}),document.getElementById("snowflake-toggle").addEventListener("click",function(){const e=getSnowflakeState();setSnowflakeState(!e)}),document.addEventListener("click",function(e){if(!e.target.matches("[data-copy-code]"))return;const t=e.target,n=t.closest(".codeblock");if(!n)return;const s=n.querySelector("pre code");if(!s)return;const o=s.innerText;if(!navigator.clipboard||!navigator.clipboard.writeText)return;navigator.clipboard.writeText(o).then(function(){t.dataset.originalLabel=t.textContent,t.textContent="Copied!",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)}).catch(function(){t.textContent="Failed",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)})})</script></body></html>