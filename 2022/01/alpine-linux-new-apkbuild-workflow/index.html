<!doctype html><html lang=en-us id=root-html><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title class=title>Alpine Linux: New APKBUILD Workflow | ¬¨ just serendipity üçÄ</title><meta name=title content="Alpine Linux: New APKBUILD Workflow"><meta name=description content="This document describes my workflow to manage APKBUILDs for the
aports repository in Alpine Linux.
Disclaimer
First of all, this post is not a substitute to the AlpineWiki
and it will likely get outdated at some point. In particular, refer to the
following articles for up-to-date documentation that will outlive this blog:

https://wiki.alpinelinux.org/wiki/APKBUILD_Reference
https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers
https://wiki.alpinelinux.org/wiki/Aports_tree
https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package

This article is not a tutorial, as such it assumes you already know what an
APKBUILD is and how to use abuild. In particular, you should have the
alpine-sdk, atools and spdx-licenses-list packages installed in your
system."><meta name=keywords content="dev,bestof,"><meta property="og:url" content="https://perrotta.dev/2022/01/alpine-linux-new-apkbuild-workflow/"><meta property="og:site_name" content="¬¨ just serendipity üçÄ"><meta property="og:title" content="Alpine Linux: New APKBUILD Workflow"><meta property="og:description" content="This document describes my workflow to manage APKBUILDs for the aports repository in Alpine Linux.
Disclaimer First of all, this post is not a substitute to the AlpineWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.alpinelinux.org/wiki/APKBUILD_Reference https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers https://wiki.alpinelinux.org/wiki/Aports_tree https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package This article is not a tutorial, as such it assumes you already know what an APKBUILD is and how to use abuild. In particular, you should have the alpine-sdk, atools and spdx-licenses-list packages installed in your system."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-23T19:15:02-05:00"><meta property="article:modified_time" content="2025-09-05T19:48:38+02:00"><meta property="article:tag" content="Dev"><meta property="article:tag" content="Bestof"><meta name=twitter:card content="summary"><meta name=twitter:title content="Alpine Linux: New APKBUILD Workflow"><meta name=twitter:description content="This document describes my workflow to manage APKBUILDs for the aports repository in Alpine Linux.
Disclaimer First of all, this post is not a substitute to the AlpineWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.alpinelinux.org/wiki/APKBUILD_Reference https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers https://wiki.alpinelinux.org/wiki/Aports_tree https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package This article is not a tutorial, as such it assumes you already know what an APKBUILD is and how to use abuild. In particular, you should have the alpine-sdk, atools and spdx-licenses-list packages installed in your system."><meta itemprop=name content="Alpine Linux: New APKBUILD Workflow"><meta itemprop=description content="This document describes my workflow to manage APKBUILDs for the aports repository in Alpine Linux.
Disclaimer First of all, this post is not a substitute to the AlpineWiki and it will likely get outdated at some point. In particular, refer to the following articles for up-to-date documentation that will outlive this blog:
https://wiki.alpinelinux.org/wiki/APKBUILD_Reference https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers https://wiki.alpinelinux.org/wiki/Aports_tree https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package This article is not a tutorial, as such it assumes you already know what an APKBUILD is and how to use abuild. In particular, you should have the alpine-sdk, atools and spdx-licenses-list packages installed in your system."><meta itemprop=datePublished content="2022-01-23T19:15:02-05:00"><meta itemprop=dateModified content="2025-09-05T19:48:38+02:00"><meta itemprop=wordCount content="995"><meta itemprop=keywords content="Dev,Bestof"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2022/01/alpine-linux-new-apkbuild-workflow/><link rel=stylesheet href=https://perrotta.dev/theme.css><style>@keyframes snowfall{0%{background-position:0 0,100px 150px,200px 300px,0 0}100%{background-position:0 100vh,100px calc(150px + 100vh),200px calc(300px + 100vh),0 0}}html.snowflakes-enabled{width:100%;height:100%;background-color:#fff;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#ffe6e6 0%,transparent 8%,transparent 92%,#ffe6e6 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}html[data-theme=dark].snowflakes-enabled{background-color:#1a1a1a;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#2a2a2a 0%,transparent 8%,transparent 92%,#2a2a2a 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}@media(prefers-color-scheme:dark){html:not([data-theme]).snowflakes-enabled{background-color:#1a1a1a;background-image:radial-gradient(circle,transparent 10px,transparent calc(10px + 1px)),radial-gradient(circle,transparent 15px,transparent calc(15px + 1px)),radial-gradient(circle,transparent 12px,transparent calc(12px + 1px)),linear-gradient(to right,#2a2a2a 0%,transparent 8%,transparent 92%,#2a2a2a 100%);background-size:280px 400px,350px 480px,420px 550px,100% 100%;background-position:0 0,100px 150px,200px 300px,0 0;background-attachment:scroll;animation:snowfall 20s linear infinite}}body{text-align:left;margin:auto}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;text-align:center;display:flex;flex-direction:column;gap:6px}footer>a{text-decoration:none}a{color:var(--link-color)}.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px}.header-buttons{display:flex;align-items:center;gap:8px}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:12px;display:inline-block}hr{border:none;border-top:1px dashed var(--border-color)}nav a.has-emoji .nav-emoji{display:none}nav a.has-emoji:hover .nav-emoji,nav a.active-star .nav-emoji{display:inline}nav a.has-emoji:hover .nav-text,nav a.active-star .nav-text{display:none}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.4}table{width:100%}img{max-width:100%}code{background-color:var(--code-bg)}li code,p code{font-size:.9em}pre{margin:1.5rem 0;border-radius:10px;background-color:var(--code-bg);overflow-x:auto}pre code{display:block;padding:18px 22px;white-space:pre;font-size:17px;overflow-x:auto;background:0 0;color:inherit}code,pre{font-family:var(--font-code)}.highlight{margin:1.5rem 0}.highlight pre{margin:0;border-radius:10px;background:0 0}.highlight pre code{padding:0}.codeblock{margin:1.5rem 0;border-radius:12px;border:1px solid var(--border-color);background:var(--code-bg);overflow:hidden}.codeblock-header{display:flex;justify-content:space-between;align-items:center;font-size:.85em;padding:10px 16px;background:rgba(0,0,0,2%);border-bottom:1px solid var(--border-color);color:var(--color-gray)}.codeblock-language{font-weight:600}.codeblock-copy{background:0 0;border:none;color:inherit;padding:2px 6px;font-size:.9em;cursor:pointer}.codeblock .highlight{margin:0;border:none}.codeblock .highlight pre{padding:18px 22px}.chroma{color:var(--chroma-text)!important;background-color:var(--chroma-bg)!important}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cs,.chroma .cp,.chroma .cpf{color:var(--chroma-comment)!important}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr,.chroma .kt{color:var(--chroma-keyword)!important}.chroma .s,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .dl,.chroma .sd,.chroma .s2,.chroma .se,.chroma .sh,.chroma .si,.chroma .sx,.chroma .sr,.chroma .s1,.chroma .ss{color:var(--chroma-string)!important}.chroma .nf,.chroma .fm{color:var(--chroma-function)!important}.chroma .n,.chroma .na,.chroma .nc,.chroma .no,.chroma .ni,.chroma .ne,.chroma .nl,.chroma .nn,.chroma .nx,.chroma .py,.chroma .nt,.chroma .nb,.chroma .bp,.chroma .nv,.chroma .vc,.chroma .vg,.chroma .vi,.chroma .vm{color:var(--chroma-name)!important}.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .il,.chroma .mo{color:var(--chroma-number)!important}.chroma .o,.chroma .ow{color:var(--chroma-operator)!important}.chroma .nd{color:var(--chroma-function)!important}.chroma .lnt,.chroma .ln{color:var(--chroma-comment)!important}.chroma .gi{color:var(--chroma-string)!important}.chroma .gd{color:var(--chroma-name)!important}blockquote{border-left:2px solid #999;color:var(--heading-color);padding-left:25px;padding-right:15px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex;gap:8px;margin-bottom:8px}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic;font-size:.85em}.pubdate-single{color:var(--color-gray);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.social-link{text-decoration:none;font-size:1.4em;display:inline-flex;align-items:center;justify-content:center;padding:.3em;border-radius:50%;background-color:var(--code-bg);color:var(--text-color);transition:all .3s ease;position:relative}.social-link:hover{transform:translateY(-4px);background-color:var(--link-color);color:#fff;box-shadow:0 4px 12px rgba(0,0,0,.15)}.social-link:active{transform:translateY(-2px)}#theme-toggle,#snowflake-toggle{background:0 0;border:none;padding:0;cursor:pointer;font-size:1.2em;display:inline-block;vertical-align:middle;transition:transform .2s ease}#theme-toggle:hover,#snowflake-toggle:hover{transform:scale(1.15)}#theme-toggle:active,#snowflake-toggle:active{transform:scale(.95)}.badge-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.badge-wrapper a{display:inline-block;text-decoration:none;transition:transform .2s ease}.badge-wrapper a:hover{transform:translateY(-2px)}.badge-wrapper img{display:block;height:auto}.footer-statement{font-size:.75em;margin:0}sup.gray{color:var(--color-gray)}.tag-cloud{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}.tag-pill{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:var(--code-bg);border-radius:6px;text-decoration:none;transition:all .2s ease}.tag-pill:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.tag-count{color:var(--color-gray);font-size:.9em}.rss-link{display:inline-block;margin-left:12px;padding:4px 10px;background:var(--link-color);color:#fff;text-decoration:none;border-radius:4px;font-size:.5em;font-weight:500;text-transform:uppercase;letter-spacing:.5px;transition:all .2s ease;vertical-align:middle}.rss-link:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2);opacity:.9}.year-group{margin:20px 0;padding:16px 0;transition:all .2s ease}.year-group summary{cursor:pointer;user-select:none;padding:8px 0;font-size:1.5rem;transition:color .2s ease;list-style:none;position:relative;padding-left:32px}.year-group summary::-webkit-details-marker{display:none}.year-group summary::before{content:'‚ñ∂';position:absolute;left:0;transition:transform .3s ease;color:var(--link-color);font-size:.8em}.year-group[open] summary::before{transform:rotate(90deg)}.year-group summary:hover{color:var(--link-color)}.year-group summary strong{font-weight:600}.year-group ul.blog-posts{margin-top:16px;padding-left:32px}.year-group ul.blog-posts li{margin-bottom:12px;transition:transform .15s ease}.year-group ul.blog-posts li:hover{transform:translateX(4px)}.year-group ul.blog-posts li a{text-decoration:none;border-bottom:1px solid transparent;transition:all .2s ease}.year-group ul.blog-posts li a:hover{border-bottom-color:var(--link-color)}@media(min-width:601px){.title{font-size:38px}}@media(max-width:600px){body{font-size:18px}.title{font-size:1.5rem}h1{font-size:1.65rem}h2{font-size:1.4rem}h3{font-size:1.2rem}h4{font-size:1.1rem}h5,h6{font-size:1rem}nav a{margin-right:8px;font-size:.9em}pre code{font-size:15px;padding:14px 18px}.year-group{margin:16px 0;padding:12px 0}.year-group summary{font-size:1.15rem;padding-left:28px}.year-group summary::before{font-size:.75em}.year-group ul.blog-posts{padding-left:0;margin-top:12px}.year-group ul.blog-posts li{flex-direction:column;gap:4px;margin-bottom:12px}.year-group ul.blog-posts li span,ul.blog-posts li span{flex:unset}}html[data-theme=dark] blockquote{color:#ccc}html[data-theme=dark] textarea,html[data-theme=dark] input{background-color:#252525;color:var(--text-color)}@media(prefers-color-scheme:dark){html:not([data-theme]) blockquote{color:#ccc}html:not([data-theme]) textarea,html:not([data-theme]) input{background-color:#252525;color:var(--text-color)}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.webp></head><body><script>localStorage.getItem("snowflakes-enabled")===null&&localStorage.setItem("snowflakes-enabled","true"),localStorage.getItem("snowflakes-enabled")==="true"&&document.documentElement.classList.add("snowflakes-enabled")</script><header><div class=header-top><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.webp alt="thiagowfx's avatar" width=32 height=32><h1 class=title>¬¨ just serendipity üçÄ</h1></a><div class=header-buttons><button id=theme-toggle aria-label="Toggle dark mode" title="Toggle dark mode">
<span id=theme-toggle-icon>‚òÄÔ∏è</span>
</button>
<button id=snowflake-toggle aria-label="Toggle snowflake animation" title="Toggle snowflake animation">
<span id=snowflake-toggle-icon>‚ùÑÔ∏è</span></button></div></div><nav><a href=/tags/bestof/ class="has-emoji active-star"><span class=nav-emoji>‚≠ê</span>
<span class=nav-text>‚òÖ</span>
</a><a href=/posts/><span class=nav-text>Blog</span>
</a><a href=/blogroll/><span class=nav-text>Blogroll</span>
</a><a href=/tags/coding/><span class=nav-text>Coding</span>
</a><a href=/projects/><span class=nav-text>Projects</span></a></nav></header><main><script>document.addEventListener("keydown",function(e){if(e.key==="j"||e.key==="ArrowLeft"){const e=document.querySelector('[data-nav="prev"]');e&&e.href&&(window.location.href=e.href)}else if(e.key==="k"||e.key==="ArrowRight"){const e=document.querySelector('[data-nav="next"]');e&&e.href&&(window.location.href=e.href)}})</script><a href=https://perrotta.dev/2022/01/introspect-the-local-network-for-pihole/ data-nav=prev style=display:none></a><a href=https://perrotta.dev/2022/01/pihole-add-custom-dns-mappings/ data-nav=next style=display:none></a><h2><span>‚òÖ</span> Alpine Linux: New APKBUILD Workflow</h2><p><span class=pubdate-single><time datetime=2022-01-23 pubdate>23 Jan, 2022
</time>‚Ä¢ 995 words ‚Ä¢ 5 min
‚Ä¢ updated <time datetime=2025-09-05>05 Sep, 2025</time></span></p><div class=old-entry-warning role=note>‚ö†Ô∏è This post is over one year old. It may no longer be up to date. Opinions may have changed.</div><content><p>This document describes my workflow to manage <code>APKBUILDs</code> for the
<a href=https://gitlab.alpinelinux.org/alpine/aports>aports</a> repository in <a href=https://alpinelinux.org/>Alpine Linux</a>.</p><h2 id=disclaimer>Disclaimer</h2><p>First of all, this post is not a substitute to the <a href=https://wiki.alpinelinux.org/wiki/Main_Page>AlpineWiki</a>
and it will likely get outdated at some point. In particular, refer to the
following articles for up-to-date documentation that will outlive this blog:</p><ul><li><a href=https://wiki.alpinelinux.org/wiki/APKBUILD_Reference>https://wiki.alpinelinux.org/wiki/APKBUILD_Reference</a></li><li><a href=https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers>https://wiki.alpinelinux.org/wiki/Abuild_and_Helpers</a></li><li><a href=https://wiki.alpinelinux.org/wiki/Aports_tree>https://wiki.alpinelinux.org/wiki/Aports_tree</a></li><li><a href=https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package>https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package</a></li></ul><p>This article is not a tutorial, as such it assumes you already know what an
<code>APKBUILD</code> is and how to use <code>abuild</code>. In particular, you should have the
<code>alpine-sdk</code>, <code>atools</code> and <code>spdx-licenses-list</code> packages installed in your
system.</p><h2 id=structure>Structure</h2><p>I manage my packages with <code>git</code>. Create a GitLab account on
<a href=https://gitlab.alpinelinux.org/>https://gitlab.alpinelinux.org/</a>, fork the <a href=https://gitlab.alpinelinux.org/alpine/aports><code>aports</code></a> tree, and <code>git clone</code> your fork.</p><p>The structure follows Alpine Linux repositories:</p><div class=codeblock><div class=highlight><pre tabindex=0 class=chroma><code class=language-plaintext data-lang=plaintext><span class=line><span class=cl>$ git clone https://gitlab.alpinelinux.org/alpine/aports.git &amp;&amp; tree -L 1 aports
</span></span><span class=line><span class=cl>aports
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ CODINGSTYLE.md
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ COMMITSTYLE.md
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ README.md
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ community
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ main
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ non-free
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ scripts
</span></span><span class=line><span class=cl>‚îú‚îÄ‚îÄ testing
</span></span><span class=line><span class=cl>‚îî‚îÄ‚îÄ unmaintained</span></span></code></pre></div></div><h2 id=bootstrapping>Bootstrapping</h2><p>I am going to illustrate with a package I added recently, <a href=https://packages.debian.org/source/sensible-utils><code>sensible-utils</code></a>:</p><ul><li><p>Before you even begin, check if the package already exists, do a quick search in the <a href="https://pkgs.alpinelinux.org/packages?name=sensible%2Dutils">Alpine Repositories</a><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>.</p></li><li><p>Start by scaffolding a new <code>APKBUILD</code> from the base template:</p></li></ul><div class=codeblock data-lang=shell><div class=codeblock-header><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ <span class=nb>cd</span> aports/testing  <span class=c1># Always add new packages in testing/ first.</span>
</span></span><span class=line><span class=cl>$ newapkbuild sensible-utils
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> sensible-utils
</span></span><span class=line><span class=cl>$ <span class=nv>$EDITOR</span> APKBUILD</span></span></code></pre></div></div><p><strong>Note</strong>: If you have a language-specific package (e.g. perl, python, rust),
use the language-specific template instead of the base one. Run <code>newapkbuild -h</code> to list available templates. There are also some <code>apkbuild-*</code> helpers such
as <code>apkbuild-pypi</code> and <code>apkbuild-cpan</code>.</p><ul><li><p>Fill in <code>APKBUILD</code> metadata like <code>pkgname=</code>, <code>url=</code>, etc. Refer to the AlpineWiki for up-to-date best practices.</p></li><li><p>By doing so, I produced the following <code>APKBUILD</code>:</p></li></ul><div class=codeblock data-lang=bash><div class=codeblock-header><span class=codeblock-language>bash</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>pkgname</span><span class=o>=</span>sensible-utils
</span></span><span class=line><span class=cl><span class=nv>pkgver</span><span class=o>=</span>0.0.14
</span></span><span class=line><span class=cl><span class=nv>pkgrel</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>pkgdesc</span><span class=o>=</span><span class=s2>&#34;Utilities for sensible alternative selection&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>url</span><span class=o>=</span><span class=s2>&#34;https://packages.debian.org/source/sensible-utils&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>arch</span><span class=o>=</span><span class=s2>&#34;all&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>license</span><span class=o>=</span><span class=s2>&#34;GPL-2.0-or-later&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>makedepends</span><span class=o>=</span><span class=s2>&#34;po4a&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>subpackages</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$pkgname</span><span class=s2>-doc&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>source</span><span class=o>=</span><span class=s2>&#34;http://ftp.debian.org/debian/pool/main/s/</span><span class=nv>$pkgname</span><span class=s2>/</span><span class=si>${</span><span class=nv>pkgname</span><span class=si>}</span><span class=s2>_</span><span class=nv>$pkgver</span><span class=s2>.tar.xz&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>builddir</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=nv>$pkgname</span><span class=s2>.git&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>build<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	./configure --prefix<span class=o>=</span>/usr
</span></span><span class=line><span class=cl>	make
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>check<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	make -k check
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>package<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	make <span class=nv>DESTDIR</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/&#34;</span> install
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># only works with update-alternatives, specific to debian</span>
</span></span><span class=line><span class=cl>	rm <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin/select-editor&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>sha512sums</span><span class=o>=</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>15ba996f811ab3a9c1f5726f35766d74aafdf925c5c2392b33c6643d6c439796a742f9d0f4625c79de640e6b5e4a6a032b768eb1bc4ac31b448f9767b0ceed44  sensible-utils_0.0.14.tar.xz
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span></span></span></code></pre></div></div><p><strong>Note</strong>: <code>$srcdir</code> refers to the <code>src/</code> directory within <code>sensible-utils</code>. <code>$pkgdir</code>
refers to the <code>pkg/</code> directory within <code>sensible-utils</code>.</p><p>If you&rsquo;re used to Arch Linux <code>PKGBUILDs</code> you&rsquo;ll notice a striking similarity to
<code>APKBUILDs</code>. I highlighted a few notable differences in a previous post, <a href=https://perrotta.dev/2022/01/my-first-apkbuild/#build-comparison><code>My First APKBUILD</code></a>.</p><h2 id=adjustments>Adjustments</h2><ul><li><p>Generate the checksums with <code>abuild checksum</code>. It will automatically update the <code>APKBUILD</code> inplace.</p></li><li><p>Download and extract package files with <code>abuild unpack</code>.</p></li><li><p><code>ls src/</code> and check the directory structure. Update <code>$builddir</code> in your
<code>APKBUILD</code> to match it. Usually it will be <code>$srcdir/$pkgname-$pkgver</code>, but
sometimes tiny adjustments are necessary. In this case, it was
<code>$srcdir/$pkgname.git</code>.</p></li><li><p>Then run <code>abuild -r</code>. If everything goes well, your package (and subpackages,
if any) will be successfully built<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup> in an isolated environment and placed
in <code>~/packages</code> (<code>sensible-utils-0.0.14-r0.apk</code> and
<code>sensible-utils-doc-0.0.14-r0.apk</code>), however that doesn&rsquo;t mean it is a decent
package yet.</p></li><li><p>Run <code>apkbuild-lint APKBUILD</code> and <code>abuild validate</code><sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> to lint your package
and catch common errors. Fix the errors, if any.</p></li></ul><h2 id=request-feedback-if-needed>Request feedback if needed</h2><p>If the package is only relevant to you, stop here. <code>git commit</code>, <code>git push</code>, and then you&rsquo;re done. Install the package with <code>doas apk add &lt;pkg></code>.</p><p>Otherwise, if the package might be potentially useful to other Alpine users, you could consider uploading it to the <a href=https://gitlab.alpinelinux.org/alpine/aports>aports</a> repository.</p><p>Before you do so, stop for a moment and make an honest judgment whether this is a high quality package and whether you&rsquo;re confident it is clean and polished enough, following the best practices documented in the Wiki. The answer doesn&rsquo;t need to be positive, it&rsquo;s perfectly OK to commit mistakes and everyone is a newbie at some point.</p><p>If the answer is negative, or if you&rsquo;re new to this process and would like some help, fear no more! There are at least two decent community resources wherein to ask for help:</p><ol><li><p><a href=https://wiki.alpinelinux.org/wiki/Alpine_Linux:IRC><code>#alpine-devel</code> on OFTC IRC</a> Drew DeVault wrote a good <a href=https://drewdevault.com/2021/11/24/A-philosophy-for-instant-messaging.html>post</a> about IRC etiquette.</p></li><li><p><a href=https://wiki.alpinelinux.org/wiki/Alpine_Linux:Mailing_lists><code>alpine-devel</code> mailing list</a>.</p></li></ol><p>If you&rsquo;re part of any other community (e.g. Reddit, Discord) feel free to ask therein as well. Avoid posting everywhere though, pick one community, draft your post and then patiently wait.</p><h2 id=publish-your-package>Publish your package</h2><p>If all is well, it&rsquo;s time to publish your <code>APKBUILD</code>. Follow the up-to-date
steps at
<a href=https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package#Code_review>https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package#Code_review</a>. There are basically two options:</p><ol><li><p>Send a gitlab merge request (MR). This follows the standard git forge workflow
(GitHub / BitBucket / GitLab) wherein you fork the main repository, create
a branch in your own clone, push it and then initiate a pull request<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p></li><li><p>Alternatively, send an email with your patch to the <code>aports</code> mailing list
with <a href=https://git-send-email.io/><code>git send-email</code></a>:</p></li></ol><div class=codeblock data-lang=shell><div class=codeblock-header><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ git config sendemail.to <span class=s2>&#34;alpine-aports@lists.alpinelinux.org&#34;</span>
</span></span><span class=line><span class=cl>$ git send-email -1  <span class=c1># Implicitly uses --to=alpine-linux@lists.alpinelinux.org as set above</span></span></span></code></pre></div></div><p><strong>Tip</strong>: The second approach has a steep learning curve, however once you
figure it out it&rsquo;s actually faster, simpler and more streamlined. Whenever
a new email is sent to the aports mailing list, a MR is automatically created
on GitLab.</p><p><strong>Note</strong>: If you adopt the email workflow and need to send a follow-up to your
initial patch, do not use <code>--in-reply-to</code>. Instead, create a new email thread.
This is needed because as of this post new GitLab MRs are only created when new
email threads are created. Replies to existing email threads do not update the
MR patch.</p><p>And that&rsquo;s all! Other useful tips:</p><ul><li>Use <a href=https://repology.org/>repology</a> to look for preexisting packages in other Linux (or even BSD) distributions, it&rsquo;s very handy as a starting point if you have no idea how to package a given package. In particular, Arch Linux <code>PKGBUILDs</code> are very similar to <code>APKBUILDs</code>. Gentoo <code>EBUILDs</code> and FreeBSD <code>Makefiles</code> are also reasonable approximations.</li><li>Use <code>abump</code> to bump pkgver in <code>APKBUILD</code> files if the package gets an update to a newer upstream release.</li><li>Use <code>apkgrel</code> to bump or reset the <code>pkgrel</code> value of your <code>APKBUILD</code>.</li><li>Use <a href=https://perrotta.dev/2022/01/arch-linux-new-pkgbuild-workflow/#bonus-track-upstream><code>urlwatch</code></a> to track upstream updates.</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>If you use <a href=https://duckduckgo.com/>https://duckduckgo.com/</a>, query for <code>!alpine sensible-utils</code>.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>Package debugging is out of scope of this post.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><strong>Update(2025-05-10)</strong>: Previously: <code>abuild sanitycheck</code>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>In GitLab it&rsquo;s called Merge Request (MR). The list of all aports MRs is <a href=https://gitlab.alpinelinux.org/alpine/aports/-/merge_requests>available on GitLab</a>.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p style=text-align:center;margin-top:2em>‚Äî ¬ß ‚Äî</p><div style=display:flex;justify-content:space-between><p>Reply via
<a href="mailto:serendipity@perrotta.dev?subject=Reply to: Alpine%20Linux%3a%20New%20APKBUILD%20Workflow">email</a></p><p><a href=https://perrotta.dev/tags/dev/>#dev</a>
<a href=https://perrotta.dev/tags/bestof/>#bestof</a></p></div></main><hr><footer><span>¬© 2021 - 2026 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a> ¬∑ <a href=/canary>üê¶</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=mailto:serendipity@perrotta.dev title="Email address"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.3em" width="1.3em"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)"><path d="M26 191c-4-5 16-23 44-40l50-31 50 31c28 17 48 35 44 40-7 12-181 12-188 0z"/><path d="M22 103l3-58 93-3c104-3 105-3 1e2 71l-3 46-48-29-47-30-38 23c-20 13-43 27-50 31-10 6-12-5-10-51z"/></g></svg>
</a><a target=_blank rel=noopener class=social-link href=https://perrotta.dev/index.xml title="RSS feed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 56.693 56.693" height="1em" width="1em"><path d="M3.428 31.085c6.19.0 12.009 2.418 16.382 6.816 4.381 4.398 6.793 10.256 6.793 16.492h9.539c0-18.113-14.676-32.848-32.714-32.848v9.54zM3.443 14.174c22.061.0 40.01 18.047 40.01 40.231h9.539c0-27.445-22.229-49.77-49.549-49.77v9.539zM16.634 47.741c0 3.648-2.959 6.607-6.607 6.607S3.42 51.39 3.42 47.741c0-3.65 2.958-6.607 6.606-6.607s6.608 2.957 6.608 6.607z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg></a></div><div class=badge-wrapper><a target=_blank href=https://indieweb.org/ title=IndieWebCamp><img src=https://perrotta.dev/indieweb88x31-flat.webp width=88 height=31 alt=IndieWebCamp>
</a><a target=_blank href=https://creativecommons.org/licenses/by-nc-sa/4.0/ title="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License"><img src=https://perrotta.dev/cc-by-nc-sa-4.0-88x31.webp width=88 height=31 alt="Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License">
</a><a target=_blank href=https://512kb.club title="512kb.club badge"><img src=https://perrotta.dev/green-team.webp alt="a proud member of the green team of 512KB club">
</a><a target=_blank href=https://powrss.com/ title=powRSS><img src=https://perrotta.dev/powrss-88-31.webp alt=powRSS>
</a><a target=_blank href=https://www.vim.org/ title="Vim text editor"><img src=https://perrotta.dev/vim.webp alt="Vim text editor">
</a><a target=_blank href=https://edleeman.co.uk/cookie-zero/ title="Cookie Zero"><img src=https://perrotta.dev/cookiezero.webp alt="Cookie Zero">
</a><a target=_blank href="https://validator.w3.org/feed/check.cgi?url=https://perrotta.dev/index.xml" title="Valid RSS feed"><img src=https://perrotta.dev/valid-rss-rogers.webp alt="Valid RSS feed"></a></div><p class=footer-statement>This site respects your privacy by not containing <a href=https://www.nevermonetize.com/>ads</a>,
not using tracking cookies,
and not collecting any personally identifiable information.
<a href=/ai>Gen AI policy</a>.</p></footer><script>window.snowflakeAnimation={canvas:null,ctx:null,particles:[],animationFrameId:null,isRunning:!1,christmasEmojis:["‚ùÑÔ∏è","üéÑ","üéÖ","üéÅ","‚õÑ","üîî"],init:function(){this.canvas=document.createElement("canvas"),this.canvas.id="snowflake-canvas",this.canvas.style.position="fixed",this.canvas.style.top="0",this.canvas.style.left="0",this.canvas.style.pointerEvents="none",this.canvas.style.zIndex="-1",document.body.insertBefore(this.canvas,document.body.firstChild),this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas.bind(this))},resizeCanvas:function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},createSnowflakes:function(){this.particles=[];for(let e=0;e<15;e++)this.particles.push(new this.Snowflake(this))},Snowflake:class{constructor(e){this.animation=e,this.x=Math.random()*e.canvas.width,this.y=-20,this.size=Math.random()*20+10,this.speedY=Math.random()*2+1,this.speedX=(Math.random()-.5)*2,this.opacity=Math.random()*.5+.5,this.emoji=e.christmasEmojis[Math.floor(Math.random()*e.christmasEmojis.length)]}update(){this.y+=this.speedY,this.x+=this.speedX,this.y>this.animation.canvas.height&&(this.y=-20,this.x=Math.random()*this.animation.canvas.width,this.emoji=this.animation.christmasEmojis[Math.floor(Math.random()*this.animation.christmasEmojis.length)])}draw(){this.animation.ctx.globalAlpha=this.opacity,this.animation.ctx.font=`${this.size}px Arial`,this.animation.ctx.fillText(this.emoji,this.x,this.y),this.animation.ctx.globalAlpha=1}},animate:function(){if(!this.isRunning)return;this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.particles.forEach(e=>{e.update(),e.draw()}),this.animationFrameId=requestAnimationFrame(this.animate.bind(this))},start:function(){if(this.isRunning)return;this.isRunning=!0,this.createSnowflakes(),this.animate()},stop:function(){this.isRunning=!1,this.animationFrameId&&cancelAnimationFrame(this.animationFrameId),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}},window.snowflakeAnimation.init(),localStorage.getItem("snowflakes-enabled")==="true"&&window.snowflakeAnimation.start();function setTheme(e){e==="auto"?(document.documentElement.removeAttribute("data-theme"),localStorage.removeItem("theme")):(document.documentElement.setAttribute("data-theme",e),localStorage.setItem("theme",e)),updateThemeIcon()}function getCurrentThemeState(){return localStorage.getItem("theme")||"auto"}function updateThemeIcon(){const e=getCurrentThemeState(),t={auto:"üåì",dark:"üåô",light:"‚òÄÔ∏è"};document.getElementById("theme-toggle-icon").textContent=t[e]}function getSnowflakeState(){return localStorage.getItem("snowflakes-enabled")==="true"}function updateSnowflakeIcon(){const e=document.getElementById("snowflake-toggle-icon"),t=getSnowflakeState();e.textContent=t?"‚ùÑÔ∏è":"‚òÉÔ∏è"}function setSnowflakeState(e){e?(localStorage.setItem("snowflakes-enabled","true"),document.documentElement.classList.add("snowflakes-enabled"),window.snowflakeAnimation&&window.snowflakeAnimation.start()):(localStorage.setItem("snowflakes-enabled","false"),document.documentElement.classList.remove("snowflakes-enabled"),window.snowflakeAnimation&&window.snowflakeAnimation.stop()),updateSnowflakeIcon()}const saved=localStorage.getItem("theme");saved&&document.documentElement.setAttribute("data-theme",saved),updateThemeIcon(),updateSnowflakeIcon(),document.getElementById("theme-toggle").addEventListener("click",function(){const e=getCurrentThemeState(),t={auto:"light",light:"dark",dark:"auto"},n=t[e];setTheme(n)}),document.getElementById("snowflake-toggle").addEventListener("click",function(){const e=getSnowflakeState();setSnowflakeState(!e)}),document.addEventListener("click",function(e){if(!e.target.matches("[data-copy-code]"))return;const t=e.target,n=t.closest(".codeblock");if(!n)return;const s=n.querySelector("pre code");if(!s)return;const o=s.innerText;if(!navigator.clipboard||!navigator.clipboard.writeText)return;navigator.clipboard.writeText(o).then(function(){t.dataset.originalLabel=t.textContent,t.textContent="Copied!",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)}).catch(function(){t.textContent="Failed",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)})})</script></body></html>