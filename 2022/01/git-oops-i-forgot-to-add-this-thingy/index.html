<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Git: Oops I forgot to add this thingy | Not Just Serendipity</title>
<meta name=keywords content="dev"><meta name=description content="Here&rsquo;s a situation that happens often during development:
Suppose you committed something to git. A few commits later, you realized you
forgot to add something to that commit, or possibly missed a link, or even
spotted a typo. How do you go about fixing it?"><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://thiagowfx.github.io/2022/01/git-oops-i-forgot-to-add-this-thingy/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://thiagowfx.github.io/favicon.ico><link rel=apple-touch-icon href=https://thiagowfx.github.io/apple-touch-icon.png><link rel=mask-icon href=https://thiagowfx.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Git: Oops I forgot to add this thingy"><meta property="og:description" content="Here&rsquo;s a situation that happens often during development:
Suppose you committed something to git. A few commits later, you realized you
forgot to add something to that commit, or possibly missed a link, or even
spotted a typo. How do you go about fixing it?"><meta property="og:type" content="article"><meta property="og:url" content="https://thiagowfx.github.io/2022/01/git-oops-i-forgot-to-add-this-thingy/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-21T15:58:17-05:00"><meta property="article:modified_time" content="2022-01-21T15:58:17-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Git: Oops I forgot to add this thingy"><meta name=twitter:description content="Here&rsquo;s a situation that happens often during development:
Suppose you committed something to git. A few commits later, you realized you
forgot to add something to that commit, or possibly missed a link, or even
spotted a typo. How do you go about fixing it?"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://thiagowfx.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Git: Oops I forgot to add this thingy","item":"https://thiagowfx.github.io/2022/01/git-oops-i-forgot-to-add-this-thingy/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Git: Oops I forgot to add this thingy","name":"Git: Oops I forgot to add this thingy","description":"Here\u0026rsquo;s a situation that happens often during development:\nSuppose you committed something to git. A few commits later, you realized you forgot to add something to that commit, or possibly missed a link, or even spotted a typo. How do you go about fixing it?\n","keywords":["dev"],"articleBody":"Here’s a situation that happens often during development:\nSuppose you committed something to git. A few commits later, you realized you forgot to add something to that commit, or possibly missed a link, or even spotted a typo. How do you go about fixing it?\nTeam If you’re working on a repository with a team, you should just git commit and git push. Write an eloquent commit message to refer to the previous commit in which you forgot to include your changes.\nSelf Now, if you’re working on a standalone repository, just for yourself1, this creates an opportunity to rewrite your history in a cleaner way. The workflow is as follows:\nMake the changes or fixes you had originally forgot to. git add them. Identify the commit id in which you originally wanted to make those changes. git log or tig are simple CLI-oriented ways to do so. Hereafter assume this id is abcdef. Commit your changes while referencing the original commit and then rewrite history: $ git commit --fixup=abcdef # Then pick one of: $ git rebase -i --root $ git rebase -i abcdef~1 # And then save the file as is. Double-check everything went as expected with git log and/or git show and/or tig. If you’re happy with the current state of your repository, commit the sin: git push --force. XKCD Courtesy of Randall Munroe\nReferences tig, in case you don’t know: tig is an ncurses-based text-mode interface for git. It functions mainly as a Git repository browser, but can also assist in staging changes for commit at chunk level and act as a pager for output from various Git commands.\ngit rebase --root: c.f. Stack Overflow. This is just a lazy way to make the rebase include abcdef. You could do something like git rebase -i HEAD~10 where 10 is an arbitrary guess, but this will only work if abcdef is within the most 10 recent commits. Alternatively git rebase -i abcdef~1 also works. For example: your dotfiles, or your personal blog. ↩︎\n","wordCount":"335","inLanguage":"en","datePublished":"2022-01-21T15:58:17-05:00","dateModified":"2022-01-21T15:58:17-05:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://thiagowfx.github.io/2022/01/git-oops-i-forgot-to-add-this-thingy/"},"publisher":{"@type":"Person","name":"Not Just Serendipity","logo":{"@type":"ImageObject","url":"https://thiagowfx.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thiagowfx.github.io/ accesskey=h title="Not Just Serendipity (Alt + H)"><img src=https://thiagowfx.github.io/apple-touch-icon.png alt aria-label=logo height=32>Not Just Serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://thiagowfx.github.io/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://thiagowfx.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://thiagowfx.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://thiagowfx.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Git: Oops I forgot to add this thingy</h1><div class=post-meta><span title='2022-01-21 15:58:17 -0500 -0500'>January 21, 2022</span>&nbsp;·&nbsp;335 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#team aria-label=Team>Team</a></li><li><a href=#self aria-label=Self>Self</a></li><li><a href=#references aria-label=References>References</a></li></ul></div></details></div><div class=post-content><p>Here&rsquo;s a situation that happens often during development:</p><p>Suppose you committed something to <code>git</code>. A few commits later, you realized you
forgot to add something to that commit, or possibly missed a link, or even
spotted a typo. How do you go about fixing it?</p><h2 id=team>Team<a hidden class=anchor aria-hidden=true href=#team>#</a></h2><p>If you&rsquo;re working on a repository with a team, you should just <code>git commit</code> and <code>git push</code>. Write an <a href=https://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html>eloquent commit message</a> to refer to the previous commit in which you forgot to include your changes.</p><h2 id=self>Self<a hidden class=anchor aria-hidden=true href=#self>#</a></h2><p>Now, if you&rsquo;re working on a standalone repository, just for yourself<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, this
creates an opportunity to rewrite your history in a cleaner way. The workflow
is as follows:</p><ol><li>Make the changes or fixes you had originally forgot to.</li><li><code>git add</code> them.</li><li>Identify the commit id in which you originally wanted to make those changes. <code>git log</code> or <a href=https://jonas.github.io/tig/><code>tig</code></a> are simple CLI-oriented ways to do so. Hereafter assume this id is <code>abcdef</code>.</li><li>Commit your changes while referencing the original commit and then rewrite history:</li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ git commit --fixup<span style=color:#f92672>=</span>abcdef
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Then pick one of:</span>
</span></span><span style=display:flex><span>$ git rebase -i --root
</span></span><span style=display:flex><span>$ git rebase -i abcdef~1
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># And then save the file as is.</span>
</span></span></code></pre></div><ol start=5><li>Double-check everything went as expected with <code>git log</code> and/or <code>git show</code> and/or <code>tig</code>.</li><li>If you&rsquo;re happy with the current state of your repository, commit the sin: <code>git push --force</code>.</li></ol><figure class=align-center><a href=https://xkcd.com/1296/><img loading=lazy src=https://imgs.xkcd.com/comics/git_commit.png#center alt="Merge branch 'asdfasjkfdlas/alkdjf' into sdkjfls-final"></a><figcaption><p>XKCD Courtesy of Randall Munroe</p></figcaption></figure><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><code>tig</code>, in case you don&rsquo;t know:</li></ul><blockquote><p><a href=https://jonas.github.io/tig/><code>tig</code></a> is an ncurses-based text-mode interface for git. It functions mainly as
a Git repository browser, but can also assist in staging changes for commit
at chunk level and act as a pager for output from various Git commands.</p></blockquote><ul><li><code>git rebase --root</code>: c.f. <a href=https://stackoverflow.com/a/23000315/1745064>Stack
Overflow</a>. This is just a lazy
way to make the rebase include <code>abcdef</code>. You could do something like <code>git rebase -i HEAD~10</code> where 10 is an arbitrary guess, but this will only work if
<code>abcdef</code> is within the most 10 recent commits. Alternatively <code>git rebase -i abcdef~1</code> also works.</li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>For example: your <a href=https://gitub.com/thiagowfx/.dotfiles>dotfiles</a>, or your personal blog.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://thiagowfx.github.io/tags/dev/>dev</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: Not%20Just%20Serendipity comment for 'Git%3a%20Oops%20I%20forgot%20to%20add%20this%20thingy'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2023 Thiago Perrotta • <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a> •</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>