<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title class=title>My First APKBUILD | ¬¨ just serendipity üçÄ</title><meta name=title content="My First APKBUILD"><meta name=description content="In the same spirit of my first PKGBUILD and Ebuild, herein I will describe my first APKBUILD.
At a glance
Alpine Linux package management is very similar to Arch Linux, with tiny differences:

PKGBUILD ‚Üí APKBUILD: The filename is obviously different. Their format are very similar though, both of them are bash scripts with variables and functions. In particular, there&rsquo;s check, patch, build and package.
cp /usr/share/pacman/PKGBUILD.proto ‚Üí newapkbuild: Template versus scaffolding.
pacman ‚Üí apk: The package manager is different.
makepkg -s ‚Üí abuild -r: makepkg drives all things package building for pacman. abuild drives package building for apk.
makepkg -i ‚Üí apk add <pkg>: makepkg can also drive package installations whereas abuild cannot, apk must be used.
namcap ‚Üí apkbuild-lint (from atools) + abuild sanitycheck1: Linters are different.
updpkgsums ‚Üí abuild checksum: Generate hashes for package sources.


      XKCD Courtesy of Randall Munroe"><meta name=keywords content="bestof,dev,"><meta property="og:url" content="https://perrotta.dev/2022/01/my-first-apkbuild/"><meta property="og:site_name" content="¬¨ just serendipity üçÄ"><meta property="og:title" content="My First APKBUILD"><meta property="og:description" content="In the same spirit of my first PKGBUILD and Ebuild, herein I will describe my first APKBUILD.
At a glance Alpine Linux package management is very similar to Arch Linux, with tiny differences:
PKGBUILD ‚Üí APKBUILD: The filename is obviously different. Their format are very similar though, both of them are bash scripts with variables and functions. In particular, there‚Äôs check, patch, build and package. cp /usr/share/pacman/PKGBUILD.proto ‚Üí newapkbuild: Template versus scaffolding. pacman ‚Üí apk: The package manager is different. makepkg -s ‚Üí abuild -r: makepkg drives all things package building for pacman. abuild drives package building for apk. makepkg -i ‚Üí apk add <pkg>: makepkg can also drive package installations whereas abuild cannot, apk must be used. namcap ‚Üí apkbuild-lint (from atools) + abuild sanitycheck1: Linters are different. updpkgsums ‚Üí abuild checksum: Generate hashes for package sources. XKCD Courtesy of Randall Munroe"><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2022-01-07T20:03:07-05:00"><meta property="article:modified_time" content="2025-09-05T18:20:12+02:00"><meta property="article:tag" content="Bestof"><meta property="article:tag" content="Dev"><meta name=twitter:card content="summary"><meta name=twitter:title content="My First APKBUILD"><meta name=twitter:description content="In the same spirit of my first PKGBUILD and Ebuild, herein I will describe my first APKBUILD.
At a glance Alpine Linux package management is very similar to Arch Linux, with tiny differences:
PKGBUILD ‚Üí APKBUILD: The filename is obviously different. Their format are very similar though, both of them are bash scripts with variables and functions. In particular, there‚Äôs check, patch, build and package. cp /usr/share/pacman/PKGBUILD.proto ‚Üí newapkbuild: Template versus scaffolding. pacman ‚Üí apk: The package manager is different. makepkg -s ‚Üí abuild -r: makepkg drives all things package building for pacman. abuild drives package building for apk. makepkg -i ‚Üí apk add <pkg>: makepkg can also drive package installations whereas abuild cannot, apk must be used. namcap ‚Üí apkbuild-lint (from atools) + abuild sanitycheck1: Linters are different. updpkgsums ‚Üí abuild checksum: Generate hashes for package sources. XKCD Courtesy of Randall Munroe"><meta itemprop=name content="My First APKBUILD"><meta itemprop=description content="In the same spirit of my first PKGBUILD and Ebuild, herein I will describe my first APKBUILD.
At a glance Alpine Linux package management is very similar to Arch Linux, with tiny differences:
PKGBUILD ‚Üí APKBUILD: The filename is obviously different. Their format are very similar though, both of them are bash scripts with variables and functions. In particular, there‚Äôs check, patch, build and package. cp /usr/share/pacman/PKGBUILD.proto ‚Üí newapkbuild: Template versus scaffolding. pacman ‚Üí apk: The package manager is different. makepkg -s ‚Üí abuild -r: makepkg drives all things package building for pacman. abuild drives package building for apk. makepkg -i ‚Üí apk add <pkg>: makepkg can also drive package installations whereas abuild cannot, apk must be used. namcap ‚Üí apkbuild-lint (from atools) + abuild sanitycheck1: Linters are different. updpkgsums ‚Üí abuild checksum: Generate hashes for package sources. XKCD Courtesy of Randall Munroe"><meta itemprop=datePublished content="2022-01-07T20:03:07-05:00"><meta itemprop=dateModified content="2025-09-05T18:20:12+02:00"><meta itemprop=wordCount content="1189"><meta itemprop=keywords content="Bestof,Dev"><meta name=referrer content="no-referrer-when-downgrade"><link rel="shortcut icon" href=https://perrotta.dev/favicon.ico><link rel=canonical href=https://perrotta.dev/2022/01/my-first-apkbuild/><link rel=stylesheet href=https://perrotta.dev/theme.css><style>body{text-align:left;margin:auto}h1,h2,h3,h4,h5,h6,footer,nav{font-family:var(--font-title)}footer{font-size:smaller;text-align:center;display:flex;flex-direction:column;gap:6px}footer>a{text-decoration:none}a{color:var(--link-color)}.header-top{display:flex;align-items:center;justify-content:space-between;gap:12px}a.title{text-decoration:none;border:0;display:flex;align-items:center;column-gap:10px}nav a{margin-right:12px;display:inline-block}hr{border:none;border-top:1px dashed var(--border-color)}nav a.has-emoji .nav-emoji{display:none}nav a.has-emoji:hover .nav-emoji,nav a.active-star .nav-emoji{display:inline}nav a.has-emoji:hover .nav-text,nav a.active-star .nav-text{display:none}textarea{width:100%;font-size:16px}input{font-size:16px}content{line-height:1.4}table{width:100%}img{max-width:100%}code{background-color:var(--code-bg)}li code,p code{font-size:.9em}pre{margin:1.5rem 0;border-radius:10px;background-color:var(--code-bg);overflow-x:auto}pre code{display:block;padding:18px 22px;white-space:pre;font-size:17px;overflow-x:auto;background:0 0;color:inherit}code,pre{font-family:var(--font-code)}.highlight{margin:1.5rem 0}.highlight pre{margin:0;border-radius:10px;background:0 0}.highlight pre code{padding:0}.codeblock{margin:1.5rem 0;border-radius:12px;border:1px solid var(--border-color);background:var(--code-bg);overflow:hidden}.codeblock-header{display:flex;justify-content:space-between;align-items:center;font-size:.85em;padding:10px 16px;background:rgba(0,0,0,2%);border-bottom:1px solid var(--border-color);color:var(--color-gray)}.codeblock-language{font-weight:600}.codeblock-copy{background:0 0;border:none;color:inherit;padding:2px 6px;font-size:.9em;cursor:pointer}.codeblock .highlight{margin:0;border:none}.codeblock .highlight pre{padding:18px 22px}.chroma{color:var(--chroma-text)!important;background-color:var(--chroma-bg)!important}.chroma .c,.chroma .c1,.chroma .ch,.chroma .cm,.chroma .cs,.chroma .cp,.chroma .cpf{color:var(--chroma-comment)!important}.chroma .k,.chroma .kc,.chroma .kd,.chroma .kn,.chroma .kp,.chroma .kr,.chroma .kt{color:var(--chroma-keyword)!important}.chroma .s,.chroma .sa,.chroma .sb,.chroma .sc,.chroma .dl,.chroma .sd,.chroma .s2,.chroma .se,.chroma .sh,.chroma .si,.chroma .sx,.chroma .sr,.chroma .s1,.chroma .ss{color:var(--chroma-string)!important}.chroma .nf,.chroma .fm{color:var(--chroma-function)!important}.chroma .n,.chroma .na,.chroma .nc,.chroma .no,.chroma .ni,.chroma .ne,.chroma .nl,.chroma .nn,.chroma .nx,.chroma .py,.chroma .nt,.chroma .nb,.chroma .bp,.chroma .nv,.chroma .vc,.chroma .vg,.chroma .vi,.chroma .vm{color:var(--chroma-name)!important}.chroma .m,.chroma .mb,.chroma .mf,.chroma .mh,.chroma .mi,.chroma .il,.chroma .mo{color:var(--chroma-number)!important}.chroma .o,.chroma .ow{color:var(--chroma-operator)!important}.chroma .nd{color:var(--chroma-function)!important}.chroma .lnt,.chroma .ln{color:var(--chroma-comment)!important}.chroma .gi{color:var(--chroma-string)!important}.chroma .gd{color:var(--chroma-name)!important}blockquote{border-left:2px solid #999;color:var(--heading-color);padding-left:25px;padding-right:15px;font-style:italic}ul.blog-posts{list-style-type:none;padding:unset}ul.blog-posts li{display:flex;gap:8px;margin-bottom:8px}ul.blog-posts li span{flex:0 0 130px}ul.blog-posts li a:visited{color:#8b6fcb}.pubdate-list{color:var(--color-gray);font-style:italic}.pubdate-single{color:var(--color-gray);font-style:italic}.social-link-wrapper{display:flex;justify-content:center;align-items:center;gap:8px}.social-link{text-decoration:none;font-size:1.4em}#theme-toggle{background:0 0;border:none;padding:0;cursor:pointer;font-size:1.2em;display:inline-block;vertical-align:middle;transition:transform .2s ease}#theme-toggle:hover{transform:scale(1.15)}#theme-toggle:active{transform:scale(.95)}.badge-wrapper{display:flex;justify-content:center;align-items:center;gap:12px;flex-wrap:wrap}.badge-wrapper a{display:inline-block;text-decoration:none;transition:transform .2s ease}.badge-wrapper a:hover{transform:translateY(-2px)}.badge-wrapper img{display:block;height:auto}.footer-statement{font-size:.75em;margin:0}sup.gray{color:var(--color-gray)}.tag-cloud{display:flex;flex-wrap:wrap;gap:12px;margin-top:16px}.tag-pill{display:inline-flex;align-items:center;gap:6px;padding:6px 12px;background:var(--code-bg);border-radius:6px;text-decoration:none;transition:all .2s ease}.tag-pill:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}.tag-count{color:var(--color-gray);font-size:.9em}.rss-link{display:inline-block;margin-left:12px;padding:4px 10px;background:var(--link-color);color:#fff;text-decoration:none;border-radius:4px;font-size:.5em;font-weight:500;text-transform:uppercase;letter-spacing:.5px;transition:all .2s ease;vertical-align:middle}.rss-link:hover{transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2);opacity:.9}.year-group{margin:20px 0;padding:16px 0;transition:all .2s ease}.year-group summary{cursor:pointer;user-select:none;padding:8px 0;font-size:1.5rem;transition:color .2s ease;list-style:none;position:relative;padding-left:32px}.year-group summary::-webkit-details-marker{display:none}.year-group summary::before{content:'‚ñ∂';position:absolute;left:0;transition:transform .3s ease;color:var(--link-color);font-size:.8em}.year-group[open] summary::before{transform:rotate(90deg)}.year-group summary:hover{color:var(--link-color)}.year-group summary strong{font-weight:600}.year-group ul.blog-posts{margin-top:16px;padding-left:32px}.year-group ul.blog-posts li{margin-bottom:12px;transition:transform .15s ease}.year-group ul.blog-posts li:hover{transform:translateX(4px)}.year-group ul.blog-posts li a{text-decoration:none;border-bottom:1px solid transparent;transition:all .2s ease}.year-group ul.blog-posts li a:hover{border-bottom-color:var(--link-color)}@media(min-width:601px){.title{font-size:38px}}@media(max-width:600px){.title{font-size:2rem}.year-group{margin:16px 0;padding:12px 0}.year-group summary{font-size:1.3rem;padding-left:28px}.year-group summary::before{font-size:.75em}.year-group ul.blog-posts{padding-left:0;margin-top:12px}.year-group ul.blog-posts li{flex-direction:column;gap:4px;margin-bottom:16px}.year-group ul.blog-posts li span{flex:unset}ul.blog-posts li span{flex:unset}}@media(prefers-color-scheme:dark){blockquote{color:#ccc}textarea,input{background-color:#252525;color:var(--text-color)}}</style><link rel=apple-touch-icon href=https://perrotta.dev/apple-touch-icon.webp></head><body><header><div class=header-top><a href=/ class=title><img src=https://perrotta.dev/thiagowfx.webp alt="thiagowfx's avatar" width=32 height=32><h1 class=title>¬¨ just serendipity üçÄ</h1></a><button id=theme-toggle aria-label="Toggle dark mode" title="Toggle dark mode">
<span id=theme-toggle-icon>‚òÄÔ∏è</span></button></div><nav><a href=/tags/bestof/ class="has-emoji active-star"><span class=nav-emoji>‚≠ê</span>
<span class=nav-text>‚òÖ</span>
</a><a href=/posts/><span class=nav-text>Blog</span>
</a><a href=/blogroll/><span class=nav-text>Blogroll</span>
</a><a href=/tags/coding/><span class=nav-text>Coding</span></a></nav></header><main><script>document.addEventListener("keydown",function(e){if(e.key==="j"||e.key==="ArrowLeft"){const e=document.querySelector('[data-nav="prev"]');e&&e.href&&(window.location.href=e.href)}else if(e.key==="k"||e.key==="ArrowRight"){const e=document.querySelector('[data-nav="next"]');e&&e.href&&(window.location.href=e.href)}})</script><a href=https://perrotta.dev/2022/01/ventoy-automate-your-distro-hopping/ data-nav=prev style=display:none></a><a href=https://perrotta.dev/2022/01/alpine-linux-apk-logs-with-etckeeper/ data-nav=next style=display:none></a><h2><span>‚òÖ</span> My First APKBUILD</h2><p><span class=pubdate-single><time datetime=2022-01-07 pubdate>07 Jan, 2022
</time>‚Ä¢ 1189 words ‚Ä¢ 6 min
‚Ä¢ updated <time datetime=2025-09-05>05 Sep, 2025</time></span></p><div class=old-entry-warning role=note>‚ö†Ô∏è This post is over one year old. It may no longer be up to date. Opinions may have changed.</div><content><p>In the same spirit of my first PKGBUILD and <a href=https://perrotta.dev/2014/09/my-first-ebuild/><code>Ebuild</code></a>, herein I will describe my first <code>APKBUILD</code>.</p><h2 id=at-a-glance>At a glance</h2><p>Alpine Linux package management is very similar to Arch Linux, with tiny differences:</p><ul><li><code>PKGBUILD</code> ‚Üí <code>APKBUILD</code>: The filename is obviously different. Their format are very similar though, both of them are bash scripts with variables and functions. In particular, there&rsquo;s <code>check</code>, <code>patch</code>, <code>build</code> and <code>package</code>.</li><li><code>cp /usr/share/pacman/PKGBUILD.proto</code> ‚Üí <code>newapkbuild</code>: Template versus scaffolding.</li><li><code>pacman</code> ‚Üí <code>apk</code>: The package manager is different.</li><li><code>makepkg -s</code> ‚Üí <code>abuild -r</code>: <code>makepkg</code> drives all things package building for <code>pacman</code>. <code>abuild</code> drives package building for <code>apk</code>.</li><li><code>makepkg -i</code> ‚Üí <code>apk add &lt;pkg></code>: <code>makepkg</code> can also drive package installations whereas <code>abuild</code> cannot, <code>apk</code> must be used.</li><li><code>namcap</code> ‚Üí <code>apkbuild-lint</code> (from <code>atools</code>) + <code>abuild sanitycheck</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>: Linters are different.</li><li><code>updpkgsums</code> ‚Üí <code>abuild checksum</code>: Generate hashes for package sources.</li></ul><figure><a href=https://xkcd.com/927/><img src=https://imgs.xkcd.com/comics/standards.png alt="Fortunately, the charging one has been solved now that we've all standardized on mini-USB. Or is it micro-USB? Shit."></a><figcaption><p>XKCD Courtesy of Randall Munroe</p></figcaption></figure><p>Other than that, the process of writing an <code>APKBUILD</code> is very similar to writing a <code>PKGBUILD</code>. In fact, the Arch repositories (especially the <a href=https://aur.archlinux.org/>AUR</a>) tend to be much more comprehensive than Alpine&rsquo;s in terms of number of packages, so chances are if you want to write a new package for Alpine, check in Arch&rsquo;s repos first, it&rsquo;s a good starting point.</p><h2 id=my-first-package-fpp>My first package: <code>fpp</code></h2><p><code>fpp</code> stands for &lsquo;Facebook Path Picker&rsquo;.</p><p>As of the time of this post, I maintain <a href=https://aur.archlinux.org/packages/fpp-git/><code>fpp-git</code></a> in the AUR. It looks like this:</p><div class=codeblock data-lang=bash><div class=codeblock-header data-rss-hide><span class=codeblock-language>bash</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>pkgname</span><span class=o>=</span>fpp-git
</span></span><span class=line><span class=cl><span class=nv>pkgver</span><span class=o>=</span>0.9.2.r130.ge0d5cfc
</span></span><span class=line><span class=cl><span class=nv>pkgrel</span><span class=o>=</span><span class=m>1</span>
</span></span><span class=line><span class=cl><span class=nv>pkgdesc</span><span class=o>=</span><span class=s1>&#39;TUI that lets you pick paths out of its stdin and run arbitrary commands on them&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>url</span><span class=o>=</span><span class=s1>&#39;https://facebook.github.io/PathPicker&#39;</span>
</span></span><span class=line><span class=cl><span class=nv>license</span><span class=o>=(</span><span class=s1>&#39;MIT&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>source</span><span class=o>=(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>::git+https://github.com/facebook/PathPicker.git&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>sha256sums</span><span class=o>=(</span><span class=s1>&#39;SKIP&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>arch</span><span class=o>=(</span><span class=s1>&#39;any&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>makedepends</span><span class=o>=(</span><span class=s1>&#39;git&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>depends</span><span class=o>=(</span><span class=s1>&#39;python&#39;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>conflicts</span><span class=o>=(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=nv>provides</span><span class=o>=(</span><span class=s2>&#34;</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>prepare<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  rm -r <span class=s2>&#34;src/tests&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>pkgver<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  git describe --long --tags <span class=p>|</span> sed <span class=s1>&#39;s/\([^-]*-g\)/r\1/;s/-/./g&#39;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>package<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>cd</span> <span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/</span><span class=si>${</span><span class=nv>pkgname</span><span class=p>%-git</span><span class=si>}</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># library</span>
</span></span><span class=line><span class=cl>  install -Dm755 <span class=s2>&#34;fpp&#34;</span> -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/fpp&#34;</span>
</span></span><span class=line><span class=cl>  cp -a src <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/fpp&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># entrypoint</span>
</span></span><span class=line><span class=cl>  install -dm755 <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin&#34;</span>
</span></span><span class=line><span class=cl>  ln -s <span class=s2>&#34;/usr/share/fpp/fpp&#34;</span> <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=c1># documentation</span>
</span></span><span class=line><span class=cl>  install -Dm644 LICENSE -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/licenses/</span><span class=nv>$pkgname</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>  install -Dm644 <span class=s2>&#34;debian/usr/share/man/man1/fpp.1&#34;</span> -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/man/man1&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span></span></span></code></pre></div></div><p><code>PKGBUILD</code> guidelines and instructions:</p><ul><li><a href=https://wiki.archlinux.org/title/PKGBUILD>https://wiki.archlinux.org/title/PKGBUILD</a></li><li><a href=https://wiki.archlinux.org/title/Arch_package_guidelines>https://wiki.archlinux.org/title/Arch_package_guidelines</a></li></ul><p>The equivalent <code>APKBUILD</code> I wrote looks like this:</p><div class=codeblock data-lang=bash><div class=codeblock-header data-rss-hide><span class=codeblock-language>bash</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>pkgname</span><span class=o>=</span>fpp
</span></span><span class=line><span class=cl><span class=nv>pkgver</span><span class=o>=</span>0.9.2
</span></span><span class=line><span class=cl><span class=nv>pkgrel</span><span class=o>=</span><span class=m>0</span>
</span></span><span class=line><span class=cl><span class=nv>pkgdesc</span><span class=o>=</span><span class=s2>&#34;TUI that lets you pick paths out of its stdin and run arbitrary commands on them&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>url</span><span class=o>=</span><span class=s2>&#34;https://facebook.github.io/PathPicker&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>arch</span><span class=o>=</span><span class=s2>&#34;noarch&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>license</span><span class=o>=</span><span class=s2>&#34;MIT&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>depends</span><span class=o>=</span><span class=s2>&#34;bash python3&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>subpackages</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$pkgname</span><span class=s2>-doc&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>source</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$pkgname</span><span class=s2>-</span><span class=nv>$pkgver</span><span class=s2>.tar.gz::https://github.com/facebook/PathPicker/archive/</span><span class=nv>$pkgver</span><span class=s2>.tar.gz&#34;</span>
</span></span><span class=line><span class=cl><span class=nv>builddir</span><span class=o>=</span><span class=s2>&#34;</span><span class=nv>$srcdir</span><span class=s2>/PathPicker-</span><span class=nv>$pkgver</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>check<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	fpp --version
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>prepare<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	default_prepare
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	rm -r <span class=s2>&#34;src/__tests__&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>package<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>	<span class=c1># library</span>
</span></span><span class=line><span class=cl>	install -Dm755 <span class=s2>&#34;fpp&#34;</span> -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/fpp&#34;</span>
</span></span><span class=line><span class=cl>	cp -a src <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/fpp&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># entrypoint</span>
</span></span><span class=line><span class=cl>	install -dm755 <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin&#34;</span>
</span></span><span class=line><span class=cl>	ln -s <span class=s2>&#34;/usr/share/fpp/fpp&#34;</span> <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/bin&#34;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>	<span class=c1># documentation</span>
</span></span><span class=line><span class=cl>	install -Dm644 LICENSE -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/licenses/</span><span class=nv>$pkgname</span><span class=s2>&#34;</span>
</span></span><span class=line><span class=cl>	install -Dm644 <span class=s2>&#34;debian/usr/share/man/man1/fpp.1&#34;</span> -t <span class=s2>&#34;</span><span class=nv>$pkgdir</span><span class=s2>/usr/share/man/man1&#34;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nv>sha512sums</span><span class=o>=</span><span class=s2>&#34;
</span></span></span><span class=line><span class=cl><span class=s2>65b6b077f437bd642ebf94c55be901aabc73f7b9c89e4522c4f51970c4d63d744ad8fa29cac06816851f63bcb81d0480e61d405231c582e9aca0f4e650949a97  fpp-0.9.2.tar.gz
</span></span></span><span class=line><span class=cl><span class=s2>&#34;</span></span></span></code></pre></div></div><p><code>APKBUILD</code> guidelines and instructions:</p><ul><li><a href=https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package>https://wiki.alpinelinux.org/wiki/Creating_an_Alpine_package</a></li><li><a href=https://wiki.alpinelinux.org/wiki/APKBUILD_Reference>https://wiki.alpinelinux.org/wiki/APKBUILD_Reference</a></li></ul><h2 id=build-comparison>Build Comparison</h2><p>Let&rsquo;s highlight a few similarities and differences in them, excluding the fact that one is fetched from git and the other one fetches a point release directly<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>:</p><ul><li>package metadata, by the means of bash variables, are almost equivalent
one-to-one<ul><li>A notable difference is the architecture, Arch primarily supports
<em>x86_64</em> whereas Alpine has support for multiple architectures. When
a package is architecture agnostic, Arch denotes it with <code>any</code> whereas
alpine has both <code>noarch</code> and <code>all</code>, the latter is like <code>any</code> (=all
architectures), the <code>former</code> means it&rsquo;s agnostic (=e.g. a pure bash script
or python package).</li><li><code>APKBUILDs</code> use flat strings, whereas <code>PKGBUILDs</code> use bash arrays</li><li>Alpine encourages splitting larger packages into subpackages, as such
<code>APKBUILD</code> has first-class support and syntactic sugar for that. <code>-dev</code> and
<code>-doc</code> subpackages are very common. On the other hand, Arch tends to have
monolithic packages in order to keep it simple, although it also supports
subpackages.</li><li>Alpine supports setting <code>$builddir</code> whereas Arch doesn&rsquo;t. As a consequence, it&rsquo;s often unneeded to <code>cd</code> in <code>build()</code> and <code>package()</code> in Alpine, whereas in Arch one does need to manually change directories to <code>$srcdir/$pkgname</code> before building.</li><li>Alpine lacks optional dependencies, whereas Arch has <code>optdepends</code>.</li></ul></li><li>Alpine enforces the use of <code>check</code> in test packages, otherwise it needs to be explicitly disabled and documented with <code>!check</code> in <code>options=</code>. That&rsquo;s not the case in Arch.</li><li><code>check()</code>, <code>build()</code> and <code>package()</code> are pretty much similar in both formats. <code>$srcdir</code> and <code>$pkgdir</code> are provided in both.</li><li>The <a href=https://wiki.archlinux.org/title/Main_page>ArchWiki</a> is way more documented in terms of packaging guidelines and examples than Alpine&rsquo;s. If you use DuckDuckGo, you can query for <code>!aw &lt;foo></code> as a bang shortcut to search directly in the ArchWiki.</li></ul><p>Last but not least, in Arch one can install package tarballs<sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup> with <code>makepkg -i</code> or <code>pacman -U</code>. In Alpine that approach doesn&rsquo;t seem to be directly supported. The workflow is to add a local repository directory in <code>/etc/apk/repositories</code> (notice the last two lines):</p><div class=codeblock data-lang=shell><div class=codeblock-header data-rss-hide><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ cat /etc/apk/repositories
</span></span><span class=line><span class=cl><span class=c1># http://dl-cdn.alpinelinux.org/alpine/v3.15/main</span>
</span></span><span class=line><span class=cl><span class=c1># http://dl-cdn.alpinelinux.org/alpine/v3.15/community</span>
</span></span><span class=line><span class=cl><span class=c1># http://dl-cdn.alpinelinux.org/alpine/latest-stable/main</span>
</span></span><span class=line><span class=cl><span class=c1># http://dl-cdn.alpinelinux.org/alpine/latest-stable/community</span>
</span></span><span class=line><span class=cl>http://dl-cdn.alpinelinux.org/alpine/edge/main
</span></span><span class=line><span class=cl>http://dl-cdn.alpinelinux.org/alpine/edge/community
</span></span><span class=line><span class=cl>http://dl-cdn.alpinelinux.org/alpine/edge/testing
</span></span><span class=line><span class=cl>/home/<span class=nv>$USER</span>/packages/community
</span></span><span class=line><span class=cl>/home/<span class=nv>$USER</span>/packages/testing</span></span></code></pre></div></div><p><code>abuild</code> will place the resulting package tarball in <code>~/packages</code>, in this case:</p><div class=codeblock data-lang=shell><div class=codeblock-header data-rss-hide><span class=codeblock-language>shell</span>
<button class=codeblock-copy type=button data-copy-code>Copy</button></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>$ ls ~/packages/testing/x86_64/fpp*
</span></span><span class=line><span class=cl>/home/<span class=nv>$USER</span>/packages/testing/x86_64/fpp-0.9.2-r0.apk
</span></span><span class=line><span class=cl>/home/<span class=nv>$USER</span>/packages/testing/x86_64/fpp-doc-0.9.2-r0.apk</span></span></code></pre></div></div><p>&mldr;and then <code>apk add fpp</code> will automagically recognize it&rsquo;s in there and install it. The advantage of this approach is that it keeps a local package repository around and it&rsquo;s well integrated with <code>apk</code>, way differently from <code>pacman</code> that has no integration with the AUR at all. One could also possibly set up a local repository in Arch, for example, with <a href=https://github.com/graysky2/clean-chroot-manager><code>ccm</code></a>, but it takes extra steps and it&rsquo;s not officially supported.</p><h2 id=upstream-contributions>Upstream Contributions</h2><p>On Arch, to contribute a <code>PKGBUILD</code> upstream one just needs to create an account in the <a href=https://aur.archlinux.org/>AUR</a>. Armed with a git + ssh infrastructure, all you need to do is <code>git push</code>. There are no ACLs involved, anyone can do that<sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup>.</p><p>On Alpine there&rsquo;s a bit more of politics involved<sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup>: Anyone can send a <code>patch(1)</code>, either via <a href=mailto:alpine-aports@lists.alpinelinux.org>mailing list</a> or via a <a href=https://gitlab.alpinelinux.org/alpine/aports>Gitlab MR</a> (merge request). Patch works well with <code>git send-email -1</code>, being automatically cross-posted to a Gitlab MR. On the other hand the MR workflow is easier to be followed up on feedback from developers and other contributors (<code>git push --force</code>), and it&rsquo;s also cross-posted, to the mailing list. An Alpine developer with the appropriate permissions must approve your patch/MR before it becomes available to other Alpine users.</p><p>Sadly at the time of this writing <a href=https://lists.alpinelinux.org/~alpine/aports/patches/3799>my patch</a> hasn&rsquo;t yet been approved (2 weeks later), however we&rsquo;re in holiday season. This wouldn&rsquo;t have been a problem in the AUR, where I could have just pushed it immediately, without any review. On the other hand the Alpine approach at least gives me some hope that the submitted packages have slightly higher quality than the average ones in the AUR, since they need to be manually reviewed/approved/vetted by at least one Alpine developer.</p><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p>Install <code>spdx-licenses-list</code> to lint the licenses, it&rsquo;s used by <code>abuild sanitycheck</code> as an optional dependency.&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2><p>The AUR tends to have both non-vcs and vcs versions of a software, whereas Alpine is focused a bit more on stability and tends to have non-vcs only. This is not a hard rule though, exceptions may exist.&#160;<a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3><p><code>.tar.xz</code> or, more recently, <code>.tar.zstd</code>.&#160;<a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4><p>And this is one of the reasons why you should always inspect every <code>PKGBUILD</code> you install from the Arch User Repository, as it could have been tampered with and/or contain malicious code.&#160;<a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5><p>I&rsquo;ll leave it open-ended whether that&rsquo;s a bug or a feature. Depending on the lens you see through, it could be considered either gatekeeping (bureaucracy, control) or sanity (quality, stability). It has pros and cons, and even those are arguable.&#160;<a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></content><p style=text-align:center;margin-top:2em>‚Äî ¬ß ‚Äî</p><div style=display:flex;justify-content:space-between><p>Reply via
<a href="mailto:serendipity@perrotta.dev?subject=Reply to: My%20First%20APKBUILD">email</a></p><p><a href=https://perrotta.dev/tags/bestof/>#bestof</a>
<a href=https://perrotta.dev/tags/dev/>#dev</a></p></div></main><hr><footer><span>¬© 2021 - 2025 Thiago Perrotta ¬∑
<a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>some rights reserved</a> ¬∑
a fork of <a href=https://github.com/janraasch/hugo-bearblog/>hugo  ï‚Ä¢·¥•‚Ä¢ î bear</a> ¬∑ <a href=/canary>üê¶</a></span><div class=social-link-wrapper><a target=_blank rel=noopener class=social-link href=mailto:serendipity@perrotta.dev title="Email address"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1.3em" width="1.3em"><g transform="translate(0.000000,24.000000) scale(0.100000,-0.100000)"><path d="M26 191c-4-5 16-23 44-40l50-31 50 31c28 17 48 35 44 40-7 12-181 12-188 0z"/><path d="M22 103l3-58 93-3c104-3 105-3 1e2 71l-3 46-48-29-47-30-38 23c-20 13-43 27-50 31-10 6-12-5-10-51z"/></g></svg>
</a><a target=_blank rel=noopener class=social-link href=https://perrotta.dev/index.xml title="RSS feed"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 56.693 56.693" height="1em" width="1em"><path d="M3.428 31.085c6.19.0 12.009 2.418 16.382 6.816 4.381 4.398 6.793 10.256 6.793 16.492h9.539c0-18.113-14.676-32.848-32.714-32.848v9.54zM3.443 14.174c22.061.0 40.01 18.047 40.01 40.231h9.539c0-27.445-22.229-49.77-49.549-49.77v9.539zM16.634 47.741c0 3.648-2.959 6.607-6.607 6.607S3.42 51.39 3.42 47.741c0-3.65 2.958-6.607 6.606-6.607s6.608 2.957 6.608 6.607z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://github.com/thiagowfx title="Github profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 496 512" height="1em" width="1em"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://goodreads.com/user/show/7873832-thiago title="Goodreads profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 50 50" height="1em" width="1em"><path d="M25 2c-4.541.0-8.41336 1.9082151-11.017578 4.9453125C11.378203 9.9824099 10 14.07975 10 18.5s1.378203 8.517589 3.982422 11.554688C16.58664 33.091785 20.459 35 25 35c4.531588.0 8.395936-1.901605 11-4.927734V35c0 2.598543-.818503 4.764071-2.451172 6.339844C31.91616 42.915616 29.363725 44 25.5 44 17.784314 44 15 39.933333 15 36H11c0 6.066667 5.215686 12 14.5 12 4.636275.0 8.33384-1.377726 10.826172-3.783203C38.818503 41.811319 40 38.476457 40 35V18.5 3H36V6.9277344C33.395936 3.9016049 29.531588 2 25 2zm0 4c3.459.0 6.08664 1.3379255 7.982422 3.5488281C34.878203 11.759731 36 14.91225 36 18.5s-1.121797 6.740269-3.017578 8.951172C31.08664 29.662074 28.459 31 25 31s-6.08664-1.337926-7.982422-3.548828C15.121797 25.240269 14 22.08775 14 18.5s1.121797-6.740269 3.017578-8.9511719C18.91336 7.3379255 21.541 6 25 6z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://linkedin.com/in/thiagoperrotta title="LinkedIn profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 30 30" height="1.2em" width="1.2em"><path d="M24 4H6C4.895 4 4 4.895 4 6v18c0 1.105.895 2 2 2h18c1.105.0 2-.895 2-2V6c0-1.105-.895-2-2-2zM10.954 22h-2.95v-9.492h2.95V22zM9.449 11.151c-.951.0-1.72-.771-1.72-1.72s.77-1.719 1.72-1.719c.948.0 1.719.771 1.719 1.719C11.168 10.38 10.397 11.151 9.449 11.151zM22.004 22h-2.948v-4.616c0-1.101-.02-2.517-1.533-2.517-1.535.0-1.771 1.199-1.771 2.437V22h-2.948v-9.492h2.83v1.297h.04c.394-.746 1.356-1.533 2.791-1.533 2.987.0 3.539 1.966 3.539 4.522V22z"/></svg>
</a><a target=_blank rel=noopener class=social-link href=https://stackoverflow.com/users/1745064/thiagowfx title="StackOverflow profile"><svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 384 512" height="1em" width="1em"><path d="M290.7 311 95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 3e2zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-2e2v39.7h2e2zm39.7 80H42.7V320h-40v160h359.5V320h-40z"/></svg></a></div><div class=badge-wrapper><a target=_blank href=https://512kb.club title="512kb.club badge"><img src=https://perrotta.dev/green-team.webp alt="a proud member of the green team of 512KB club">
</a><a target=_blank href=https://powrss.com/ title=powRSS><img src=https://perrotta.dev/powrss-88-31.webp alt=powRSS>
</a><a target=_blank href=https://www.vim.org/ title="Vim text editor"><img src=https://perrotta.dev/vim.webp alt="Vim text editor">
</a><a target=_blank href=https://edleeman.co.uk/cookie-zero/ title="Cookie Zero"><img src=https://perrotta.dev/cookiezero.webp alt="Cookie Zero"></a></div><p class=footer-statement>This site respects your privacy by not containing <a href=https://www.nevermonetize.com/>ads</a>,
not using tracking cookies,
and not collecting any personally identifiable information.
<a href=/ai>Gen AI policy</a>.</p></footer><script>const darkVars={"bg-color":"#19150f","text-color":"#dddddd","heading-color":"#eeeeee","link-color":"#ff5e6c","border-color":"#444","code-bg":"#1a1a1a","code-text-color":"#e8e8e8","chroma-text":"#abb2bf","chroma-bg":"#282c34","chroma-comment":"#5c6370","chroma-keyword":"#c678dd","chroma-string":"#98c379","chroma-function":"#61afef","chroma-name":"#e06c75","chroma-number":"#d19a66","chroma-operator":"#56b6c2"},lightVars={"bg-color":"#fffcf0","text-color":"#444","heading-color":"#222","link-color":"#3273dc","border-color":"#ddd","code-bg":"#f5f5f5","code-text-color":"#1a1a1a","chroma-text":"#383a42","chroma-bg":"#fafafa","chroma-comment":"#a0a1a7","chroma-keyword":"#a626a4","chroma-string":"#50a14f","chroma-function":"#4078f2","chroma-name":"#e45649","chroma-number":"#986801","chroma-operator":"#0184bc"};function applyTheme(e){const t=e?darkVars:lightVars;Object.entries(t).forEach(([e,t])=>{document.documentElement.style.setProperty(`--${e}`,t)}),document.getElementById("theme-toggle-icon").textContent=e?"üåô":"‚òÄÔ∏è"}const saved=localStorage.getItem("theme"),isDark=saved?saved==="dark":window.matchMedia("(prefers-color-scheme: dark)").matches;applyTheme(isDark),document.getElementById("theme-toggle").addEventListener("click",function(){const e=localStorage.getItem("theme"),n=window.matchMedia("(prefers-color-scheme: dark)").matches,s=e?e==="dark":n,t=!s;localStorage.setItem("theme",t?"dark":"light"),applyTheme(t)}),document.addEventListener("click",function(e){if(!e.target.matches("[data-copy-code]"))return;const t=e.target,n=t.closest(".codeblock");if(!n)return;const s=n.querySelector("pre code");if(!s)return;const o=s.innerText;if(!navigator.clipboard||!navigator.clipboard.writeText)return;navigator.clipboard.writeText(o).then(function(){t.dataset.originalLabel=t.textContent,t.textContent="Copied!",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)}).catch(function(){t.textContent="Failed",setTimeout(function(){t.textContent=t.dataset.originalLabel||"Copy"},1500)})})</script></body></html>