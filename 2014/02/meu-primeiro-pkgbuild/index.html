<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Meu primeiro PKGBUILD | Not Just Serendipity</title>
<meta name=keywords content="classics,linux,portuguese"><meta name=description content="Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque firulas como esse eeeeee em um título de post do Wordpress, obrigado.
Agora, eu ainda não sei o que é um metapost, eu ainda preciso definir isso&mldr;mas, é algo entre journal e status.
Você sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso? Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você soubesse isso."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://thiagowfx.github.io/2014/02/meu-primeiro-pkgbuild/><link crossorigin=anonymous href=/assets/css/stylesheet.5cfc680b1eeaeef9efbced92d46c2a9e876b72ee14fba85846afc4cff9e6e6f8.css integrity="sha256-XPxoCx7q7vnvvO2S1Gwqnodrcu4U+6hYRq/Ez/nm5vg=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://thiagowfx.github.io/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://thiagowfx.github.io/favicon.ico><link rel=apple-touch-icon href=https://thiagowfx.github.io/apple-touch-icon.png><link rel=mask-icon href=https://thiagowfx.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Meu primeiro PKGBUILD"><meta property="og:description" content="Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque firulas como esse eeeeee em um título de post do Wordpress, obrigado.
Agora, eu ainda não sei o que é um metapost, eu ainda preciso definir isso&mldr;mas, é algo entre journal e status.
Você sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso? Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você soubesse isso."><meta property="og:type" content="article"><meta property="og:url" content="https://thiagowfx.github.io/2014/02/meu-primeiro-pkgbuild/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2014-02-13T20:08:00-03:00"><meta property="article:modified_time" content="2014-02-13T20:08:00-03:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Meu primeiro PKGBUILD"><meta name=twitter:description content="Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque firulas como esse eeeeee em um título de post do Wordpress, obrigado.
Agora, eu ainda não sei o que é um metapost, eu ainda preciso definir isso&mldr;mas, é algo entre journal e status.
Você sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso? Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você soubesse isso."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://thiagowfx.github.io/posts/"},{"@type":"ListItem","position":2,"name":"Meu primeiro PKGBUILD","item":"https://thiagowfx.github.io/2014/02/meu-primeiro-pkgbuild/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Meu primeiro PKGBUILD","name":"Meu primeiro PKGBUILD","description":"Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque firulas como esse eeeeee em um título de post do Wordpress, obrigado.\nAgora, eu ainda não sei o que é um metapost, eu ainda preciso definir isso\u0026hellip;mas, é algo entre journal e status.\nVocê sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso? Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você soubesse isso.","keywords":["classics","linux","portuguese"],"articleBody":"Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque firulas como esse eeeeee em um título de post do Wordpress, obrigado.\nAgora, eu ainda não sei o que é um metapost, eu ainda preciso definir isso…mas, é algo entre journal e status.\nVocê sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso? Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você soubesse isso. Alerta: os próximos 3 parágrafos são bem didáticos.\nUm PKGBUILD é um simples script que diz como criar um pacote. É como uma receita de bolo. Você diz tudo pra ele: baixa o código-fonte tal, compila de tal jeito, extrai esse zip pra cá, põe esse arquivo em /usr/share, esse outro em /etc, aplica o patch tal. Um pacote contém um programa. Se você está acostumado com setups do Windows, um pacote é como se fosse um setup, um programa de instalação. A diferença é que você não precisa seguir um wizard gráfico, clicando em next toda hora. Você simplesmente pega o arquivo, executa um único comando, e pronto, seu programa está instalado.\nExiste uma curva (razoavelmente grandinha) para criar um bom pacote. Pegue um setup do Windows, por exemplo. Se você quiser distribuir o seu programa legal para outros usuários Windows, você vai demorar um bom tempo para criar um setup .exe. Tem várias ferramentas para isso, é claro, e você pode simplificar o seu trabalho, ou não. O próprio WinRAR tem uma utility de SFX que facilita bastante esse processo. Mas, ainda assim, não acho isso *super elegante (mas é simples, é verdade).\nNo Mundo Linux, nada é padronizado (maldição). Existem pacotes .deb, .rpm, .tar.gz. Existem scripts que criam pacotes, como PKGBUILDs (Arch Linux), ebuilds (Gentoo – não sei bem se ebuild faz isso, é melhor você pesquisar para confirmar), até o Slackware tem a sua forma simples de criar pacotes através de um script. Para criar um bom pacote .deb, ou um bom pacote .rpm, você também vai demorar razoavelmente.\nAgora, eu tenho que dizer (de maneira suspeita, você deve saber) que um PKGBUILD é perfeito. Uma das formas mais elegantes de manter e gerenciar pacotes. A curva para você criar um pacote é bem pequena (curva de tempo entre você querer criar um pacote e vê-lo efetivamente criado). Bom, supondo que você pelo menos saiba o básico de shell scripting – bash, ya know –, combinado?\nEntão, eu só queria compartilhar a minha primeira contribuição para a comunidade do Arch. Ah, esqueci de dizer que qualquer usuário pode criar um PKGBUILD e adicioná-lo num repositório no qual todos os outros usuários do Arch têm acesso, sabia disso? Isso significa que qualquer um pode contribuir para a comunidade (com pacotes – na verdade, PKGBUILDS…!), e que a probabilidade de você ter pensado em um programa open source popular (às vezes, até, não popular também) que NÃO está no Arch User Repository é bem pequena. A todo momento, sempre tem alguém adicionando (e atualizando, mantendo) esses pacotes. Claro, nem tudo é perfeito, não tem um ou outro, mas enfim. Eu falei que o PKGBUILD é perfeito, não que a disponibilidade de pacotes é perfeita…mas é quase perfeita! :)\nNa verdade, eu sempre quis criar (e manter) algum PKGBUILD, mas todos os programas legais nos quais eu pensei simplesmente já são mantidos por alguém. Nesse caso, recentemente criei uma adaptação de um outro PKGBUILD que já existia (sério, se você encontrar algum programa ainda sem PKGBUILD no AUR, me fala, que provavelmente eu vou querer criar um para ele). Não há necessidade de reinventar a roda.\nO meu PKGBUILD é esse aqui:\npkgname=arch-firefox-nightly-search pkgver=37.0a1 pkgrel=1 pkgdesc=\"Firefox Nightly Arch search engines (official packages, AUR, BBS, wiki and bugs)\" arch=('any') url='http://www.archlinux.org/' license=('GPL') depends=('firefox-nightly') source=('arch-bugs-fs.xml' 'arch-bugs-t.xml' 'arch-forum-a.xml' 'arch-forum-c.xml' 'arch-pkgs.xml' 'arch-wiki.xml' 'aur.xml') md5sums=('df18835df1ea78bc3fc0e05f934b1e46' '0226a317c8bf23feaa80e21d1706f2d5' '4eaa3d26ac41077ee25b66127ad9ef0a' '2435c34ea6a012fe08a8d17a051e5f80' '403c346ce089ec56c2db67f9f3d87514' 'dbb93d1e793b92252b69f65110b33c42' 'b70839977625bceb3004dc62fb9e5a65') package() { prefix=\"${pkgdir}/opt/firefox-${pkgver}/browser/searchplugins/\" for file in ${source[@]}; do install -Dm644 \"${srcdir}/${file}\" \"${prefix}/${file}\" done } Você pode ver aqui como um PKGBUILD é bastante simples “por dentro”. Ele não tem nada de especial, é um PKGBUILD como outro qualquer. Mas é o meu primeiro – na verdade, isso faz com que ele seja especial, sim. Acho que já dá para perceber o que ele faz.\nSó para falar um pouquinho da minha experiência fazendo isso. Bom, foi difícil. Mesmo adaptando um PKGBUILD já existente, foi difícil. Tudo que é novo, feito pela primeira vez, é difícil, certo? Mas foi bastante legal. Na verdade, isso é uma experiência extremamente fácil e ridícula. Só foi difícil porque eu nunca tinha feito isso antes. Mas essa que é a graça da coisa! Pior seria que fosse uma atividade difícil mesmo para quem já está acostumado. Mas é por isso que eu estou elogiando a simplicidade (e a elegância!) de um PKGBUILD. A Wiki do Arch é bastante documentada. Não faltou tutorial ensinando sobre bons padrões de scripting para “empacotamento”, nem guias sobre como contribuir para a comunidade. E nem faltam exemplos, são mais de 40 mil PKGBUILDs espalhados por aí (talvez já tenha chegado a 50k, não me lembro). Só para comparar, o repositório do Debian tem em torno de 40 mil pacotes, se me lembro bem. Então, dá para comparar a base de pacotes do Arch com a do Debian, o que é impressionante (só não tem mais do que isso porque o Arch não é tão popular. Isso também faz parte da beleza da coisa, mas é outra história).\nDigo uma coisa: a melhor coisa (pare de repetir a palavra ‘coisa’!) que você pode fazer é interagir com a comunidade da sua distro (supondo que ela seja minimamente ativa). É bastante fácil obter ajuda e ganhar experiência com quem já sabe. Eu não precisei fazer isso quando criei o meu pacote porque ele era bastante simples, mas se ele fosse complexo eu certamente faria. E, de qualquer modo, eu posso não ter lido nada recentemente, mas ao longo de alguns meses eu estou sempre lendo outras pessoas pedirem suporte, e essa também é uma boa forma de você acompanhar e aprender como fazer melhor alguma atividade.\nPronto, só queria deixar isso registrado aqui, obrigado por ler. Brincadeira. Talvez esse post tenha servido para – remotamente falando… – querer despertar o seu eu interior para criar um PKGBUILD também. Er…não.\nFalando sério agora, se você que está lendo isso é um usuário de Linux faz algum tempo, considere criar um pacote para a sua distribuição. De preferência, um pacote de algo que ainda não foi empacotado. Ou então ajude um mantenedor (“maintainer” soa melhor) da sua distro a atualizar seu pacote. Pode ser algo simples. Talvez seja mais fácil criar um .deb e um .rpm do que eu afirmei aqui, é só uma questão de prática.\nSe você é um usuário de OS X, de Windows, ou de outra plataforma, aprecie a beleza do que é ter uma boa base de pacotes para a sua plataforma. Na verdade, eu acho que o OS X tem um gerenciador de pacotes (macports, não é? Estou fora do mundo Apple, sorry), mas eu não sei o quanto é fácil para um usuário criar um pacote lá (e, ainda, compartilhar com a comunidade do mesmo. Se bem que a forma de compartilhar por lá é vendendo por 0,99 dólares, não é, mas OK, ainda assim é compartilhar…). E no Windows, bom, existem até alguns projetos de gerenciadores de pacotes para lá (como o chocolatey), mas praticamente nenhum usuário usa (sequer conhece!) isso, então não é algo tãaaaao valorizado. Mas OK.\nAinda existem gerenciadores de pacotes para várias linguagens de programação. Npm, cabal, gem. É, acho que essa foi uma das melhores peças de software que já inventaram, evita bastante dor de cabeça.\nSinta-se à vontade para deixar um comentário ou apontar um link sobre sua experiência de criar pacotes em outra distribuição de Linux, ou em alguma linguagem de programação.\n","wordCount":"1330","inLanguage":"en","datePublished":"2014-02-13T20:08:00-03:00","dateModified":"2014-02-13T20:08:00-03:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://thiagowfx.github.io/2014/02/meu-primeiro-pkgbuild/"},"publisher":{"@type":"Person","name":"Not Just Serendipity","logo":{"@type":"ImageObject","url":"https://thiagowfx.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://thiagowfx.github.io/ accesskey=h title="Not Just Serendipity (Alt + H)"><img src=https://thiagowfx.github.io/apple-touch-icon.png alt aria-label=logo height=32>Not Just Serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://thiagowfx.github.io/posts/ title=Blog><span>Blog</span></a></li><li><a href=https://thiagowfx.github.io/archives/ title=Archives><span>Archives</span></a></li><li><a href=https://thiagowfx.github.io/search/ title="Search (Alt + /)" accesskey=/><span>Search</span></a></li><li><a href=https://thiagowfx.github.io/tags/ title=Tags><span>Tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Meu primeiro PKGBUILD</h1><div class=post-meta><span title='2014-02-13 20:08:00 -0300 -0300'>February 13, 2014</span>&nbsp;·&nbsp;1330 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Título mais legal: Meu primeiro PKGBUILD (eeeeeeeeeeeee). Mas não coloque
firulas como esse eeeeee em um título de post do Wordpress, obrigado.</p><p>Agora, eu ainda não sei o que é um metapost, eu ainda preciso definir
isso&mldr;mas, é algo entre journal e status.</p><p>Você sabe, do primeiro PKGBUILD a gente não se esquece. Mas que raios é isso?
Bom, a menos que você viva no meu mundo, ou a menos que você já tenha usado
o Arch Linux alguma vez, eu realmente não tinha nenhuma intenção de que você
soubesse isso. Alerta: os próximos 3 parágrafos são bem didáticos.</p><p>Um PKGBUILD é um simples script que diz como criar um pacote. É como uma
receita de bolo. Você diz tudo pra ele: baixa o código-fonte tal, compila de
tal jeito, extrai esse zip pra cá, põe esse arquivo em /usr/share, esse outro
em /etc, aplica o patch tal. Um pacote contém um programa. Se você está
acostumado com setups do Windows, um pacote é como se fosse um setup, um
programa de instalação. A diferença é que você não precisa seguir um wizard
gráfico, clicando em next toda hora. Você simplesmente pega o arquivo, executa
um único comando, e pronto, seu programa está instalado.</p><p>Existe uma curva (razoavelmente grandinha) para criar um bom pacote. Pegue um
setup do Windows, por exemplo. Se você quiser distribuir o seu programa legal
para outros usuários Windows, você vai demorar um bom tempo para criar um setup
.exe. Tem várias ferramentas para isso, é claro, e você pode simplificar o seu
trabalho, ou não. O próprio WinRAR tem uma utility de SFX que facilita bastante
esse processo. Mas, ainda assim, não acho isso *super elegante (mas é simples,
é verdade).</p><p>No Mundo Linux, nada é padronizado (maldição). Existem pacotes .deb, .rpm,
.tar.gz. Existem scripts que criam pacotes, como PKGBUILDs (Arch Linux),
ebuilds (Gentoo &ndash; não sei bem se ebuild faz isso, é melhor você pesquisar para
confirmar), até o Slackware tem a sua forma simples de criar pacotes através de
um script. Para criar um bom pacote .deb, ou um bom pacote .rpm, você também
vai demorar razoavelmente.</p><p>Agora, eu tenho que dizer (de maneira suspeita, você deve saber) que um
PKGBUILD é perfeito. Uma das formas mais elegantes de manter e gerenciar
pacotes. A curva para você criar um pacote é bem pequena (curva de tempo entre
você querer criar um pacote e vê-lo efetivamente criado). Bom, supondo que você
pelo menos saiba o básico de shell scripting &ndash; bash, ya know &ndash;, combinado?</p><p>Então, eu só queria compartilhar a minha primeira contribuição para
a comunidade do Arch. Ah, esqueci de dizer que qualquer usuário pode criar um
PKGBUILD e adicioná-lo num repositório no qual todos os outros usuários do Arch
têm acesso, sabia disso? Isso significa que qualquer um pode contribuir para
a comunidade (com pacotes &ndash; na verdade, PKGBUILDS&mldr;!), e que a probabilidade
de você ter pensado em um programa open source popular (às vezes, até, não
popular também) que NÃO está no Arch User Repository é bem pequena. A todo
momento, sempre tem alguém adicionando (e atualizando, mantendo) esses pacotes.
Claro, nem tudo é perfeito, não tem um ou outro, mas enfim. Eu falei que
o PKGBUILD é perfeito, não que a disponibilidade de pacotes é perfeita&mldr;mas
é quase perfeita! :)</p><p>Na verdade, eu sempre quis criar (e manter) algum PKGBUILD, mas todos os
programas legais nos quais eu pensei simplesmente já são mantidos por alguém.
Nesse caso, recentemente criei uma adaptação de um outro PKGBUILD que já
existia (sério, se você encontrar algum programa ainda sem PKGBUILD no AUR, me
fala, que provavelmente eu vou querer criar um para ele). Não há necessidade de
reinventar a roda.</p><p>O meu PKGBUILD é esse <a href=https://github.com/thiagowfx/PKGBUILDs/blob/aur3/arch-firefox-nightly-search/PKGBUILD>aqui</a>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pkgname<span style=color:#f92672>=</span>arch-firefox-nightly-search
</span></span><span style=display:flex><span>pkgver<span style=color:#f92672>=</span>37.0a1
</span></span><span style=display:flex><span>pkgrel<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>pkgdesc<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;Firefox Nightly Arch search engines (official packages, AUR, BBS, wiki and bugs)&#34;</span>
</span></span><span style=display:flex><span>arch<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;any&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;http://www.archlinux.org/&#39;</span>
</span></span><span style=display:flex><span>license<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;GPL&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>depends<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;firefox-nightly&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>source<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;arch-bugs-fs.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;arch-bugs-t.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;arch-forum-a.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;arch-forum-c.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;arch-pkgs.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;arch-wiki.xml&#39;</span>
</span></span><span style=display:flex><span>  <span style=color:#e6db74>&#39;aur.xml&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>md5sums<span style=color:#f92672>=(</span><span style=color:#e6db74>&#39;df18835df1ea78bc3fc0e05f934b1e46&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;0226a317c8bf23feaa80e21d1706f2d5&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;4eaa3d26ac41077ee25b66127ad9ef0a&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;2435c34ea6a012fe08a8d17a051e5f80&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;403c346ce089ec56c2db67f9f3d87514&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;dbb93d1e793b92252b69f65110b33c42&#39;</span>
</span></span><span style=display:flex><span>         <span style=color:#e6db74>&#39;b70839977625bceb3004dc62fb9e5a65&#39;</span><span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>package<span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
</span></span><span style=display:flex><span>  prefix<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>pkgdir<span style=color:#e6db74>}</span><span style=color:#e6db74>/opt/firefox-</span><span style=color:#e6db74>${</span>pkgver<span style=color:#e6db74>}</span><span style=color:#e6db74>/browser/searchplugins/&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> file in <span style=color:#e6db74>${</span>source[@]<span style=color:#e6db74>}</span>; <span style=color:#66d9ef>do</span>
</span></span><span style=display:flex><span>    install -Dm644 <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>srcdir<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span> <span style=color:#e6db74>&#34;</span><span style=color:#e6db74>${</span>prefix<span style=color:#e6db74>}</span><span style=color:#e6db74>/</span><span style=color:#e6db74>${</span>file<span style=color:#e6db74>}</span><span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>done</span>
</span></span><span style=display:flex><span><span style=color:#f92672>}</span>
</span></span></code></pre></div><p>Você pode ver aqui como um PKGBUILD é bastante
simples &ldquo;por dentro&rdquo;. Ele não tem nada de especial, é um PKGBUILD como outro
qualquer. Mas é o meu primeiro &ndash; na verdade, isso faz com que ele seja
especial, sim. Acho que já dá para perceber o que ele faz.</p><p>Só para falar um pouquinho da minha experiência fazendo isso. Bom, foi difícil.
Mesmo adaptando um PKGBUILD já existente, foi difícil. Tudo que é novo, feito
pela primeira vez, é difícil, certo? Mas foi bastante legal. Na verdade, isso
é uma experiência extremamente fácil e ridícula.  Só foi difícil porque eu
nunca tinha feito isso antes. Mas essa que é a graça da coisa! Pior seria que
fosse uma atividade difícil mesmo para quem já está acostumado. Mas é por isso
que eu estou elogiando a simplicidade (e a elegância!) de um PKGBUILD. A Wiki
do Arch é bastante documentada. Não faltou tutorial ensinando sobre bons
padrões de scripting para &ldquo;empacotamento&rdquo;, nem guias sobre como contribuir para
a comunidade.  E nem faltam exemplos, são mais de 40 mil PKGBUILDs espalhados
por aí (talvez já tenha chegado a 50k, não me lembro). Só para comparar,
o repositório do Debian tem em torno de 40 mil pacotes, se me lembro bem.
Então, dá para comparar a base de pacotes do Arch com a do Debian, o que
é impressionante (só não tem mais do que isso porque o Arch não é tão popular.
Isso também faz parte da beleza da coisa, mas é outra história).</p><p>Digo uma coisa: a melhor coisa (pare de repetir a palavra &lsquo;coisa&rsquo;!) que você
pode fazer é interagir com a comunidade da sua distro (supondo que ela seja
minimamente ativa). É bastante fácil obter ajuda e ganhar experiência  com quem
já sabe. Eu não precisei fazer isso quando criei o meu pacote porque ele era
bastante simples, mas se ele fosse complexo eu certamente faria. E, de qualquer
modo, eu posso não ter lido nada recentemente, mas ao longo de alguns meses eu
estou sempre lendo outras pessoas pedirem suporte, e essa também é uma boa
forma de você acompanhar e aprender como fazer melhor alguma atividade.</p><p>Pronto, só queria deixar isso registrado aqui, obrigado por ler. Brincadeira.
Talvez esse post tenha servido para &ndash; remotamente falando&mldr; &ndash; querer
despertar o seu eu interior para criar um PKGBUILD também. Er&mldr;não.</p><p>Falando sério agora, se você que está lendo isso é um usuário de Linux faz
algum tempo, considere criar um pacote para a sua distribuição. De preferência,
um pacote de algo que ainda não foi empacotado. Ou então ajude um mantenedor
(&ldquo;maintainer&rdquo; soa melhor) da sua distro a atualizar seu pacote.  Pode ser algo
simples. Talvez seja mais fácil criar um .deb e um .rpm do que eu afirmei aqui,
é só uma questão de prática.</p><p>Se você é um usuário de OS X, de Windows, ou de outra plataforma, aprecie
a beleza do que é ter uma boa base de pacotes para a sua plataforma. Na
verdade, eu acho que o OS X tem um gerenciador de pacotes (macports, não é?
Estou fora do mundo Apple, sorry), mas eu não sei o quanto é fácil para um
usuário criar um pacote lá (e, ainda, compartilhar com a comunidade do mesmo.
Se bem que a forma de compartilhar por lá é vendendo por 0,99 dólares, não é,
mas OK, ainda assim é compartilhar&mldr;). E no Windows, bom, existem até alguns
projetos de gerenciadores de pacotes para lá (como o chocolatey), mas
praticamente nenhum usuário usa (sequer conhece!) isso, então não é algo
tãaaaao valorizado. Mas OK.</p><p>Ainda existem gerenciadores de pacotes para várias linguagens de programação.
Npm, cabal, gem. É, acho que essa foi uma das melhores peças de software que já
inventaram, evita bastante dor de cabeça.</p><p>Sinta-se à vontade para deixar um comentário ou apontar um link sobre sua
experiência de criar pacotes em outra distribuição de Linux, ou em alguma
linguagem de programação.</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://thiagowfx.github.io/tags/classics/>classics</a></li><li><a href=https://thiagowfx.github.io/tags/linux/>linux</a></li><li><a href=https://thiagowfx.github.io/tags/portuguese/>portuguese</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: Not%20Just%20Serendipity comment for 'Meu%20primeiro%20PKGBUILD'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2023 Thiago Perrotta • <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a> •</span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>