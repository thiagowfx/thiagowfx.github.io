<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Ufw: Firewall | not just serendipity</title>
<meta name=keywords content="linux,selfhosted"><meta name=description content="
Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.
"><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2021/12/ufw-firewall/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2021/12/ufw-firewall/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Ufw: Firewall"><meta property="og:description" content="
Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.
"><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2021/12/ufw-firewall/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-28T17:14:55-05:00"><meta property="article:modified_time" content="2021-12-28T17:14:55-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ufw: Firewall"><meta name=twitter:description content="
Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"Ufw: Firewall","item":"https://www.perrotta.dev/2021/12/ufw-firewall/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Ufw: Firewall","name":"Ufw: Firewall","description":" Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.\n","keywords":["linux","selfhosted"],"articleBody":" Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.\nThe firewall makes justice to its name as it is really uncomplicated, and a pleasure to set up.\nInstall Install and set up ufw1, which should be packaged for most linux distributions:\nOpenRC-based (Alpine Linux, Gentoo) # Install ufw and ufw-extras $ doas apk install ufw{,-extras} # Enable ufw daemon $ doas rc-update add ufw # Start ufw daemon $ doas rc-service ufw start # Enable firewall $ doas ufw enable Systemd-based (Arch Linux, Debian) # Install ufw and ufw-extras $ sudo pacman -Syu ufw{,-extras} # Enable and start ufw daemon $ sudo systemctl enable --now ufw # Enable firewall $ sudo ufw enable Add rules Firewall rules can be added with ufw allow [port] or ufw allow [name]. Named profiles (for example: ssh, http) live in /etc/ufw/applications.d/, or you can query all of them with ufw app list.\n% ufw app list Available applications: AIM Bonjour CIFS DNS Deluge IMAP IMAPS IPP KTorrent Kerberos Admin Kerberos Full Kerberos KDC Kerberos Password LDAP LDAPS LPD MSN MSN SSL Mail submission NFS POP3 POP3S PeopleNearby SMTP SSH Socks Telnet Transmission Transparent Proxy VNC WWW WWW Cache WWW Full WWW Secure XMPP Yahoo qBittorrent svnserve Ufw also supports ufw limit [port | name] which is like add but with the added ability to “deny connections from IP addresses that attempt to initiate 6 or more connections in the last 30 seconds”. It’s a good measure to mitigate brute-force and/or DDOS attacks.\n# either use named profiles % ufw allow http-alt % ufw limit ssh # or port numbers % ufw allow 8080/tcp % ufw limit 22 Remove rules Firewall rules can be removed by merely adding ‘delete’ between ufw and the verb.\n% ufw delete allow 8080/tcp % ufw delete limit ssh Check status One status command to rule them all, “verbose” is optional:\n% ufw status verbose Status: active Logging: on (low) Default: deny (incoming), allow (outgoing), disabled (routed) New profiles: skip To Action From -- ------ ---- 22/tcp LIMIT IN Anywhere 8080 ALLOW IN Anywhere 22/tcp (v6) LIMIT IN Anywhere (v6) 8080 (v6) ALLOW IN Anywhere (v6) Ufw uses iptables under the hood. Inspect the underlying iptables rules:\n% iptables -S | egrep '\\b(22|8080)\\b' -A ufw-user-input -p tcp -m tcp --dport 22 -m conntrack --ctstate NEW -m recent --set --name DEFAULT --mask 255.255.255.255 --rsource -A ufw-user-input -p tcp -m tcp --dport 22 -m conntrack --ctstate NEW -m recent --update --seconds 30 --hitcount 6 --name DEFAULT --mask 255.255.255.255 --rsource -j ufw-user-limit -A ufw-user-input -p tcp -m tcp --dport 22 -j ufw-user-limit-accept -A ufw-user-input -p tcp -m tcp --dport 8080 -j ACCEPT References https://help.ubuntu.com/community/UFW https://wiki.archlinux.org/title/Uncomplicated_Firewall ufw-extras is optional, it contains additional rules (e.g. mosh, tailscale). ↩︎\n","wordCount":"472","inLanguage":"en","datePublished":"2021-12-28T17:14:55-05:00","dateModified":"2021-12-28T17:14:55-05:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2021/12/ufw-firewall/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Ufw: Firewall</h1><div class=post-meta><span title='2021-12-28 17:14:55 -0500 -0500'>December 28, 2021</span>&nbsp;·&nbsp;472 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><blockquote><p>Ufw stands for Uncomplicated Firewall, and is a program for managing a netfilter firewall. It provides a command line interface and aims to be uncomplicated and easy to use.</p></blockquote><p>The firewall makes justice to its name as it is really uncomplicated, and a pleasure to set up.</p><h2 id=install>Install<a hidden class=anchor aria-hidden=true href=#install>#</a></h2><p>Install and set up <code>ufw</code><sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup>, which should be packaged for most linux
distributions:</p><h3 id=openrc-based-alpine-linux-gentoo>OpenRC-based (Alpine Linux, Gentoo)<a hidden class=anchor aria-hidden=true href=#openrc-based-alpine-linux-gentoo>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Install ufw and ufw-extras</span>
</span></span><span style=display:flex><span>$ doas apk install ufw<span style=color:#f92672>{</span>,-extras<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable ufw daemon</span>
</span></span><span style=display:flex><span>$ doas rc-update add ufw
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Start ufw daemon</span>
</span></span><span style=display:flex><span>$ doas rc-service ufw start
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable firewall</span>
</span></span><span style=display:flex><span>$ doas ufw enable
</span></span></code></pre></div><h3 id=systemd-based-arch-linux-debian>Systemd-based (Arch Linux, Debian)<a hidden class=anchor aria-hidden=true href=#systemd-based-arch-linux-debian>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Install ufw and ufw-extras</span>
</span></span><span style=display:flex><span>$ sudo pacman -Syu ufw<span style=color:#f92672>{</span>,-extras<span style=color:#f92672>}</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable and start ufw daemon</span>
</span></span><span style=display:flex><span>$ sudo systemctl enable --now ufw
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Enable firewall</span>
</span></span><span style=display:flex><span>$ sudo ufw enable
</span></span></code></pre></div><h2 id=add-rules>Add rules<a hidden class=anchor aria-hidden=true href=#add-rules>#</a></h2><p>Firewall rules can be added with <code>ufw allow [port]</code> or <code>ufw allow [name]</code>.
Named profiles (for example: ssh, http) live in <code>/etc/ufw/applications.d/</code>, or you can query all of them with <code>ufw app list</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% ufw app list
</span></span><span style=display:flex><span>Available applications:
</span></span><span style=display:flex><span>  AIM
</span></span><span style=display:flex><span>  Bonjour
</span></span><span style=display:flex><span>  CIFS
</span></span><span style=display:flex><span>  DNS
</span></span><span style=display:flex><span>  Deluge
</span></span><span style=display:flex><span>  IMAP
</span></span><span style=display:flex><span>  IMAPS
</span></span><span style=display:flex><span>  IPP
</span></span><span style=display:flex><span>  KTorrent
</span></span><span style=display:flex><span>  Kerberos Admin
</span></span><span style=display:flex><span>  Kerberos Full
</span></span><span style=display:flex><span>  Kerberos KDC
</span></span><span style=display:flex><span>  Kerberos Password
</span></span><span style=display:flex><span>  LDAP
</span></span><span style=display:flex><span>  LDAPS
</span></span><span style=display:flex><span>  LPD
</span></span><span style=display:flex><span>  MSN
</span></span><span style=display:flex><span>  MSN SSL
</span></span><span style=display:flex><span>  Mail submission
</span></span><span style=display:flex><span>  NFS
</span></span><span style=display:flex><span>  POP3
</span></span><span style=display:flex><span>  POP3S
</span></span><span style=display:flex><span>  PeopleNearby
</span></span><span style=display:flex><span>  SMTP
</span></span><span style=display:flex><span>  SSH
</span></span><span style=display:flex><span>  Socks
</span></span><span style=display:flex><span>  Telnet
</span></span><span style=display:flex><span>  Transmission
</span></span><span style=display:flex><span>  Transparent Proxy
</span></span><span style=display:flex><span>  VNC
</span></span><span style=display:flex><span>  WWW
</span></span><span style=display:flex><span>  WWW Cache
</span></span><span style=display:flex><span>  WWW Full
</span></span><span style=display:flex><span>  WWW Secure
</span></span><span style=display:flex><span>  XMPP
</span></span><span style=display:flex><span>  Yahoo
</span></span><span style=display:flex><span>  qBittorrent
</span></span><span style=display:flex><span>  svnserve
</span></span></code></pre></div><p>Ufw also supports <code>ufw limit [port | name]</code> which is like <code>add</code> but with the
added ability to &ldquo;deny connections from IP addresses that attempt to initiate
6 or more connections in the last 30 seconds&rdquo;. It&rsquo;s a good measure to mitigate brute-force and/or DDOS attacks.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># either use named profiles</span>
</span></span><span style=display:flex><span>% ufw allow http-alt
</span></span><span style=display:flex><span>% ufw limit ssh
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># or port numbers</span>
</span></span><span style=display:flex><span>% ufw allow 8080/tcp
</span></span><span style=display:flex><span>% ufw limit <span style=color:#ae81ff>22</span>
</span></span></code></pre></div><h2 id=remove-rules>Remove rules<a hidden class=anchor aria-hidden=true href=#remove-rules>#</a></h2><p>Firewall rules can be removed by merely adding &lsquo;delete&rsquo; between ufw and the verb.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% ufw delete allow 8080/tcp
</span></span><span style=display:flex><span>% ufw delete limit ssh
</span></span></code></pre></div><h2 id=check-status>Check status<a hidden class=anchor aria-hidden=true href=#check-status>#</a></h2><p>One status command to rule them all, &ldquo;verbose&rdquo; is optional:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% ufw status verbose
</span></span><span style=display:flex><span>Status: active
</span></span><span style=display:flex><span>Logging: on <span style=color:#f92672>(</span>low<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>Default: deny <span style=color:#f92672>(</span>incoming<span style=color:#f92672>)</span>, allow <span style=color:#f92672>(</span>outgoing<span style=color:#f92672>)</span>, disabled <span style=color:#f92672>(</span>routed<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span>New profiles: skip
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>To                         Action      From
</span></span><span style=display:flex><span>--                         ------      ----
</span></span><span style=display:flex><span>22/tcp                     LIMIT IN    Anywhere
</span></span><span style=display:flex><span><span style=color:#ae81ff>8080</span>                       ALLOW IN    Anywhere
</span></span><span style=display:flex><span>22/tcp <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>                LIMIT IN    Anywhere <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>
</span></span><span style=display:flex><span><span style=color:#ae81ff>8080</span> <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>                  ALLOW IN    Anywhere <span style=color:#f92672>(</span>v6<span style=color:#f92672>)</span>
</span></span></code></pre></div><p>Ufw uses iptables under the hood. Inspect the underlying iptables rules:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>% iptables -S | egrep <span style=color:#e6db74>&#39;\b(22|8080)\b&#39;</span>
</span></span><span style=display:flex><span>-A ufw-user-input -p tcp -m tcp --dport <span style=color:#ae81ff>22</span> -m conntrack --ctstate NEW -m recent --set --name DEFAULT --mask 255.255.255.255 --rsource
</span></span><span style=display:flex><span>-A ufw-user-input -p tcp -m tcp --dport <span style=color:#ae81ff>22</span> -m conntrack --ctstate NEW -m recent --update --seconds <span style=color:#ae81ff>30</span> --hitcount <span style=color:#ae81ff>6</span> --name DEFAULT --mask 255.255.255.255 --rsource -j ufw-user-limit
</span></span><span style=display:flex><span>-A ufw-user-input -p tcp -m tcp --dport <span style=color:#ae81ff>22</span> -j ufw-user-limit-accept
</span></span><span style=display:flex><span>-A ufw-user-input -p tcp -m tcp --dport <span style=color:#ae81ff>8080</span> -j ACCEPT
</span></span></code></pre></div><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://help.ubuntu.com/community/UFW>https://help.ubuntu.com/community/UFW</a></li><li><a href=https://wiki.archlinux.org/title/Uncomplicated_Firewall>https://wiki.archlinux.org/title/Uncomplicated_Firewall</a></li></ul><div class=footnotes role=doc-endnotes><hr><ol><li id=fn:1><p><a href=https://github.com/xyproto/ufw-extras><code>ufw-extras</code></a> is optional, it contains additional rules (e.g. mosh, tailscale).&#160;<a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/linux/>Linux</a></li><li><a href=https://www.perrotta.dev/tags/selfhosted/>Selfhosted</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: not%20just%20serendipity comment for 'Ufw%3a%20Firewall'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> · <a href=/index.xml>RSS</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>