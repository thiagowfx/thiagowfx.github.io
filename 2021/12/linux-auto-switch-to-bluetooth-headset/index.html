<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Linux: Auto Switch to Bluetooth Headset | not just serendipity</title>
<meta name=keywords content="linux"><meta name=description content="Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them."><meta name=author content="Thiago Perrotta"><link rel=canonical href=https://www.perrotta.dev/2021/12/linux-auto-switch-to-bluetooth-headset/><link crossorigin=anonymous href=/assets/css/stylesheet.fc220c15db4aef0318bbf30adc45d33d4d7c88deff3238b23eb255afdc472ca6.css integrity="sha256-/CIMFdtK7wMYu/MK3EXTPU18iN7/MjiyPrJVr9xHLKY=" rel="preload stylesheet" as=style><link rel=icon href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://www.perrotta.dev/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://www.perrotta.dev/favicon.ico><link rel=apple-touch-icon href=https://www.perrotta.dev/apple-touch-icon.png><link rel=mask-icon href=https://www.perrotta.dev/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://www.perrotta.dev/2021/12/linux-auto-switch-to-bluetooth-headset/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><style>body{font-family:Crimson Pro,Vollkorn,Alegreya,Iowan Old Style,Apple Garamond,Baskerville,Times New Roman,Noto Serif,Droid Serif,Times,Source Serif Pro,serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji}h1,h2,h3,h4,h5,h6,footer,nav,.toc,.post-meta{font-family:Inter,Fira Sans,Lato,system-ui,-apple-system,BlinkMacSystemFont,Avenir Next,Avenir,Segoe UI,Helvetica Neue,Helvetica,Ubuntu,Roboto,Noto,Cantarell,Arial,sans-serif}code,pre{font-family:Fira Code,PT Mono,IBM Plex Mono,Menlo,Consolas,Monaco,Liberation Mono,Ubuntu Mono,Lucida Console,monospace}</style><meta property="og:title" content="Linux: Auto Switch to Bluetooth Headset"><meta property="og:description" content="Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them."><meta property="og:type" content="article"><meta property="og:url" content="https://www.perrotta.dev/2021/12/linux-auto-switch-to-bluetooth-headset/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-12-26T15:27:12-05:00"><meta property="article:modified_time" content="2021-12-26T15:27:12-05:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Linux: Auto Switch to Bluetooth Headset"><meta name=twitter:description content="Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://www.perrotta.dev/posts/"},{"@type":"ListItem","position":2,"name":"Linux: Auto Switch to Bluetooth Headset","item":"https://www.perrotta.dev/2021/12/linux-auto-switch-to-bluetooth-headset/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Linux: Auto Switch to Bluetooth Headset","name":"Linux: Auto Switch to Bluetooth Headset","description":"Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them.\n","keywords":["linux"],"articleBody":"Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them.\nEvery commercial OS I’m aware of does that automatically, including Chrome OS, macOS and Windows.\nTo automate this behavior on Linux, it depends whether we’re using PulseAudio or Pipewire. It boils down to loading the module-switch-on-connect pulseaudio module.\nNote: Tested on Arch Linux only.\nPulseAudio $ sudoedit /etc/pulse/default.pa ... load-module module-switch-on-connect ... Then restart pulseaudio:\n$ systemctl --user restart pulseaudio PipeWire $ sudo mkdir -p /etc/pipewire $ sudo cp /usr/share/pipewire/pipewire-pulse.conf /etc/pipewire/pipewire-pulse.conf $ sudoedit /etc/pipewire/pipewire-pulse.conf ... # Extra modules can be loaded here. Setup in default.pa can be moved here context.exec = [ { path = \"pactl\" args = \"load-module module-switch-on-connect\" } ] ... Alternatively, ~/.config/pipewire/pipewire-pulse.conf should also work. We should not edit the file in /usr because it will not survive package upgrades.\nThen restart pipewire:\n$ systemctl --user restart pipewire{,-pulse} References https://wiki.archlinux.org/title/PulseAudio#Switch_on_connect https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio#configuration-file-pipewire-pulseconf ","wordCount":"151","inLanguage":"en","datePublished":"2021-12-26T15:27:12-05:00","dateModified":"2021-12-26T15:27:12-05:00","author":{"@type":"Person","name":"Thiago Perrotta"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.perrotta.dev/2021/12/linux-auto-switch-to-bluetooth-headset/"},"publisher":{"@type":"Person","name":"not just serendipity","logo":{"@type":"ImageObject","url":"https://www.perrotta.dev/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://www.perrotta.dev/ accesskey=h title="not just serendipity (Alt + H)"><img src=https://www.perrotta.dev/apple-touch-icon.png alt aria-label=logo height=32>not just serendipity</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://www.perrotta.dev/posts/ title=posts><span>posts</span></a></li><li><a href=https://www.perrotta.dev/tags/bestof/ title="★ bestof"><span>★ bestof</span></a></li><li><a href=https://www.perrotta.dev/tags/serenity/ title=serenity><span>serenity</span></a></li><li><a href=https://www.perrotta.dev/archives/ title=archives><span>archives</span></a></li><li><a href=https://www.perrotta.dev/search/ title="search (Alt + /)" accesskey=/><span>search</span></a></li><li><a href=https://www.perrotta.dev/tags/ title=tags><span>tags</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Linux: Auto Switch to Bluetooth Headset</h1><div class=post-meta><span title='2021-12-26 15:27:12 -0500 -0500'>December 26, 2021</span>&nbsp;·&nbsp;151 words&nbsp;·&nbsp;Thiago Perrotta</div></header><div class=post-content><p>Whenever I connect/disconnect my bluetooth headphones to my Linux workstation, I need to manually switch to/off them.</p><p>Every commercial OS I&rsquo;m aware of does that automatically, including Chrome OS, macOS and Windows.</p><p>To automate this behavior on Linux, it depends whether we&rsquo;re using PulseAudio or Pipewire. It boils down to loading the <code>module-switch-on-connect</code> pulseaudio module.</p><p><strong>Note</strong>: Tested on Arch Linux only.</p><h2 id=pulseaudio>PulseAudio<a hidden class=anchor aria-hidden=true href=#pulseaudio>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudoedit /etc/pulse/default.pa
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span>load-module module-switch-on-connect
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Then restart pulseaudio:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ systemctl --user restart pulseaudio
</span></span></code></pre></div><h2 id=pipewire>PipeWire<a hidden class=anchor aria-hidden=true href=#pipewire>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ sudo mkdir -p /etc/pipewire
</span></span><span style=display:flex><span>$ sudo cp /usr/share/pipewire/pipewire-pulse.conf /etc/pipewire/pipewire-pulse.conf
</span></span><span style=display:flex><span>$ sudoedit /etc/pipewire/pipewire-pulse.conf
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span><span style=color:#75715e># Extra modules can be loaded here. Setup in default.pa can be moved here</span>
</span></span><span style=display:flex><span>context.exec <span style=color:#f92672>=</span> <span style=color:#f92672>[</span>
</span></span><span style=display:flex><span>    <span style=color:#f92672>{</span> path <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;pactl&#34;</span>        args <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;load-module module-switch-on-connect&#34;</span> <span style=color:#f92672>}</span>
</span></span><span style=display:flex><span><span style=color:#f92672>]</span>
</span></span><span style=display:flex><span>...
</span></span></code></pre></div><p>Alternatively, <code>~/.config/pipewire/pipewire-pulse.conf</code> should also work. We
should not edit the file in <code>/usr</code> because it will not survive package
upgrades.</p><p>Then restart pipewire:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ systemctl --user restart pipewire<span style=color:#f92672>{</span>,-pulse<span style=color:#f92672>}</span>
</span></span></code></pre></div><h2 id=references>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=https://wiki.archlinux.org/title/PulseAudio#Switch_on_connect>https://wiki.archlinux.org/title/PulseAudio#Switch_on_connect</a></li><li><a href=https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio#configuration-file-pipewire-pulseconf>https://gitlab.freedesktop.org/pipewire/pipewire/-/wikis/Config-PulseAudio#configuration-file-pipewire-pulseconf</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://www.perrotta.dev/tags/linux/>Linux</a></li></ul></footer><div style=text-align:center><a href="mailto:tbperrotta@gmail.com?subject=RE: not%20just%20serendipity comment for 'Linux%3a%20Auto%20Switch%20to%20Bluetooth%20Headset'" target=_blank><button>Reply via email</button></a></div></article></main><footer class=footer><span>Copyright © 2021 - 2024 Thiago Perrotta · <a href=https://creativecommons.org/licenses/by-nc-sa/4.0/>CC BY-NC-SA 4.0</a> • <a href=/index.xml>RSS</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>